{"version":3,"sources":["webpack:///./node_modules/@material-ui/icons/ExpandMore.js","webpack:///./node_modules/@material-ui/icons/FiberManualRecord.js","webpack:///./node_modules/@material-ui/core/esm/AccordionActions/AccordionActions.js","webpack:///./src/components/ApiKeyAccordion.tsx","webpack:///./node_modules/@material-ui/core/esm/Accordion/Accordion.js","webpack:///./node_modules/@material-ui/core/esm/Accordion/AccordionContext.js","webpack:///./node_modules/@material-ui/lab/esm/AlertTitle/AlertTitle.js","webpack:///./node_modules/@material-ui/core/esm/AccordionDetails/AccordionDetails.js","webpack:///./src/pages/tools/edge-impulse.tsx","webpack:///./node_modules/@material-ui/core/esm/AccordionSummary/AccordionSummary.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack:///./node_modules/@material-ui/icons/CheckCircleOutline.js","webpack:///./node_modules/@material-ui/icons/GetApp.js","webpack:///./src/components/ReadingFieldGrid.tsx"],"names":["ApiKeyAccordion","props","apiName","validateKey","instructions","title","useDbValue","apiKey","value","setApiKey","setValue","apiKeyId","useId","useState","key","setKey","expanded","setExpanded","validated","setValidated","useSnackbar","enqueueSnackbar","useEffectAsync","mounted","statusCode","undefined","handleApiChange","event","target","handleSave","handleReset","handleExpanded","display","EDGE_IMPULSE_API_KEY","IDLE","STARTING","SAMPLING","UPLOADING","SAMPLING_STATE","EdgeImpulseClient","aggregator","inputRegisters","palette","connectionState","DISCONNECT","samplingState","handleMessage","bind","handleOpen","handleError","handleReport","handlePing","aggregatorClient","SensorAggregatorClient","subscribeSample","mount","disconnect","unmount","clearSampling","_pingInterval","clearInterval","_ws","w","close","e","console","debug","setConnectionState","state","emit","CONNECTION_STATE","log","setSamplingState","CHANGE","send","msg","JSON","stringify","service","device","resolveFirmwareIdentifier","firmwareIdentifier","deviceSpec","deviceSpecificationFromFirmwareIdentifier","_hello","version","deviceId","deviceType","name","toString","connection","sensors","map","reg","serviceName","serviceClass","join","maxSampleLengthS","frequencies","hello","reconnect","connect","data","pong","parse","ERROR","err","CONNECT","sample","startSampling","row","connected","sampling","some","r","bus","timestamp","_sample","startTimestamp","lastProgressTimestamp","sampleStarted","ds","dataSet","addRow","REPORT_RECEIVE","PROGRESS","progress","length","stopSampling","uploadData","payload","protected","ver","alg","iat","Date","now","signature","device_name","device_type","interval_ms","interval","headers","h","i","units","values","fetch","path","method","label","body","then","resp","text","filename","generatedFilename","finally","sampleFinished","ev","FieldDataSet","create","unsubscribers","aggregatorConfig","samplingInterval","samplesInWindow","inputs","serviceIndex","setInputs","collect","forEach","unsub","CONNECTING","WebSocket","onmessage","onopen","onerror","setInterval","currentProjectInfo","valid","apiFetch","rsj","success","errorStatus","projectId","projects","id","project","API_ROOT","url","options","Accept","status","error","statusText","json","message","deviceInfo","renameDevice","JDClient","ApiKeyManager","useEdgeImpulseProjectInfo","info","setInfo","ProjectInfo","disabled","dataSummary","dataCount","logo","ModelDownloadButton","setModel","theme","useTheme","downloading","setDownloading","setError","download","downloads","find","type","handleDownload","blob","res","readBlobToUint8Array","bytes","spacing","link","AggregatorCard","selected","onChecked","handleChecked","Acquisition","client","setClient","samplingProgress","setSamplingProgress","setDeviceInfo","deviceName","useDeviceName","useChartPalette","generatedSampleName","useEffect","c","ip","subscribe","v","p","rename","EdgeImpulse","useContext","JacdacContext","model","registerIdsChecked","setRegisterIdsChecked","aggregatorId","setAggregatorId","gridBreakPoints","useGridBreakpoints","aggregators","useChange","services","SRV_SENSOR_AGGREGATOR","currentAggregator","srv","readingRegisters","devices","isSensor","specification","readingRegister","filter","indexOf","handleAggregatorChecked","handleRegisterCheck","splice","push","sort","SRV_MODEL_RUNNER","useStyles","makeStyles","createStyles","vmiddle","verticalAlign","ReadingFieldGridItem","register","recording","registerChecked","liveDataSet","gridBreakpoints","classes","handleCheck","fields","field","color","colorOf","ReadingFieldGrid"],"mappings":"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","file":"component---src-pages-tools-edge-impulse-tsx-ba416d5570b4f6fb9311.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"8\"\n}), 'FiberManualRecord');\n\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8,\n    justifyContent: 'flex-end'\n  },\n\n  /* Styles applied to the root element if `disableSpacing={false}`. */\n  spacing: {\n    '& > :not(:first-child)': {\n      marginLeft: 8\n    }\n  }\n};\nvar AccordionActions = /*#__PURE__*/React.forwardRef(function AccordionActions(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$disableSpacing = props.disableSpacing,\n      disableSpacing = _props$disableSpacing === void 0 ? false : _props$disableSpacing,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"disableSpacing\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, !disableSpacing && classes.spacing),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAccordionActions'\n})(AccordionActions);","import React, { useState } from \"react\"\nimport useDbValue from \"./useDbValue\"\nimport useEffectAsync from \"./useEffectAsync\"\nimport Alert from \"./ui/Alert\"\nimport {\n    AccordionActions,\n    AccordionSummary,\n    AccordionDetails,\n    Accordion,\n    Typography,\n    TextField,\n    Box,\n} from \"@material-ui/core\"\nimport { Button } from \"gatsby-theme-material-ui\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\"\nimport { useSnackbar } from \"notistack\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function ApiKeyAccordion(props: {\n    apiName: string\n    title?: string\n    validateKey?: (key: string) => Promise<{ statusCode: number }>\n    instructions: JSX.Element | JSX.Element[]\n}) {\n    const { apiName, validateKey, instructions, title } = props\n    const { value: apiKey, setValue: setApiKey } = useDbValue(apiName, \"\")\n    const apiKeyId = useId()\n    const [key, setKey] = useState(\"\")\n    const [expanded, setExpanded] = useState(!apiKey)\n    const [validated, setValidated] = useState(false)\n    const { enqueueSnackbar } = useSnackbar()\n\n    useEffectAsync(\n        async mounted => {\n            if (!apiKey) {\n                setValidated(false)\n            } else {\n                const { statusCode } = validateKey\n                    ? await validateKey(apiKey)\n                    : { statusCode: 200 }\n                if (!mounted()) return\n                if (statusCode === 200) {\n                    setValidated(true)\n                    setExpanded(false)\n                } else {\n                    setValidated(false)\n                    if (statusCode === 403) setApiKey(undefined)\n                }\n            }\n        },\n        [apiKey]\n    )\n\n    const handleApiChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setKey(event.target.value)\n    }\n    const handleSave = () => {\n        setApiKey(key)\n        setKey(\"\")\n        enqueueSnackbar(\"key saved...\")\n    }\n    const handleReset = () => {\n        setApiKey(\"\")\n        enqueueSnackbar(\"key cleared...\")\n    }\n\n    const handleExpanded = () => {\n        setExpanded(!expanded)\n    }\n\n    return (\n        <Accordion expanded={expanded} onChange={handleExpanded}>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"body1\">{`${\n                    title || \"API key\"\n                } Configuration`}</Typography>\n                {validated && (\n                    <Box ml={1} color=\"success.main\">\n                        <CheckCircleOutlineIcon />\n                    </Box>\n                )}\n            </AccordionSummary>\n            <AccordionDetails style={{ display: \"block\" }}>\n                {validated && (\n                    <Alert severity={\"success\"}>API key ready!</Alert>\n                )}\n                {instructions}\n                <TextField\n                    id={apiKeyId}\n                    autoFocus\n                    label=\"API key\"\n                    fullWidth\n                    value={key}\n                    onChange={handleApiChange}\n                />\n            </AccordionDetails>\n            <AccordionActions>\n                <Button\n                    aria-label=\"save api key\"\n                    disabled={!key}\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={handleSave}\n                >\n                    Save\n                </Button>\n                <Button\n                    aria-label=\"clear api key\"\n                    disabled={!apiKey}\n                    variant=\"contained\"\n                    onClick={handleReset}\n                >\n                    Clear\n                </Button>\n            </AccordionActions>\n        </Accordion>\n    )\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toArray from \"@babel/runtime/helpers/esm/toArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport { isFragment } from 'react-is';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport Collapse from '../Collapse';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nimport AccordionContext from './AccordionContext';\nimport useControlled from '../utils/useControlled';\nexport var styles = function styles(theme) {\n  var transition = {\n    duration: theme.transitions.duration.shortest\n  };\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      position: 'relative',\n      transition: theme.transitions.create(['margin'], transition),\n      '&:before': {\n        position: 'absolute',\n        left: 0,\n        top: -1,\n        right: 0,\n        height: 1,\n        content: '\"\"',\n        opacity: 1,\n        backgroundColor: theme.palette.divider,\n        transition: theme.transitions.create(['opacity', 'background-color'], transition)\n      },\n      '&:first-child': {\n        '&:before': {\n          display: 'none'\n        }\n      },\n      '&$expanded': {\n        margin: '16px 0',\n        '&:first-child': {\n          marginTop: 0\n        },\n        '&:last-child': {\n          marginBottom: 0\n        },\n        '&:before': {\n          opacity: 0\n        }\n      },\n      '&$expanded + &': {\n        '&:before': {\n          display: 'none'\n        }\n      },\n      '&$disabled': {\n        backgroundColor: theme.palette.action.disabledBackground\n      }\n    },\n\n    /* Styles applied to the root element if `square={false}`. */\n    rounded: {\n      borderRadius: 0,\n      '&:first-child': {\n        borderTopLeftRadius: theme.shape.borderRadius,\n        borderTopRightRadius: theme.shape.borderRadius\n      },\n      '&:last-child': {\n        borderBottomLeftRadius: theme.shape.borderRadius,\n        borderBottomRightRadius: theme.shape.borderRadius,\n        // Fix a rendering issue on Edge\n        '@supports (-ms-ime-align: auto)': {\n          borderBottomLeftRadius: 0,\n          borderBottomRightRadius: 0\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `expanded={true}`. */\n    expanded: {},\n\n    /* Styles applied to the root element if `disabled={true}`. */\n    disabled: {}\n  };\n};\nvar Accordion = /*#__PURE__*/React.forwardRef(function Accordion(props, ref) {\n  var childrenProp = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$defaultExpande = props.defaultExpanded,\n      defaultExpanded = _props$defaultExpande === void 0 ? false : _props$defaultExpande,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      expandedProp = props.expanded,\n      onChange = props.onChange,\n      _props$square = props.square,\n      square = _props$square === void 0 ? false : _props$square,\n      _props$TransitionComp = props.TransitionComponent,\n      TransitionComponent = _props$TransitionComp === void 0 ? Collapse : _props$TransitionComp,\n      TransitionProps = props.TransitionProps,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"defaultExpanded\", \"disabled\", \"expanded\", \"onChange\", \"square\", \"TransitionComponent\", \"TransitionProps\"]);\n\n  var _useControlled = useControlled({\n    controlled: expandedProp,\n    default: defaultExpanded,\n    name: 'Accordion',\n    state: 'expanded'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      expanded = _useControlled2[0],\n      setExpandedState = _useControlled2[1];\n\n  var handleChange = React.useCallback(function (event) {\n    setExpandedState(!expanded);\n\n    if (onChange) {\n      onChange(event, !expanded);\n    }\n  }, [expanded, onChange, setExpandedState]);\n\n  var _React$Children$toArr = React.Children.toArray(childrenProp),\n      _React$Children$toArr2 = _toArray(_React$Children$toArr),\n      summary = _React$Children$toArr2[0],\n      children = _React$Children$toArr2.slice(1);\n\n  var contextValue = React.useMemo(function () {\n    return {\n      expanded: expanded,\n      disabled: disabled,\n      toggle: handleChange\n    };\n  }, [expanded, disabled, handleChange]);\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    className: clsx(classes.root, className, expanded && classes.expanded, disabled && classes.disabled, !square && classes.rounded),\n    ref: ref,\n    square: square\n  }, other), /*#__PURE__*/React.createElement(AccordionContext.Provider, {\n    value: contextValue\n  }, summary), /*#__PURE__*/React.createElement(TransitionComponent, _extends({\n    in: expanded,\n    timeout: \"auto\"\n  }, TransitionProps), /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-labelledby\": summary.props.id,\n    id: summary.props['aria-controls'],\n    role: \"region\"\n  }, children)));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAccordion'\n})(Accordion);","import * as React from 'react';\n/**\n * @ignore - internal component.\n * @type {React.Context<{} | {expanded: boolean, disabled: boolean, toggle: () => void}>}\n */\n\nvar AccordionContext = React.createContext({});\n\nif (process.env.NODE_ENV !== 'production') {\n  AccordionContext.displayName = 'AccordionContext';\n}\n\nexport default AccordionContext;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport clsx from 'clsx';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      fontWeight: theme.typography.fontWeightMedium,\n      marginTop: -2\n    }\n  };\n};\nvar AlertTitle = /*#__PURE__*/React.forwardRef(function AlertTitle(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(Typography, _extends({\n    gutterBottom: true,\n    component: \"div\",\n    ref: ref,\n    className: clsx(classes.root, className)\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAlertTitle'\n})(AlertTitle);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'flex',\n      padding: theme.spacing(1, 2, 2)\n    }\n  };\n};\nvar AccordionDetails = /*#__PURE__*/React.forwardRef(function AccordionDetails(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAccordionDetails'\n})(AccordionDetails);","import React, { useContext, useEffect, useState } from \"react\"\nimport {\n    Box,\n    Button,\n    Card,\n    CardActions,\n    CardContent,\n    CardHeader,\n    CardMedia,\n    CircularProgress,\n    Grid,\n    Switch,\n    Typography,\n    useTheme,\n} from \"@material-ui/core\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport useDbValue from \"../../components/useDbValue\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\nimport useGridBreakpoints from \"../../components/useGridBreakpoints\"\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\"\nimport { JDClient } from \"../../../jacdac-ts/src/jdom/client\"\nimport DeviceCardHeader from \"../../components/DeviceCardHeader\"\nimport Alert from \"../../components/ui/Alert\"\nimport useEffectAsync from \"../../components/useEffectAsync\"\nimport {\n    CHANGE,\n    CONNECT,\n    CONNECTING,\n    CONNECTION_STATE,\n    DISCONNECT,\n    ERROR,\n    PROGRESS,\n    REPORT_RECEIVE,\n    SRV_MODEL_RUNNER,\n    SRV_SENSOR_AGGREGATOR,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport FieldDataSet from \"../../components/FieldDataSet\"\nimport {\n    deviceSpecificationFromFirmwareIdentifier,\n    isSensor,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport CircularProgressWithLabel from \"../../components/ui/CircularProgressWithLabel\"\nimport Trend from \"../../components/Trend\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport GetAppIcon from \"@material-ui/icons/GetApp\"\nimport ServiceList from \"../../components/ServiceList\"\nimport { ModelActions, ModelContent } from \"./model-uploader\"\nimport { readBlobToUint8Array } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useDeviceName from \"../../components/devices/useDeviceName\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport ReadingFieldGrid from \"../../components/ReadingFieldGrid\"\nimport useChartPalette from \"../../components/useChartPalette\"\nimport {\n    SensorAggregatorClient,\n    SensorAggregatorConfig,\n} from \"../../../jacdac-ts/src/jdom/sensoraggregatorclient\"\nimport { AlertTitle } from \"@material-ui/lab\"\nimport { serviceName } from \"../../../jacdac-ts/src/jdom/pretty\"\nimport ConnectAlert from \"../../components/alert/ConnectAlert\"\nimport ApiKeyAccordion from \"../../components/ApiKeyAccordion\"\n\nconst EDGE_IMPULSE_API_KEY = \"edgeimpulseapikey\"\n\nconst IDLE = \"idle\"\nconst STARTING = \"starting\"\nconst SAMPLING = \"sampling\"\nconst UPLOADING = \"uploading\"\n\nconst SAMPLING_STATE = \"samplingState\"\n\ninterface EdgeImpulseResponse {\n    success: boolean\n    error?: string\n    // HTTP status code\n    errorStatus?: number\n}\n\ninterface EdgeImpulseHello {\n    hello?: boolean\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    err?: any\n}\n\ninterface EdgeImpulseSensorInfo {\n    name: string\n    maxSampleLengthS: number\n    frequencies: number[]\n}\n\ninterface EdgeImpulseRemoteManagementInfo {\n    version: number\n    apiKey: string\n    deviceId: string\n    deviceType: string\n    connection: string\n    sensors: EdgeImpulseSensorInfo[]\n}\n\ninterface EdgeImpulseDeviceInfo {\n    id: number\n    deviceId: string\n    name: string\n    created: string\n    lastSeen: string\n    deviceType: string\n    sensors: EdgeImpulseSensorInfo[]\n}\n\ninterface EdgeImpulseDeviceResponse extends EdgeImpulseResponse {\n    device?: EdgeImpulseDeviceInfo\n}\n\ninterface EdgeImpulseSample extends EdgeImpulseResponse {\n    label: string\n    length: number\n    path: string\n    hmacKey: string\n    interval: number\n    sensor: string\n}\n\ninterface EdgeImpulseSampling extends EdgeImpulseSample {\n    dataSet?: FieldDataSet\n    startTimestamp?: number\n    lastProgressTimestamp?: number\n    generatedFilename?: string\n    aggregatorConfig?: SensorAggregatorConfig\n    unsubscribers?: (() => void)[]\n}\n\ninterface EdgeImpulseProjectInfo {\n    id: number\n    name: string\n    logo?: string\n}\n\ninterface EdgeImpulseProject extends EdgeImpulseResponse {\n    project: EdgeImpulseProjectInfo\n    devices: EdgeImpulseDeviceInfo[]\n    impulse: {\n        created: boolean\n        configured: boolean\n        complete: boolean\n    }\n    dataSummary: {\n        totalLengthMs: number\n        labels: string[]\n        dataCount: number\n    }\n    downloads: {\n        name: string\n        type: string\n        size: string\n        link: string\n    }[]\n}\n\ninterface EdgeImpulseProjects extends EdgeImpulseResponse {\n    projects: EdgeImpulseProjectInfo[]\n}\n\n/*\nA client for the EdgeImpulse remote management\nhttps://docs.edgeimpulse.com/reference#remote-management\n*/\nclass EdgeImpulseClient extends JDClient {\n    private _ws: WebSocket\n    public connectionState = DISCONNECT\n    public samplingState = IDLE\n    private _hello: EdgeImpulseRemoteManagementInfo\n    private _sample: EdgeImpulseSampling\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private _pingInterval: any\n    private pong: boolean\n    private aggregatorClient: SensorAggregatorClient\n\n    constructor(\n        private readonly apiKey: string,\n        private readonly aggregator: JDService,\n        private readonly inputRegisters: JDRegister[],\n        private readonly palette: string[]\n    ) {\n        super()\n\n        this.handleMessage = this.handleMessage.bind(this)\n        this.handleOpen = this.handleOpen.bind(this)\n        this.handleError = this.handleError.bind(this)\n        this.handleReport = this.handleReport.bind(this)\n        this.handlePing = this.handlePing.bind(this)\n\n        this.aggregatorClient = new SensorAggregatorClient(this.aggregator)\n        this.aggregatorClient.subscribeSample(this.handleReport)\n\n        this.mount(() => this.disconnect())\n        this.mount(() => this.aggregatorClient.unmount())\n    }\n\n    get dataSet() {\n        return this._sample?.dataSet\n    }\n\n    disconnect() {\n        this.clearSampling()\n        if (this._pingInterval) {\n            clearInterval(this._pingInterval)\n            this._pingInterval = undefined\n        }\n        // stop socket\n        if (this._ws) {\n            const w = this._ws\n            this._ws = undefined\n            try {\n                w.close()\n            } catch (e) {\n                console.debug(e)\n            } finally {\n                this.setConnectionState(DISCONNECT)\n            }\n        }\n    }\n\n    private setConnectionState(state: string) {\n        if (this.connectionState !== state) {\n            this.connectionState = state\n            this.emit(CONNECTION_STATE, this.connectionState)\n            console.log(`ei: connection state changed`, this.connectionState)\n        }\n    }\n\n    private setSamplingState(state: string) {\n        if (this.samplingState !== state) {\n            this.samplingState = state\n            this.emit(SAMPLING_STATE, this.samplingState)\n            this.emit(CHANGE)\n            console.log(`ei: sampling state changed`, this.samplingState)\n        }\n    }\n\n    private send(msg: unknown) {\n        this._ws?.send(JSON.stringify(msg))\n    }\n\n    private async handleOpen() {\n        console.log(`ws: open`)\n        const service = this.aggregator\n        const { device } = service\n\n        // fetch device spec\n        const firmwareIdentifier = await service.device.resolveFirmwareIdentifier()\n        const deviceSpec = deviceSpecificationFromFirmwareIdentifier(\n            firmwareIdentifier\n        )\n\n        this._hello = {\n            version: 2,\n            apiKey: this.apiKey,\n            deviceId: device.deviceId,\n            deviceType:\n                deviceSpec?.name ||\n                firmwareIdentifier?.toString(16) ||\n                \"Jacdac device\",\n            connection: \"ip\", // direct connection\n            sensors: [\n                {\n                    name: this.inputRegisters\n                        .map(reg => serviceName(reg.service.serviceClass))\n                        .join(\",\"),\n                    maxSampleLengthS: 10000,\n                    frequencies: [50, 30, 20, 10],\n                },\n            ],\n        }\n        this.send({\n            hello: this._hello,\n        })\n    }\n\n    private reconnect() {\n        this.disconnect()\n        this.connect()\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private handleMessage(msg: any) {\n        // response to ping?\n        if (msg.data === \"pong\") {\n            this.pong = true\n            return\n        }\n\n        const data = JSON.parse(msg.data)\n        if (data.hello !== undefined) {\n            const hello = data as EdgeImpulseHello\n            if (!hello.hello) {\n                this.emit(ERROR, hello.err)\n                this.disconnect()\n            } else {\n                this.setConnectionState(CONNECT)\n            }\n        } else if (data.sample) {\n            const sample = data.sample as EdgeImpulseSample\n            this.startSampling(sample)\n        }\n    }\n\n    get connected() {\n        return this.connectionState === CONNECT\n    }\n\n    get sampling() {\n        return this.samplingState !== IDLE\n    }\n\n    get generatedSampleName() {\n        return this._sample?.generatedFilename\n    }\n\n    get aggregatorConfig() {\n        return this._sample?.aggregatorConfig\n    }\n\n    private handleReport(row: number[]) {\n        console.log(`ei: aggregator report`, this.connected, this.sampling)\n        if (!this.connected) return // ignore\n\n        // partial data? ignore\n        if (row.some(r => r === undefined)) return\n\n        const { bus } = this.aggregator.device\n        const { timestamp } = bus\n        // first sample, notify we're started\n        if (this.samplingState == STARTING) {\n            this._sample.startTimestamp = this._sample.lastProgressTimestamp = timestamp\n            this.send({ sampleStarted: true })\n            this.setSamplingState(SAMPLING)\n        }\n        // store sample\n        if (this.samplingState == SAMPLING) {\n            const ds = this.dataSet\n            ds.addRow(row)\n            this.emit(REPORT_RECEIVE)\n\n            // debounced progress update\n            if (timestamp - this._sample.lastProgressTimestamp > 100) {\n                this._sample.lastProgressTimestamp = timestamp\n                this.emit(PROGRESS, this.progress)\n            }\n\n            if (\n                timestamp - this._sample.startTimestamp >=\n                this._sample.length\n            ) {\n                // first stop the sampling\n                this.stopSampling()\n                // we're done!\n                this.emit(PROGRESS, this.progress)\n                // and upload...\n                this.uploadData()\n            }\n        }\n    }\n\n    private uploadData(): Promise<void> {\n        this.setSamplingState(UPLOADING)\n        const ds = this.dataSet\n        const payload = {\n            protected: {\n                ver: \"v1\",\n                alg: \"none\",\n                iat: Date.now(),\n            },\n            signature: \"\",\n            payload: {\n                device_name: this._hello.deviceId,\n                device_type: this._hello.deviceType,\n                interval_ms: this._sample.interval,\n                sensors: ds.headers.map((h, i) => ({\n                    name: ds.headers[i],\n                    units: ds.units[i] || \"/\",\n                })),\n                values: ds.data(true),\n            },\n        }\n        console.log(`payload`, payload)\n        // upload dataset\n        // https://docs.edgeimpulse.com/reference#ingestion-api\n        return fetch(`https://ingestion.edgeimpulse.com${this._sample.path}`, {\n            method: \"POST\",\n            headers: {\n                \"x-api-key\": this.apiKey,\n                \"x-label\": this._sample.label,\n                \"x-file-name\": ds.name,\n                \"x-disallow-duplicates\": \"true\",\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(payload),\n        })\n            .then(async resp => {\n                // response contains the filename\n                const filename = await resp.text()\n                this._sample.generatedFilename = filename\n            })\n            .finally(() => {\n                this.send({\n                    sampleFinished: true,\n                })\n                this.setSamplingState(IDLE)\n            })\n    }\n\n    private handleError(ev: Event) {\n        this.emit(ERROR, ev)\n        this.reconnect()\n    }\n\n    private async startSampling(sample: EdgeImpulseSample) {\n        this._sample = sample\n        this._sample.dataSet = FieldDataSet.create(\n            this.aggregator.device.bus,\n            this.inputRegisters,\n            \"sample\",\n            this.palette\n        )\n        this._sample.unsubscribers = []\n        this.send({ sample: true })\n        this.setSamplingState(STARTING)\n\n        // prepare configuration\n        this._sample.aggregatorConfig = {\n            samplingInterval: this._sample.interval,\n            samplesInWindow: 10,\n            inputs: this.inputRegisters.map(reg => ({\n                serviceClass: reg.service.serviceClass,\n                deviceId: reg.service.device.deviceId,\n                serviceIndex: reg.service.serviceIndex,\n            })),\n        }\n\n        console.log(`ei: input`, this._sample.aggregatorConfig)\n        // setup aggregator client\n        await this.aggregatorClient.setInputs(this._sample.aggregatorConfig)\n        // schedule data collection, ask a few more samples\n        await this.aggregatorClient.collect(this._sample.length * 1.1)\n    }\n\n    private stopSampling() {\n        const sample = this._sample\n        if (sample) {\n            sample.unsubscribers.forEach(unsub => {\n                try {\n                    unsub()\n                } catch (e) {\n                    console.log(e)\n                }\n            })\n            sample.unsubscribers = []\n        }\n    }\n\n    private clearSampling() {\n        this.stopSampling()\n        if (this._sample) {\n            this._sample = undefined\n            this._hello = undefined\n            this.setSamplingState(IDLE)\n        }\n    }\n\n    connect() {\n        if (this._ws) return // already connected\n\n        console.log(`ei: connect`)\n        this.setConnectionState(CONNECTING)\n        this._ws = new WebSocket(\"wss://remote-mgmt.edgeimpulse.com\")\n        this._ws.onmessage = this.handleMessage\n        this._ws.onopen = this.handleOpen\n        this._ws.onerror = this.handleError\n\n        this.pong = true\n        this._pingInterval = setInterval(this.handlePing, 3000)\n    }\n\n    private handlePing() {\n        if (!this.connected) return\n\n        if (!this.pong) {\n            // the socket did not response\n            console.log(`missing pong`)\n            this.reconnect()\n        } else {\n            // send a new ping and wait for pong\n            this.pong = false\n            this._ws.send(\"ping\")\n        }\n    }\n\n    get progress() {\n        const timestamp = this.aggregator.device.bus.timestamp\n        return (\n            this.samplingState !== IDLE &&\n            (timestamp - this._sample.startTimestamp) / this._sample.length\n        )\n    }\n\n    static async currentProjectInfo(\n        apiKey: string\n    ): Promise<{\n        valid: boolean\n        errorStatus?: number\n        project?: EdgeImpulseProject\n    }> {\n        if (!apiKey) return { valid: false }\n\n        const rsj = await EdgeImpulseClient.apiFetch<EdgeImpulseProjects>(\n            apiKey,\n            \"projects\"\n        )\n        if (!rsj.success) {\n            return {\n                valid: false,\n                errorStatus: rsj.errorStatus,\n            }\n        }\n\n        // the API returns the current project when using the API key\n        const projectId = rsj.projects?.[0]?.id\n        if (!rsj?.success || projectId === undefined) {\n            return {\n                valid: true,\n                errorStatus: 402,\n            }\n        }\n\n        const project = await EdgeImpulseClient.apiFetch<EdgeImpulseProject>(\n            apiKey,\n            projectId\n        )\n        return {\n            valid: true,\n            errorStatus: project.errorStatus,\n            project,\n        }\n    }\n\n    static async apiFetch<T extends EdgeImpulseResponse>(\n        apiKey: string,\n        path: string | number,\n        body?: unknown\n    ): Promise<T> {\n        const API_ROOT = \"https://studio.edgeimpulse.com/v1/api/\"\n        const url = `${API_ROOT}${path}`\n        const options: RequestInit = {\n            method: body ? \"POST\" : \"GET\",\n            headers: {\n                \"x-api-key\": apiKey,\n                Accept: \"application/json\",\n            },\n            body: body && JSON.stringify(body),\n        }\n        if (options.method === \"POST\")\n            options.headers[\"Content-Type\"] = \"application/json\"\n\n        const resp = await fetch(url, options)\n        if (resp.status !== 200)\n            return {\n                success: false,\n                errorStatus: resp.status,\n                error: resp.statusText,\n            } as T\n        try {\n            const payload = (await resp.json()) as T\n            return payload\n        } catch (e) {\n            return {\n                success: false,\n                errorStatus: 500,\n                error: e.message,\n            } as T\n        }\n    }\n\n    static async deviceInfo(\n        apiKey: string,\n        projectId: number,\n        deviceId: string\n    ): Promise<EdgeImpulseDeviceResponse> {\n        return await EdgeImpulseClient.apiFetch<EdgeImpulseDeviceResponse>(\n            apiKey,\n            `${projectId}/device/${deviceId}`\n        )\n    }\n\n    static async renameDevice(\n        apiKey: string,\n        projectId: number,\n        deviceId: string,\n        name: string\n    ): Promise<EdgeImpulseResponse> {\n        return await EdgeImpulseClient.apiFetch<EdgeImpulseResponse>(\n            apiKey,\n            `${projectId}/devices/${deviceId}/rename`,\n            { name }\n        )\n    }\n}\n\nfunction ApiKeyManager() {\n    const validateKey = async (key: string) => {\n        const r = await EdgeImpulseClient.currentProjectInfo(key)\n        return {\n            statusCode: (r?.valid && 200) || r?.errorStatus || 500,\n        }\n    }\n    return (\n        <ApiKeyAccordion\n            apiName={EDGE_IMPULSE_API_KEY}\n            validateKey={validateKey}\n            instructions={\n                <p>\n                    To get an <b>API key</b>, navigate to &nbsp;\n                    <Link\n                        to=\"https://studio.edgeimpulse.com/studio/8698/keys\"\n                        target=\"_blank\"\n                    >\n                        https://studio.edgeimpulse.com/studio/8698/keys\n                    </Link>\n                    &nbsp; and generate a new key.\n                </p>\n            }\n        />\n    )\n}\n\nfunction useEdgeImpulseProjectInfo(apiKey: string) {\n    const [info, setInfo] = useState<EdgeImpulseProject>(undefined)\n\n    useEffectAsync(\n        async mounted => {\n            if (!apiKey) {\n                if (mounted()) setInfo(undefined)\n            } else {\n                const r = await EdgeImpulseClient.currentProjectInfo(apiKey)\n                if (mounted()) setInfo(r?.project)\n            }\n        },\n        [apiKey]\n    )\n\n    return info\n}\n\nfunction ProjectInfo(props: { info: EdgeImpulseProject }) {\n    const { info } = props\n    const disabled = !info?.success\n\n    return (\n        <Card>\n            <CardHeader\n                title={info?.project?.name || \"...\"}\n                subheader={\n                    info?.dataSummary &&\n                    `${info?.dataSummary?.dataCount} samples`\n                }\n            />\n            {info?.project?.logo && <CardMedia image={info?.project?.logo} />}\n            <CardActions>\n                <Button\n                    disabled={disabled}\n                    target=\"_blank\"\n                    href={`https://studio.edgeimpulse.com/studio/${info?.project?.id}/`}\n                    variant=\"contained\"\n                    color=\"primary\"\n                >\n                    Open EdgeImpulse\n                </Button>\n            </CardActions>\n        </Card>\n    )\n}\n\nfunction ModelDownloadButton(props: {\n    apiKey: string\n    info: EdgeImpulseProject\n    setModel: (blob: Uint8Array) => void\n}) {\n    const { apiKey, info, setModel } = props\n    const theme = useTheme()\n    const [downloading, setDownloading] = useState(false)\n    const [error, setError] = useState(\"\")\n    const download = info?.downloads.find(\n        download => download.type === \"TensorFlow Lite (float32)\"\n    )\n\n    const handleDownload = (url: string) => async () => {\n        try {\n            setDownloading(true)\n            setError(\"\")\n            const resp = await fetch(url, {\n                headers: {\n                    \"x-api-key\": apiKey,\n                },\n            })\n            const res = await resp.blob()\n            const bytes = await readBlobToUint8Array(res)\n            setModel(bytes)\n        } catch (e) {\n            console.log(e)\n            setError(\"Oops, download failed.\")\n        } finally {\n            setDownloading(false)\n        }\n    }\n\n    return (\n        <Box mb={1}>\n            {error && <Alert severity=\"error\">{error}</Alert>}\n            <Button\n                variant=\"contained\"\n                disabled={!download || downloading}\n                startIcon={\n                    downloading ? (\n                        <CircularProgress size={theme.spacing(2)} />\n                    ) : (\n                        <GetAppIcon />\n                    )\n                }\n                onClick={handleDownload(\n                    `https://studio.edgeimpulse.com${download?.link}`\n                )}\n            >\n                DOWNLOAD MODEL\n            </Button>\n        </Box>\n    )\n}\n\nfunction AggregatorCard(props: {\n    aggregator: JDService\n    selected: boolean\n    onChecked: () => void\n}) {\n    const { aggregator, selected, onChecked } = props\n    const { device } = aggregator\n\n    const handleChecked = () => onChecked()\n\n    return (\n        <Card>\n            <DeviceCardHeader device={device} showMedia={true} />\n            <CardContent>\n                <Switch checked={selected} onChange={handleChecked} />\n            </CardContent>\n        </Card>\n    )\n}\n\nfunction Acquisition(props: {\n    aggregator: JDService\n    inputs: JDRegister[]\n    apiKey: string\n    info: EdgeImpulseProjectInfo\n}) {\n    const { aggregator, inputs, apiKey, info } = props\n\n    const { device } = aggregator\n    const [client, setClient] = useState<EdgeImpulseClient>(undefined)\n    const [error, setError] = useState(\"\")\n    const [connectionState, setConnectionState] = useState(DISCONNECT)\n    const [samplingState, setSamplingState] = useState(IDLE)\n    const [samplingProgress, setSamplingProgress] = useState(0)\n    const [, setDeviceInfo] = useState<EdgeImpulseDeviceInfo>(undefined)\n    const { deviceId } = device\n    const deviceName = useDeviceName(device, false)\n    const projectId = info?.id\n    const palette = useChartPalette()\n\n    const connected = connectionState === CONNECT\n    const sampling = samplingState !== IDLE\n    const dataSet = client?.dataSet\n    const generatedSampleName = client?.generatedSampleName\n    const aggregatorConfig = client?.aggregatorConfig\n\n    useEffect(() => {\n        if (!apiKey || !aggregator || !inputs?.length) {\n            setClient(undefined)\n            setError(undefined)\n            return undefined\n        } else {\n            console.log(`ei: start client`)\n            const c = new EdgeImpulseClient(apiKey, aggregator, inputs, palette)\n            c.connect()\n            setClient(c)\n            setError(undefined)\n            return () => c.unmount()\n        }\n    }, [apiKey, aggregator, inputs?.map(ip => ip.id).join(\",\")])\n    // subscribe to client changes\n    useEffect(\n        () =>\n            client?.subscribe(CONNECTION_STATE, (v: string) =>\n                setConnectionState(v)\n            ),\n        [client]\n    )\n    // subscribe to client changes\n    useEffect(\n        () =>\n            client?.subscribe(SAMPLING_STATE, (v: string) =>\n                setSamplingState(v)\n            ),\n        [client]\n    )\n    // listen to errors\n    useEffect(() => client?.subscribe(ERROR, (e: string) => setError(e)), [\n        client,\n    ])\n    // progress\n    useEffect(\n        () =>\n            client?.subscribe(PROGRESS, (p: number) =>\n                setSamplingProgress(p * 100)\n            ),\n        [client]\n    )\n\n    // name checking\n    useEffectAsync(async () => {\n        if (!apiKey || projectId === undefined) {\n            setDeviceInfo(undefined)\n        } else {\n            const resp = await EdgeImpulseClient.deviceInfo(\n                apiKey,\n                projectId,\n                deviceId\n            )\n            const info = resp.success && resp.device\n            if (info && info.name !== deviceName) {\n                // no name assigned, use current\n                if (info.name === deviceId) {\n                    console.log(`ei: sync name`)\n                    const rename = await EdgeImpulseClient.renameDevice(\n                        apiKey,\n                        projectId,\n                        deviceId,\n                        deviceName\n                    )\n                    if (rename.success) {\n                        info.name = deviceName\n                    }\n                }\n            }\n            setDeviceInfo(info)\n        }\n    }, [apiKey, projectId, deviceName])\n\n    return (\n        <Box>\n            {connected && (\n                <Alert severity={\"success\"}>Connected to EdgeImpulse</Alert>\n            )}\n            {error && <Alert severity={\"error\"}>{error}</Alert>}\n            {sampling && (\n                <Alert severity={\"info\"}>\n                    <AlertTitle>Sampling...</AlertTitle>\n                    <CircularProgressWithLabel value={samplingProgress} />\n                </Alert>\n            )}\n            {!!dataSet && <Trend dataSet={dataSet} />}\n            {generatedSampleName && (\n                <Typography variant=\"body2\">\n                    sample name: {generatedSampleName}\n                </Typography>\n            )}\n            {aggregatorConfig && (\n                <pre>{JSON.stringify(aggregatorConfig, null, 2)}</pre>\n            )}\n        </Box>\n    )\n}\n\nexport default function EdgeImpulse() {\n    const { value: apiKey } = useDbValue(EDGE_IMPULSE_API_KEY, \"\")\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const [model, setModel] = useState<Uint8Array>(undefined)\n    const [registerIdsChecked, setRegisterIdsChecked] = useState<string[]>([])\n    const [aggregatorId, setAggregatorId] = useState<string>(\"\")\n    const gridBreakPoints = useGridBreakpoints()\n    const info = useEdgeImpulseProjectInfo(apiKey)\n\n    const aggregators: JDService[] = useChange(bus, bus =>\n        bus.services({ serviceClass: SRV_SENSOR_AGGREGATOR })\n    )\n    const currentAggregator: JDService =\n        aggregators.find(srv => srv.id == aggregatorId) || aggregators[0]\n    const readingRegisters = useChange(bus, bus =>\n        bus\n            .devices()\n            .map(\n                device =>\n                    device.services().find(srv => isSensor(srv.specification))\n                        ?.readingRegister\n            )\n            .filter(reg => !!reg)\n    )\n    const inputs = readingRegisters.filter(\n        reg => registerIdsChecked.indexOf(reg.id) > -1\n    )\n\n    const handleAggregatorChecked = (srv: JDService) => () => {\n        const id = srv?.id == aggregatorId ? \"\" : srv?.id\n        setAggregatorId(id)\n    }\n    const handleRegisterCheck = (reg: JDRegister) => {\n        const i = registerIdsChecked.indexOf(reg.id)\n        if (i > -1) registerIdsChecked.splice(i, 1)\n        else registerIdsChecked.push(reg.id)\n        registerIdsChecked.sort()\n        setRegisterIdsChecked([...registerIdsChecked])\n    }\n\n    return (\n        <>\n            <h1>Edge Impulse</h1>\n            <p>\n                Use Jacdac to inject data and download models into{\" \"}\n                <Link href=\"https://studio.edgeimpulse.com\">\n                    https://studio.edgeimpulse.com\n                </Link>\n                .\n            </p>\n            <ConnectAlert />\n            <ApiKeyManager />\n            <Box mb={1} />\n            <ProjectInfo info={info} />\n            <h3>Data</h3>\n            <h4>Select Sensors</h4>\n            {!readingRegisters?.length && (\n                <Alert severity=\"info\">No sensor found...</Alert>\n            )}\n            {!!readingRegisters.length && (\n                <ReadingFieldGrid\n                    readingRegisters={readingRegisters}\n                    registerIdsChecked={registerIdsChecked}\n                    handleRegisterCheck={handleRegisterCheck}\n                />\n            )}\n            <h4>Select Sensor Aggregator</h4>\n            {!aggregators?.length && (\n                <Alert severity=\"info\">No data aggregator found...</Alert>\n            )}\n            <Grid container spacing={2}>\n                {aggregators.map(aggregator => (\n                    <Grid key={aggregator.id} item {...gridBreakPoints}>\n                        <AggregatorCard\n                            aggregator={aggregator}\n                            selected={currentAggregator === aggregator}\n                            onChecked={handleAggregatorChecked(aggregator)}\n                        />\n                    </Grid>\n                ))}\n            </Grid>\n            <h4>Acquisition status</h4>\n            {!currentAggregator && (\n                <Alert severity=\"info\">No data aggregator selected...</Alert>\n            )}\n            {!inputs?.length && (\n                <Alert severity=\"info\">\n                    Select sensors to collect data from...\n                </Alert>\n            )}\n            {currentAggregator && !!inputs?.length && (\n                <Acquisition\n                    aggregator={currentAggregator}\n                    inputs={inputs}\n                    apiKey={apiKey}\n                    info={info?.project}\n                />\n            )}\n            <h3>Deployment</h3>\n            {model && (\n                <Box mb={1}>\n                    <Alert severity=\"success\">Model downloaded!</Alert>\n                </Box>\n            )}\n            <ModelDownloadButton\n                apiKey={apiKey}\n                info={info}\n                setModel={setModel}\n            />\n            <ServiceList\n                serviceClass={SRV_MODEL_RUNNER}\n                content={service => <ModelContent service={service} />}\n                actions={service => (\n                    <ModelActions service={service} model={model} />\n                )}\n                alertMissing={\"No model runner found...\"}\n            />\n        </>\n    )\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n/* eslint-disable jsx-a11y/aria-role */\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport ButtonBase from '../ButtonBase';\nimport IconButton from '../IconButton';\nimport withStyles from '../styles/withStyles';\nimport AccordionContext from '../Accordion/AccordionContext';\nexport var styles = function styles(theme) {\n  var transition = {\n    duration: theme.transitions.duration.shortest\n  };\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'flex',\n      minHeight: 8 * 6,\n      transition: theme.transitions.create(['min-height', 'background-color'], transition),\n      padding: theme.spacing(0, 2),\n      '&:hover:not($disabled)': {\n        cursor: 'pointer'\n      },\n      '&$expanded': {\n        minHeight: 64\n      },\n      '&$focused': {\n        backgroundColor: theme.palette.action.focus\n      },\n      '&$disabled': {\n        opacity: theme.palette.action.disabledOpacity\n      }\n    },\n\n    /* Pseudo-class applied to the root element, children wrapper element and `IconButton` component if `expanded={true}`. */\n    expanded: {},\n\n    /* Pseudo-class applied to the root element if `focused={true}`. */\n    focused: {},\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the children wrapper element. */\n    content: {\n      display: 'flex',\n      flexGrow: 1,\n      transition: theme.transitions.create(['margin'], transition),\n      margin: '12px 0',\n      '&$expanded': {\n        margin: '20px 0'\n      }\n    },\n\n    /* Styles applied to the `IconButton` component when `expandIcon` is supplied. */\n    expandIcon: {\n      transform: 'rotate(0deg)',\n      transition: theme.transitions.create('transform', transition),\n      '&:hover': {\n        // Disable the hover effect for the IconButton,\n        // because a hover effect should apply to the entire Expand button and\n        // not only to the IconButton.\n        backgroundColor: 'transparent'\n      },\n      '&$expanded': {\n        transform: 'rotate(180deg)'\n      }\n    }\n  };\n};\nvar AccordionSummary = /*#__PURE__*/React.forwardRef(function AccordionSummary(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      expandIcon = props.expandIcon,\n      IconButtonProps = props.IconButtonProps,\n      onBlur = props.onBlur,\n      onClick = props.onClick,\n      onFocusVisible = props.onFocusVisible,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"expandIcon\", \"IconButtonProps\", \"onBlur\", \"onClick\", \"onFocusVisible\"]);\n\n  var _React$useState = React.useState(false),\n      focusedState = _React$useState[0],\n      setFocusedState = _React$useState[1];\n\n  var handleFocusVisible = function handleFocusVisible(event) {\n    setFocusedState(true);\n\n    if (onFocusVisible) {\n      onFocusVisible(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    setFocusedState(false);\n\n    if (onBlur) {\n      onBlur(event);\n    }\n  };\n\n  var _React$useContext = React.useContext(AccordionContext),\n      _React$useContext$dis = _React$useContext.disabled,\n      disabled = _React$useContext$dis === void 0 ? false : _React$useContext$dis,\n      expanded = _React$useContext.expanded,\n      toggle = _React$useContext.toggle;\n\n  var handleChange = function handleChange(event) {\n    if (toggle) {\n      toggle(event);\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(ButtonBase, _extends({\n    focusRipple: false,\n    disableRipple: true,\n    disabled: disabled,\n    component: \"div\",\n    \"aria-expanded\": expanded,\n    className: clsx(classes.root, className, disabled && classes.disabled, expanded && classes.expanded, focusedState && classes.focused),\n    onFocusVisible: handleFocusVisible,\n    onBlur: handleBlur,\n    onClick: handleChange,\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.content, expanded && classes.expanded)\n  }, children), expandIcon && /*#__PURE__*/React.createElement(IconButton, _extends({\n    className: clsx(classes.expandIcon, expanded && classes.expanded),\n    edge: \"end\",\n    component: \"div\",\n    tabIndex: null,\n    role: null,\n    \"aria-hidden\": true\n  }, IconButtonProps), expandIcon));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAccordionSummary'\n})(AccordionSummary);","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'CheckCircleOutline');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'GetApp');\n\nexports.default = _default;","import {\n    Card,\n    CardActions,\n    CardContent,\n    CardHeader,\n    createStyles,\n    Grid,\n    makeStyles,\n    Switch,\n    Theme,\n} from \"@material-ui/core\"\nimport React from \"react\"\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport DeviceActions from \"./DeviceActions\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport useDeviceName from \"./devices/useDeviceName\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        vmiddle: {\n            verticalAlign: \"middle\",\n        },\n    })\n)\n\nfunction ReadingFieldGridItem(props: {\n    register: JDRegister\n    handleRegisterCheck: (register: JDRegister) => void\n    recording: boolean\n    registerChecked: boolean\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        register,\n        handleRegisterCheck,\n        recording,\n        registerChecked,\n        liveDataSet,\n    } = props\n    const gridBreakpoints = useGridBreakpoints()\n    const classes = useStyles()\n    const deviceName = useDeviceName(register.service.device)\n    const handleCheck = () => handleRegisterCheck(register)\n\n    return (\n        <Grid item {...gridBreakpoints} key={\"source\" + register.id}>\n            <Card>\n                <CardHeader\n                    subheader={register.service.name}\n                    title={`${deviceName}/${register.name}`}\n                    action={\n                        <DeviceActions\n                            device={register.service.device}\n                            showReset={true}\n                        />\n                    }\n                />\n                <CardContent>\n                    {register.fields.map(field => (\n                        <span key={field.id}>\n                            <FiberManualRecordIcon\n                                className={classes.vmiddle}\n                                fontSize=\"large\"\n                                style={{\n                                    color:\n                                        (registerChecked &&\n                                            liveDataSet?.colorOf(field)) ||\n                                        \"#ccc\",\n                                }}\n                            />\n                            {field.name}\n                        </span>\n                    ))}\n                </CardContent>\n                <CardActions>\n                    <Switch\n                        disabled={recording}\n                        onChange={handleCheck}\n                        checked={registerChecked}\n                    />\n                </CardActions>\n            </Card>\n        </Grid>\n    )\n}\n\nexport default function ReadingFieldGrid(props: {\n    readingRegisters: JDRegister[]\n    registerIdsChecked: string[]\n    recording?: boolean\n    handleRegisterCheck: (register: JDRegister) => void\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        readingRegisters,\n        registerIdsChecked,\n        recording,\n        handleRegisterCheck,\n        liveDataSet,\n    } = props\n\n    return (\n        <Grid container spacing={2}>\n            {readingRegisters.map(register => {\n                const registerChecked =\n                    registerIdsChecked.indexOf(register.id) > -1\n                return (\n                    <ReadingFieldGridItem\n                        key={register.id}\n                        register={register}\n                        registerChecked={registerChecked}\n                        recording={recording}\n                        handleRegisterCheck={handleRegisterCheck}\n                        liveDataSet={liveDataSet}\n                    />\n                )\n            })}\n        </Grid>\n    )\n}\n"],"sourceRoot":""}