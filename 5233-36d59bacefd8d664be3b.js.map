{"version":3,"file":"5233-36d59bacefd8d664be3b.js","mappings":"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","sources":["webpack://jacdac-docs/./src/components/dashboard/DashboardHIDMouse.tsx"],"sourcesContent":["import React, { KeyboardEvent, MouseEvent, useState } from \"react\"\nimport { createStyles, Grid, makeStyles, Typography } from \"@material-ui/core\"\nimport {\n    HidMouseButton,\n    HidMouseButtonEvent,\n    HidMouseCmd,\n} from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { jdpack } from \"../../../jacdac-ts/src/jdom/pack\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport HIDMouseServer, {\n    renderHidMouseButtons,\n} from \"../../../jacdac-ts/src/servers/hidmouseserver\"\nimport useChange from \"../../jacdac/useChange\"\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        capture: {\n            cursor: \"pointer\",\n            \"&:hover\": {\n                borderColor: theme.palette.primary.main,\n            },\n            \"&:focus\": {\n                borderColor: theme.palette.action.active,\n            },\n        },\n    })\n)\n\nexport default function DashboardHIDMouse(props: DashboardServiceProps) {\n    const { service } = props\n    const classes = useStyles()\n    const server = useServiceServer<HIDMouseServer>(service)\n    const [observed, setObserved] = useState(\"\")\n    const sendButton = async (\n        buttons: HidMouseButton,\n        event: HidMouseButtonEvent\n    ) => {\n        const data = jdpack<[HidMouseButton, HidMouseButtonEvent]>(\"u16 u8\", [\n            buttons,\n            event,\n        ])\n        await service.sendCmdAsync(HidMouseCmd.SetButton, data)\n    }\n    const sendMove = async (dx: number, dy: number) => {\n        const data = jdpack<[number, number, number]>(\"i16 i16 u16\", [\n            dx,\n            dy,\n            100,\n        ])\n        await service.sendCmdAsync(HidMouseCmd.Move, data)\n    }\n    const sendWheel = async (dy: number) => {\n        const data = jdpack<[number, number]>(\"i16 u16\", [dy, 100])\n        await service.sendCmdAsync(HidMouseCmd.Wheel, data)\n    }\n    const serverValue = useChange(server, _ => _?.lastCommand)\n    const value = serverValue || \"...\"\n    const preview = serverValue || observed\n    const handleMouseDown = (ev: MouseEvent<HTMLPreElement>) => {\n        const { buttons } = ev\n        setObserved(`set button ${renderHidMouseButtons(buttons)} down`)\n    }\n    const handleMouseUp = (ev: MouseEvent<HTMLPreElement>) => {\n        const { buttons } = ev\n        setObserved(`set button ${renderHidMouseButtons(buttons)} up`)\n    }\n    const handleKeyDown = async (ev: KeyboardEvent<HTMLPreElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        const { key } = ev\n        switch (key) {\n            case \"l\":\n                sendButton(HidMouseButton.Left, HidMouseButtonEvent.Click)\n                break\n            case \"r\":\n                sendButton(HidMouseButton.Right, HidMouseButtonEvent.Click)\n                break\n            case \"m\":\n                sendButton(HidMouseButton.Middle, HidMouseButtonEvent.Click)\n                break\n            case \"ArrowRight\":\n                sendMove(10, 0)\n                break\n            case \"ArrowLeft\":\n                sendMove(-10, 0)\n                break\n            case \"ArrowUp\":\n                sendMove(0, -10)\n                break\n            case \"ArrowDown\":\n                sendMove(0, 10)\n                break\n            case \"w\":\n                sendWheel(-10)\n                break\n            case \"s\":\n                sendWheel(10)\n                break\n        }\n    }\n\n    return (\n        <Grid container spacing={1}>\n            <Grid item>\n                <pre\n                    className={classes.capture}\n                    tabIndex={0}\n                    onMouseDown={handleMouseDown}\n                    onMouseUp={handleMouseUp}\n                    onKeyDown={handleKeyDown}\n                >\n                    {value || \"...\"}\n                </pre>\n                <Typography variant=\"caption\">\n                    focus and type l(eft), r(ight), m(iddle) for buttons, arrow\n                    keys to move, w(heel up), d(wheel down) for the wheel\n                </Typography>\n            </Grid>\n            {preview && (\n                <Grid item xs={12}>\n                    <Typography variant=\"caption\" component=\"pre\">\n                        mouse preview: {preview || \"...\"}\n                    </Typography>\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n"],"names":["React","useState","createStyles","Grid","makeStyles","Typography","HidMouseButton","HidMouseButtonEvent","HidMouseCmd","jdpack","useServiceServer","renderHidMouseButtons","useChange","useStyles","theme","capture","cursor","borderColor","palette","primary","main","action","active","DashboardHIDMouse","props","service","classes","server","observed","setObserved","sendButton","buttons","event","data","sendCmdAsync","SetButton","sendMove","dx","dy","Move","sendWheel","Wheel","serverValue","_","lastCommand","value","preview","handleMouseDown","ev","handleMouseUp","handleKeyDown","stopPropagation","preventDefault","key","Left","Click","Right","Middle"],"sourceRoot":""}