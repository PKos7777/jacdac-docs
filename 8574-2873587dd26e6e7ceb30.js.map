{"version":3,"file":"8574-2873587dd26e6e7ceb30.js","mappings":";;;;;;;AAAa;;AAEb,6BAA6B,mBAAO,CAAC,IAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,IAA+C;;AAErF,6BAA6C;AAC7C;AACA,CAAC,CAAC;AACF,SAAe;;AAEf,oCAAoC,mBAAO,CAAC,KAAO;;AAEnD,4CAA4C,mBAAO,CAAC,KAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,SAAe;;;;;;;;;;;;;;;;;ACnBf;AACA;AACA;AACA;AAEe,SAASM,iBAAT,CAA2BC,KAA3B,EAGZ;AACC,MAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoBF,KAA1B;AACA,MAAM;AAAEG,IAAAA,EAAE,GAAG,EAAP;AAAWC,IAAAA,IAAI,GAAG;AAAlB,MAAyBF,MAA/B;AACA,MAAM;AAAEG,IAAAA;AAAF,MAAeX,iDAAU,CAACE,0DAAD,CAA/B;AACA,MAAM;AAAA,OAACU,SAAD;AAAA,OAAYC;AAAZ,MAA4BZ,+CAAQ,CAAC,KAAD,CAA1C;;AAEA,MAAMa,WAAW;AAAA,6GAAG,aAAY;AAC5B;AACA,UAAMC,CAAC,GAAGN,EAAE,CAACO,OAAH,CAAW,MAAX,CAAV;AACA,UAAMC,OAAO,GAAGR,EAAE,CAACS,KAAH,CAAS,CAAT,EAAYH,CAAZ,CAAhB;AACA,UAAMI,IAAI,GAAGV,EAAE,CAACS,KAAH,CAASH,CAAC,GAAG,CAAb,EAAgBK,IAAhB,EAAb;AAEA,UAAMC,OAAO,gGAGnBJ,OAHmB,6iBAkBnBE,IAlBmB,OAAb;AAoBA,UAAMG,SAAS,kDAGFf,KAAK,IAAI,MAHP,yGAQrBG,IARqB,odAAf;;AA2BA,UAAI;AACAG,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,YAAMU,CAAC,SAASC,KAAK,CACjB,uDADiB,EAEjB;AACIC,UAAAA,MAAM,EAAE,MADZ;AAEIC,UAAAA,OAAO,EAAE;AACL,4BAAgB,kBADX;AAELC,YAAAA,MAAM,EAAE;AAFH,WAFb;AAMIC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,YAAAA,KAAK,EAAE;AACH,8BAAgB;AACZC,gBAAAA,OAAO,EAAE;AACLC,kBAAAA,YAAY,EAAE;AACV,iCAAa,QADH;AAEVC,oBAAAA,SAAS,EAAE;AAFD;AADT;AADG,eADb;AASH,0BAAY;AACRF,gBAAAA,OAAO,EAAEX;AADD,eATT;AAYH,4BAAc;AACVW,gBAAAA,OAAO,EAAEV;AADC;AAZX;AADU,WAAf;AANV,SAFiB,CAArB;AA4BA,YAAMa,IAAI,SAASZ,CAAC,CAACa,IAAF,EAAnB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA,YAAMI,GAAG,iCAA+BJ,IAAI,CAACK,UAApC,oBAAT;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBJ,GAAvB;AACH,OAlCD,CAkCE,OAAOK,KAAP,EAAc;AACZjC,QAAAA,QAAQ,CAACiC,KAAD,CAAR;AACH,OApCD,SAoCU;AACN/B,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;AACJ,KA5FgB;;AAAA,oBAAXC,WAAW;AAAA;AAAA;AAAA,KAAjB;;AA8FA,sBACI,iDAAC,oEAAD;AACI,WAAO,EAAEA,WADb;AAEI,YAAQ,EAAEF,SAFd;AAGI,SAAK,EAAC;AAHV,kBAKI,iDAAC,qEAAD,OALJ,CADJ;AASH","sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/Edit.js","webpack://jacdac-docs/./src/components/ui/CodeSandboxButton.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\n\nexports.default = _default;","import React, { useContext, useState } from \"react\"\nimport AppContext from \"../AppContext\"\nimport EditIcon from \"@material-ui/icons/Edit\"\nimport IconButtonWithTooltip from \"./IconButtonWithTooltip\"\n\nexport default function CodeSandboxButton(props: {\n    title?: string\n    source: { js: string; html: string }\n}) {\n    const { title, source } = props\n    const { js = \"\", html = \"\" } = source\n    const { setError } = useContext(AppContext)\n    const [importing, setImporting] = useState(false)\n\n    const handleClick = async () => {\n        // find imports\n        const i = js.indexOf(\"\\n\\n\")\n        const imports = js.slice(0, i)\n        const code = js.slice(i + 2).trim()\n\n        const indexJs = `\nimport \"milligram\";\nimport { createUSBBus, CONNECTION_STATE } from \"jacdac-ts\";\n${imports}\nconst connectEl = document.getElementById(\"connectbtn\");\nconst logEl = document.getElementById(\"log\")\nconst log = (msg) => {\n    console.log(msg)\n    logEl.innerText += msg + \"\\\\n\"\n}\n// create WebUSB bus\nconst bus = createUSBBus();\n// track connection state and update button\nbus.on(CONNECTION_STATE, () => { connectEl.innerText = bus.connected ? \"connected ðŸŽ‰\" : \"connect\" })\n// connect must be triggered by a user interaction\nconnectEl.onclick = async () =>\n  bus.connected ? bus.disconnect() : bus.connect();\n\n${code}\n`\n        const indexHtml = `\n<html>\n    <body>\n        <h1>Jacdac ${title || \"demo\"}</h1>\n        <div>\n        <button id=\"connectbtn\">connect</button>\n        </div>    \n\n${html}\n        <pre id=\"log\"></pre>\n\n    <footer>\n        <small>\n        Need to learn more about Jacdac?\n        <a target=\"_blank\" href=\"https://aka.ms/jacdac\">Read the docs</a>\n        or\n        <a\n            target=\"_blank\"\n            href=\"https://github.com/microsoft/jacdac/discussions\"\n            >start a discussion</a\n        >.\n        </small>\n    </footer>\n    <script src=\"./index.js\" />\n    </body>\n</html>    \n        `\n        try {\n            setImporting(true)\n            const x = await fetch(\n                \"https://codesandbox.io/api/v1/sandboxes/define?json=1\",\n                {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        Accept: \"application/json\",\n                    },\n                    body: JSON.stringify({\n                        files: {\n                            \"package.json\": {\n                                content: {\n                                    dependencies: {\n                                        \"jacdac-ts\": \"latest\",\n                                        milligram: \"latest\",\n                                    },\n                                },\n                            },\n                            \"index.js\": {\n                                content: indexJs,\n                            },\n                            \"index.html\": {\n                                content: indexHtml,\n                            },\n                        },\n                    }),\n                }\n            )\n            const data = await x.json()\n            console.log(data)\n            const url = `https://codesandbox.io/s/${data.sandbox_id}?file=/index.js`\n            window.location.href = url\n        } catch (error) {\n            setError(error)\n        } finally {\n            setImporting(false)\n        }\n    }\n\n    return (\n        <IconButtonWithTooltip\n            onClick={handleClick}\n            disabled={importing}\n            title=\"Try in CodeSandbox\"\n        >\n            <EditIcon />\n        </IconButtonWithTooltip>\n    )\n}\n"],"names":["React","useContext","useState","AppContext","EditIcon","IconButtonWithTooltip","CodeSandboxButton","props","title","source","js","html","setError","importing","setImporting","handleClick","i","indexOf","imports","slice","code","trim","indexJs","indexHtml","x","fetch","method","headers","Accept","body","JSON","stringify","files","content","dependencies","milligram","data","json","console","log","url","sandbox_id","window","location","href","error"],"sourceRoot":""}