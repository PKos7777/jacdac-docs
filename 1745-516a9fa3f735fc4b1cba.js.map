{"version":3,"sources":["webpack://jacdac-docs/./src/components/dialogs/SelectRoleDialog.tsx"],"names":["SelectRoleDialog","props","service","onClose","open","dialogId","useId","labelId","roleManager","useRoleManager","roles","useChange","rm","compatibleRoles","currentRole","srv","role","hasRoles","length","handleClick","setRole","name","map"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AAGe,SAASA,gBAAT,CAA0BC,KAA1B,EAGZ;AAAA,MACSC,OADT,GAC8BD,KAD9B,CACSC,OADT;AAAA,MACkBC,OADlB,GAC8BF,KAD9B,CACkBE,OADlB;AAEC,MAAMC,IAAI,GAAG,CAAC,CAACF,OAAf;AACA,MAAMG,QAAQ,GAAGC,kEAAK,EAAtB;AACA,MAAMC,OAAO,GAAGD,kEAAK,EAArB;AACA,MAAME,WAAW,GAAGC,0EAAc,EAAlC;AACA,MAAMC,KAAK,GAAGC,mEAAS,CAACH,WAAD,EAAc,UAAAI,EAAE;AAAA,WAAIA,EAAJ,aAAIA,EAAJ,uBAAIA,EAAE,CAAEC,eAAJ,CAAoBX,OAApB,CAAJ;AAAA,GAAhB,EAAkD,CACrEA,OADqE,CAAlD,CAAvB;AAGA,MAAMY,WAAW,GAAGH,mEAAS,CAACT,OAAD,EAAU,UAAAa,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAR;AAAA,GAAb,CAA7B;AACA,MAAMC,QAAQ,GAAG,CAAC,EAACP,KAAD,aAACA,KAAD,eAACA,KAAK,CAAEQ,MAAR,CAAlB;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACH,IAAD;AAAA,2MAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAC1BR,WAAW,CAACY,OAAZ,CAAoBlB,OAApB,EAA6Bc,IAAI,CAACK,IAAlC,CAD0B;;AAAA;AAEhClB,qBAAO;;AAFyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhB;AAAA,GAApB;;AAKA,sBACI,iDAAC,+DAAD;AACI,MAAE,EAAEE,QADR;AAEI,uBAAiBE,OAFrB;AAGI,QAAI,EAAEH,IAHV;AAII,WAAO,EAAED;AAJb,kBAMI,iDAAC,+DAAD;AAAa,MAAE,EAAEI;AAAjB,KACKU,QAAQ,wCADb,CANJ,EASKA,QAAQ,iBACL,iDAAC,+DAAD,qBACI,iDAAC,gEAAD,QACKP,KADL,aACKA,KADL,uBACKA,KAAK,CAAEY,GAAP,CAAW,UAAAN,IAAI;AAAA,wBACZ,iDAAC,yEAAD;AACI,SAAG,EAAEA,IAAI,CAACK,IADd;AAEI,UAAI,EAAEL,IAFV;AAGI,cAAQ,EAAEF,WAAW,KAAKE,IAAI,CAACK,IAHnC;AAII,aAAO,EAAEF,WAAW,CAACH,IAAD;AAJxB,MADY;AAAA,GAAf,CADL,CADJ,CAVR,CADJ;AA0BH,C","file":"1745-516a9fa3f735fc4b1cba.js","sourcesContent":["import { Dialog, DialogContent, DialogTitle, List } from \"@material-ui/core\"\nimport React from \"react\"\nimport { useId } from \"react-use-id-hook\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport useRoleManager from \"../services/useRoleManager\"\nimport useChange from \"../../jacdac/useChange\"\nimport { RoleListItem } from \"../services/RoleListItem\"\nimport { Role } from \"../../../jacdac-ts/src/jdom/rolemanagerclient\"\n\nexport default function SelectRoleDialog(props: {\n    service: JDService\n    onClose: () => void\n}) {\n    const { service, onClose } = props\n    const open = !!service\n    const dialogId = useId()\n    const labelId = useId()\n    const roleManager = useRoleManager()\n    const roles = useChange(roleManager, rm => rm?.compatibleRoles(service), [\n        service,\n    ])\n    const currentRole = useChange(service, srv => srv.role)\n    const hasRoles = !!roles?.length\n\n    const handleClick = (role: Role) => async () => {\n        await roleManager.setRole(service, role.name)\n        onClose()\n    }\n\n    return (\n        <Dialog\n            id={dialogId}\n            aria-labelledby={labelId}\n            open={open}\n            onClose={onClose}\n        >\n            <DialogTitle id={labelId}>\n                {hasRoles ? `Select a role` : `No role available`}\n            </DialogTitle>\n            {hasRoles && (\n                <DialogContent>\n                    <List>\n                        {roles?.map(role => (\n                            <RoleListItem\n                                key={role.name}\n                                role={role}\n                                selected={currentRole === role.name}\n                                onClick={handleClick(role)}\n                            />\n                        ))}\n                    </List>\n                </DialogContent>\n            )}\n        </Dialog>\n    )\n}\n"],"sourceRoot":""}