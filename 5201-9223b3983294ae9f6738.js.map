{"version":3,"file":"5201-9223b3983294ae9f6738.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/core/esm/CardActions/CardActions.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/InputAdornment/InputAdornment.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Delete.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/FiberManualRecord.js","webpack://jacdac-docs/./src/components/ClassDataSetGrid.tsx","webpack://jacdac-docs/./src/components/ReadingFieldGrid.tsx","webpack://jacdac-docs/./src/components/dialogs/mb/RecordDataDialog.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  },\n\n  /* Styles applied to the root element if `disableSpacing={false}`. */\n  spacing: {\n    '& > :not(:first-child)': {\n      marginLeft: 8\n    }\n  }\n};\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(props, ref) {\n  var _props$disableSpacing = props.disableSpacing,\n      disableSpacing = _props$disableSpacing === void 0 ? false : _props$disableSpacing,\n      classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"disableSpacing\", \"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, !disableSpacing && classes.spacing),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardActions'\n})(CardActions);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '../Typography';\nimport withStyles from '../styles/withStyles';\nimport FormControlContext, { useFormControl } from '../FormControl/FormControlContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    height: '0.01em',\n    // Fix IE 11 flexbox alignment. To remove at some point.\n    maxHeight: '2em',\n    alignItems: 'center',\n    whiteSpace: 'nowrap'\n  },\n\n  /* Styles applied to the root element if `variant=\"filled\"`. */\n  filled: {\n    '&$positionStart:not($hiddenLabel)': {\n      marginTop: 16\n    }\n  },\n\n  /* Styles applied to the root element if `position=\"start\"`. */\n  positionStart: {\n    marginRight: 8\n  },\n\n  /* Styles applied to the root element if `position=\"end\"`. */\n  positionEnd: {\n    marginLeft: 8\n  },\n\n  /* Styles applied to the root element if `disablePointerEvents=true`. */\n  disablePointerEvents: {\n    pointerEvents: 'none'\n  },\n\n  /* Styles applied if the adornment is used inside <FormControl hiddenLabel />. */\n  hiddenLabel: {},\n\n  /* Styles applied if the adornment is used inside <FormControl margin=\"dense\" />. */\n  marginDense: {}\n};\nvar InputAdornment = /*#__PURE__*/React.forwardRef(function InputAdornment(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disablePointer = props.disablePointerEvents,\n      disablePointerEvents = _props$disablePointer === void 0 ? false : _props$disablePointer,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      position = props.position,\n      variantProp = props.variant,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"disablePointerEvents\", \"disableTypography\", \"position\", \"variant\"]);\n\n  var muiFormControl = useFormControl() || {};\n  var variant = variantProp;\n\n  if (variantProp && muiFormControl.variant) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (variantProp === muiFormControl.variant) {\n        console.error('Material-UI: The `InputAdornment` variant infers the variant prop ' + 'you do not have to provide one.');\n      }\n    }\n  }\n\n  if (muiFormControl && !variant) {\n    variant = muiFormControl.variant;\n  }\n\n  return /*#__PURE__*/React.createElement(FormControlContext.Provider, {\n    value: null\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, position === 'end' ? classes.positionEnd : classes.positionStart, disablePointerEvents && classes.disablePointerEvents, muiFormControl.hiddenLabel && classes.hiddenLabel, variant === 'filled' && classes.filled, muiFormControl.margin === 'dense' && classes.marginDense),\n    ref: ref\n  }, other), typeof children === 'string' && !disableTypography ? /*#__PURE__*/React.createElement(Typography, {\n    color: \"textSecondary\"\n  }, children) : children));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiInputAdornment'\n})(InputAdornment);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"8\"\n}), 'FiberManualRecord');\n\nexports.default = _default;","import React from \"react\"\n\nimport { Card, CardContent, CardHeader, Grid } from \"@material-ui/core\"\nimport { IconButton } from \"gatsby-theme-material-ui\"\nimport DeleteIcon from \"@material-ui/icons/Delete\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\n\nimport Trend from \"./Trend\"\nimport FieldDataSet from \"./FieldDataSet\"\n\nexport default function ClassDataSetGrid(props: {\n    label: string\n    tables: FieldDataSet[]\n    handleDeleteTable?: (table: FieldDataSet) => void\n}) {\n    const { label, tables, handleDeleteTable } = props\n\n    const handleDelete = (table: FieldDataSet) => () => handleDeleteTable(table)\n\n    return (\n        <Grid container spacing={2}>\n            <Card>\n                <CardHeader\n                    subheader={label + `, ${tables.length} sample(s)`}\n                />\n                <CardContent>\n                    <Grid container spacing={1}>\n                        {tables.map(table => (\n                            <Grid item key={`result` + table.id}>\n                                <Trend dataSet={table} height={8} mini={true} />\n                                {handleDeleteTable && (\n                                    <IconButton\n                                        onClick={handleDelete(table)}\n                                        title=\"Delete this sample\"\n                                    >\n                                        <DeleteIcon />\n                                    </IconButton>\n                                )}\n                            </Grid>\n                        ))}\n                    </Grid>\n                </CardContent>\n            </Card>\n        </Grid>\n    )\n}\n","import {\n    Card,\n    CardActions,\n    CardContent,\n    CardHeader,\n    createStyles,\n    Grid,\n    makeStyles,\n} from \"@material-ui/core\"\nimport React from \"react\"\nimport JDRegister from \"../../jacdac-ts/src/jdom/register\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\"\nimport FieldDataSet from \"./FieldDataSet\"\nimport useDeviceName from \"./devices/useDeviceName\"\nimport SwitchWithLabel from \"./ui/SwitchWithLabel\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        vmiddle: {\n            verticalAlign: \"middle\",\n        },\n    })\n)\n\nfunction ReadingFieldGridItem(props: {\n    register: JDRegister\n    handleRegisterCheck: (register: JDRegister) => void\n    recording: boolean\n    registerChecked: boolean\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        register,\n        handleRegisterCheck,\n        recording,\n        registerChecked,\n        liveDataSet,\n    } = props\n    const { service } = register\n    const { device } = service\n    const gridBreakpoints = useGridBreakpoints()\n    const classes = useStyles()\n    const deviceName = useDeviceName(device)\n    const handleCheck = () => handleRegisterCheck(register)\n\n    return (\n        <Grid item {...gridBreakpoints} key={\"source\" + register.id}>\n            <Card>\n                <CardHeader\n                    subheader={register.service.name}\n                    title={`${deviceName}/${register.name}`}\n                />\n                <CardContent>\n                    {register.fields.map(field => (\n                        <span key={field.id}>\n                            <FiberManualRecordIcon\n                                className={classes.vmiddle}\n                                fontSize=\"large\"\n                                style={{\n                                    color:\n                                        (registerChecked &&\n                                            liveDataSet?.colorOf(field)) ||\n                                        \"#ccc\",\n                                }}\n                            />\n                            {field.name}\n                        </span>\n                    ))}\n                </CardContent>\n                <CardActions>\n                    <SwitchWithLabel\n                        disabled={recording}\n                        onChange={handleCheck}\n                        checked={registerChecked}\n                        label={`record ${deviceName}/${register.name}`}\n                    />\n                </CardActions>\n            </Card>\n        </Grid>\n    )\n}\n\nexport default function ReadingFieldGrid(props: {\n    readingRegisters: JDRegister[]\n    registerIdsChecked: string[]\n    recording?: boolean\n    handleRegisterCheck: (register: JDRegister) => void\n    liveDataSet?: FieldDataSet\n}) {\n    const {\n        readingRegisters,\n        registerIdsChecked,\n        recording,\n        handleRegisterCheck,\n        liveDataSet,\n    } = props\n\n    return (\n        <Grid container spacing={2}>\n            {readingRegisters.map(register => {\n                const registerChecked =\n                    registerIdsChecked.indexOf(register.id) > -1\n                return (\n                    <ReadingFieldGridItem\n                        key={register.id}\n                        register={register}\n                        registerChecked={registerChecked}\n                        recording={recording}\n                        handleRegisterCheck={handleRegisterCheck}\n                        liveDataSet={liveDataSet}\n                    />\n                )\n            })}\n        </Grid>\n    )\n}\n","import React, { useEffect, useContext, useState } from \"react\"\n\nimport {\n    Button,\n    Grid,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    TextField,\n    InputAdornment,\n} from \"@material-ui/core\"\nimport IconButtonWithTooltip from \"../../ui/IconButtonWithTooltip\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport StopIcon from \"@material-ui/icons/Stop\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\"\nimport { Autocomplete } from \"@material-ui/lab\"\n\nimport ReadingFieldGrid from \"../../ReadingFieldGrid\"\nimport FieldDataSet from \"../../FieldDataSet\"\nimport ClassDataSetGrid from \"../../ClassDataSetGrid\"\nimport Trend from \"../../Trend\"\n\nimport useChange from \"../../../jacdac/useChange\"\nimport JacdacContext, { JacdacContextProps } from \"../../../jacdac/Context\"\n\nimport { arrayConcatMany } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { JDRegister } from \"../../../../jacdac-ts/src/jdom/register\"\nimport { isSensor } from \"../../../../jacdac-ts/src/jdom/spec\"\nimport { JDBus } from \"../../../../jacdac-ts/src/jdom/bus\"\nimport { REPORT_UPDATE } from \"../../../../jacdac-ts/src/jdom/constants\"\nimport { throttle } from \"../../../../jacdac-ts/src/jdom/utils\"\nimport { BlockSvg, FieldVariable, WorkspaceSvg } from \"blockly\"\nimport {\n    MB_CLASS_VAR_TYPE,\n    MODEL_BLOCKS,\n} from \"../../model-editor/modelblockdsl\"\nimport ExpandModelBlockField from \"../../blockly/fields/mb/ExpandModelBlockField\"\nimport ServiceManagerContext from \"../../ServiceManagerContext\"\n\nconst LIVE_HORIZON = 24\nfunction createDataSet(\n    bus: JDBus,\n    registers: JDRegister[],\n    name: string,\n    live: boolean,\n    palette: string[]\n) {\n    const fields = arrayConcatMany(registers.map(reg => reg.fields))\n    const colors = fields.map((f, i) => palette[i % palette.length])\n    const set = new FieldDataSet(bus, name, fields, colors)\n    if (live) set.maxRows = LIVE_HORIZON + 4\n\n    return set\n}\n\nexport default function BlocklyDataRecordingDialog(props: {\n    classes: any\n    chartPalette: string[]\n    open: boolean\n    onDone: (recording: FieldDataSet[], blockId: string) => void\n    recordingCount: number\n    workspace: WorkspaceSvg\n}) {\n    const { classes, chartPalette, open, onDone, recordingCount, workspace } =\n        props\n    const [dialogType, setDialogType] = useState<\n        \"chooseSensors\" | \"recordData\"\n    >(\"chooseSensors\")\n\n    const { fileStorage } = useContext(ServiceManagerContext)\n\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const readingRegisters = useChange(bus, bus =>\n        arrayConcatMany(\n            bus.devices().map(device =>\n                device\n                    .services()\n                    .filter(srv => isSensor(srv.specification))\n                    .map(srv => srv.readingRegister)\n            )\n        )\n    )\n\n    const getWorkspaceClasses = (): string[] => {\n        // get updated list of class variables\n        const classes = workspace\n            .getVariablesOfType(MB_CLASS_VAR_TYPE)\n            .map(function (classVar) {\n                return classVar.name\n            })\n        if (classes.length == 0) return [\"class1\"]\n        return classes\n    }\n\n    /* For choosing sensors */\n    const [registerIdsChecked, setRegisterIdsChecked] = useState<string[]>([])\n    const [totalSamples, setTotalSamples] = useState(0)\n    const [recordingName, setRecordingName] = useState(\n        \"recording\" + recordingCount\n    )\n    const [className, setClassName] = useState(\"class1\")\n\n    const [, setRecordingLength] = useState(0)\n\n    const handleRegisterCheck = (reg: JDRegister) => {\n        const i = registerIdsChecked.indexOf(reg.id)\n        if (i > -1) registerIdsChecked.splice(i, 1)\n        else registerIdsChecked.push(reg.id)\n\n        registerIdsChecked.sort()\n        setRegisterIdsChecked([...registerIdsChecked])\n    }\n\n    const handleRecordingNameChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setRecordingName(event.target.value.trim())\n    }\n\n    const handleClassNameChange = (newClassName: string) => {\n        setClassName(newClassName)\n    }\n\n    /* For recording data*/\n    const recordingRegisters = readingRegisters.filter(\n        reg => registerIdsChecked.indexOf(reg.id) > -1\n    )\n    const [isRecording, setIsRecording] = useState(false)\n    const [liveRecording, setLiveRecording] = useState<FieldDataSet>(undefined)\n    const [, setLiveDataTimestamp] = useState(0)\n    const [currentRecording] = useState({\n        recording: [],\n        blockId: \"\",\n    })\n\n    const [samplingIntervalDelay, setSamplingIntervalDelay] = useState(\"50\")\n    const [samplingDuration, setSamplingDuration] = useState(\"1\")\n\n    const samplingIntervalDelayi = parseInt(samplingIntervalDelay)\n    const samplingCount = Math.ceil(\n        (parseFloat(samplingDuration) * 1000) / samplingIntervalDelayi\n    )\n    const errorSamplingIntervalDelay =\n        isNaN(samplingIntervalDelayi) || !/\\d+/.test(samplingIntervalDelay)\n    const errorSamplingDuration = isNaN(samplingCount)\n    const error = errorSamplingDuration || errorSamplingIntervalDelay\n    const startEnabled = !!recordingRegisters?.length\n\n    const handleSamplingIntervalChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setSamplingIntervalDelay(event.target.value.trim())\n    }\n    const handleSamplingDurationChange = (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        setSamplingDuration(event.target.value.trim())\n    }\n    const newRecording = (registerIds: string[], live: boolean) =>\n        registerIds.length\n            ? createDataSet(\n                  bus,\n                  readingRegisters.filter(\n                      reg => registerIds.indexOf(reg.id) > -1\n                  ),\n                  `${recordingName}.${totalSamples}`,\n                  live,\n                  chartPalette\n              )\n            : undefined\n\n    const stopRecording = () => {\n        if (isRecording) {\n            // add new samples to recording\n            currentRecording.recording.push(liveRecording)\n            setTotalSamples(totalSamples + 1)\n\n            // refresh live recording\n            setLiveRecording(newRecording(registerIdsChecked, true))\n\n            // stop recording\n            setIsRecording(false)\n        }\n    }\n    const startRecording = async () => {\n        if (!isRecording && recordingRegisters.length) {\n            setLiveRecording(newRecording(registerIdsChecked, false))\n            setIsRecording(true)\n        }\n    }\n    const startStreamingRegisters = () => {\n        console.log(`start streaming`)\n        const streamers = recordingRegisters?.map(reg =>\n            reg.subscribe(REPORT_UPDATE, () => {})\n        )\n        return () => {\n            console.log(`stop streaming`)\n            streamers.map(streamer => streamer())\n        }\n    }\n    const toggleRecording = () => {\n        if (isRecording) stopRecording()\n        else startRecording()\n    }\n    const handleDeleteSample = (sample: FieldDataSet) => {\n        const i = currentRecording.recording.indexOf(sample)\n        if (i > -1) currentRecording.recording.splice(i, 1)\n    }\n    const updateLiveData = () => {\n        setLiveRecording(liveRecording)\n        setRecordingLength(liveRecording.rows.length)\n        setLiveDataTimestamp(bus.timestamp)\n    }\n    const throttleUpdate = throttle(() => updateLiveData(), 30)\n    // data collection\n    // interval add data entry\n    const addRow = (values?: number[]) => {\n        if (!liveRecording) return\n        //console.log(values)\n        liveRecording.addRow(values)\n        if (isRecording && liveRecording.length >= samplingCount) {\n            // stop recording\n            updateLiveData()\n            stopRecording()\n        } else {\n            throttleUpdate()\n        }\n    }\n    // setting interval\n    useEffect(() => {\n        if (error) return\n        console.log(`set interval to ${samplingIntervalDelayi}`)\n        recordingRegisters.forEach(reg =>\n            reg.sendSetPackedAsync(\"i32\", [samplingIntervalDelayi])\n        )\n    }, [samplingIntervalDelayi, registerIdsChecked, errorSamplingIntervalDelay])\n    // collecting\n    useEffect(() => {\n        if (error) return undefined\n        const interval = setInterval(() => addRow(), samplingIntervalDelayi)\n        const stopStreaming = startStreamingRegisters()\n\n        return () => {\n            clearInterval(interval)\n            stopStreaming()\n        }\n    }, [isRecording, dialogType, samplingIntervalDelayi, samplingCount])\n\n    /* For placing a block on the workspace */\n    const addNewRecording = () => {\n        // Create new block for this recording\n        if (className != null && className != undefined) {\n            // Get or create new class typed variable\n            // (createVariable will return an existing variable if one with a particular name already exists)\n            const classVar = workspace.createVariable(\n                className,\n                MB_CLASS_VAR_TYPE\n            )\n\n            // Create new recording block on the workspace\n            const newRecordingBlock = workspace.newBlock(\n                MODEL_BLOCKS + \"recording\"\n            ) as BlockSvg\n            currentRecording.blockId = newRecordingBlock.id\n\n            // Automatically insert the recording name into the new block\n            const recordingNameField = newRecordingBlock.getField(\n                \"RECORDING_NAME\"\n            ) as FieldVariable\n            recordingNameField.setValue(recordingName)\n\n            // Automatically insert the class name into the new block\n            const classNameField = newRecordingBlock.getField(\n                \"CLASS_NAME\"\n            ) as FieldVariable\n            classNameField.setValue(classVar.getId())\n\n            // Save recording data to block\n            const recordingBlockField = newRecordingBlock.getField(\n                \"EXPAND_BUTTON\"\n            ) as ExpandModelBlockField\n            const recordingBlockParams = {\n                parametersVisible: null,\n                numSamples: currentRecording.recording.length,\n                timestamp: currentRecording.recording[0].startTimestamp,\n                inputTypes: currentRecording.recording[0].headers,\n            }\n            recordingBlockField.updateFieldValue(recordingBlockParams)\n\n            newRecordingBlock.initSvg()\n            newRecordingBlock.render(false)\n            workspace.centerOnBlock(newRecordingBlock.id)\n        }\n    }\n\n    /* For interface controls */\n    const resetInputs = () => {\n        setClassName(\"class1\")\n        setRecordingName(\"recording\" + recordingCount)\n    }\n    const handleDownloadDataSet = () => {\n        const recordingCountHeader = `Number of recordings,${currentRecording.recording.length}`\n\n        const recordingData: string[] = []\n        currentRecording.recording.forEach(sample => {\n            recordingData.push(\n                \"Recording metadata,\" +\n                    sample.name +\n                    \",\" +\n                    sample.rows.length +\n                    \",\" +\n                    className\n            )\n            recordingData.push(sample.toCSV())\n        })\n        const recordData = recordingData.join(\"\\n\")\n\n        const csv: string[] = [recordingCountHeader, recordData]\n        fileStorage.saveText(`${recordingName}.csv`, csv.join(\"\\n\"))\n    }\n    const handleCancel = () => {\n        // reset the user inputs\n        resetInputs()\n        // close the modal\n        onDone(null, null)\n    }\n    const handleNext = () => {\n        // begin recording live data\n        setLiveRecording(newRecording(registerIdsChecked, true))\n\n        // go to the next page\n        setDialogType(\"recordData\")\n    }\n\n    const handleDone = () => {\n        // create new recording block\n        addNewRecording()\n\n        // reset the user inputs\n        resetInputs()\n\n        // call the done function and close modal\n        const { recording, blockId } = currentRecording\n        onDone(recording, blockId)\n    }\n\n    if (dialogType == \"chooseSensors\")\n        return (\n            <Dialog\n                open={open}\n                onClose={handleCancel}\n                fullWidth={true}\n                maxWidth={\"md\"}\n            >\n                <DialogContent>\n                    <Grid container direction={\"column\"}>\n                        <Grid item>\n                            <h2>Collect new recording</h2>\n                            {/* TODO Toggle button to get data from sensors vs upload from file */}\n                            <div key=\"sensors\">\n                                <div className={classes.row}>\n                                    <TextField\n                                        className={classes.field}\n                                        label=\"Recording name\"\n                                        value={recordingName}\n                                        variant=\"outlined\"\n                                        onChange={handleRecordingNameChange}\n                                    />\n                                    <Autocomplete\n                                        className={classes.field}\n                                        disabled={isRecording}\n                                        options={getWorkspaceClasses()}\n                                        style={{\n                                            width: 250,\n                                            display: \"inline-flex\",\n                                        }}\n                                        renderInput={params => (\n                                            <TextField\n                                                {...params}\n                                                label=\"Class label\"\n                                                variant=\"outlined\"\n                                            />\n                                        )}\n                                        value={className}\n                                        onInputChange={(event, newValue) =>\n                                            handleClassNameChange(newValue)\n                                        }\n                                    />\n                                </div>\n                                <div className={classes.row}>\n                                    <TextField\n                                        className={classes.field}\n                                        error={errorSamplingDuration}\n                                        disabled={isRecording}\n                                        label=\"Sampling duration\"\n                                        value={samplingDuration}\n                                        variant=\"outlined\"\n                                        InputProps={{\n                                            startAdornment: (\n                                                <InputAdornment position=\"start\">\n                                                    s\n                                                </InputAdornment>\n                                            ),\n                                        }}\n                                        onChange={handleSamplingDurationChange}\n                                    />\n                                    <TextField\n                                        className={classes.field}\n                                        error={errorSamplingIntervalDelay}\n                                        disabled={isRecording}\n                                        label=\"Sampling interval\"\n                                        value={samplingIntervalDelay}\n                                        variant=\"outlined\"\n                                        InputProps={{\n                                            startAdornment: (\n                                                <InputAdornment position=\"start\">\n                                                    ms\n                                                </InputAdornment>\n                                            ),\n                                        }}\n                                        onChange={handleSamplingIntervalChange}\n                                    />\n                                </div>\n                                <h3>Collect data from</h3>\n                                {!readingRegisters.length && (\n                                    <span>Waiting for sensors...</span>\n                                )}\n                                {!!readingRegisters.length && (\n                                    <ReadingFieldGrid\n                                        readingRegisters={readingRegisters}\n                                        registerIdsChecked={registerIdsChecked}\n                                        recording={isRecording}\n                                        liveDataSet={liveRecording}\n                                        handleRegisterCheck={\n                                            handleRegisterCheck\n                                        }\n                                    />\n                                )}\n                            </div>\n                        </Grid>\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        endIcon={<NavigateNextIcon />}\n                        disabled={!registerIdsChecked.length}\n                        onClick={handleNext}\n                    >\n                        Next\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        )\n    else\n        return (\n            // recordData\n            <Dialog\n                open={open}\n                onClose={handleCancel}\n                fullWidth={true}\n                maxWidth={\"md\"}\n            >\n                <DialogContent>\n                    <Grid container direction={\"column\"}>\n                        <Grid item>\n                            <h3>Edit recording: {recordingName}</h3>\n                            <div key=\"recordedData\">\n                                <div key=\"recordings\">\n                                    <h4>\n                                        Recorded samples\n                                        <IconButtonWithTooltip\n                                            onClick={handleDownloadDataSet}\n                                            title=\"Download all recording data\"\n                                            disabled={\n                                                currentRecording.recording\n                                                    .length == 0\n                                            }\n                                        >\n                                            <DownloadIcon />\n                                        </IconButtonWithTooltip>\n                                    </h4>\n                                    {currentRecording.recording.length ? (\n                                        <ClassDataSetGrid\n                                            key={\"samples-\" + recordingName}\n                                            label={className}\n                                            tables={currentRecording.recording}\n                                            handleDeleteTable={\n                                                handleDeleteSample\n                                            }\n                                        />\n                                    ) : (\n                                        <span>None</span>\n                                    )}\n                                </div>\n                            </div>\n                        </Grid>\n                        <Grid item>\n                            <br />\n                        </Grid>\n                        <Grid item>\n                            <div key=\"record\">\n                                <div className={classes.row}>\n                                    <h4>Add more samples</h4>\n                                    <Button\n                                        size=\"large\"\n                                        variant=\"contained\"\n                                        color={\n                                            isRecording\n                                                ? \"secondary\"\n                                                : \"primary\"\n                                        }\n                                        aria-label=\"start/stop recording\"\n                                        title=\"start/stop recording\"\n                                        onClick={toggleRecording}\n                                        startIcon={\n                                            isRecording ? (\n                                                <StopIcon />\n                                            ) : (\n                                                <PlayArrowIcon />\n                                            )\n                                        }\n                                        disabled={!startEnabled}\n                                    >\n                                        {isRecording ? \"Stop\" : \"Start\"}\n                                    </Button>\n                                </div>\n                            </div>\n                            <div key=\"liveData\">\n                                {liveRecording && (\n                                    <Trend\n                                        key=\"trends\"\n                                        height={12}\n                                        dataSet={liveRecording}\n                                        horizon={LIVE_HORIZON}\n                                        dot={true}\n                                        gradient={true}\n                                    />\n                                )}\n                            </div>\n                        </Grid>\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"contained\" onClick={handleCancel}>\n                        Cancel\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        endIcon={<NavigateNextIcon />}\n                        disabled={!currentRecording.recording.length}\n                        onClick={handleDone}\n                    >\n                        Done\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        )\n}\n"],"names":["React","Card","CardContent","CardHeader","Grid","IconButton","DeleteIcon","Trend","ClassDataSetGrid","props","label","tables","handleDeleteTable","handleDelete","table","length","map","id","CardActions","createStyles","makeStyles","useGridBreakpoints","FiberManualRecordIcon","useDeviceName","SwitchWithLabel","useStyles","vmiddle","verticalAlign","ReadingFieldGridItem","register","handleRegisterCheck","recording","registerChecked","liveDataSet","service","device","gridBreakpoints","classes","deviceName","handleCheck","name","fields","field","color","colorOf","ReadingFieldGrid","readingRegisters","registerIdsChecked","indexOf","useEffect","useContext","useState","Button","Dialog","DialogActions","DialogContent","TextField","InputAdornment","IconButtonWithTooltip","PlayArrowIcon","StopIcon","DownloadIcon","NavigateNextIcon","Autocomplete","FieldDataSet","useChange","JacdacContext","arrayConcatMany","isSensor","REPORT_UPDATE","throttle","MB_CLASS_VAR_TYPE","MODEL_BLOCKS","ServiceManagerContext","LIVE_HORIZON","createDataSet","bus","registers","live","palette","reg","colors","f","i","set","maxRows","BlocklyDataRecordingDialog","chartPalette","open","onDone","recordingCount","workspace","dialogType","setDialogType","fileStorage","devices","services","filter","srv","specification","readingRegister","getWorkspaceClasses","getVariablesOfType","classVar","setRegisterIdsChecked","totalSamples","setTotalSamples","recordingName","setRecordingName","className","setClassName","setRecordingLength","splice","push","sort","handleRecordingNameChange","event","target","value","trim","handleClassNameChange","newClassName","recordingRegisters","isRecording","setIsRecording","liveRecording","setLiveRecording","undefined","setLiveDataTimestamp","currentRecording","blockId","samplingIntervalDelay","setSamplingIntervalDelay","samplingDuration","setSamplingDuration","samplingIntervalDelayi","parseInt","samplingCount","Math","ceil","parseFloat","errorSamplingIntervalDelay","isNaN","test","errorSamplingDuration","error","startEnabled","handleSamplingIntervalChange","handleSamplingDurationChange","newRecording","registerIds","stopRecording","startRecording","startStreamingRegisters","console","log","streamers","subscribe","streamer","toggleRecording","handleDeleteSample","sample","updateLiveData","rows","timestamp","throttleUpdate","addRow","values","forEach","sendSetPackedAsync","interval","setInterval","stopStreaming","clearInterval","addNewRecording","createVariable","newRecordingBlock","newBlock","recordingNameField","getField","setValue","classNameField","getId","recordingBlockField","recordingBlockParams","parametersVisible","numSamples","startTimestamp","inputTypes","headers","updateFieldValue","initSvg","render","centerOnBlock","resetInputs","handleDownloadDataSet","recordingCountHeader","recordingData","toCSV","recordData","join","csv","saveText","handleCancel","handleNext","handleDone","row","width","display","params","newValue","startAdornment"],"sourceRoot":""}