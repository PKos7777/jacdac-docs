{"version":3,"sources":["webpack:///./node_modules/@material-ui/core/esm/Card/Card.js","webpack:///./node_modules/@material-ui/icons/NotificationsNone.js","webpack:///./src/components/devices/useDeviceStatusLightStyle.ts","webpack:///./node_modules/@material-ui/core/esm/CardHeader/CardHeader.js","webpack:///./node_modules/@material-ui/icons/BubbleChart.js","webpack:///./node_modules/@material-ui/icons/Reply.js","webpack:///./node_modules/@material-ui/icons/FlashOn.js","webpack:///./node_modules/@material-ui/icons/Computer.js","webpack:///./node_modules/@material-ui/icons/Create.js","webpack:///./node_modules/@material-ui/icons/ConfirmationNumber.js","webpack:///./node_modules/@material-ui/icons/DeviceHub.js","webpack:///./src/jacdac/useDeviceSpecification.ts","webpack:///./node_modules/@material-ui/icons/DataUsage.js","webpack:///./src/components/KindIcon.tsx","webpack:///./jacdac-ts/src/jdom/color.ts","webpack:///./src/components/hooks/useLedAnimationStyle.ts","webpack:///./node_modules/@material-ui/icons/Lock.js","webpack:///./node_modules/@material-ui/icons/DeviceUnknown.js","webpack:///./node_modules/@material-ui/icons/BlurLinear.js","webpack:///./src/components/devices/useDeviceImage.ts","webpack:///./src/jacdac/useRegisterValue.ts","webpack:///./node_modules/@material-ui/core/esm/CardContent/CardContent.js","webpack:///./node_modules/@material-ui/core/esm/internal/svg-icons/Person.js","webpack:///./node_modules/@material-ui/core/esm/Avatar/Avatar.js","webpack:///./src/components/devices/DeviceAvatar.tsx","webpack:///./node_modules/@material-ui/icons/CallToAction.js"],"names":["statusHue","statusSaturation","bootloaderAnimation","identifyAnimation","startupAnimation","connectedAnimation","disconnectedAnimation","panicFrames","statusAnimation","status","useDeviceStatusLightStyle","device","options","register","useChange","d","service","ControlReg","StatusLight","bootloader","hasService","SRV_BOOTLOADER","identifying","registerAnimation","useRegisterUnpackedValue","animation","useLedAnimationStyle","useDeviceSpecification","firmwareIdentifierRegister","FirmwareIdentifier","firmwareIdentifier","useRegisterIntValue","specification","deviceSpecificationFromFirmwareIdentifier","KindIcon","props","kind","className","icon","PACKET_KIND_RO","PACKET_KIND_RW","PACKET_KIND_ANNOUNCE","CONST_NODE_NAME","COMMAND_NODE_NAME","EVENT_NODE_NAME","REPORT_NODE_NAME","BUS_NODE_NAME","DEVICE_NODE_NAME","VIRTUAL_DEVICE_NODE_NAME","SERVICE_NODE_NAME","PIPE_NODE_NAME","PIPE_REPORT_NODE_NAME","CRC_ACK_NODE_NAME","kindName","allKinds","hsvToCss","hue","saturation","value","brightness","monochrome","csshue","csssat","cssval","hsv_to_hsl","h","s","l","mixl","alpha","v","interpolate","frames","time","framet","nframes","length","i","frame","frame1","ratio","ratiom1","repetitions","cssProperty","step","interval","useMemo","helmetStyle","undefined","Math","random","replace","DURATION","property","total8ms","reduce","t","row","totals","kf","t8ms","forEach","sat","duration","csscolor","percent","roundWithPrecision","KEYFRAME_DURATION","nkframes","ceil","kframei","kt","round","map","toString","join","useDeviceImage","suffix","withPrefix","identifierToUrlPath","id","useRegisterHumanValue","useState","humanValue","setValue","useEffect","subscribe","REPORT_UPDATE","intValue","unpackedValue","useRegisterStringValue","stringValue","useRegisterBoolValue","boolValue","useStyles","makeStyles","theme","createStyles","img","marginTop","small","width","spacing","height","large","DeviceAvatar","showMissing","size","imageUrl","name","useDeviceName","classes","sizeClassName","host","useDeviceHost","statusLEDClassName","statusLEDHelmetStyle","handleIdentify","identify"],"mappings":"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","file":"867abfacdeb9b3fcc19a7416df186c3afde55a6e-254ae847cd3c096f0b00.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = /*#__PURE__*/React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z\"\n}), 'NotificationsNone');\n\nexports.default = _default;","import { LedAnimationData, LedAnimationFrame } from \"../../../jacdac-ts/src/hosts/ledservicehost\";\nimport { ControlReg, SRV_BOOTLOADER } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport useChange from \"../../jacdac/useChange\";\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\";\nimport useLedAnimationStyle, { LedAnimationProps } from \"../hooks/useLedAnimationStyle\";\n\nconst statusHue = 32\nconst statusSaturation = 255\n\n//Every 524ms it changes from 5.9% and 1.6% (i.e. 1 sec duty cycle)\nconst bootloaderAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 96, 524 / 8],\n        [statusHue, statusSaturation, 96, 0.1],\n        [statusHue, statusSaturation, 72, 524 / 8],\n        [statusHue, statusSaturation, 72, 0.1],\n    ]\n];\n// 50ms every 150ms (50 on, 100 off) seven times (i.e. for 1 second)\nconst identifyAnimation: LedAnimationData = [\n    7,\n    [\n        [statusHue, statusSaturation, 255, 50 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, 0, 100 / 8],\n        [statusHue, statusSaturation, 0, 0.1],\n    ]\n];\n// lights at 100% for 270ms, then 5.9% for rest of 530ms, \n// then goes into application that turns it on full for 200ms\nconst startupAnimation: LedAnimationData = [\n    1,\n    [\n        [statusHue, statusSaturation, 255, 270 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, 6 / 100 * 0xff, 530 / 8],\n        [statusHue, statusSaturation, 6 / 100 * 0xff, 0.1],\n        [statusHue, statusSaturation, 255, 200 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, 0, 0.1],\n    ]\n];\n// Synchronized fast blink 50us every 500ms\nconst connectedAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 0, 500 / 8],\n        [statusHue, statusSaturation, 0, 0.1],\n        [statusHue, statusSaturation, 96, 24 / 8],\n        [statusHue, statusSaturation, 96, 0.1],\n        [statusHue, statusSaturation, 0, 0.1],\n    ]\n];\n//5ms every 250ms\nconst disconnectedAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 128, 40 / 8],\n        [statusHue, statusSaturation, 128, 0.1],\n        [statusHue, statusSaturation, 16, 250 / 8],\n        [statusHue, statusSaturation, 16, 0.1],\n    ]\n];\n// fast blink 70ms on, 70ms off - 30 times (4.2 seconds) before a reboot\nconst panicFrames: LedAnimationData = [\n    30,\n    [\n        [statusHue, statusSaturation, 128, 70 / 8],\n        [statusHue, statusSaturation, 128, 0.1],\n        [statusHue, statusSaturation, 16, 70 / 8],\n        [statusHue, statusSaturation, 16, 0.1],\n    ]\n];\n\nexport type LEDStatus = \"startup\" | \"identify\" | \"connected\" | \"disconnected\" | \"panic\" | \"bootloader\";\n\nexport function statusAnimation(status: LEDStatus): LedAnimationData {\n    switch (status) {\n        case \"startup\": return startupAnimation;\n        case \"identify\": return identifyAnimation;\n        case \"connected\": return connectedAnimation;\n        case \"disconnected\": return disconnectedAnimation;\n        case \"panic\": return panicFrames;\n        case \"bootloader\": return bootloaderAnimation;\n        default: return [0, []];\n    }\n}\n\nexport default function useDeviceStatusLightStyle(device: JDDevice, options?: LedAnimationProps) {\n    const register = useChange(device, d => d.service(0).register(ControlReg.StatusLight));\n    const bootloader = useChange(device, d => d.hasService(SRV_BOOTLOADER));\n    const identifying = useChange(device, d => d?.identifying)\n    const registerAnimation = useRegisterUnpackedValue<LedAnimationData>(register) || [0, []];\n\n    // pick animation step\n    const animation: LedAnimationData = identifying ? identifyAnimation\n        : bootloader ? bootloaderAnimation\n            : registerAnimation;\n\n    return useLedAnimationStyle(animation, options);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 16\n  },\n\n  /* Styles applied to the avatar element. */\n  avatar: {\n    flex: '0 0 auto',\n    marginRight: 16\n  },\n\n  /* Styles applied to the action element. */\n  action: {\n    flex: '0 0 auto',\n    alignSelf: 'flex-start',\n    marginTop: -8,\n    marginRight: -8\n  },\n\n  /* Styles applied to the content wrapper element. */\n  content: {\n    flex: '1 1 auto'\n  },\n\n  /* Styles applied to the title Typography element. */\n  title: {},\n\n  /* Styles applied to the subheader Typography element. */\n  subheader: {}\n};\nvar CardHeader = /*#__PURE__*/React.forwardRef(function CardHeader(props, ref) {\n  var action = props.action,\n      avatar = props.avatar,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      subheaderProp = props.subheader,\n      subheaderTypographyProps = props.subheaderTypographyProps,\n      titleProp = props.title,\n      titleTypographyProps = props.titleTypographyProps,\n      other = _objectWithoutProperties(props, [\"action\", \"avatar\", \"classes\", \"className\", \"component\", \"disableTypography\", \"subheader\", \"subheaderTypographyProps\", \"title\", \"titleTypographyProps\"]);\n\n  var title = titleProp;\n\n  if (title != null && title.type !== Typography && !disableTypography) {\n    title = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'h5',\n      className: classes.title,\n      component: \"span\",\n      display: \"block\"\n    }, titleTypographyProps), title);\n  }\n\n  var subheader = subheaderProp;\n\n  if (subheader != null && subheader.type !== Typography && !disableTypography) {\n    subheader = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'body1',\n      className: classes.subheader,\n      color: \"textSecondary\",\n      component: \"span\",\n      display: \"block\"\n    }, subheaderTypographyProps), subheader);\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), avatar && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.avatar\n  }, avatar), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content\n  }, title, subheader), action && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.action\n  }, action));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardHeader'\n})(CardHeader);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"7.2\",\n  cy: \"14.4\",\n  r: \"3.2\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"14.8\",\n  cy: \"18\",\n  r: \"2\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"15.2\",\n  cy: \"8.8\",\n  r: \"4.8\"\n})), 'BubbleChart');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z\"\n}), 'Reply');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 2v11h3v9l7-12h-4l4-8z\"\n}), 'FlashOn');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z\"\n}), 'Computer');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Create');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22 10V6c0-1.11-.9-2-2-2H4c-1.1 0-1.99.89-1.99 2v4c1.1 0 1.99.9 1.99 2s-.89 2-2 2v4c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-4c-1.1 0-2-.9-2-2s.9-2 2-2zm-9 7.5h-2v-2h2v2zm0-4.5h-2v-2h2v2zm0-4.5h-2v-2h2v2z\"\n}), 'ConfirmationNumber');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 16l-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z\"\n}), 'DeviceHub');\n\nexports.default = _default;","import { ControlReg } from \"../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\";\nimport { deviceSpecificationFromFirmwareIdentifier } from \"../../jacdac-ts/src/jdom/spec\";\nimport { useRegisterIntValue } from \"./useRegisterValue\";\n\nexport default function useDeviceSpecification(device: JDDevice) {\n    const firmwareIdentifierRegister = device?.service(0)?.register(ControlReg.FirmwareIdentifier);\n    const firmwareIdentifier = useRegisterIntValue(firmwareIdentifierRegister);\n    const specification = deviceSpecificationFromFirmwareIdentifier(firmwareIdentifier);\n    return specification;\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.48 2.54l2.6 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95zM12 19c-3.87 0-7-3.13-7-7 0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95 0 5.52 4.47 10 9.99 10 3.31 0 6.24-1.61 8.06-4.09l-2.6-1.53C16.17 17.98 14.21 19 12 19z\"\n}), 'DataUsage');\n\nexports.default = _default;","import React from \"react\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport CreateIcon from '@material-ui/icons/Create';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LockIcon from '@material-ui/icons/Lock';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport CallToActionIcon from '@material-ui/icons/CallToAction';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DataUsageIcon from '@material-ui/icons/DataUsage';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ReplyIcon from '@material-ui/icons/Reply';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeviceUnknownIcon from '@material-ui/icons/DeviceUnknown';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeviceHubIcon from '@material-ui/icons/DeviceHub';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport BubbleChartIcon from '@material-ui/icons/BubbleChart';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ComputerIcon from '@material-ui/icons/Computer';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport BlurLinearIcon from '@material-ui/icons/BlurLinear';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone';\nimport {\n    PACKET_KIND_RO, PACKET_KIND_RW, CONST_NODE_NAME, COMMAND_NODE_NAME,\n    REPORT_NODE_NAME, BUS_NODE_NAME, DEVICE_NODE_NAME, VIRTUAL_DEVICE_NODE_NAME,\n    SERVICE_NODE_NAME, EVENT_NODE_NAME, PIPE_NODE_NAME, CRC_ACK_NODE_NAME, PIPE_REPORT_NODE_NAME, PACKET_KIND_ANNOUNCE\n} from \"../../jacdac-ts/src/jdom/constants\";\nimport JacdacIcon from \"./icons/JacdacIcon\";\n\nexport default function KindIcon(props: { kind: string, className?: string }) {\n    const { kind, className } = props\n    let icon: JSX.Element;\n    switch (kind) {\n        case PACKET_KIND_RO: icon = <DataUsageIcon className={className} />; break;\n        case PACKET_KIND_RW: icon = <CreateIcon className={className} />; break;\n        case PACKET_KIND_ANNOUNCE: icon = <NotificationsNoneIcon className={className} />; break;\n        case CONST_NODE_NAME: icon = <LockIcon className={className} />; break;\n        case COMMAND_NODE_NAME: icon = <CallToActionIcon className={className} />; break;\n        case EVENT_NODE_NAME: icon = <FlashOnIcon className={className} />; break;\n        case REPORT_NODE_NAME: icon = <ReplyIcon className={className} />; break;\n        case BUS_NODE_NAME: icon = <DeviceHubIcon className={className} />; break;\n        case DEVICE_NODE_NAME: icon = <JacdacIcon className={className} />; break;\n        case VIRTUAL_DEVICE_NODE_NAME: icon = <ComputerIcon className={className} />; break;\n        case SERVICE_NODE_NAME: icon = <BubbleChartIcon className={className} />; break;\n        case PIPE_NODE_NAME: icon = <BlurLinearIcon className={className} />; break;\n        case PIPE_REPORT_NODE_NAME: icon = <BlurLinearIcon className={className} />; break;\n        case CRC_ACK_NODE_NAME: icon = <ConfirmationNumberIcon className={className} />; break;\n        default: icon = <DeviceUnknownIcon className={className} />; break;\n    }\n    return icon;\n}\n\nexport function kindName(kind: string) {\n    switch (kind) {\n        case PACKET_KIND_RO: return \"read only\";\n        case PACKET_KIND_RW: return \"read write\";\n        case VIRTUAL_DEVICE_NODE_NAME: return \"simulated device\";\n        default: return kind\n    }\n}\n\nexport function allKinds() {\n    return [REPORT_NODE_NAME,\n        PACKET_KIND_RW,\n        PACKET_KIND_RO,\n        CONST_NODE_NAME,\n        EVENT_NODE_NAME,\n        COMMAND_NODE_NAME,\n    ]\n}\n","export function hsvToCss(hue: number, saturation: number, value: number, brightness: number, monochrome?: boolean) {\n    const csshue = hue * 360 / 0xff;\n    const csssat = (monochrome ? 0xff : saturation) / 0xff;\n    const cssval = value / 0xff;\n    const [h, s, l] = hsv_to_hsl(csshue, csssat, cssval)\n    const mixl = 0.3;\n    const alpha = (mixl + (1 - mixl) * l) * brightness;\n\n    return `hsla(${h}, ${s * 100}%, ${l * 100}%, ${alpha}`\n}\n\nfunction hsv_to_hsl(h: number, s: number, v: number) {\n    // both hsv and hsl values are in [0, 1]\n    const l = (2 - s) * v / 2;\n\n    if (l != 0) {\n        if (l == 1) {\n            s = 0\n        } else if (l < 0.5) {\n            s = s * v / (l * 2)\n        } else {\n            s = s * v / (2 - l * 2)\n        }\n    }\n\n    return [h, s, l]\n}","import { useMemo } from \"react\";\nimport { useId } from \"react-use-id-hook\"\nimport { LedAnimationData, LedAnimationFrame } from \"../../../jacdac-ts/src/hosts/ledservicehost\";\nimport { hsvToCss } from \"../../../jacdac-ts/src/jdom/color\";\nimport { roundWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\";\n\nexport interface LedAnimationProps {\n    monochrome?: boolean,\n    cssProperty?: \"border\" | \"background-color\" | \"color\" | \"fill\" | \"stroke\",\n    step?: boolean,\n    repeat?: number,\n    interval?: number\n}\n\nfunction interpolate(frames: LedAnimationFrame[], time: number) {\n    let framet = 0;\n    const nframes = frames.length;\n    for (let i = 0; i < nframes; ++i) {\n        const frame = frames[i];\n        if (i == nframes - 1 || (time >= framet && time < framet + frame[3])) {\n            // found time interval\n            const frame1 = i == nframes - 1 ? frames[0] : frames[i + 1]\n            const ratio = (time - framet) / frame[3];\n            const ratiom1 = 1 - ratio;\n            return {\n                hue: ratio * frame[0] + ratiom1 * frame1[0],\n                saturation: ratio * frame[1] + ratiom1 * frame1[1],\n                value: ratio * frame[2] + ratiom1 * frame1[2],\n            }\n        } else {\n            // keep adding time\n            framet += frame[3]; // current start time of frame\n        }\n    }\n\n    return { hue: 0, saturation: 0, value: 0 };\n}\n\nexport default function useLedAnimationStyle(animation: LedAnimationData, options?: LedAnimationProps) {\n    const [repetitions, frames] = animation;\n    const { monochrome, cssProperty, step, interval } = options || {};\n    // generate a CSS animation for the curren frames\n    const { helmetStyle, className } = useMemo(() => {\n        if (!frames?.length || repetitions < 0)\n            return { className: \"\", helmetStyle: undefined }\n\n        const className = \"a-\" + (Math.random() + \"\").replace(/^.*\\./, '');\n        const DURATION = 3;\n        const property = cssProperty || \"background-color\";\n        const total8ms = frames.reduce((t, row) => t + row[DURATION], 0);\n        const totals = (total8ms * 8) / 1000 + (interval || 0) / 1000;\n\n        let kf = `@keyframes ${className} {\\n`;\n        if (step) {\n            let t8ms = 0;\n            frames.forEach(frame => {\n                const [hue, sat, value, duration] = frame;\n                const csscolor = hsvToCss(hue, sat, value, 0xff, monochrome)\n                const percent = (t8ms * 8 / 1000) / totals * 100;\n                kf += `  ${roundWithPrecision(percent, 5)}% { ${property}: ${csscolor}); }\\n`\n                t8ms += duration;\n               // console.log({ total8ms, totals, t8ms, duration, percent })\n            })\n        } else {\n            // 30fps\n            const KEYFRAME_DURATION = 30 >> 3;\n            const nkframes = Math.ceil(total8ms / KEYFRAME_DURATION);\n            for (let kframei = 0; kframei < nkframes; ++kframei) {\n                const kt = kframei / (nkframes) * total8ms;\n                const { hue, saturation, value } = interpolate(frames, kt);\n                // generate new keyframe\n                const percent = Math.round(kframei / (nkframes - 1) * 100)\n                const csscolor = hsvToCss(hue, saturation, value, 0xff, monochrome)\n                kf += `  ${roundWithPrecision(percent, 5)}% { ${property}: ${csscolor}); }\\n`\n            }\n        }\n\n        kf += `}\\n`; // @keyframes\n        // class\n        kf += `.${className} {\nanimation-duration: ${totals}s;\nanimation-name: ${className};\nanimation-delay: 0s;\nanimation-timing-function: linear;\nanimation-iteration-count: ${!repetitions ? 'infinite' : repetitions};\n}`;\n        return {\n            helmetStyle: kf,\n            className\n        }\n    }, [frames?.map(frame => frame.toString()).join(), monochrome, step, cssProperty, interval, repetitions]);\n\n    return { className, helmetStyle }\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z\"\n}), 'Lock');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 18H7V5h10v14zM12 6.72c-1.96 0-3.5 1.52-3.5 3.47h1.75c0-.93.82-1.75 1.75-1.75s1.75.82 1.75 1.75c0 1.75-2.63 1.57-2.63 4.45h1.76c0-1.96 2.62-2.19 2.62-4.45 0-1.96-1.54-3.47-3.5-3.47zm-.88 8.8h1.76v1.76h-1.76z\"\n}), 'DeviceUnknown');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 17.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 13c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zM3 21h18v-2H3v2zM5 9.5c.83 0 1.5-.67 1.5-1.5S5.83 6.5 5 6.5 3.5 7.17 3.5 8 4.17 9.5 5 9.5zm0 4c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 17c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm8-.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM3 3v2h18V3H3zm14 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm0 4c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM13 9c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1z\"\n}), 'BlurLinear');\n\nexports.default = _default;","import { withPrefix } from \"gatsby-link\";\nimport { identifierToUrlPath } from \"../../../jacdac-ts/src/jdom/spec\";\n\nexport default function useDeviceImage(specification: jdspec.DeviceSpec, suffix?: string) {\n    return specification && withPrefix(`images/devices/${identifierToUrlPath(specification.id)}${suffix ? `.${suffix}` : ''}.jpg`);\n}\n","import React, { useEffect, useState } from \"react\";\nimport { REPORT_UPDATE } from \"../../jacdac-ts/src/jdom/constants\";\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\";\n\nexport function useRegisterHumanValue(register: JDRegister): string {\n    const [value, setValue] = useState<string>(register?.humanValue)\n    // update value\n    useEffect(() => register?.subscribe(REPORT_UPDATE, () => {\n        setValue(register?.humanValue)\n    }), [register])\n    return value;\n}\n\nexport function useRegisterIntValue(register: JDRegister): number {\n    const [value, setValue] = useState<number>(register?.intValue)\n    // update value\n    useEffect(() => register?.subscribe(REPORT_UPDATE, () => {\n        setValue(register?.intValue)\n    }), [register])\n    return value;\n}\n\nexport function useRegisterUnpackedValue<T extends any[]>(register: JDRegister): T {\n    const [value, setValue] = useState<T>(register?.unpackedValue as T)\n    useEffect(() => register?.subscribe(REPORT_UPDATE, () => {\n        setValue(register?.unpackedValue as T)\n    }), [register])\n    return value || ([] as T);\n}\n\nexport function useRegisterStringValue(register: JDRegister): string {\n    const [value, setValue] = useState<string>(register?.stringValue)\n    // update value\n    useEffect(() => register?.subscribe(REPORT_UPDATE, () => {\n        setValue(register?.stringValue)\n    }), [register])\n    return value;\n}\n\nexport function useRegisterBoolValue(register: JDRegister): boolean {\n    const [value, setValue] = useState<boolean>(register?.boolValue)\n    // update value\n    useEffect(() => register?.subscribe(REPORT_UPDATE, () => {\n        setValue(register?.boolValue)\n    }), [register])\n    return value;\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  }\n};\nvar CardContent = /*#__PURE__*/React.forwardRef(function CardContent(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardContent'\n})(CardContent);","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'Person');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport Person from '../internal/svg-icons/Person';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexShrink: 0,\n      width: 40,\n      height: 40,\n      fontFamily: theme.typography.fontFamily,\n      fontSize: theme.typography.pxToRem(20),\n      lineHeight: 1,\n      borderRadius: '50%',\n      overflow: 'hidden',\n      userSelect: 'none'\n    },\n\n    /* Styles applied to the root element if not `src` or `srcSet`. */\n    colorDefault: {\n      color: theme.palette.background.default,\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[600]\n    },\n\n    /* Styles applied to the root element if `variant=\"circle\"`. */\n    circle: {},\n\n    /* Styles applied to the root element if `variant=\"circular\"`. */\n    circular: {},\n\n    /* Styles applied to the root element if `variant=\"rounded\"`. */\n    rounded: {\n      borderRadius: theme.shape.borderRadius\n    },\n\n    /* Styles applied to the root element if `variant=\"square\"`. */\n    square: {\n      borderRadius: 0\n    },\n\n    /* Styles applied to the img element if either `src` or `srcSet` is defined. */\n    img: {\n      width: '100%',\n      height: '100%',\n      textAlign: 'center',\n      // Handle non-square image. The property isn't supported by IE 11.\n      objectFit: 'cover',\n      // Hide alt text.\n      color: 'transparent',\n      // Hide the image broken icon, only works on Chrome.\n      textIndent: 10000\n    },\n\n    /* Styles applied to the fallback icon */\n    fallback: {\n      width: '75%',\n      height: '75%'\n    }\n  };\n};\n\nfunction useLoaded(_ref) {\n  var src = _ref.src,\n      srcSet = _ref.srcSet;\n\n  var _React$useState = React.useState(false),\n      loaded = _React$useState[0],\n      setLoaded = _React$useState[1];\n\n  React.useEffect(function () {\n    if (!src && !srcSet) {\n      return undefined;\n    }\n\n    setLoaded(false);\n    var active = true;\n    var image = new Image();\n    image.src = src;\n    image.srcSet = srcSet;\n\n    image.onload = function () {\n      if (!active) {\n        return;\n      }\n\n      setLoaded('loaded');\n    };\n\n    image.onerror = function () {\n      if (!active) {\n        return;\n      }\n\n      setLoaded('error');\n    };\n\n    return function () {\n      active = false;\n    };\n  }, [src, srcSet]);\n  return loaded;\n}\n\nvar Avatar = /*#__PURE__*/React.forwardRef(function Avatar(props, ref) {\n  var alt = props.alt,\n      childrenProp = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      imgProps = props.imgProps,\n      sizes = props.sizes,\n      src = props.src,\n      srcSet = props.srcSet,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'circle' : _props$variant,\n      other = _objectWithoutProperties(props, [\"alt\", \"children\", \"classes\", \"className\", \"component\", \"imgProps\", \"sizes\", \"src\", \"srcSet\", \"variant\"]);\n\n  var children = null; // Use a hook instead of onError on the img element to support server-side rendering.\n\n  var loaded = useLoaded({\n    src: src,\n    srcSet: srcSet\n  });\n  var hasImg = src || srcSet;\n  var hasImgNotFailing = hasImg && loaded !== 'error';\n\n  if (hasImgNotFailing) {\n    children = /*#__PURE__*/React.createElement(\"img\", _extends({\n      alt: alt,\n      src: src,\n      srcSet: srcSet,\n      sizes: sizes,\n      className: classes.img\n    }, imgProps));\n  } else if (childrenProp != null) {\n    children = childrenProp;\n  } else if (hasImg && alt) {\n    children = alt[0];\n  } else {\n    children = /*#__PURE__*/React.createElement(Person, {\n      className: classes.fallback\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, classes.system, classes[variant], className, !hasImgNotFailing && classes.colorDefault),\n    ref: ref\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAvatar'\n})(Avatar);","import { Avatar, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\nimport { VIRTUAL_DEVICE_NODE_NAME } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\";\nimport CmdButton from \"../CmdButton\";\nimport useDeviceHost from \"../hooks/useDeviceHost\";\nimport KindIcon from \"../KindIcon\"\nimport useDeviceStatusLightStyle from \"./useDeviceStatusLightStyle\";\nimport Helmet from \"react-helmet\"\nimport useDeviceName from \"../useDeviceName\";\nimport useDeviceImage from \"./useDeviceImage\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    img: {\n      marginTop: \"58%\",\n    },\n    small: {\n      width: theme.spacing(3),\n      height: theme.spacing(3),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n  }),\n);\n\nexport default function DeviceAvatar(props: { device: JDDevice, showMissing?: boolean, size?: \"small\" | \"large\" }) {\n  const { device, showMissing, size } = props;\n  const specification = useDeviceSpecification(device);\n  const imageUrl = useDeviceImage(specification, \"avatar\")\n  const name = useDeviceName(device);\n  const classes = useStyles();\n  const sizeClassName = size === \"small\" ? classes.small : size === \"large\" ? classes.large : undefined;\n  const host = useDeviceHost(device);\n  const {\n    className: statusLEDClassName,\n    helmetStyle: statusLEDHelmetStyle } = useDeviceStatusLightStyle(device)\n\n  if (!showMissing && (!host && !imageUrl))\n    return null;\n  const handleIdentify = async () => await device.identify();\n  return <>\n    {statusLEDHelmetStyle && <Helmet><style>{statusLEDHelmetStyle}</style></Helmet>}\n    <CmdButton\n      trackName=\"device.identify\"\n      size=\"small\"\n      title={`identify ${host ? \"simulator\" : \"device\"} ${name}`}\n      onClick={handleIdentify}\n      className={statusLEDClassName}\n      icon={host ? <KindIcon kind={VIRTUAL_DEVICE_NODE_NAME} /> : <Avatar\n        className={sizeClassName}\n        alt={specification?.name || \"Image of the device\"}\n        src={imageUrl}\n        classes={{\n          img: classes.img\n        }}\n      />}\n    />\n  </>\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3v-3h18v3z\"\n}), 'CallToAction');\n\nexports.default = _default;"],"sourceRoot":""}