{"version":3,"sources":["webpack://jacdac-docs/./node_modules/@material-ui/core/esm/ListItemIcon/ListItemIcon.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/ListItemText/ListItemText.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/ListSubheader/ListSubheader.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/HourglassEmpty.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/PlayCircleFilled.js","webpack://jacdac-docs/./jacdac-ts/jacdac-spec/spectool/jdtestfuns.ts","webpack://jacdac-docs/./jacdac-ts/src/vm/environment.ts","webpack://jacdac-docs/./jacdac-ts/src/vm/expr.ts","webpack://jacdac-docs/./jacdac-ts/src/vm/utils.ts","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/ListItemSecondaryAction/ListItemSecondaryAction.js","webpack://jacdac-docs/./jacdac-ts/src/test/testrunner.ts","webpack://jacdac-docs/./src/components/test/ServiceTestRunner.tsx","webpack://jacdac-docs/./src/components/useGridBreakpoints.ts","webpack://jacdac-docs/./src/components/useServiceClient.ts"],"names":["getTestCommandFunctions","testFunctions","filter","f","context","getTestExpressionFunctions","id","args","prompt","undefined","VMServiceEnvironment","service","_registers","_events","registerRegister","regName","handler","pkt","specification","packets","find","isRegister","name","register","identifier","mount","subscribe","CHANGE","registerEvent","eventName","isEvent","event","EVENT","sendCommandAsync","command","values","commandName","p","isCommand","sendCmdAsync","jdpack","packFormat","writeRegisterAsync","ev","jdreg","sendSetPackedAsync","lookup","e","root","type","object","fld","property","unpackedValue","field","fields","value","refreshRegistersAsync","k","refresh","JDServiceClient","VMEnvironment","registers","events","_currentEvent","_envs","_locals","serviceChanged","role","unmount","forEach","r","reg","serviceEnv","getService","emit","getRootName","s","ROLE_HAS_NO_SERVICE","Object","roleName","me","local","writeLocal","consumeEvent","hasEvent","unsubscribe","vs","JDEventSource","unparse","ae","elements","map","join","caller","callee","arguments","computed","be","left","operator","right","ue","argument","raw","JDExprEvaluator","env","callEval","exprStack","tos","length","pop","eval","visitExpression","ret","push","top","Math","abs","le","val","JDVMError","lit","VM_ERROR","ROLE_BOUND","ROLE_UNBOUND","VM_COMMAND_ATTEMPTED","VM_COMMAND_COMPLETED","message","jacdacName","Error","errorPath","JDTestStatus","JDTestCommandStatus","commandStatusToTestStatus","status","Active","Passed","Failed","NotReady","RequiresUserInput","cmdToTestFunction","cmd","call","t","JDCommandEvaluator","testRunner","_prompt","_progress","_status","_startExpressions","_rangeComplete","_eventsComplete","start","ee","getStartVal","v","goal","error","testFun","startExprs","exprVisitor","ce","eventList","child","findIndex","exprEval","createPrompt","replaceId","a","i","replaceVal","aStart","roundWithPrecision","toString","slice","replace","setEvent","checkExpression","expr","getStart","evaluateAsync","pretify","regSaved","regValue","amtSaved","beginSaved","endSaved","shift","serviceTestRunner","JDTestCommandRunner","_output","progress","_commandEvaluator","reset","output","startAsync","envChangeAsync","isActive","newOutput","finishAsync","cancelAsync","finishCommandAsync","JDTestRunner","testSpec","commands","testCommands","c","_commandIndex","refreshEnvironmentAsync","next","cancel","finish","newStatus","getCommandIndex","setCommandIndex","index","currentCommand","eventChangeAsync","description","JDServiceTestRunner","_testIndex","_env","tests","substr","indexOf","currentTest","stats","total","success","failed","indeterminate","test","testIndex","ct","TestStatusIcon","props","useChange","TestListItem","onSelectTest","selected","handleSelectTest","TestList","CommandStatusIcon","CommandListItem","handleAnswer","ActiveTest","handleRestart","handleNext","useEffect","ServiceTestRunner","serviceTest","serviceTestFromServiceClass","serviceClass","factory","useCallback","useServiceClient","device","useGridBreakpoints","itemCount","useContext","AppContext","drawerType","xs","sm","md","lg","xl","DrawerType","deps","useState","client","setClient"],"mappings":"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","file":"859a83de993caea7524bf57c2975f3be6812c8c3-4ba3d73e4012fa4e17e7.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListContext from '../List/ListContext';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      minWidth: 56,\n      color: theme.palette.action.active,\n      flexShrink: 0,\n      display: 'inline-flex'\n    },\n\n    /* Styles applied to the root element when the parent `ListItem` uses `alignItems=\"flex-start\"`. */\n    alignItemsFlexStart: {\n      marginTop: 8\n    }\n  };\n};\n/**\n * A simple wrapper to apply `List` styles to an `Icon` or `SvgIcon`.\n */\n\nvar ListItemIcon = /*#__PURE__*/React.forwardRef(function ListItemIcon(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  var context = React.useContext(ListContext);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, context.alignItems === 'flex-start' && classes.alignItemsFlexStart),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItemIcon'\n})(ListItemIcon);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nimport ListContext from '../List/ListContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    flex: '1 1 auto',\n    minWidth: 0,\n    marginTop: 4,\n    marginBottom: 4\n  },\n\n  /* Styles applied to the `Typography` components if primary and secondary are set. */\n  multiline: {\n    marginTop: 6,\n    marginBottom: 6\n  },\n\n  /* Styles applied to the `Typography` components if dense. */\n  dense: {},\n\n  /* Styles applied to the root element if `inset={true}`. */\n  inset: {\n    paddingLeft: 56\n  },\n\n  /* Styles applied to the primary `Typography` component. */\n  primary: {},\n\n  /* Styles applied to the secondary `Typography` component. */\n  secondary: {}\n};\nvar ListItemText = /*#__PURE__*/React.forwardRef(function ListItemText(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      _props$inset = props.inset,\n      inset = _props$inset === void 0 ? false : _props$inset,\n      primaryProp = props.primary,\n      primaryTypographyProps = props.primaryTypographyProps,\n      secondaryProp = props.secondary,\n      secondaryTypographyProps = props.secondaryTypographyProps,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"disableTypography\", \"inset\", \"primary\", \"primaryTypographyProps\", \"secondary\", \"secondaryTypographyProps\"]);\n\n  var _React$useContext = React.useContext(ListContext),\n      dense = _React$useContext.dense;\n\n  var primary = primaryProp != null ? primaryProp : children;\n\n  if (primary != null && primary.type !== Typography && !disableTypography) {\n    primary = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: dense ? 'body2' : 'body1',\n      className: classes.primary,\n      component: \"span\",\n      display: \"block\"\n    }, primaryTypographyProps), primary);\n  }\n\n  var secondary = secondaryProp;\n\n  if (secondary != null && secondary.type !== Typography && !disableTypography) {\n    secondary = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: \"body2\",\n      className: classes.secondary,\n      color: \"textSecondary\",\n      display: \"block\"\n    }, secondaryTypographyProps), secondary);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, dense && classes.dense, inset && classes.inset, primary && secondary && classes.multiline),\n    ref: ref\n  }, other), primary, secondary);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItemText'\n})(ListItemText);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      boxSizing: 'border-box',\n      lineHeight: '48px',\n      listStyle: 'none',\n      color: theme.palette.text.secondary,\n      fontFamily: theme.typography.fontFamily,\n      fontWeight: theme.typography.fontWeightMedium,\n      fontSize: theme.typography.pxToRem(14)\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"inherit\"`. */\n    colorInherit: {\n      color: 'inherit'\n    },\n\n    /* Styles applied to the inner `component` element if `disableGutters={false}`. */\n    gutters: {\n      paddingLeft: 16,\n      paddingRight: 16\n    },\n\n    /* Styles applied to the root element if `inset={true}`. */\n    inset: {\n      paddingLeft: 72\n    },\n\n    /* Styles applied to the root element if `disableSticky={false}`. */\n    sticky: {\n      position: 'sticky',\n      top: 0,\n      zIndex: 1,\n      backgroundColor: 'inherit'\n    }\n  };\n};\nvar ListSubheader = /*#__PURE__*/React.forwardRef(function ListSubheader(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'default' : _props$color,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'li' : _props$component,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      _props$disableSticky = props.disableSticky,\n      disableSticky = _props$disableSticky === void 0 ? false : _props$disableSticky,\n      _props$inset = props.inset,\n      inset = _props$inset === void 0 ? false : _props$inset,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"component\", \"disableGutters\", \"disableSticky\", \"inset\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, color !== 'default' && classes[\"color\".concat(capitalize(color))], inset && classes.inset, !disableSticky && classes.sticky, !disableGutters && classes.gutters),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListSubheader'\n})(ListSubheader);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z\"\n}), 'HourglassEmpty');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z\"\n}), 'PlayCircleFilled');\n\nexports.default = _default;","/* eslint-disable @typescript-eslint/triple-slash-reference */\n/// <reference path=\"jdtest.d.ts\" />\n\nexport type JDTestFunctions =\n    | \"changes\"\n    | \"ask\"\n    | \"check\"\n    | \"increases\"\n    | \"decreases\"\n    | \"increasesBy\"\n    | \"decreasesBy\"\n    | \"stepsUpTo\"\n    | \"stepsDownTo\"\n    | \"events\"\n    | \"awaitEvent\"\n    | \"nextEvent\"\n    | \"assign\"\n    | \"closeTo\"\n\nexport function getTestCommandFunctions() {\n    return testFunctions.filter(f => f.context === \"command\" || f.context === \"either\")\n}\n\nexport function getTestExpressionFunctions() {\n    return testFunctions.filter(f => f.context === \"expression\" || f.context === \"either\")\n}\n\nconst testFunctions: jdtest.TestFunctionDescription[] = [\n    {\n        id: \"changes\",\n        args: [\"register\"],\n        prompt: `check that {1} changes`,\n        context: \"command\",\n    },\n    {\n        id: \"ask\",\n        args: [],\n        prompt: undefined,\n        context: \"command\",\n    },\n    {\n        id: \"events\",\n        args: [\"events\"],\n        prompt: `check that events {1} are observed`,\n        context: \"command\",\n    },\n    {\n        id: \"awaitEvent\",\n        args: [\"event\", [\"boolean\", true] ],\n        prompt: `wait for event {1} and then check {2} (other events ignored)`,\n        context: \"command\",\n    },\n    {\n        id: \"nextEvent\",\n        args: [\"event\", [\"boolean\", true]],\n        prompt: `next event must be {1}, then check {2}`,\n        context: \"command\",\n    },\n    {\n        id: \"assign\",\n        args: [\"register\", \"number\"],\n        prompt: `write value {2:val} to {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"check\",\n        args: [\"boolean\"],\n        prompt: `check that {1}`,\n        context: \"command\",\n    },\n    {\n        id: \"increases\",\n        args: [\"register\"],\n        prompt: `check that {1} increases`,\n        context: \"command\",\n    },\n    {\n        id: \"decreases\",\n        args: [\"register\"],\n        prompt: `check that {1} decreases`,\n        context: \"command\",\n    },\n    {\n        id: \"increasesBy\",\n        args: [\"register\", \"number\"],\n        prompt: `check that  {1} (initially {1:val}) increases by {2:val}`,\n        context: \"command\",\n    },\n    {\n        id: \"decreasesBy\",\n        args: [\"register\", \"number\"],\n        prompt: `check that {1} (initially {1:val}) decreases by {2:val}`,\n        context: \"command\",\n    },\n    {\n        id: \"stepsUpTo\",\n        args: [\"register\", \"number\"],\n        prompt: `{1} should step up (by ones) from {1:val} to {2:val}`,\n        context: \"command\",\n    },\n    {\n        id: \"stepsDownTo\",\n        args: [\"register\", \"number\"],\n        prompt: `{1} should step down (by ones) from {1:val} to {2:val}`,\n        context: \"command\",\n    },\n    {\n        id: \"start\",\n        args: [\"any\"],\n        prompt: undefined,\n        context: \"expression\",\n    },\n    {\n        id: \"closeTo\",\n        args: [\"number\", \"number\", \"number\"],\n        prompt: `evaluate {1} until it is close to {2:val}, as given by error {3:val}`,\n        context: \"either\",\n    },\n]\n","import { isEvent, isRegister, isCommand } from \"../jdom/spec\"\nimport { JDEvent } from \"../jdom/event\"\nimport { JDServiceClient } from \"../jdom/serviceclient\"\nimport { JDRegister } from \"../jdom/register\"\nimport { SMap } from \"../jdom/utils\"\nimport { JDService } from \"../jdom/service\"\nimport { JDEventSource } from \"../jdom/eventsource\"\nimport { CHANGE, EVENT } from \"../jdom/constants\"\nimport { jdpack, PackedValues } from \"../jdom/pack\"\nimport { ROLE_HAS_NO_SERVICE } from \"./utils\"\nimport { RoleRegister, RoleEvent } from \"./ir\"\nimport { VMEnvironmentInterface } from \"./vmrunner\"\n\nexport class VMServiceEnvironment extends JDServiceClient {\n    private _registers: SMap<JDRegister> = {}\n    private _events: SMap<JDEvent> = {}\n\n    constructor(service: JDService) {\n        super(service)\n    }\n\n    public registerRegister(regName: string, handler: () => void) {\n        if (!this._registers[regName]) {\n            const pkt = this.service.specification.packets.find(\n                pkt => isRegister(pkt) && pkt.name === regName\n            )\n            if (pkt) {\n                const register = this.service.register(pkt.identifier)\n                this._registers[regName] = register\n                this.mount(register.subscribe(CHANGE, handler))\n            }\n        }\n    }\n\n    public registerEvent(eventName: string, handler: () => void) {\n        if (!this._events[eventName]) {\n            const pkt = this.service.specification.packets.find(\n                pkt => isEvent(pkt) && pkt.name === eventName\n            )\n            if (pkt) {\n                const event = this.service.event(pkt.identifier)\n                this._events[eventName] = event\n                this.mount(event.subscribe(EVENT, handler))\n            }\n        }\n    }\n\n    public async sendCommandAsync(\n        command: jsep.Identifier,\n        values: PackedValues\n    ) {\n        const commandName = command?.name\n        const pkt = this.service.specification.packets.find(\n            p => isCommand(p) && p.name === commandName\n        )\n        if (pkt) {\n            await this.service.sendCmdAsync(\n                pkt.identifier,\n                jdpack(pkt.packFormat, values),\n                true\n            )\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public async writeRegisterAsync(regName: string, ev: any) {\n        const jdreg = this._registers[regName]\n        await jdreg?.sendSetPackedAsync(\n            jdreg.specification?.packFormat,\n            [ev],\n            true\n        )\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public lookup(e: jsep.MemberExpression | jsep.Identifier | string): any {\n        let root =\n            typeof e === \"string\"\n                ? e\n                : e.type === \"Identifier\"\n                ? e.name\n                : (e.object as jsep.Identifier).name\n        let fld =\n            typeof e === \"string\"\n                ? undefined\n                : e.type === \"Identifier\"\n                ? undefined\n                : (e.property as jsep.Identifier).name\n        if (root in this._registers) {\n            if (!fld) return this._registers[root].unpackedValue?.[0]\n            else {\n                const field = this._registers[root].fields.find(\n                    f => f.name === fld\n                )\n                return field?.value\n            }\n        } else if (root in this._events) {\n            const field = this._events[root].fields?.find(f => f.name === fld)\n            return field?.value\n        }\n        return undefined\n    }\n\n    public async refreshRegistersAsync() {\n        for (const k in this._registers) {\n            const register = this._registers[k]\n            await register.refresh()\n        }\n    }\n}\n\nexport class VMEnvironment extends JDEventSource implements VMEnvironmentInterface {\n    private _currentEvent: string = undefined\n    private _envs: SMap<VMServiceEnvironment> = {}\n    private _locals: SMap<string> = {}\n\n    constructor(private registers: RoleRegister[], private events: RoleEvent[]) {\n        super()\n    }\n\n    public serviceChanged(role: string, service: JDService) {\n        if (this._envs[role]) {\n            this._envs[role].unmount()\n            this._envs[role] = undefined\n        }\n        if (service) {\n            this._envs[role] = new VMServiceEnvironment(service)\n            this.registers.forEach(r => {\n                if (r.role === role) {\n                    this.registerRegister(role, r.register)\n                }\n            })\n            this.events.forEach(e => {\n                if (e.role === role) {\n                    this.registerEvent(role, e.event)\n                }\n            })\n        }\n    }\n\n    public registerRegister(role: string, reg: string) {\n        const serviceEnv = this.getService(role)\n        if (serviceEnv) {\n            serviceEnv.registerRegister(reg, () => {\n                this.emit(CHANGE)\n            })\n        }\n    }\n\n    public registerEvent(role: string, ev: string) {\n        const serviceEnv = this.getService(role)\n        if (serviceEnv) {\n            serviceEnv.registerEvent(ev, () => {\n                this._currentEvent = `${role}.${ev}`\n                this.emit(CHANGE)\n            })\n        }\n    }\n\n    private getRootName(e: jsep.MemberExpression | string) {\n        if (!e) return undefined\n        if (typeof e === \"string\") return e\n        if (e.type === \"MemberExpression\")\n            return (e.object as jsep.Identifier).name\n        return undefined\n    }\n\n    private getService(e: jsep.MemberExpression | string) {\n        const root = this.getRootName(e)\n        if (!root) return undefined\n        let s = this._envs[root]\n        if (!s) {\n            this.emit(ROLE_HAS_NO_SERVICE, root)\n        }\n        return s\n    }\n\n    public async refreshRegistersAsync() {\n        for (const s of Object.values(this._envs)) {\n            await s?.refreshRegistersAsync()\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public async sendCommandAsync(\n        e: jsep.MemberExpression,\n        values: PackedValues\n    ) {\n        const serviceEnv = this.getService(e)\n        await serviceEnv?.sendCommandAsync(\n            e.property as jsep.Identifier,\n            values\n        )\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public lookup(e: jsep.MemberExpression | string): any {\n        const roleName = this.getRootName(e)\n        if (roleName === \"$\") {\n            let me = e as jsep.MemberExpression\n            if (me.property.type === \"Identifier\") {\n                const local = (me.property as jsep.Identifier).name\n                return this._locals[local]\n            }\n            return undefined\n        }\n        const serviceEnv = this.getService(e)\n        if (!serviceEnv) {\n            return undefined\n        }\n        const me = e as jsep.MemberExpression\n        return serviceEnv.lookup(\n            me.property as jsep.Identifier | jsep.MemberExpression\n        )\n    }\n\n    public async writeRegisterAsync(\n        e: jsep.MemberExpression | string,\n        ev: any\n    ) {\n        const serviceEnv = this.getService(e)\n        const me = e as jsep.MemberExpression\n        if (serviceEnv && me.property.type === \"Identifier\") {\n            const reg = (me.property as jsep.Identifier).name\n            await serviceEnv.writeRegisterAsync(reg, ev)\n        }\n    }\n\n    public writeLocal(e: jsep.MemberExpression | string, ev: any) {\n        const roleName = this.getRootName(e)\n        if (!roleName || roleName !== \"$\") return undefined\n        const me = e as jsep.MemberExpression\n        if (me.property.type === \"Identifier\") {\n            const local = (me.property as jsep.Identifier).name\n            this._locals[local] = ev\n            return true\n        }\n        return false\n    }\n\n    public consumeEvent() {\n        this._currentEvent = undefined\n    }\n\n    public hasEvent(e: jsep.MemberExpression | string) {\n        const roleName = this.getRootName(e)\n        const serviceEnv = this.getService(e)\n        if (!serviceEnv) return false\n        const me = e as jsep.MemberExpression\n        if (me.property.type === \"Identifier\") {\n            const event = (me.property as jsep.Identifier).name\n            return this._currentEvent === `${roleName}.${event}`\n        }\n        return false\n    }\n\n    public unsubscribe() {\n        for (const vs of Object.values(this._envs)) {\n            vs.unmount()\n        }\n    }\n}\n","import { JDVMError } from \"./utils\"\n\nexport type GetValue = (e: jsep.MemberExpression | string) => any\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type StartMap = { e: jsep.Expression; v: any }[]\n\nexport type CallEvaluator = (\n    ce: jsep.CallExpression,\n    ee: JDExprEvaluator\n) => any\n\nexport function unparse(e: jsep.Expression): string {\n    switch (e.type) {\n        case \"ArrayExpression\": {\n            const ae = e as jsep.ArrayExpression\n            return `[${ae.elements.map(unparse).join(\", \")}]`\n        }\n        case \"CallExpression\": {\n            const caller = e as jsep.CallExpression\n            return `${unparse(caller.callee)}(${caller.arguments\n                .map(unparse)\n                .join(\", \")})`\n        }\n        case \"MemberExpression\": {\n            const root = e as jsep.MemberExpression\n            return root.computed\n                ? `${unparse(root.object)}[${unparse(root.property)}]`\n                : `${unparse(root.object)}.${unparse(root.property)}`\n        }\n        case \"BinaryExpression\":\n        case \"LogicalExpression\": {\n            const be = e as any\n            return `(${unparse(be.left)} ${be.operator} ${unparse(be.right)})`\n        }\n        case \"UnaryExpression\": {\n            const ue = e as jsep.UnaryExpression\n            return `${ue.operator}${unparse(ue.argument)}`\n        }\n        case \"Identifier\": {\n            return (e as jsep.Identifier).name\n        }\n        case \"Literal\": {\n            return (e as jsep.Literal).raw\n        }\n        default:\n            return \"TODO\"\n    }\n}\n\nexport class JDExprEvaluator {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private exprStack: any[] = []\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(private env: GetValue, private callEval: CallEvaluator) {}\n\n    public tos() {\n        return this.exprStack[this.exprStack.length - 1]\n    }\n\n    public pop() {\n        return this.exprStack.pop()\n    }\n\n    public eval(e: jsep.Expression) {\n        this.exprStack = []\n        this.visitExpression(e)\n        return this.exprStack.pop()\n    }\n\n    public visitExpression(e: jsep.Expression) {\n        switch (e.type) {\n            case \"ArrayExpression\": {\n                // nothing to do here yet (only used for event function)\n                break\n            }\n\n            case \"CallExpression\": {\n                if (this.callEval) {\n                    let ret = this.callEval(<jsep.CallExpression>e, this)\n                    this.exprStack.push(ret)\n                } else this.exprStack.push(undefined)\n                break\n            }\n\n            case \"BinaryExpression\": {\n                const be = <jsep.BinaryExpression>e\n                this.visitExpression(be.left)\n                this.visitExpression(be.right)\n                const right = this.exprStack.pop()\n                const left = this.exprStack.pop()\n                switch (be.operator) {\n                    case \"+\":\n                        this.exprStack.push(left + right)\n                        return\n                    case \"-\":\n                        this.exprStack.push(left - right)\n                        return\n                    case \"/\":\n                        this.exprStack.push(left / right)\n                        return\n                    case \"*\":\n                        this.exprStack.push(left * right)\n                        return\n                    case \"%\":\n                        this.exprStack.push(left % right)\n                        return\n                    case \">>\":\n                        this.exprStack.push(left >> right)\n                        return\n                    case \">>>\":\n                        this.exprStack.push(left >>> right)\n                        return\n                    case \"<<\":\n                        this.exprStack.push(left << right)\n                        return\n                    case \"|\":\n                        this.exprStack.push(left | right)\n                        return\n                    case \"&\":\n                        this.exprStack.push(left & right)\n                        return\n                    case \"^\":\n                        this.exprStack.push(left ^ right)\n                        return\n                    case \"==\":\n                        this.exprStack.push(left == right)\n                        return\n                    case \"!=\":\n                        this.exprStack.push(left != right)\n                        return\n                    case \"===\":\n                        this.exprStack.push(left === right)\n                        return\n                    case \"!==\":\n                        this.exprStack.push(left !== right)\n                        return\n\n                    case \"<\":\n                        this.exprStack.push(left < right)\n                        return\n                    case \">\":\n                        this.exprStack.push(left > right)\n                        return\n                    case \"<=\":\n                        this.exprStack.push(left <= right)\n                        return\n                    case \">=\":\n                        this.exprStack.push(left >= right)\n                        return\n                }\n                break\n            }\n\n            case \"UnaryExpression\": {\n                const ue = <jsep.UnaryExpression>e\n                this.visitExpression(ue.argument)\n                const top = this.exprStack.pop()\n                switch (ue.operator) {\n                    case \"ABS\":\n                        this.exprStack.push(Math.abs(top))\n                        return\n                    case \"!\":\n                        this.exprStack.push(!top)\n                        return\n                    case \"~\":\n                        this.exprStack.push(~top)\n                        return\n                    case \"-\":\n                        this.exprStack.push(-top)\n                        return\n                    case \"+\":\n                        this.exprStack.push(+top)\n                        return\n                }\n                break\n            }\n\n            case \"LogicalExpression\": {\n                const le = <jsep.LogicalExpression>e\n                this.visitExpression(le.left)\n                switch (le.operator) {\n                    case \"||\":\n                        if (this.tos()) return\n                        else this.visitExpression(le.right)\n                        return\n                    case \"&&\":\n                        if (!this.tos()) return\n                        else this.visitExpression(le.right)\n                        return\n                    default:\n                }\n                break\n            }\n            case \"MemberExpression\": {\n                // for now, we don't support evaluation of obj or prop\n                // of obj.prop\n                const val = this.env(e as jsep.MemberExpression)\n                if (val === undefined) {\n                    throw new JDVMError(`lookup of ${unparse(e)} failed`)\n                }\n                this.exprStack.push(val)\n                return\n            }\n            case \"Identifier\": {\n                const id = <jsep.Identifier>e\n                const val = this.env(id.name)\n                if (val === undefined)\n                    throw new JDVMError(`lookup of ${id.name} failed`)\n                this.exprStack.push(val)\n                return\n            }\n            case \"Literal\": {\n                const lit = <jsep.Literal>e\n                this.exprStack.push(lit.value)\n                return\n            }\n            default:\n        }\n    }\n}\n","export const VM_ERROR = \"JacdacVMError\"\n\nexport const ROLE_BOUND = \"roleBound\"\nexport const ROLE_UNBOUND = \"roleUnbound\"\nexport const ROLE_HAS_NO_SERVICE = \"roleHasNoService\"\nexport const VM_COMMAND_ATTEMPTED = \"commandAttempted\"\nexport const VM_COMMAND_COMPLETED = \"commandCompleted\"\n\nexport class JDVMError extends Error {\n    constructor(message: string, readonly jacdacName?: string) {\n        super(message)\n        this.name = VM_ERROR\n    }\n}\n\nexport default function errorPath(e: JDVMError): string {\n    return (e as JDVMError)?.jacdacName\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    position: 'absolute',\n    right: 16,\n    top: '50%',\n    transform: 'translateY(-50%)'\n  }\n};\n/**\n * Must be used as the last child of ListItem to function properly.\n */\n\nvar ListItemSecondaryAction = /*#__PURE__*/React.forwardRef(function ListItemSecondaryAction(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nListItemSecondaryAction.muiName = 'ListItemSecondaryAction';\nexport default withStyles(styles, {\n  name: 'MuiListItemSecondaryAction'\n})(ListItemSecondaryAction);","import {\n    getTestCommandFunctions,\n    JDTestFunctions,\n} from \"../../jacdac-spec/spectool/jdtestfuns\"\nimport { exprVisitor } from \"../../jacdac-spec/spectool/jdutils\"\n\nimport { CHANGE } from \"../jdom/constants\"\nimport { JDEventSource } from \"../jdom/eventsource\"\nimport { JDService } from \"../jdom/service\"\nimport { JDServiceClient } from \"../jdom/serviceclient\"\nimport { roundWithPrecision } from \"../jdom/utils\"\nimport { unparse, JDExprEvaluator, CallEvaluator, StartMap } from \"../vm/expr\"\nimport { VMServiceEnvironment } from \"../vm/environment\"\n\nexport enum JDTestStatus {\n    NotReady,\n    Active,\n    Passed,\n    Failed,\n}\n\nexport enum JDTestCommandStatus {\n    NotReady,\n    Active,\n    RequiresUserInput,\n    Passed,\n    Failed\n}\n\nfunction commandStatusToTestStatus(status: JDTestCommandStatus) {\n    switch (status) {\n        case JDTestCommandStatus.Active:\n            return JDTestStatus.Active\n        case JDTestCommandStatus.Passed:\n            return JDTestStatus.Passed\n        case JDTestCommandStatus.Failed:\n            return JDTestStatus.Failed\n        case JDTestCommandStatus.NotReady:\n            return JDTestStatus.NotReady\n        case JDTestCommandStatus.RequiresUserInput:\n            return JDTestStatus.Active\n    }\n}\n\nfunction cmdToTestFunction(cmd: jdtest.TestCommandSpec) {\n    const id = (<jsep.Identifier>cmd.call.callee).name\n    return getTestCommandFunctions().find(t => t.id == id)\n}\n\nclass JDCommandEvaluator {\n    private _prompt = \"\"\n    private _progress = \"\"\n    private _status = JDTestCommandStatus.Active\n    private _startExpressions: StartMap = []\n    private _rangeComplete: number = undefined\n    private _eventsComplete: string[] = undefined\n\n    constructor(\n        private readonly testRunner: JDTestRunner,\n        private readonly command: jdtest.TestCommandSpec\n    ) {}\n\n    public get prompt() {\n        return this._prompt\n    }\n    public get status() {\n        return this._status\n    }\n    public get progress() {\n        return this._progress\n    }\n\n    private get env() {\n        return (e: jsep.MemberExpression | string) => {\n            return this.testRunner.serviceTestRunner.lookup(e)\n        }\n    }\n\n    private callEval(start: StartMap) : CallEvaluator {\n        return (caller: jsep.CallExpression, ee: JDExprEvaluator) => { \n            function getStartVal(e: jsep.Expression) {\n                return start.find(r => r.e === e).v\n            }\n            const callee = <jsep.Identifier>caller.callee\n            switch (callee.name) {\n                case \"start\": \n                    return getStartVal(caller.arguments[0]);\n                case \"closeTo\": {\n                    const args = caller.arguments\n                    const goal = getStartVal(args[1])\n                    const error = getStartVal(args[2])\n                    ee.visitExpression(args[0])\n                    const ev = ee.pop()\n                    return  ev >= goal - error && ev <= goal + error\n                }\n                default: // ERROR\n            }\n            return null;\n        }\n    }\n\n    // TODO: define an interface between test runner and command evaluator\n    // TODO: so this all can be done modularly\n    public start() {\n        this._startExpressions = []\n        const testFun = cmdToTestFunction(this.command)\n        const args = this.command.call.arguments\n        const startExprs: jsep.Expression[] = []\n        switch (testFun.id as JDTestFunctions) {\n            case \"check\":\n            case \"awaitEvent\":\n            case \"nextEvent\": {\n                exprVisitor(null, args, (p, ce: jsep.CallExpression) => {\n                    if (ce.type !== \"CallExpression\") return\n                    if ((<jsep.Identifier>ce.callee).name === \"start\")\n                        startExprs.push(ce.arguments[0])\n                    else if ((<jsep.Identifier>ce.callee).name === \"closeTo\") {\n                        startExprs.push(ce.arguments[1])\n                        startExprs.push(ce.arguments[2])\n                    }\n                })\n                break\n            }\n            case \"changes\":\n            case \"increases\":\n            case \"decreases\": {\n                startExprs.push(args[0])\n                break\n            }\n            case \"increasesBy\":\n            case \"decreasesBy\":\n            case \"stepsUpTo\":\n            case \"stepsDownTo\": {\n                startExprs.push(args[0])\n                startExprs.push(args[1])\n                break\n            }\n            case \"closeTo\": {\n                startExprs.push(args[1])\n                startExprs.push(args[2])\n                break\n            }\n            case \"assign\": {\n                startExprs.push(args[1])\n                break\n            }\n            case \"events\": {\n                const eventList = this.command.call\n                    .arguments[0] as jsep.ArrayExpression\n                this._eventsComplete = (eventList.elements as jsep.Identifier[]).map(\n                    id => id.name\n                )\n                break\n            }\n        }\n        // evaluate the start expressions and store the results\n        startExprs.forEach(child => {\n            if (this._startExpressions.findIndex(r => r.e === child) < 0) {\n                const exprEval = new JDExprEvaluator(this.env, this.callEval([]))\n                this._startExpressions.push({\n                    e: child,\n                    v: exprEval.eval(child),\n                })\n            }\n        })\n        this.createPrompt()\n    }\n\n    private createPrompt() {\n        const testFun = cmdToTestFunction(this.command)\n        const replaceId = this.command.call.arguments.map((a, i) => {\n            return [`{${i + 1}}`, unparse(a)]\n        })\n        const replaceVal = this.command.call.arguments.map((a, i) => {\n            const aStart = this._startExpressions.find(r => r.e === a)\n            return [\n                `{${i + 1}:val}`,\n                aStart && aStart.v\n                    ? roundWithPrecision(aStart.v, 3).toString()\n                    : unparse(a),\n            ]\n        })\n        this._prompt =\n            testFun.id === \"ask\" || testFun.id === \"say\"\n                ? this.command.prompt.slice(0)\n                : testFun.prompt.slice(0)\n        replaceId.forEach(\n            p => (this._prompt = this._prompt.replace(p[0], p[1]))\n        )\n        replaceVal.forEach(\n            p => (this._prompt = this._prompt.replace(p[0], p[1]))\n        )\n    }\n\n    public setEvent(ev: string) {}\n\n    private checkExpression(e: jsep.Expression) {\n        const expr = new JDExprEvaluator(this.env, this.callEval(this._startExpressions))\n        return expr.eval(e)\n            ? JDTestCommandStatus.Passed\n            : JDTestCommandStatus.Active\n    }\n\n    private getStart(e: jsep.Expression) {\n        return this._startExpressions.find(r => r.e === e)\n    }\n\n    public async evaluateAsync() {\n        const testFun = cmdToTestFunction(this.command)\n        const args = this.command.call.arguments\n        this._status = JDTestCommandStatus.Active\n        this._progress = \"\"\n        switch (testFun.id as JDTestFunctions) {\n            case \"ask\": {\n                this._status = JDTestCommandStatus.RequiresUserInput\n                break\n            }\n            case \"check\": {\n                this._status = this.checkExpression(args[0])\n                break\n            }\n            case \"closeTo\": {\n                const goal = this.getStart(args[1])\n                const error = this.getStart(args[2])\n                const expr = new JDExprEvaluator(\n                    this.env,\n                    this.callEval(this._startExpressions)\n                )\n                const ev = expr.eval(args[0]) as number\n                if (Math.abs(ev - goal.v) <= error.v)\n                    this._status = JDTestCommandStatus.Passed\n                this._progress = `current: ${pretify(ev)}; goal: ${pretify(\n                    goal.v\n                )}; error: ${pretify(error.v)}`\n                break\n            }\n            case \"changes\":\n            case \"increases\":\n            case \"decreases\": {\n                const regSaved = this._startExpressions.find(\n                    r => r.e === args[0]\n                )\n                const regValue = this.env(unparse(args[0]))\n                const status =\n                    regValue &&\n                    regSaved.v &&\n                    ((testFun.id === \"changes\" && regValue !== regSaved.v) ||\n                        (testFun.id === \"increases\" && regValue > regSaved.v) ||\n                        (testFun.id === \"decreases\" && regValue < regSaved.v))\n                        ? JDTestCommandStatus.Passed\n                        : JDTestCommandStatus.Active\n                this._status = status\n                regSaved.v = regValue\n                break\n            }\n            case \"increasesBy\":\n            case \"decreasesBy\": {\n                const regSaved = this.getStart(args[0])\n                const amtSaved = this.getStart(args[1])\n                const regValue = this.env(unparse(args[0]))\n                if (testFun.id === \"increasesBy\") {\n                    if (regValue >= regSaved.v + amtSaved.v) {\n                        this._status = JDTestCommandStatus.Passed\n                    } else if (\n                        regValue >= regSaved.v &&\n                        regValue < regSaved.v + amtSaved.v\n                    ) {\n                        this._status = JDTestCommandStatus.Active\n                        this._progress = `current: ${pretify(\n                            regValue\n                        )}, goal: ${pretify(regSaved.v + amtSaved.v)}`\n                    } else {\n                        this._status = JDTestCommandStatus.Active\n                    }\n                } else {\n                    if (regValue <= regSaved.v - amtSaved.v) {\n                        this._status = JDTestCommandStatus.Passed\n                        this._progress = \"completed\"\n                    } else if (\n                        regValue <= regSaved.v &&\n                        regValue > regSaved.v - amtSaved.v\n                    ) {\n                        this._status = JDTestCommandStatus.Active\n                        this._progress = `current: ${pretify(\n                            regValue\n                        )} goal: ${pretify(regSaved.v - amtSaved.v)}`\n                    } else {\n                        this._status = JDTestCommandStatus.Active\n                    }\n                }\n                break\n            }\n            case \"stepsUpTo\":\n            case \"stepsDownTo\": {\n                this._status = JDTestCommandStatus.Active\n                const regValue = this.env(unparse(args[0]))\n                const beginSaved = this.getStart(args[0])\n                const endSaved = this.getStart(args[1])\n                if (this._rangeComplete === undefined) {\n                    this._rangeComplete = regValue\n                } else {\n                    if (\n                        regValue ===\n                        this._rangeComplete +\n                            (testFun.id == \"stepsUpTo\" ? 1 : -1)\n                    )\n                        this._rangeComplete = regValue\n                    if (this._rangeComplete === endSaved.v) {\n                        this._status = JDTestCommandStatus.Passed\n                    }\n                }\n                if (this._rangeComplete != undefined) {\n                    this._progress =\n                        testFun.id == \"stepsUpTo\"\n                            ? `from ${pretify(beginSaved.v)} up to ${pretify(\n                                  this._rangeComplete\n                              )}`\n                            : `from ${pretify(beginSaved.v)} down to ${pretify(\n                                  this._rangeComplete\n                              )}`\n                }\n                break\n            }\n            case \"events\": {\n                if (this.testRunner.hasEvent) {\n                    const ev = this.testRunner.consumeEvent()\n                    if (ev === this._eventsComplete[0]) {\n                        this._eventsComplete.shift()\n                        if (this._eventsComplete.length === 0)\n                            this._status = JDTestCommandStatus.Passed\n                    } else {\n                        this._status = JDTestCommandStatus.Failed\n                    }\n                    this._progress = `got event ${ev}; remaining = [${this._eventsComplete}]`\n                } else {\n                    this._progress = `no events received; remaining = [${this._eventsComplete}]`\n                }\n                break\n            }\n            case \"awaitEvent\":\n            case \"nextEvent\": {\n                const event = args[0] as jsep.Identifier\n                this._progress = `waiting for event ${event.name}`\n                if (this.testRunner.hasEvent) {\n                    const ev = this.testRunner.consumeEvent()\n                    if (ev !== event.name) {\n                        if (testFun.id === \"nextEvent\")\n                            this._status = JDTestCommandStatus.Failed\n                    } else {\n                        // this._status = JDTestCommandStatus.Passed\n                        this._status = this.checkExpression(\n                            this.command.call.arguments[1]\n                        )\n                    }\n                } else {\n                    this._progress = `no events received; ${this._progress}`\n                }\n                break\n            }\n            case \"assign\": {\n                const expr = new JDExprEvaluator(\n                    this.env,\n                    this.callEval(this._startExpressions)\n                )\n                const ev = expr.eval(args[1])\n                const reg = args[0] as jsep.Identifier\n                await this.testRunner.serviceTestRunner.writeRegisterAsync(reg.name, ev)\n                this._status = JDTestCommandStatus.Passed\n                this._progress = `wrote ${ev} to register ${reg.name}`\n            }\n        }\n\n        function pretify(v: number) {\n            return roundWithPrecision(v, 3)\n        }\n    }\n}\n\nexport interface JDCommandOutput {\n    message: string\n    progress: string\n}\n\nexport class JDTestCommandRunner extends JDEventSource {\n    private _status = JDTestCommandStatus.NotReady\n    private _output: JDCommandOutput = { message: \"\", progress: \"\" }\n    private _commandEvaluator: JDCommandEvaluator = null\n\n    constructor(\n        private readonly testRunner: JDTestRunner,\n        private readonly command: jdtest.TestCommandSpec\n    ) {\n        super()\n    }\n\n    get status() {\n        return this._status\n    }\n\n    set status(s: JDTestCommandStatus) {\n        if (s != this._status) {\n            this._status = s\n            this.emit(CHANGE)\n        }\n    }\n\n    get indeterminate(): boolean {\n        return (\n            this.status !== JDTestCommandStatus.Failed &&\n            this.status !== JDTestCommandStatus.Passed\n        )\n    }\n\n    get isActive(): boolean {\n        return (\n            this.status === JDTestCommandStatus.Active ||\n            this.status === JDTestCommandStatus.RequiresUserInput\n        )\n    }\n\n    get output() {\n        return this._output\n    }\n\n    set output(value: JDCommandOutput) {\n        if (\n            !this._output ||\n            this._output.message !== value.message ||\n            this._output.progress !== value.progress\n        ) {\n            this._output = value\n            this.emit(CHANGE)\n        }\n    }\n\n    reset() {\n        this.status = JDTestCommandStatus.NotReady\n        this.output = { message: \"\", progress: \"\" }\n        this._commandEvaluator = null\n    }\n\n    async startAsync() {\n        this.status = JDTestCommandStatus.Active\n        this._commandEvaluator = undefined\n        await this.envChangeAsync()\n    }\n\n    async envChangeAsync() {\n        if (this.isActive) {\n            if (!this._commandEvaluator) {\n                this._commandEvaluator = new JDCommandEvaluator(\n                    this.testRunner,\n                    this.command\n                )\n                try {\n                    this._commandEvaluator.start()\n                } catch (e) {\n                    // we will try again on next environment change\n                    this._commandEvaluator = undefined\n                }\n            } \n            if (this._commandEvaluator) {\n                try {\n                    await this._commandEvaluator.evaluateAsync()\n                    const newOutput: JDCommandOutput = {\n                        message: this._commandEvaluator.prompt,\n                        progress: this._commandEvaluator.progress,\n                    }\n                    this.output = newOutput\n                    if (\n                        this._commandEvaluator.status ===\n                        JDTestCommandStatus.RequiresUserInput\n                    )\n                        this.status = JDTestCommandStatus.RequiresUserInput\n                    else \n                        await this.finishAsync(this._commandEvaluator.status)\n                } catch (e) {\n                    // show still be in the active state\n                }\n            }\n        }\n    }\n\n    async cancelAsync() {\n        await this.finishAsync(JDTestCommandStatus.Failed)\n    }\n\n    async finishAsync(s: JDTestCommandStatus) {\n        if (\n            this.isActive &&\n            (s === JDTestCommandStatus.Failed ||\n                s === JDTestCommandStatus.Passed)\n        ) {\n            this.status = s\n            await this.testRunner.finishCommandAsync()\n        }\n    }\n}\n\nexport class JDTestRunner extends JDEventSource {\n    private _status = JDTestStatus.NotReady\n    private _commandIndex: number\n    private _currentEvent: string\n    public readonly commands: JDTestCommandRunner[]\n\n    constructor(\n        public readonly serviceTestRunner: JDServiceTestRunner,\n        private readonly testSpec: jdtest.TestSpec\n    ) {\n        super()\n        this.commands = testSpec.testCommands.map(\n            c => new JDTestCommandRunner(this, c)\n        )\n    }\n\n    reset() {\n        if (this.status !== JDTestStatus.NotReady) {\n            this._status = JDTestStatus.NotReady\n            this._commandIndex = undefined\n            this._currentEvent = undefined\n            this.commands.forEach(t => t.reset())\n            this.emit(CHANGE)\n        }\n    }\n\n    async startAsync() {\n        this.reset()\n        this.status = JDTestStatus.Active\n        this._commandIndex = 0\n        await this.serviceTestRunner.refreshEnvironmentAsync()\n    }\n\n    next() {\n        this.serviceTestRunner.next()\n    }\n\n    cancel() {\n        this.finish(JDTestStatus.Failed)\n    }\n\n    get status() {\n        return this._status\n    }\n\n    set status(s: JDTestStatus) {\n        if (s != this._status) {\n            this._status = s\n            this.emit(CHANGE)\n        }\n    }\n\n    get indeterminate(): boolean {\n        return (\n            this.status !== JDTestStatus.Failed &&\n            this.status !== JDTestStatus.Passed\n        )\n    }\n\n    get description() {\n        return this.testSpec.description\n    }\n\n    get prompt() {\n        return this.testSpec.prompt\n    }\n\n    finish(newStatus: JDTestStatus) {\n        if (this.status === JDTestStatus.Active) {\n            this.status = newStatus\n        }\n    }\n\n    private getCommandIndex() {\n        return this._commandIndex\n    }\n\n    private async setCommandIndex(index: number) {\n        if (this._commandIndex !== index) {\n            this._commandIndex = index\n            await this.currentCommand?.startAsync()\n            this.emit(CHANGE)\n        }\n    }\n\n    public async envChangeAsync() {\n        if (this.status === JDTestStatus.Active) {\n            await this.currentCommand?.envChangeAsync()\n        }\n    }\n\n    public async eventChangeAsync(event: string) {\n        if (this.status === JDTestStatus.Active) {\n            this._currentEvent = event\n            await this.envChangeAsync()\n        }\n    }\n\n    public get hasEvent() {\n        return this._currentEvent != undefined\n    }\n\n    public consumeEvent() {\n        const ret = this._currentEvent\n        this._currentEvent = undefined\n        return ret\n    }\n\n    public async finishCommandAsync() {\n        if (this.getCommandIndex() === this.commands.length - 1)\n            this.finish(commandStatusToTestStatus(this.currentCommand.status))\n        else \n            await this.setCommandIndex(this.getCommandIndex()+1)\n    }\n\n    get currentCommand() {\n        return this.commands[this._commandIndex]\n    }\n}\n\nexport class JDServiceTestRunner extends JDServiceClient {\n    private _testIndex = -1\n    private _env: VMServiceEnvironment;\n    public readonly tests: JDTestRunner[]\n\n    constructor(\n        public readonly testSpec: jdtest.ServiceTestSpec,\n        service: JDService\n    ) {\n        super(service)\n        this._env = new VMServiceEnvironment(service)\n        this.tests = this.testSpec.tests.map(t => new JDTestRunner(this, t))\n        this.testSpec.tests.forEach(t => {\n            t.events.forEach(s => {\n                let eventName = s.substr(s.indexOf(\".\")+1)\n                this._env.registerEvent(eventName, async () => { \n                    try {\n                        await this.currentTest?.eventChangeAsync(eventName) \n                    } catch (e)\n                    {\n\n                    }\n                })\n            })\n            t.registers.forEach(s => {\n                let regName = s.substr(s.indexOf(\".\")+1)\n                this._env.registerRegister(regName, async () => { \n                    try {\n                        await this.currentTest?.envChangeAsync() \n                    } catch(e){\n\n                    }\n                })\n            })\n        })\n        this.start()\n    }\n\n    public async refreshEnvironmentAsync() {\n        await this._env.refreshRegistersAsync();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public lookup(e: jsep.MemberExpression | string): any {\n        return this._env.lookup(e)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public async writeRegisterAsync(regName: string, val: any) {\n        await this._env.writeRegisterAsync(regName, val)\n    }\n\n    private get testIndex() {\n        return this._testIndex\n    }\n\n    private set testIndex(index: number) {\n        if (this._testIndex !== index) {\n            // stop previous test if needed\n            const ct = this.currentTest\n            if (ct) {\n                if (ct.status === JDTestStatus.Active) {\n                    ct.cancel()\n                }\n            }\n            // update test\n            this._testIndex = index\n            this.emit(CHANGE)\n        }\n    }\n\n    public stats() {\n        const r = {\n            total: this.tests.length,\n            success: 0,\n            failed: 0,\n            indeterminate: 0,\n        }\n        for (const test of this.tests) {\n            switch (test.status) {\n                case JDTestStatus.Failed:\n                    r.failed++\n                    break\n                case JDTestStatus.Passed:\n                    r.success++\n                    break\n                default:\n                    r.indeterminate++\n            }\n        }\n        return r\n    }\n\n    public start() {\n        this.tests.forEach(t => t.reset())\n        this.testIndex = 0\n    }\n\n    public next() {\n        this.testIndex++\n    }\n\n    get currentTest() {\n        return this.tests[this._testIndex]\n    }\n\n    set currentTest(test: JDTestRunner) {\n        const index = this.tests.indexOf(test)\n        if (index > -1) this.testIndex = index\n    }\n}\n","import React, { useCallback, useEffect } from \"react\"\nimport useServiceClient from \"../useServiceClient\"\nimport {\n    Grid,\n    Button,\n    List,\n    ListItemText,\n    ListItem,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    Typography,\n    Card,\n    CardContent,\n    CardActions,\n    Box,\n    ListSubheader,\n} from \"@material-ui/core\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport { JDService } from \"../../../jacdac-ts/src/jdom/service\"\nimport {\n    JDServiceTestRunner,\n    JDTestRunner,\n    JDTestStatus,\n    JDTestCommandRunner,\n    JDTestCommandStatus,\n} from \"../../../jacdac-ts/src/test/testrunner\"\nimport ErrorIcon from \"@material-ui/icons/Error\"\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\"\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\"\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\"\nimport useChange from \"../../jacdac/useChange\"\nimport DashboardDevice from \"../dashboard/DashboardDevice\"\nimport LoadingProgress from \"../ui/LoadingProgress\"\nimport { serviceTestFromServiceClass } from \"../../../jacdac-ts/src/test/testspec\"\n\nfunction TestStatusIcon(props: { test: JDTestRunner }) {\n    const { test } = props\n    const status = useChange(test, t => t.status)\n\n    switch (status) {\n        case JDTestStatus.Active:\n            return <PlayCircleFilledIcon color=\"action\" />\n        case JDTestStatus.Failed:\n            return <ErrorIcon color=\"error\" />\n        case JDTestStatus.Passed:\n            return <CheckCircleIcon color=\"primary\" />\n        default:\n            return <HourglassEmptyIcon color=\"disabled\" />\n    }\n}\n\nfunction TestListItem(props: {\n    test: JDTestRunner\n    currentTest: JDTestRunner\n    onSelectTest: (test: JDTestRunner) => void\n}) {\n    const { test, currentTest, onSelectTest } = props\n    const description = useChange(test, t => t.description)\n    const selected = test === currentTest\n    const handleSelectTest = () => onSelectTest(test)\n\n    return (\n        <ListItem selected={selected} button onClick={handleSelectTest}>\n            <ListItemIcon>\n                <TestStatusIcon test={test} />\n            </ListItemIcon>\n            <ListItemText primary={description} />\n        </ListItem>\n    )\n}\n\nfunction TestList(props: {\n    testRunner: JDServiceTestRunner\n    currentTest: JDTestRunner\n    onSelectTest: (test: JDTestRunner) => void\n}) {\n    const { testRunner, currentTest, onSelectTest } = props\n    const { tests } = testRunner\n    const stats = useChange(testRunner, r => r.stats())\n\n    return (\n        <Card>\n            <CardContent>\n                <List\n                    dense={true}\n                    subheader={\n                        <ListSubheader>\n                            {`${stats.total} tests, ${stats.success} success, ${stats.failed} failed`}\n                        </ListSubheader>\n                    }\n                >\n                    {tests?.map((test, i) => (\n                        <TestListItem\n                            key={i}\n                            test={test}\n                            currentTest={currentTest}\n                            onSelectTest={onSelectTest}\n                        />\n                    ))}\n                </List>\n            </CardContent>\n        </Card>\n    )\n}\n\nfunction CommandStatusIcon(props: { command: JDTestCommandRunner }) {\n    const { command } = props\n    const status = useChange(command, c => c.status)\n\n    switch (status) {\n        case JDTestCommandStatus.Active:\n        case JDTestCommandStatus.RequiresUserInput:\n            return <PlayCircleFilledIcon color=\"action\" />\n        case JDTestCommandStatus.Failed:\n            return <ErrorIcon color=\"error\" />\n        case JDTestCommandStatus.Passed:\n            return <CheckCircleIcon color=\"primary\" />\n        default:\n            return <HourglassEmptyIcon color=\"disabled\" />\n    }\n}\n\nfunction CommandListItem(props: { command: JDTestCommandRunner }) {\n    const { command } = props\n    const { message, progress } = useChange(command, c => c.output)\n    const status = useChange(command, c => c.status)\n    const handleAnswer = (status: JDTestCommandStatus) => () =>\n        command.finish(status)\n    return (\n        <>\n            <ListItem selected={status === JDTestCommandStatus.Active}>\n                <ListItemIcon>\n                    <CommandStatusIcon command={command} />\n                </ListItemIcon>\n                <ListItemText\n                    primary={message}\n                    secondary={progress}\n                />\n            </ListItem>\n            {status === JDTestCommandStatus.RequiresUserInput && (\n                <ListItem>\n\n                    <ListItemSecondaryAction>\n                        <Grid container spacing={1}>\n                            <Grid item><Button\n                                variant=\"outlined\"\n                                onClick={handleAnswer(JDTestCommandStatus.Passed)}\n                            >\n                                Yes\n                    </Button>\n                            </Grid>\n                            <Grid item>\n                                <Button\n                                    variant=\"outlined\"\n                                    onClick={handleAnswer(JDTestCommandStatus.Failed)}\n                                >\n                                    No\n                    </Button>\n                            </Grid>\n                        </Grid>\n                    </ListItemSecondaryAction>\n                </ListItem>\n            )}\n\n        </>\n    )\n}\n\nfunction ActiveTest(props: { test: JDTestRunner }) {\n    const { test } = props\n    const { commands } = test\n    const status = useChange(test, t => t.status)\n    const handleRestart = () => test.start()\n    const handleNext = () => test.next()\n    // auto start\n    useEffect(() => test.start(), [test])\n\n    return (\n        <Card>\n            <CardContent>\n                <Typography variant=\"h5\">DO</Typography>\n                <Box m={2}>\n                    <Typography variant=\"body1\">{test.prompt}</Typography>\n                </Box>\n                <Typography variant=\"h5\">TEST</Typography>\n                <List dense={false}>\n                    {commands.map((cmd, i) => (\n                        <CommandListItem key={i} command={cmd} />\n                    ))}\n                </List>\n                {status === JDTestStatus.Passed && (\n                    <Alert severity=\"success\">Test passed</Alert>\n                )}\n                {status === JDTestStatus.Failed && (\n                    <Alert severity=\"error\">Test failed</Alert>\n                )}\n            </CardContent>\n            <CardActions>\n                <Button\n                    variant={\n                        status === JDTestStatus.Active\n                            ? \"outlined\"\n                            : \"contained\"\n                    }\n                    color={\n                        status === JDTestStatus.Passed ? \"primary\" : undefined\n                    }\n                    onClick={handleNext}\n                >\n                    Next\n                </Button>\n                <Button variant=\"outlined\" onClick={handleRestart}>\n                    Restart\n                </Button>\n            </CardActions>\n        </Card>\n    )\n}\n\nexport default function ServiceTestRunner(props: {\n    service: JDService\n    serviceTest?: jdtest.ServiceTestSpec\n}) {\n    const {\n        service,\n        serviceTest = serviceTestFromServiceClass(service.serviceClass),\n    } = props\n    const factory = useCallback(\n        service => serviceTest && new JDServiceTestRunner(serviceTest, service),\n        [service, serviceTest]\n    )\n    const testRunner = useServiceClient(service, factory)\n    const currentTest = useChange(testRunner, t => t?.currentTest)\n    const handleSelectTest = (test: JDTestRunner) => {\n        testRunner.currentTest = test\n    }\n\n    if (!serviceTest)\n        return (\n            <Alert severity=\"warning\">\n                Sorry, there are no tests available for service{\" \"}\n                {service.specification.name}.\n            </Alert>\n        )\n\n    if (!testRunner) return <LoadingProgress />\n\n    return (\n        <Grid container spacing={2}>\n            <Grid item xs={3}>\n                <TestList\n                    testRunner={testRunner}\n                    currentTest={currentTest}\n                    onSelectTest={handleSelectTest}\n                />\n            </Grid>\n            <Grid item xs={6}>\n                {currentTest ? <ActiveTest test={currentTest} /> : <Alert severity={\"info\"}>\n                    Select a test to get started.\n                </Alert>}\n            </Grid>\n            {service && (\n                <Grid item xs={3}>\n                    <DashboardDevice\n                        showAvatar={true}\n                        showHeader={true}\n                        device={service.device}\n                    />\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import { GridSize } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport AppContext, { DrawerType } from \"./AppContext\"\n\nexport interface GridBreakpoints {\n    xs?: GridSize,\n    md?: GridSize,\n    sm?: GridSize,\n    lg?: GridSize,\n    xl?: GridSize\n}\n\nexport default function useGridBreakpoints(itemCount?: number): GridBreakpoints {\n    const { drawerType } = useContext(AppContext)\n\n    if (itemCount !== undefined) {\n        switch (itemCount) {\n            case 1:\n            case 2: return { xs: 12, sm: 6, md: 6, lg: 6, xl: 6 }\n            case 3: return { xs: 12, sm: 6, md: 6, lg: 4, xl: 4 }\n        }\n    }\n\n    if (drawerType != DrawerType.None)\n        return { xs: 12, md: 6, sm: 6, lg: 6, xl: 4 }\n    else return {\n        xs: 12,\n        sm: 6,\n        md: 4,\n        lg: 4,\n        xl: 3\n    }\n}","import { useEffect, useState } from \"react\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\nimport { JDServiceClient } from \"../../jacdac-ts/src/jdom/serviceclient\"\n\nexport default function useServiceClient<T extends JDServiceClient>(service: JDService, factory: (service: JDService) => T, deps: React.DependencyList = []) {\n    const [client, setClient] = useState<T>(undefined)\n\n    useEffect(() => {\n        const c = service && factory(service)\n        setClient(c)\n        return () => c?.unmount()\n    }, [service, ...deps]) // don't use factory in cache!\n\n    return client;\n}"],"sourceRoot":""}