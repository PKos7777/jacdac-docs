{"version":3,"sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/Clear.js","webpack://jacdac-docs/./src/components/hooks/useAnalytics.ts","webpack://jacdac-docs/./src/components/CmdButton.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardHIDKeyboard.tsx","webpack://jacdac-docs/./src/components/hooks/useMounted.tsx"],"names":["useAnalytics","page","track","ACK_RESET_DELAY","ERROR_RESET_DELAY","useStyles","makeStyles","theme","getBackgroundColor","palette","type","lighten","darken","createStyles","ack","color","fontWeight","typography","fontWeightMedium","backgroundColor","success","main","error","CmdButton","props","onClick","className","style","children","icon","title","disabled","disableReset","autoRun","trackName","trackProperties","ackResetDelay","others","useContext","AppContext","setAppError","setError","classes","useState","working","setWorking","setAck","undefined","mounted","useMounted","_disabled","run","delay","handleClick","ev","stopPropagation","statusIcon","modeClassName","elClassName","clsx","useEffect","selectors","reverseSelectors","Object","keys","reduce","r","key","capture","cursor","borderColor","primary","action","active","renderKey","selector","modifiers","values","HidKeyboardModifiers","push","value","filter","v","join","DashboardHIDKeyboard","service","setSelector","setModifiers","server","useServiceServer","handleKeyDown","preventDefault","altKey","ctrlKey","shiftKey","metaKey","console","log","newSelector","toLowerCase","newModifiers","handleKeyUp","handleClear","sendCmdAsync","HidKeyboardCmd","unpacked","HidKeyboardAction","data","jdpack","serverValue","useChange","_","lastKey","map","clearDisabled","useRef","current"],"mappings":"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","file":"5969-0cc11918c2b49d942564.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');\n\nexports.default = _default;","/*\nrequires \"@microsoft/applicationinsights-web-basic\": \"^2.6.1\",\nimport { ApplicationInsights } from \"@microsoft/applicationinsights-web-basic\"\n\n// YOUR_INSTRUMENTATION_KEY_GOES_HERE\nconst instrumentationKey: string = undefined\nconst appInsights =\n    instrumentationKey &&\n    new ApplicationInsights({\n        instrumentationKey,\n        isStorageUseDisabled: true,\n        isCookieUseDisabled: true,\n    })\nconst page =\n    typeof window !== \"undefined\"\n        ? () =>\n              appInsights?.track({\n                  name: window.location.href,\n                  time: new Date().toUTCString(),\n                  baseType: \"PageData\",\n              })\n        : () => {}\nconst track =\n    typeof window !== \"undefined\"\n        ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (name: string, properties?: { [key: string]: any }) =>\n              appInsights?.track({\n                  name,\n                  time: new Date().toUTCString(),\n                  data: properties,\n                  baseType: \"EventData\",\n              })\n        : // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          (name, properties) => {}\nif (typeof window !== \"undefined\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ;(window as any).analytics = {\n        page,\n        track,\n    }\n}\n*/\n\nexport default function useAnalytics(): {\n    page: () => void\n    track: (name: string, properties?: { [key: string]: string | number }) => void\n} {\n    const page = () => {}\n    const track = () => {}\n    return {\n        page,\n        track,\n    }\n}\n","import {\n    createStyles,\n    darken,\n    lighten,\n    makeStyles,\n    Theme,\n} from \"@material-ui/core\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, {\n    CSSProperties,\n    ReactNode,\n    useContext,\n    useEffect,\n    useState,\n} from \"react\"\nimport AppContext from \"./AppContext\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport ErrorIcon from \"@material-ui/icons/Error\"\nimport { delay } from \"../../jacdac-ts/src/jdom/utils\"\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\"\nimport useAnalytics from \"./hooks/useAnalytics\"\nimport useMounted from \"./hooks/useMounted\"\nimport clsx from \"clsx\"\n\nconst ACK_RESET_DELAY = 500\nconst ERROR_RESET_DELAY = 2000\n\nconst useStyles = makeStyles((theme: Theme) => {\n    const getBackgroundColor = theme.palette.type === \"light\" ? lighten : darken\n    return createStyles({\n        ack: {\n            color: \"#fff\",\n            fontWeight: theme.typography.fontWeightMedium,\n            backgroundColor: theme.palette.success.main,\n        },\n        error: {\n            color: \"#fff\",\n            backgroundColor: getBackgroundColor(theme.palette.error.main, 0.6),\n        },\n    })\n})\n\nexport default function CmdButton(props: {\n    onClick: () => Promise<void>\n    className?: string\n    style?: CSSProperties\n    title?: string\n    children?: ReactNode\n    icon?: JSX.Element\n    size?: \"small\" | undefined\n    variant?: \"outlined\" | \"contained\" | undefined\n    disabled?: boolean\n    disableReset?: boolean\n    autoRun?: boolean\n    trackName?: string\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    trackProperties?: { [key: string]: any }\n    ackResetDelay?: number\n}) {\n    const {\n        onClick,\n        className,\n        style,\n        children,\n        icon,\n        title,\n        disabled,\n        disableReset,\n        autoRun,\n        trackName,\n        trackProperties,\n        ackResetDelay,\n        ...others\n    } = props\n\n    const { setError: setAppError } = useContext(AppContext)\n    const classes = useStyles()\n    const [working, setWorking] = useState(false)\n    const [ack, setAck] = useState(false)\n    const [error, setError] = useState(undefined)\n    const { track } = useAnalytics()\n    const mounted = useMounted()\n\n    const _disabled = disabled || working\n\n    const run = async () => {\n        if (working) return // already working\n\n        if (trackName) track(\"cmd.\" + trackName, trackProperties)\n        try {\n            setError(undefined)\n            setAck(false)\n            setWorking(true)\n            await onClick()\n            if (!mounted()) return\n            setAck(true)\n            if (!disableReset) {\n                await delay(ackResetDelay || ACK_RESET_DELAY)\n                if (!mounted) return\n                setAck(false)\n            }\n        } catch (e) {\n            if (!mounted()) return\n            setAppError(e)\n            setError(e)\n            if (!disableReset) {\n                await delay(ERROR_RESET_DELAY)\n                if (!mounted()) return\n                setError(undefined)\n            }\n        } finally {\n            if (mounted()) setWorking(false)\n        }\n    }\n\n    const handleClick = async (ev: React.MouseEvent<HTMLButtonElement>) => {\n        ev.stopPropagation()\n        run()\n    }\n\n    const statusIcon = error ? <ErrorIcon /> : undefined\n    const modeClassName = error ? classes.error : ack ? classes.ack : undefined\n    const elClassName = clsx(className, modeClassName)\n\n    // run once\n    useEffect(() => {\n        if (autoRun) run()\n    }, [autoRun])\n\n    if (!children && icon)\n        return (\n            <IconButtonWithTooltip\n                className={elClassName}\n                style={style}\n                onClick={handleClick}\n                aria-label={title}\n                title={title}\n                disabled={_disabled}\n                {...others}\n            >\n                {statusIcon || icon}\n            </IconButtonWithTooltip>\n        )\n    else\n        return (\n            <Button\n                className={elClassName}\n                style={style}\n                startIcon={icon}\n                endIcon={statusIcon}\n                onClick={handleClick}\n                aria-label={title}\n                title={title}\n                disabled={_disabled}\n                {...others}\n            >\n                {children}\n            </Button>\n        )\n}\n","import React, { useState, KeyboardEvent } from \"react\"\nimport { createStyles, Grid, makeStyles, Typography } from \"@material-ui/core\"\nimport { HidKeyboardAction, HidKeyboardCmd, HidKeyboardModifiers } from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { jdpack } from \"../../../jacdac-ts/src/jdom/pack\"\nimport CmdButton from \"../CmdButton\"\nimport ClearIcon from \"@material-ui/icons/Clear\"\nimport useServiceServer from \"../hooks/useServiceServer\";\nimport HIDKeyboardServer from \"../../../jacdac-ts/src/servers/hidkeyboardserver\";\nimport useChange from \"../../jacdac/useChange\";\nimport { delay } from \"../../../jacdac-ts/src/jdom/utils\"\n\nconst selectors = {\n    \"a\": 0x04,\n    \"b\": 0x05,\n    \"c\": 0x06,\n    \"d\": 0x07,\n    \"e\": 0x08,\n    \"f\": 0x09,\n    \"g\": 0x0a,\n    \"h\": 0x0b,\n    \"i\": 0x0c,\n    \"j\": 0x0d,\n    \"k\": 0x0e,\n    \"l\": 0x0f,\n    \"m\": 0x10,\n    \"n\": 0x11,\n    \"o\": 0x12,\n    \"p\": 0x13,\n    \"q\": 0x14,\n    \"r\": 0x15,\n    \"s\": 0x16,\n    \"t\": 0x17,\n    \"u\": 0x18,\n    \"v\": 0x19,\n    \"w\": 0x1a,\n    \"x\": 0x1b,\n    \"y\": 0x1c,\n    \"z\": 0x1d,\n\n    \"1\": 0x1e,\n    \"2\": 0x1f,\n    \"3\": 0x20,\n    \"4\": 0x21,\n    \"5\": 0x22,\n    \"6\": 0x23,\n    \"7\": 0x24,\n    \"8\": 0x25,\n    \"9\": 0x26,\n    \"0\": 0x27,\n\n    \"enter\": 0x28,\n    \"escape\": 0x29,\n    \"backspace\": 0x2a,\n    \"tab\": 0x2b,\n    \" \": 0x2c,\n    \"-\": 0x2d,\n    \"_\": 0x2d,\n    \"=\": 0x2e,\n    \"+\": 0x2e,\n    // TODO entire list\n}\nconst reverseSelectors: { [index: number]: string } = Object.keys(selectors).reduce((r, key) => { r[selectors[key]] = key; return r }, {})\n\nconst useStyles = makeStyles((theme) => createStyles({\n    capture: {\n        cursor: \"pointer\",\n        \"&:hover\": {\n            borderColor: theme.palette.primary.main,\n        },\n        \"&:focus\": {\n            borderColor: theme.palette.action.active,\n        }\n    }\n}));\n\nfunction renderKey(selector: number, modifiers: HidKeyboardModifiers) {\n    const values = []\n    if ((modifiers & HidKeyboardModifiers.LeftAlt) === HidKeyboardModifiers.LeftAlt) values.push(\"Alt\")\n    if ((modifiers & HidKeyboardModifiers.LeftControl) === HidKeyboardModifiers.LeftControl) values.push(\"Ctrl\")\n    if ((modifiers & HidKeyboardModifiers.LeftGUI) === HidKeyboardModifiers.LeftGUI) values.push(\"Cmd\")\n    if ((modifiers & HidKeyboardModifiers.LeftShift) === HidKeyboardModifiers.LeftShift) values.push(\"Shift\")\n    if ((modifiers & HidKeyboardModifiers.RightAlt) === HidKeyboardModifiers.RightAlt) values.push(\"Right Alt\")\n    if ((modifiers & HidKeyboardModifiers.RightControl) === HidKeyboardModifiers.RightControl) values.push(\"Right Ctrl\")\n    if ((modifiers & HidKeyboardModifiers.RightGUI) === HidKeyboardModifiers.RightGUI) values.push(\"Right Cmd\")\n    if ((modifiers & HidKeyboardModifiers.RightShift) === HidKeyboardModifiers.RightShift) values.push(\"Right Shift\")\n\n    values.push(reverseSelectors[selector])\n\n    const value = values.filter(v => !!v).join(\" + \")\n    return value\n}\n\nexport default function DashboardHIDKeyboard(props: DashboardServiceProps) {\n    const { service } = props\n    const [selector, setSelector] = useState(0)\n    const [modifiers, setModifiers] = useState(HidKeyboardModifiers.None)\n    const server = useServiceServer<HIDKeyboardServer>(service)\n    const classes = useStyles()\n\n    const handleKeyDown = (ev: KeyboardEvent<HTMLInputElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        const { altKey, ctrlKey, shiftKey, metaKey, key } = ev\n        console.log({ key })\n\n        const newSelector = selectors[key.toLowerCase()] || 0\n        const newModifiers = modifiers |\n            (altKey && HidKeyboardModifiers.LeftAlt) |\n            (metaKey && HidKeyboardModifiers.LeftGUI) |\n            (ctrlKey && HidKeyboardModifiers.LeftControl) |\n            (shiftKey && HidKeyboardModifiers.LeftShift)\n        if (newSelector)\n            setSelector(newSelector)\n        setModifiers(newModifiers)\n    }\n\n    const handleKeyUp = (ev: KeyboardEvent<HTMLInputElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n    }\n\n    const handleClear = async () => {\n        setSelector(0)\n        setModifiers(HidKeyboardModifiers.None)\n        await service.sendCmdAsync(HidKeyboardCmd.Clear)\n    }\n\n    const handleClick = async () => {\n        console.log('send')\n        await delay(100)\n        const unpacked: [([number, HidKeyboardModifiers, HidKeyboardAction])[]] = [[[selector, modifiers, HidKeyboardAction.Press]]]\n        const data = jdpack(\"r: u16 u8 u8\", unpacked)\n        await service.sendCmdAsync(HidKeyboardCmd.Key, data)\n    }\n\n    const serverValue = useChange(server, _ => _?.lastKey?.map(key => renderKey(key[0], key[1]))?.join(\"\\n\"))\n    const value = renderKey(selector, modifiers)\n    const disabled = !selector\n    const clearDisabled = !selector && !modifiers\n\n    return <Grid container spacing={1}>\n        <Grid item>\n            <pre\n                className={classes.capture}\n                tabIndex={0}\n                onKeyDown={handleKeyDown}\n                onKeyUp={handleKeyUp}\n            >\n                {value || \"...\"}\n            </pre>\n            <Typography variant=\"caption\">focus and type your key combo (not all keys supported)</Typography>\n        </Grid>\n        <Grid item xs>\n            <input onFocus={handleClick} disabled={disabled} placeholder=\"focus to send\" type=\"text\" />\n            <CmdButton title=\"clear keys\" disabled={clearDisabled} onClick={handleClear} icon={<ClearIcon />} />\n        </Grid>\n        {server && <Grid item xs={12}>\n            <Typography variant=\"caption\" component=\"pre\">\n                key status: {serverValue || \"no keys\"}\n            </Typography>\n        </Grid>}\n    </Grid>\n}\n","import { useEffect, useRef } from \"react\";\n\nexport default function useMounted(): () => boolean {\n    const mounted = useRef(false);\n    useEffect(() => {\n        mounted.current = true;\n        return () => { mounted.current = false; }\n    }, []);\n    return () => mounted.current;\n}"],"sourceRoot":""}