{"version":3,"file":"component---src-pages-tools-makecode-editor-extension-tsx-63891f84301e05920103.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/Add.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Delete.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Save.js","webpack://jacdac-docs/./jacdac-ts/src/azure-iot/dtdl.ts","webpack://jacdac-docs/./src/components/AddServiceIconButton.tsx","webpack://jacdac-docs/./src/components/ServiceSpecificationSelect.tsx","webpack://jacdac-docs/./src/components/ui/PaperBox.tsx","webpack://jacdac-docs/./src/components/makecode/MakeCodeEditorExtensionClient.ts","webpack://jacdac-docs/./src/components/makecode/MakeCodeEditorExtension.tsx","webpack://jacdac-docs/./src/pages/tools/makecode-editor-extension.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"\n}), 'Save');\n\nexports.default = _default;","/***\n *  DTDL specification: https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md.\n */\n/**\n * @internal\n */\nexport const DTDL_REFERENCE_URL =\n    \"https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md\"\n/**\n * @internal\n */\nexport const DTDL_NAME = \"Digital Twins Definition Language\"\n/**\n * @internal\n */\nexport const DTDL_CONTEXT = [\"dtmi:dtdl:context;2\"]\n\n// warps fields into an object\nexport function objectSchema(schemas: DTDLSchema[]): DTDLSchema {\n    return {\n        \"@type\": \"Object\",\n        fields: schemas,\n    }\n}\n\n// wraps a schema into an array\nexport function arraySchema(schema: string | DTDLSchema): DTDLSchema {\n    return {\n        \"@type\": \"Array\",\n        elementSchema: schema,\n    }\n}\n\nexport interface DTDLNode {\n    \"@type\"?: string\n    \"@id\"?: string\n    // 1-64 characters\n    // ^[a-zA-Z](?:[a-zA-Z0-9_]*[a-zA-Z0-9])?$\n    name?: string\n    displayName?: string\n    description?: Record<string, string>\n}\n\nexport interface DTDLSchema extends DTDLNode {\n    fields?: DTDLSchema[]\n    schema?: string | DTDLSchema\n    elementSchema?: string | DTDLSchema\n}\n\nexport interface DTDLContent extends DTDLNode {\n    \"@type\": \"Property\" | \"Command\" | \"Component\" | \"Interface\"\n    unit?: string\n    schema?: string | DTDLSchema\n}\n\nexport interface DTDLInterface extends DTDLContent {\n    contents: DTDLContent[]\n    extends?: string | string[]\n    schemas?: (DTDLSchema | DTDLInterface)[]\n    \"@context\"?: string | string[]\n}\n\nexport function escapeName(name: string) {\n    name = name.trim().replace(/[^a-zA-Z0-9_]/g, \"_\")\n    if (!/^[a-zA-Z]/.test(name)) name = \"a\" + name\n    name = name[0].toLowerCase() + name.slice(1)\n    return name.slice(0, 64)\n}\n\nexport function escapeDisplayName(name: string) {\n    return name.slice(0, 64)\n}\n\nexport function DTDLUnits() {\n    return [\n        \"metrePerSecondSquared\",\n        \"centimetrePerSecondSquared\",\n        \"gForce\",\n        \"radian\",\n        \"degreeOfArc\",\n        \"minuteOfArc\",\n        \"secondOfArc\",\n        \"turn\",\n        \"radianPerSecondSquared\",\n        \"radianPerSecond\",\n        \"degreePerSecond\",\n        \"revolutionPerSecond\",\n        \"revolutionPerMinute\",\n        \"squareMetre\",\n        \"squareCentimetre\",\n        \"squareMillimetre\",\n        \"squareKilometre\",\n        \"hectare\",\n        \"squareFoot\",\n        \"squareInch\",\n        \"acre\",\n        \"farad\",\n        \"millifarad\",\n        \"microfarad\",\n        \"nanofarad\",\n        \"picofarad\",\n        \"ampere\",\n        \"microampere\",\n        \"milliampere\",\n        \"bitPerSecond\",\n        \"kibibitPerSecond\",\n        \"mebibitPerSecond\",\n        \"gibibitPerSecond\",\n        \"tebibitPerSecond\",\n        \"exbibitPerSecond\",\n        \"zebibitPerSecond\",\n        \"yobibitPerSecond\",\n        \"bytePerSecond\",\n        \"kibibytePerSecond\",\n        \"mebibytePerSecond\",\n        \"gibibytePerSecond\",\n        \"tebibytePerSecond\",\n        \"exbibytePerSecond\",\n        \"zebibytePerSecond\",\n        \"yobibytePerSecond\",\n        \"bit\",\n        \"kibibit\",\n        \"mebibit\",\n        \"gibibit\",\n        \"tebibit\",\n        \"exbibit\",\n        \"zebibit\",\n        \"yobibit\",\n        \"byte\",\n        \"kibibyte\",\n        \"mebibyte\",\n        \"gibibyte\",\n        \"tebibyte\",\n        \"exbibyte\",\n        \"zebibyte\",\n        \"yobibyte\",\n        \"kilogramPerCubicMetre\",\n        \"gramPerCubicMetre\",\n        \"metre\",\n        \"centimetre\",\n        \"millimetre\",\n        \"micrometre\",\n        \"nanometre\",\n        \"kilometre\",\n        \"foot\",\n        \"inch\",\n        \"mile\",\n        \"nauticalMile\",\n        \"astronomicalUnit\",\n        \"coulomb\",\n        \"joule\",\n        \"kilojoule\",\n        \"megajoule\",\n        \"gigajoule\",\n        \"electronvolt\",\n        \"megaelectronvolt\",\n        \"kilowattHour\",\n        \"newton\",\n        \"pound\",\n        \"ounce\",\n        \"ton\",\n        \"hertz\",\n        \"kilohertz\",\n        \"megahertz\",\n        \"gigahertz\",\n        \"kilogramPerCubicMetre\",\n        \"gramPerCubicMetre\",\n        \"lux\",\n        \"footcandle\",\n        \"henry\",\n        \"millihenry\",\n        \"microhenry\",\n        \"radian\",\n        \"degreeOfArc\",\n        \"minuteOfArc\",\n        \"secondOfArc\",\n        \"turn\",\n        \"radian\",\n        \"degreeOfArc\",\n        \"minuteOfArc\",\n        \"secondOfArc\",\n        \"turn\",\n        \"metre\",\n        \"centimetre\",\n        \"millimetre\",\n        \"micrometre\",\n        \"nanometre\",\n        \"kilometre\",\n        \"foot\",\n        \"inch\",\n        \"mile\",\n        \"nauticalMile\",\n        \"astronomicalUnit\",\n        \"candelaPerSquareMetre\",\n        \"watt\",\n        \"microwatt\",\n        \"milliwatt\",\n        \"kilowatt\",\n        \"megawatt\",\n        \"gigawatt\",\n        \"horsepower\",\n        \"kilowattHourPerYear\",\n        \"lumen\",\n        \"candela\",\n        \"weber\",\n        \"maxwell\",\n        \"tesla\",\n        \"kilogram\",\n        \"gram\",\n        \"milligram\",\n        \"microgram\",\n        \"tonne\",\n        \"slug\",\n        \"gramPerSecond\",\n        \"kilogramPerSecond\",\n        \"gramPerHour\",\n        \"kilogramPerHour\",\n        \"watt\",\n        \"microwatt\",\n        \"milliwatt\",\n        \"kilowatt\",\n        \"megawatt\",\n        \"gigawatt\",\n        \"horsepower\",\n        \"kilowattHourPerYear\",\n        \"pascal\",\n        \"kilopascal\",\n        \"bar\",\n        \"millibar\",\n        \"millimetresOfMercury\",\n        \"poundPerSquareInch\",\n        \"inchesOfMercury\",\n        \"inchesOfWater\",\n        \"unity percent\",\n        \"ohm\",\n        \"milliohm\",\n        \"kiloohm\",\n        \"megaohm\",\n        \"decibel\",\n        \"bel\",\n        \"kelvin\",\n        \"degreeCelsius\",\n        \"degreeFahrenheit\",\n        \"newton\",\n        \"pound\",\n        \"ounce\",\n        \"ton\",\n        \"second\",\n        \"millisecond\",\n        \"microsecond\",\n        \"nanosecond\",\n        \"minute\",\n        \"hour\",\n        \"day\",\n        \"year\",\n        \"newtonMetre\",\n        \"metrePerSecond\",\n        \"centimetrePerSecond\",\n        \"kilometrePerSecond\",\n        \"metrePerHour\",\n        \"kilometrePerHour\",\n        \"milePerHour\",\n        \"milePerSecond\",\n        \"knot\",\n        \"volt\",\n        \"millivolt\",\n        \"microvolt\",\n        \"kilovolt\",\n        \"megavolt\",\n        \"cubicMetre\",\n        \"cubicCentimetre\",\n        \"litre\",\n        \"millilitre\",\n        \"cubicFoot\",\n        \"cubicInch\",\n        \"fluidOunce\",\n        \"gallon\",\n        \"litrePerSecond\",\n        \"millilitrePerSecond\",\n        \"litrePerHour\",\n        \"millilitrePerHour\",\n    ].sort()\n}\n","import React, { useMemo } from 'react';\nimport { Menu, MenuItem, Typography } from '@material-ui/core';\nimport { isInfrastructure, serviceSpecificationFromClassIdentifier, serviceSpecifications } from '../../jacdac-ts/src/jdom/spec';\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport AddIcon from '@material-ui/icons/Add';\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function AddServiceIconButton(props: {\n    onAdd: (service: jdspec.ServiceSpec) => void,\n    serviceFilter?: (service: jdspec.ServiceSpec) => boolean,\n    error?: string,\n    children?: JSX.Element | JSX.Element[]\n}) {\n    const { error, onAdd, children, serviceFilter } = props;\n    const [servicesAnchorEl, setServicesAnchorEl] = React.useState<null | HTMLElement>(null);\n    const servicesMenuId = useId();\n    const services = useMemo(() => serviceSpecifications()\n        .filter(srv => !isInfrastructure(srv))\n        .filter(srv => !serviceFilter || serviceFilter(srv))\n        , [serviceFilter])\n\n    const handleServiceAddClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        setServicesAnchorEl(event.currentTarget);\n    };\n    const handleServiceAddClose = (id: number) => () => {\n        setServicesAnchorEl(null);\n        if (id !== undefined) {\n            const srv = serviceSpecificationFromClassIdentifier(id);\n            onAdd(srv);\n        }\n    };\n\n    return <>\n        <IconButtonWithTooltip title=\"Add a service\" aria-controls={servicesMenuId} aria-haspopup=\"true\" onClick={handleServiceAddClick}>\n            {children || <AddIcon />}\n        </IconButtonWithTooltip>\n        <Menu\n            id={servicesMenuId}\n            anchorEl={servicesAnchorEl}\n            keepMounted\n            open={Boolean(servicesAnchorEl)}\n            onClose={handleServiceAddClose(undefined)}\n        >\n            {services.map(srv => <MenuItem key={srv.classIdentifier} value={srv.classIdentifier.toString(16)}\n                onClick={handleServiceAddClose(srv.classIdentifier)}>\n                {srv.name}\n            </MenuItem>)}\n        </Menu>\n        <Typography variant=\"caption\" color={error ? \"error\" : \"inherit\"} component=\"div\">\n            {error || \"Select one or more services.\"}\n        </Typography></>\n}","import { createStyles, makeStyles, MenuItem, TextField, Theme } from \"@material-ui/core\";\nimport React, { ChangeEvent, useState } from \"react\";\nimport { serviceSpecifications } from \"../../jacdac-ts/src/jdom/spec\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        root: {\n            minWidth: \"18rem\",\n        }\n    }),\n);\n\nexport default function ServiceSpecificationSelect(props: {\n    label: string,\n    serviceClass: number;\n    setServiceClass: (serviceClass: number) => void;\n    variant?: \"outlined\" | \"filled\" | \"standard\";\n    fullWidth?: boolean;\n    error?: string;\n}) {\n    const { label, serviceClass, setServiceClass, variant, fullWidth, error } = props;\n    const [labelId] = useState('select-' + Math.random());\n    const classes = useStyles();\n    const specs = serviceSpecifications().filter(spec => !/^_/.test(spec.shortId))\n\n    const handleChange = (event: ChangeEvent<HTMLInputElement>) =>\n        setServiceClass(parseInt(event.target.value));\n\n    return <TextField\n        id={labelId}\n        className={classes.root}\n        label={label}\n        error={!!error}\n        helperText={error}\n        value={serviceClass}\n        select\n        variant={variant}\n        fullWidth={fullWidth}\n        onChange={handleChange}>\n        <MenuItem key=\"none\" value=\"NaN\">No service selected</MenuItem>\n        {specs.map(spec => <MenuItem\n            key={spec.classIdentifier}\n            value={spec.classIdentifier}>{spec.name}</MenuItem>)}\n    </TextField>\n}","import { Box, BoxProps, Paper, PaperProps, useTheme } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function PaperBox(props: { padding?: number; elevation?: number; bgcolor?: string } & BoxProps) {\n    const { children, padding, elevation, bgcolor, ...others } = props;\n    const theme = useTheme();\n\n    return <Box {...others} bgcolor={bgcolor} mb={theme.spacing(0.25)}>\n        <Paper square elevation={elevation}>\n            {padding !== 0 && <Box p={theme.spacing(padding || 0.25)}>\n                {children}\n            </Box>}\n            {padding === 0 && children}\n        </Paper>\n    </Box>\n}","import { useContext, useEffect, useState } from \"react\"\nimport { JDClient } from \"../../../jacdac-ts/src/jdom/client\"\nimport { CHANGE, CONNECT } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { inIFrame } from \"../../../jacdac-ts/src/jdom/iframeclient\"\nimport Packet from \"../../../jacdac-ts/src/jdom/packet\"\nimport { SMap } from \"../../../jacdac-ts/src/jdom/utils\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\n\nexport const READ = \"read\"\nexport const MESSAGE_PACKET = \"messagepacket\"\nconst HIDDEN = \"hidden\"\nconst SHOWN = \"shown\"\nconst SENDER = \"jacdac-editor-extension\"\n\nexport interface ReadResponse {\n    code?: string\n    json?: string\n    jres?: string\n}\n\nexport class MakeCodeEditorExtensionClient extends JDClient {\n    private readonly pendingCommands: {\n        [key: string]: {\n            action: string\n            resolve: (resp: any) => void\n            reject: (e: any) => void\n        }\n    } = {}\n    private readonly extensionId: string = inIFrame()\n        ? window.location.hash.substr(1)\n        : undefined\n    private _target: any // full apptarget\n    private _connected = false\n    private _visible = false\n\n    constructor() {\n        super()\n        this.handleMessage = this.handleMessage.bind(this)\n        if (typeof window !== \"undefined\") {\n            window.addEventListener(\"message\", this.handleMessage, false)\n            this.mount(() =>\n                window.removeEventListener(\"message\", this.handleMessage)\n            )\n        }\n        // always refresh on load\n        this.on(SHOWN, () => this.refresh())\n        // notify parent that we're ready\n        this.init()\n    }\n\n    get target() {\n        return this._target\n    }\n\n    get connected() {\n        return this._connected\n    }\n\n    get visible() {\n        return this._visible\n    }\n\n    private setVisible(vis: boolean) {\n        if (this._visible !== vis) {\n            this._visible = vis\n            this.emit(CHANGE)\n        }\n    }\n\n    private nextRequestId = 1\n    private mkRequest(\n        resolve: (resp: any) => void,\n        reject: (e: any) => void,\n        action: string,\n        body?: any\n    ): any {\n        const id = \"jd_\" + this.nextRequestId++\n        this.pendingCommands[id] = { action, resolve, reject }\n        return {\n            type: \"pxtpkgext\",\n            action,\n            extId: this.extensionId,\n            response: true,\n            id,\n            body,\n        }\n    }\n\n    private sendRequest<T>(action: string, body?: any): Promise<T> {\n        this.log(`send ${action}`)\n        if (!this.extensionId) return Promise.resolve(undefined)\n\n        return new Promise((resolve, reject) => {\n            const msg = this.mkRequest(resolve, reject, action, body)\n            window.parent.postMessage(msg, \"*\")\n        })\n    }\n\n    private handleMessage(ev: any) {\n        const msg = ev.data\n        if (msg?.type !== \"pxtpkgext\") return\n        if (!msg.id) {\n            switch (msg.event) {\n                case \"extinit\":\n                    this.log(`init`)\n                    this._target = msg.target\n                    this._connected = true\n                    this.emit(CONNECT)\n                    this.emit(CHANGE)\n                    break\n                case \"extloaded\":\n                    this.log(`loaded`)\n                    break\n                case \"extshown\":\n                    this.setVisible(true)\n                    this.emit(SHOWN)\n                    this.emit(CHANGE)\n                    break\n                case \"exthidden\":\n                    this.setVisible(false)\n                    this.emit(HIDDEN)\n                    this.emit(CHANGE)\n                    break\n                case \"extdatastream\":\n                    this.emit(\"datastream\", true)\n                    break\n                case \"extconsole\":\n                    this.emit(\"console\", msg.body)\n                    break\n                case \"extmessagepacket\":\n                    this.emit(MESSAGE_PACKET, msg.body)\n                    break\n                default:\n                    console.debug(\"Unhandled event\", msg)\n            }\n        } else {\n            const { action, resolve, reject } =\n                this.pendingCommands[msg.id] || {}\n            delete this.pendingCommands[msg.id]\n\n            if (msg.success && resolve) resolve(msg.resp)\n            else if (!msg.success && reject) reject(msg.resp)\n            // raise event as well\n            switch (action) {\n                case \"extinit\":\n                    this._connected = true\n                    this.emit(CONNECT)\n                    this.emit(CHANGE)\n                    break\n                case \"extusercode\":\n                    // Loaded, set the target\n                    this.emit(\"readuser\", msg.resp)\n                    this.emit(CHANGE)\n                    break\n                case \"extreadcode\":\n                    // Loaded, set the target\n                    this.emit(READ, msg.resp)\n                    this.emit(CHANGE)\n                    break\n                case \"extwritecode\":\n                    this.emit(\"written\", undefined)\n                    break\n            }\n        }\n    }\n\n    private async init() {\n        this.log(`initializing`)\n        await this.sendRequest<void>(\"extinit\")\n        this.log(`connected`)\n        await this.refresh()\n    }\n\n    private async refresh() {\n        this.log(`refresh`)\n        const r = await this.read()\n    }\n\n    async read(): Promise<ReadResponse> {\n        if (!this.extensionId) {\n            const r: ReadResponse = {}\n            this.emit(READ, r)\n            return r\n        } else {\n            const resp: ReadResponse = await this.sendRequest(\"extreadcode\")\n            return resp\n        }\n    }\n\n    async readUser() {\n        await this.sendRequest(\"extusercode\")\n    }\n\n    async write(\n        code: string,\n        json?: string,\n        jres?: string,\n        dependencies?: SMap<string>\n    ): Promise<void> {\n        if (!this.extensionId) {\n            // Write to local storage instead\n            this.emit(\"written\", undefined)\n        } else {\n            await this.sendRequest<void>(\"extwritecode\", {\n                code: code || undefined,\n                json: json || undefined,\n                jres: jres || undefined,\n                dependencies,\n            })\n        }\n    }\n\n    async queryPermission() {\n        await this.sendRequest(\"extquerypermission\")\n    }\n\n    async requestPermission(console: boolean) {\n        await this.sendRequest(\"extrequestpermission\", {\n            console,\n        })\n    }\n\n    async dataStreamConsole(console: boolean) {\n        await this.sendRequest(\"extdatastream\", {\n            console,\n        })\n    }\n\n    async dataStreamMessages(messages: boolean) {\n        await this.sendRequest(\"extdatastream\", {\n            messages,\n        })\n    }\n}\n\nexport default function useMakeCodeEditorExtensionClient() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const [client, setClient] =\n        useState<MakeCodeEditorExtensionClient>(undefined)\n    useEffect(() => {\n        console.log(`mkcd: new editor client`)\n        const c = new MakeCodeEditorExtensionClient()\n        c.on(CONNECT, () => {\n            console.log(`mkcd: stream messages`)\n            c.dataStreamMessages(true)\n        })\n        c.on([HIDDEN, SHOWN], () => bus.clear())\n        c.on(MESSAGE_PACKET, msg => {\n            if (msg.channel === \"jacdac\" && msg.source !== SENDER) {\n                const pkts = Packet.fromFrame(msg.data, bus.timestamp)\n                for (const pkt of pkts) {\n                    pkt.sender = msg.source || \"makecode\"\n                    bus.processPacket(pkt)\n                }\n            }\n        })\n        setClient(c)\n        return () => c?.unmount()\n    }, [])\n    return client\n}\n","import { Grid, TextField } from \"@material-ui/core\"\nimport React, { ChangeEvent, useEffect, useMemo, useState } from \"react\"\nimport {\n    clone,\n    JSONTryParse,\n    SMap,\n    uniqueName,\n} from \"../../../jacdac-ts/src/jdom/utils\"\nimport useChange from \"../../jacdac/useChange\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeleteIcon from \"@material-ui/icons/Delete\"\nimport { serviceSpecifications } from \"../../../jacdac-ts/src/jdom/spec\"\nimport AddServiceIconButton from \"../AddServiceIconButton\"\nimport ServiceSpecificationSelect from \"../ServiceSpecificationSelect\"\nimport { escapeName } from \"../../../jacdac-ts/src/azure-iot/dtdl\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport useMakeCodeEditorExtensionClient, {\n    READ,\n    ReadResponse,\n} from \"./MakeCodeEditorExtensionClient\"\nimport CmdButton from \"../CmdButton\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport SaveIcon from \"@material-ui/icons/Save\"\nimport { camelize } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { useId } from \"react-use-id-hook\"\nimport {\n    resolveMakecodeService,\n    resolveMakecodeServiceFromClassIdentifier,\n} from \"./services\"\n\ninterface ClientRole {\n    name: string\n    service: number\n}\n\ninterface Configuration {\n    roles: ClientRole[]\n}\n\nfunction toTypescript(config: Configuration) {\n    const ns = \"myModules\"\n    return `// auto-generated, do not edit.\nnamespace ${ns} {\n${config.roles\n    .map(\n        role => `\n    //% fixedInstance block=\"${role.name}\"\n    export const ${camelize(role.name)} = new ${\n            resolveMakecodeServiceFromClassIdentifier(role.service).client.qName\n        }(\"${camelize(role.name)}\");\n`\n    )\n    .join(\"\")}\n\n    // start after main\n    control.runInParallel(function() {\n        ${config.roles\n            .map(\n                role => `    ${ns}.${camelize(role.name)}.start();\n        `\n            )\n            .join(\"\")}\n    })\n}\n    `\n}\n\nfunction toDependencies(config: Configuration) {\n    const r: SMap<string> = {}\n    config?.roles.forEach(role => {\n        const mk = resolveMakecodeServiceFromClassIdentifier(role.service)\n        r[mk.client.name] = `github:${mk.client.repo}`\n    })\n    return r\n}\n\nfunction toJSON(config: Configuration) {\n    return config && JSON.stringify(config, null, 4)\n}\n\nfunction ClientRoleRow(props: {\n    config: Configuration\n    component: ClientRole\n    onUpdate: () => void\n}) {\n    const { component, onUpdate, config } = props\n    const { name, service } = component\n    const { nameError, serviceError } = useMemo(\n        () => validateClientRole(config, component),\n        [config, component]\n    )\n    const textId = useId()\n    const handleComponentNameChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        component.name = escapeName(ev.target.value)\n        onUpdate()\n    }\n    const handleSetService = (serviceClass: number) => {\n        component.service = serviceClass\n        onUpdate()\n    }\n    const handleComponentDelete = () => {\n        config.roles.splice(config.roles.indexOf(component), 1)\n        onUpdate()\n    }\n    return (\n        <Grid item xs={12}>\n            <Grid container spacing={2}>\n                <Grid item xs={4} md={6}>\n                    <TextField\n                        id={textId}\n                        fullWidth={true}\n                        error={!!nameError}\n                        variant=\"outlined\"\n                        label=\"name\"\n                        helperText={nameError}\n                        value={name}\n                        onChange={handleComponentNameChange}\n                    />\n                </Grid>\n                <Grid item xs={4} md={4}>\n                    <ServiceSpecificationSelect\n                        variant=\"outlined\"\n                        label=\"service\"\n                        serviceClass={service}\n                        setServiceClass={handleSetService}\n                        error={serviceError}\n                    />\n                </Grid>\n                <Grid item>\n                    <IconButtonWithTooltip\n                        title=\"Remove service\"\n                        onClick={handleComponentDelete}\n                    >\n                        <DeleteIcon />\n                    </IconButtonWithTooltip>\n                </Grid>\n            </Grid>\n        </Grid>\n    )\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction validateClientRole(config: Configuration, role: ClientRole) {\n    const serviceError: string = undefined\n    const nameError: string = undefined\n    // TODO: properly validate client role\n    return { serviceError, nameError }\n}\n\nexport default function MakeCodeEditorExtension() {\n    const client = useMakeCodeEditorExtensionClient()\n    const connected = useChange(client, c => c?.connected)\n    const [configuration, setConfiguration] = useState<Configuration>({\n        roles: [],\n    } as Configuration)\n    useEffect(\n        () =>\n            client?.subscribe(READ, (resp: ReadResponse) => {\n                console.log(`mkcd: read received`)\n                const cfg = JSONTryParse(resp.json)\n                console.log({ resp, cfg })\n                if (cfg) setConfiguration(cfg)\n            }),\n        [client]\n    )\n    const hasMakeCodeService = (srv: jdspec.ServiceSpec) =>\n        !!resolveMakecodeService(srv)\n    const update = () => {\n        setConfiguration(clone(configuration))\n    }\n    const handleAddService = (service: jdspec.ServiceSpec) => {\n        if (!configuration.roles) configuration.roles = []\n        const names = configuration.roles\n            .map(c => c.name)\n            .concat(serviceSpecifications().map(spec => spec.camelName))\n            .filter(n => !!n)\n        configuration.roles.push({\n            name: uniqueName(names, service.camelName || service.shortId),\n            service: service.classIdentifier,\n        })\n        update()\n    }\n    const handleSave = async () => {\n        const ts = toTypescript(configuration)\n        const json = toJSON(configuration)\n        const deps = toDependencies(configuration)\n        console.log(`mkcd: saving...`)\n        await client.write(ts, json, undefined, deps)\n    }\n\n    return (\n        <Grid container direction=\"row\" spacing={2}>\n            {configuration.roles?.map((c, i) => (\n                <ClientRoleRow\n                    key={\"config\" + i}\n                    config={configuration}\n                    component={c}\n                    onUpdate={update}\n                />\n            ))}\n            <Grid item xs={12}>\n                <AddServiceIconButton\n                    serviceFilter={hasMakeCodeService}\n                    onAdd={handleAddService}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <CmdButton\n                    trackName=\"makecode.save\"\n                    variant=\"contained\"\n                    disabled={!connected}\n                    icon={<SaveIcon />}\n                    onClick={handleSave}\n                >\n                    save\n                </CmdButton>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, { useContext, useEffect } from \"react\"\nimport {\n    createTheme,\n    createStyles,\n    responsiveFontSizes,\n} from \"@material-ui/core\"\nimport ThemedLayout from \"../../components/ui/ThemedLayout\"\nimport MakeCodeEditorExtension from \"../../components/makecode/MakeCodeEditorExtension\"\nimport { makeStyles } from \"@material-ui/core\"\nimport PaperBox from \"../../components/ui/PaperBox\"\nimport DarkModeContext from \"../../components/ui/DarkModeContext\"\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        content: {\n            display: \"flex\",\n            minHeight: \"100vh\",\n            minWidth: \"10rem\",\n            flexDirection: \"column\",\n            padding: theme.spacing(3),\n            transition: theme.transitions.create(\"margin\", {\n                easing: theme.transitions.easing.sharp,\n                duration: theme.transitions.duration.leavingScreen,\n            }),\n            flexGrow: 1,\n        },\n    })\n)\n\nexport default function MakeCodeEditorExtensionPage() {\n    const { toggleDarkMode, darkModeMounted } = useContext(DarkModeContext)\n    const rawTheme = createTheme({\n        palette: {\n            primary: {\n                main: \"#2e7d32\",\n            },\n            secondary: {\n                main: \"#ffc400\",\n            },\n            contrastThreshold: 5.1,\n            type: \"dark\",\n        },\n    })\n    const classes = useStyles()\n    const theme = responsiveFontSizes(rawTheme)\n    useEffect(() => {\n        if (darkModeMounted) toggleDarkMode(\"light\")\n    }, [darkModeMounted])\n    return (\n        <ThemedLayout theme={theme}>\n            <div className={classes.content}>\n                <PaperBox>\n                    <MakeCodeEditorExtension />\n                </PaperBox>\n            </div>\n        </ThemedLayout>\n    )\n}\n"],"names":["DTDL_REFERENCE_URL","DTDL_NAME","DTDL_CONTEXT","objectSchema","schemas","fields","arraySchema","schema","elementSchema","escapeName","name","trim","replace","test","toLowerCase","slice","escapeDisplayName","DTDLUnits","sort","React","useMemo","Menu","MenuItem","Typography","isInfrastructure","serviceSpecificationFromClassIdentifier","serviceSpecifications","AddIcon","IconButtonWithTooltip","useId","AddServiceIconButton","props","error","onAdd","children","serviceFilter","servicesAnchorEl","setServicesAnchorEl","useState","servicesMenuId","services","filter","srv","handleServiceAddClick","event","currentTarget","handleServiceAddClose","id","undefined","Boolean","map","classIdentifier","toString","createStyles","makeStyles","TextField","useStyles","root","minWidth","ServiceSpecificationSelect","label","serviceClass","setServiceClass","variant","fullWidth","labelId","Math","random","classes","specs","spec","shortId","handleChange","parseInt","target","value","Box","Paper","useTheme","PaperBox","padding","elevation","bgcolor","others","theme","spacing","useContext","useEffect","JDClient","CHANGE","CONNECT","inIFrame","Packet","JacdacContext","READ","MESSAGE_PACKET","HIDDEN","SHOWN","SENDER","MakeCodeEditorExtensionClient","pendingCommands","extensionId","window","location","hash","substr","_connected","_visible","nextRequestId","handleMessage","bind","addEventListener","mount","removeEventListener","on","refresh","init","setVisible","vis","emit","mkRequest","resolve","reject","action","body","type","extId","response","sendRequest","log","Promise","msg","parent","postMessage","ev","data","_target","console","debug","success","resp","r","read","readUser","write","code","json","jres","dependencies","queryPermission","requestPermission","dataStreamConsole","dataStreamMessages","messages","useMakeCodeEditorExtensionClient","bus","client","setClient","c","clear","channel","source","pkts","fromFrame","timestamp","pkt","sender","processPacket","unmount","Grid","clone","JSONTryParse","uniqueName","useChange","DeleteIcon","CmdButton","SaveIcon","camelize","resolveMakecodeService","resolveMakecodeServiceFromClassIdentifier","toTypescript","config","ns","roles","role","service","qName","join","toDependencies","forEach","mk","repo","toJSON","JSON","stringify","ClientRoleRow","component","onUpdate","nameError","serviceError","validateClientRole","textId","handleComponentNameChange","handleSetService","handleComponentDelete","splice","indexOf","MakeCodeEditorExtension","connected","configuration","setConfiguration","subscribe","cfg","hasMakeCodeService","update","handleAddService","names","concat","camelName","n","push","handleSave","ts","deps","i","createTheme","responsiveFontSizes","ThemedLayout","DarkModeContext","content","display","minHeight","flexDirection","transition","transitions","create","easing","sharp","duration","leavingScreen","flexGrow","MakeCodeEditorExtensionPage","toggleDarkMode","darkModeMounted","rawTheme","palette","primary","main","secondary","contrastThreshold"],"sourceRoot":""}