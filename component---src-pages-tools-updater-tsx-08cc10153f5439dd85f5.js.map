{"version":3,"sources":["webpack:///./src/components/ui/CircularProgressWithLabel.tsx","webpack:///./src/components/ui/CardMediaWithSkeleton.tsx","webpack:///./src/components/DeviceCardMedia.tsx","webpack:///./src/components/DeviceCardHeader.tsx","webpack:///./src/components/alert/ConnectAlert.tsx","webpack:///./node_modules/@material-ui/core/esm/CardMedia/CardMedia.js","webpack:///./src/components/alert/DeviceLostAlert.tsx","webpack:///./src/components/useGridBreakpoints.ts","webpack:///./node_modules/@material-ui/core/esm/internal/SwitchBase.js","webpack:///./node_modules/@material-ui/core/esm/Switch/Switch.js","webpack:///./src/components/firmware/useFirmwareRepos.ts","webpack:///./src/components/firmware/LocalFileFirmwareCard.tsx","webpack:///./src/components/firmware/FirmwareCardGrid.tsx","webpack:///./src/components/UpdateDeviceList.tsx","webpack:///./src/components/firmware/SafeBootAlert.tsx","webpack:///./src/components/tools/Flash.tsx","webpack:///./src/pages/tools/updater.tsx","webpack:///./node_modules/@material-ui/core/esm/ListItem/ListItem.js","webpack:///./node_modules/@material-ui/icons/DeleteForever.js","webpack:///./src/components/ServiceButton.tsx","webpack:///./src/components/DeviceCard.tsx"],"names":["CircularProgressWithLabel","props","Math","round","value","useStyles","makeStyles","theme","createStyles","media","height","paddingTop","CardMediaWithSkeleton","image","src","className","others","classes","hasImage","DeviceCardMedia","device","specification","useDeviceSpecification","imageUrl","useDeviceImage","name","DeviceFirmwareVersionChip","firmwareVersionRegister","service","register","ControlReg","FirmwareVersion","firmwareVersion","useRegisterStringValue","DeviceTemperatureChip","tempRegister","McuTemperature","temperature","useRegisterIntValue","undefined","DeviceCardHeader","showFirmware","showTemperature","showMedia","showDeviceId","showAvatar","identifierToUrlPath","id","deviceId","filter","s","join","button","marginLeft","spacing","NoSsrConnectAlert","serviceClass","useContext","JacdacContext","bus","transports","devices","useChange","b","ignoreSelf","spec","serviceSpecificationFromClassIdentifier","length","map","transport","type","ConnectAlert","DeviceLostAlert","lost","useEventRaised","LOST","FOUND","dev","useGridBreakpoints","itemCount","AppContext","drawerType","xs","sm","md","lg","xl","DrawerType","None","useFirmwareRepos","showAllRepos","useState","repos","setRepos","DEVICE_CHANGE","announced","bootloaders","hasService","SRV_BOOTLOADER","registers","FirmwareIdentifier","reg","useEffectAsync","mounted","deviceSpecifications","repo","firmwares","refresh","firmwareIdentifier","intValue","indexOf","push","bootloader","boot","services","bl_announce","Packet","onlyHeader","BootloaderCmd","Info","sendCmdAwaitResponseAsync","resp","jdunpack","console","warn","fw","deviceSpecificationFromFirmwareIdentifier","unique","ImportButton","lazy","LOCAL_FILE_SLUG","LocalFileFirmwareCard","slug","downloading","setDownloading","error","setError","useFirmwareBlob","setFirmwareFile","firmwareBlobs","disabled","version","handleFiles","files","file","handleClear","blob","toString","FirmwareCardGrid","gridBreakpoints","safeBoot","firmwareRepos","firmwareRepo","UpdateDeviceCard","progress","setProgress","blobs","useFirmwareBlobs","firmwareInfo","d","find","update","updateApplicable","flashing","handleFlashing","updateCandidates","flashFirmwareBlob","prog","UpdateDeviceList","scanning","setScanning","useDevices","ignoreSimulators","isFlashing","some","useMounted","scan","log","scanFirmwares","useEffect","subscribe","FIRMWARE_BLOBS_CHANGE","SafeBootAlert","DbContext","db","useSnackbar","enqueueSnackbar","setSafeBoot","handleRecovery","v","clear","variant","Flash","tab","setTab","handleTabChange","event","newValue","a11yProps","Page","ServiceButton","onClick","root","bullet","display","margin","transform","title","fontSize","pos","marginBottom","navigateToService","navigate","shortId","DeviceDescription","description","DeviceCard","children","action","content","showDescription","showServices","SRV_CTRL","SRV_LOGGER"],"mappings":"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EA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,sBAAmB,CAAC,6BAAU,EAAE,sCAAQ;AAC9D;AACA,eAAe,iCAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,uBAAuB,sBAAmB,UAAU,sCAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,EAAE;AACH;;AAEA,MAAqC,GAAG,SAAM;AAC/B,6FAAU,CAAC,iBAAM;AAChC;AACA,CAAC,EAAE,qBAAU,CAAC,E;;AC1I4C;AACgC;;AAE3D;AACP;AACqB;AACC;AACI;AACL;AACG;AACzC,IAAI,aAAM;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAI;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAI;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe;;AAEf;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;A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3B,sBAAO,2EACH,6DADG,eAEH,8MAFG,eAOH,8BAAC,KAAD,OAPG,CAAP;AASH,C;;;;;;;;ACbD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AAC4B;AACN;AACP;AACU;AACJ;AACC;AACR;AAC/B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL,0FAA0F,KAAK;AAC/F,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL,2EAA2E,KAAK;AAChF,gBAAgB;;AAEhB,oEAAoE,KAAK;AACzE;AACA;AACA;AACA,KAAK;;AAEL,2EAA2E,MAAM;AACjF;AACA;AACA;AACA,KAAK;;AAEL,mEAAmE,KAAK;AACxE;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,8DAA8D,KAAK;AACnE;AACA;AACA;AACA,wDAAwD,+CAAe,GAAG,qDAAqB;AAC/F;AACA;AACA;;AAEA,4BAA4B,gDAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;;AAE/D;AACA,uBAAuB,0GAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC,gBAAgB,gDAAgB,CAAC,iEAAW;AAC5C;AACA;AACA;AACA;AACA,oBAAoB,4CAAY;AAChC;AACA;AACA;AACA;AACA,OAAO,UAAU,KAAqC,EAAE,EAEjD;AACP;AACA,GAAG;AACH,iBAAiB,8CAAc;AAC/B,8CAA8C,2EAAY;AAC1D,qBAAqB,iDAAiB;AACtC;AACA,0BAA0B,qDAAoB;AAC9C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","file":"component---src-pages-tools-updater-tsx-08cc10153f5439dd85f5.js","sourcesContent":["import React from \"react\"\nimport { CircularProgressProps, Box, CircularProgress, Typography } from \"@material-ui/core\";\n\nexport default function CircularProgressWithLabel(props: CircularProgressProps & { value: number }) {\n    return (\n        <Box position=\"relative\" display=\"inline-flex\">\n            <CircularProgress variant=\"determinate\" {...props} />\n            <Box\n                top={0}\n                left={0}\n                bottom={0}\n                right={0}\n                position=\"absolute\"\n                display=\"flex\"\n                alignItems=\"center\"\n                justifyContent=\"center\"\n            >\n                <Typography variant=\"caption\" component=\"div\" color=\"textSecondary\">{`${Math.round(\n                    props.value,\n                )}%`}</Typography>\n            </Box>\n        </Box>\n    );\n}","import { CardMedia, CardMediaProps, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n    media: {\n        height: 0,\n        paddingTop: '75%', // 4:3\n    }\n}));\n\n/*\n        [theme.breakpoints.down('lg')]: {\n            paddingTop: '56.72%', // 16:9\n        },\n        [theme.breakpoints.down('xs')]: {\n            paddingTop: '18%',\n        },\n        [theme.breakpoints.down('md')]: { // 6:3\n            paddingTop: '50%',\n        }\n*/\n\nexport default function CardMediaWithSkeleton(props: CardMediaProps) {\n    const { image, src, className, ...others } = props;\n    const classes = useStyles();\n    const hasImage = !!image || !!src;\n    return hasImage ?\n        <CardMedia className={className || classes.media} {...others} image={image} src={src} />\n        : <></>;\n}","import React from \"react\";\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\";\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\";\nimport useDeviceImage from \"./devices/useDeviceImage\";\nimport CardMediaWithSkeleton from \"./ui/CardMediaWithSkeleton\";\n\nexport default function DeviceCardMedia(props: { device: JDDevice }) {\n    const { device } = props;\n    const specification = useDeviceSpecification(device)\n    const imageUrl = useDeviceImage(specification)\n\n    return <CardMediaWithSkeleton\n        image={imageUrl}\n        title={specification?.name}\n    />\n}","import { ControlReg } from \"../../jacdac-ts/src/jdom/constants\"\nimport { CardHeader, Chip, Typography } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport { Link } from \"gatsby-theme-material-ui\"\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\"\nimport React from \"react\"\nimport {\n    useRegisterIntValue,\n    useRegisterStringValue,\n} from \"../jacdac/useRegisterValue\"\nimport DeviceActions from \"./DeviceActions\"\nimport DeviceName from \"./devices/DeviceName\"\nimport DeviceCardMedia from \"./DeviceCardMedia\"\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\"\nimport { identifierToUrlPath } from \"../../jacdac-ts/src/jdom/spec\"\nimport DeviceAvatar from \"./devices/DeviceAvatar\"\n\nfunction DeviceFirmwareVersionChip(props: { device: JDDevice }) {\n    const { device } = props\n    const firmwareVersionRegister = device\n        ?.service(0)\n        ?.register(ControlReg.FirmwareVersion)\n    const firmwareVersion = useRegisterStringValue(firmwareVersionRegister)\n\n    return (\n        (firmwareVersion && <Chip size=\"small\" label={firmwareVersion} />) || (\n            <></>\n        )\n    )\n}\n\nfunction DeviceTemperatureChip(props: { device: JDDevice }) {\n    const { device } = props\n    const tempRegister = device?.service(0)?.register(ControlReg.McuTemperature)\n    const temperature = useRegisterIntValue(tempRegister)\n    return (\n        (temperature !== undefined && (\n            <Chip size=\"small\" label={`${temperature}°`} />\n        )) || <></>\n    )\n}\n\nexport default function DeviceCardHeader(props: {\n    device: JDDevice\n    showAvatar?: boolean\n    showDeviceId?: boolean\n    showFirmware?: boolean\n    showTemperature?: boolean\n    showMedia?: boolean\n}) {\n    const {\n        device,\n        showFirmware,\n        showTemperature,\n        showMedia,\n        showDeviceId,\n        showAvatar,\n    } = props\n    const specification = useDeviceSpecification(device)\n\n    return (\n        <>\n            {showMedia && <DeviceCardMedia device={device} />}\n            <CardHeader\n                avatar={showAvatar && <DeviceAvatar device={device} />}\n                action={<DeviceActions device={device} showReset={true} />}\n                title={\n                    <Link\n                        color=\"textPrimary\"\n                        to={`/devices/${\n                            identifierToUrlPath(specification?.id) || \"\"\n                        }`}\n                    >\n                        <DeviceName device={device} />\n                    </Link>\n                }\n                subheader={\n                    <>\n                        <Typography variant=\"caption\" gutterBottom>\n                            {[\n                                specification?.name,\n                                showDeviceId && device.deviceId,\n                            ]\n                                .filter(s => !!s)\n                                .join(\", \")}\n                        </Typography>\n                        {showFirmware && (\n                            <DeviceFirmwareVersionChip device={device} />\n                        )}\n                        {showTemperature && (\n                            <DeviceTemperatureChip device={device} />\n                        )}\n                    </>\n                }\n            />\n        </>\n    )\n}\n","// tslint:disable-next-line: no-submodule-imports\nimport { Box, createStyles, makeStyles } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport ConnectButton from \"../../jacdac/ConnectButton\"\nimport { NoSsr } from \"@material-ui/core\"\nimport useChange from \"../../jacdac/useChange\"\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        button: {\n            marginLeft: theme.spacing(2),\n        },\n    })\n)\n\nfunction NoSsrConnectAlert(props: { serviceClass?: number }) {\n    const classes = useStyles()\n    const { serviceClass } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useChange(bus, b => b.devices({ serviceClass, ignoreSelf: true }))\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n\n    // don't show if no transport, some devices\n    if (!transports.length || devices?.length) return null\n\n    return (\n        <Box displayPrint=\"none\">\n            <Alert severity=\"info\" closeable={true}>\n                {!spec && <span>Did you connect your device?</span>}\n                {spec && <span>Did you connect a {spec.name} device?</span>}\n                {transports.map(transport => (\n                    <ConnectButton\n                        key={transport.type}\n                        transport={transport}\n                        className={classes.button}\n                        full={true}\n                        transparent={true}\n                    />\n                ))}\n            </Alert>\n        </Box>\n    )\n}\n\nexport default function ConnectAlert(props: { serviceClass?: number }) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { chainPropTypes } from '@material-ui/utils';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'block',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n\n  /* Styles applied to the root element if `component=\"video, audio, picture, iframe, or img\"`. */\n  media: {\n    width: '100%'\n  },\n\n  /* Styles applied to the root element if `component=\"picture or img\"`. */\n  img: {\n    // ⚠️ object-fit is not supported by IE 11.\n    objectFit: 'cover'\n  }\n};\nvar MEDIA_COMPONENTS = ['video', 'audio', 'picture', 'iframe', 'img'];\nvar CardMedia = /*#__PURE__*/React.forwardRef(function CardMedia(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      image = props.image,\n      src = props.src,\n      style = props.style,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"image\", \"src\", \"style\"]);\n\n  var isMediaComponent = MEDIA_COMPONENTS.indexOf(Component) !== -1;\n  var composedStyle = !isMediaComponent && image ? _extends({\n    backgroundImage: \"url(\\\"\".concat(image, \"\\\")\")\n  }, style) : style;\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, isMediaComponent && classes.media, \"picture img\".indexOf(Component) !== -1 && classes.img),\n    ref: ref,\n    style: composedStyle,\n    src: isMediaComponent ? image || src : undefined\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardMedia'\n})(CardMedia);","import React from \"react\";\nimport { LOST, FOUND } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport useEventRaised from \"../../jacdac/useEventRaised\";\nimport Alert from \"../ui/Alert\";\n\nexport function DeviceLostAlert(props: { device: JDDevice }) {\n    const { device } = props;\n    const lost = useEventRaised([LOST, FOUND], device, dev => !!dev?.lost)\n    return <>\n        {lost && <Alert severity=\"info\">Device lost...</Alert>}\n    </>\n}","import { GridSize } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport AppContext, { DrawerType } from \"./AppContext\"\n\nexport interface GridBreakpoints {\n    xs?: GridSize,\n    md?: GridSize,\n    sm?: GridSize,\n    lg?: GridSize,\n    xl?: GridSize\n}\n\nexport default function useGridBreakpoints(itemCount?: number): GridBreakpoints {\n    const { drawerType } = useContext(AppContext)\n\n    if (itemCount !== undefined) {\n        switch (itemCount) {\n            case 1:\n            case 2: return { xs: 12, sm: 6, md: 6, lg: 6, xl: 6 }\n            case 3: return { xs: 12, sm: 6, md: 6, lg: 4, xl: 4 }\n        }\n    }\n\n    if (drawerType != DrawerType.None)\n        return { xs: 12, md: 6, sm: 6, lg: 6, xl: 4 }\n    else return {\n        xs: 12,\n        sm: 6,\n        md: 4,\n        lg: 4,\n        xl: 3\n    }\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport useControlled from '../utils/useControlled';\nimport useFormControl from '../FormControl/useFormControl';\nimport withStyles from '../styles/withStyles';\nimport IconButton from '../IconButton';\nexport var styles = {\n  root: {\n    padding: 9\n  },\n  checked: {},\n  disabled: {},\n  input: {\n    cursor: 'inherit',\n    position: 'absolute',\n    opacity: 0,\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n    margin: 0,\n    padding: 0,\n    zIndex: 1\n  }\n};\n/**\n * @ignore - internal component.\n */\n\nvar SwitchBase = /*#__PURE__*/React.forwardRef(function SwitchBase(props, ref) {\n  var autoFocus = props.autoFocus,\n      checkedProp = props.checked,\n      checkedIcon = props.checkedIcon,\n      classes = props.classes,\n      className = props.className,\n      defaultChecked = props.defaultChecked,\n      disabledProp = props.disabled,\n      icon = props.icon,\n      id = props.id,\n      inputProps = props.inputProps,\n      inputRef = props.inputRef,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      readOnly = props.readOnly,\n      required = props.required,\n      tabIndex = props.tabIndex,\n      type = props.type,\n      value = props.value,\n      other = _objectWithoutProperties(props, [\"autoFocus\", \"checked\", \"checkedIcon\", \"classes\", \"className\", \"defaultChecked\", \"disabled\", \"icon\", \"id\", \"inputProps\", \"inputRef\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"readOnly\", \"required\", \"tabIndex\", \"type\", \"value\"]);\n\n  var _useControlled = useControlled({\n    controlled: checkedProp,\n    default: Boolean(defaultChecked),\n    name: 'SwitchBase',\n    state: 'checked'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      checked = _useControlled2[0],\n      setCheckedState = _useControlled2[1];\n\n  var muiFormControl = useFormControl();\n\n  var handleFocus = function handleFocus(event) {\n    if (onFocus) {\n      onFocus(event);\n    }\n\n    if (muiFormControl && muiFormControl.onFocus) {\n      muiFormControl.onFocus(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    if (onBlur) {\n      onBlur(event);\n    }\n\n    if (muiFormControl && muiFormControl.onBlur) {\n      muiFormControl.onBlur(event);\n    }\n  };\n\n  var handleInputChange = function handleInputChange(event) {\n    var newChecked = event.target.checked;\n    setCheckedState(newChecked);\n\n    if (onChange) {\n      // TODO v5: remove the second argument.\n      onChange(event, newChecked);\n    }\n  };\n\n  var disabled = disabledProp;\n\n  if (muiFormControl) {\n    if (typeof disabled === 'undefined') {\n      disabled = muiFormControl.disabled;\n    }\n  }\n\n  var hasLabelFor = type === 'checkbox' || type === 'radio';\n  return /*#__PURE__*/React.createElement(IconButton, _extends({\n    component: \"span\",\n    className: clsx(classes.root, className, checked && classes.checked, disabled && classes.disabled),\n    disabled: disabled,\n    tabIndex: null,\n    role: undefined,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"input\", _extends({\n    autoFocus: autoFocus,\n    checked: checkedProp,\n    defaultChecked: defaultChecked,\n    className: classes.input,\n    disabled: disabled,\n    id: hasLabelFor && id,\n    name: name,\n    onChange: handleInputChange,\n    readOnly: readOnly,\n    ref: inputRef,\n    required: required,\n    tabIndex: tabIndex,\n    type: type,\n    value: value\n  }, inputProps)), checked ? checkedIcon : icon);\n}); // NB: If changed, please update Checkbox, Switch and Radio\n// so that the API documentation is updated.\n\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'PrivateSwitchBase'\n})(SwitchBase);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\"; // @inheritedComponent IconButton\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport { fade } from '../styles/colorManipulator';\nimport capitalize from '../utils/capitalize';\nimport SwitchBase from '../internal/SwitchBase';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      width: 34 + 12 * 2,\n      height: 14 + 12 * 2,\n      overflow: 'hidden',\n      padding: 12,\n      boxSizing: 'border-box',\n      position: 'relative',\n      flexShrink: 0,\n      zIndex: 0,\n      // Reset the stacking context.\n      verticalAlign: 'middle',\n      // For correct alignment with the text.\n      '@media print': {\n        colorAdjust: 'exact'\n      }\n    },\n\n    /* Styles applied to the root element if `edge=\"start\"`. */\n    edgeStart: {\n      marginLeft: -8\n    },\n\n    /* Styles applied to the root element if `edge=\"end\"`. */\n    edgeEnd: {\n      marginRight: -8\n    },\n\n    /* Styles applied to the internal `SwitchBase` component's `root` class. */\n    switchBase: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 1,\n      // Render above the focus ripple.\n      color: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[400],\n      transition: theme.transitions.create(['left', 'transform'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      '&$checked': {\n        transform: 'translateX(20px)'\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        opacity: 0.5\n      },\n      '&$disabled + $track': {\n        opacity: theme.palette.type === 'light' ? 0.12 : 0.1\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"primary\"`. */\n    colorPrimary: {\n      '&$checked': {\n        color: theme.palette.primary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.primary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.primary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      '&$checked': {\n        color: theme.palette.secondary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.secondary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the root element if `size=\"small\"`. */\n    sizeSmall: {\n      width: 40,\n      height: 24,\n      padding: 7,\n      '& $thumb': {\n        width: 16,\n        height: 16\n      },\n      '& $switchBase': {\n        padding: 4,\n        '&$checked': {\n          transform: 'translateX(16px)'\n        }\n      }\n    },\n\n    /* Pseudo-class applied to the internal `SwitchBase` component's `checked` class. */\n    checked: {},\n\n    /* Pseudo-class applied to the internal SwitchBase component's disabled class. */\n    disabled: {},\n\n    /* Styles applied to the internal SwitchBase component's input element. */\n    input: {\n      left: '-100%',\n      width: '300%'\n    },\n\n    /* Styles used to create the thumb passed to the internal `SwitchBase` component `icon` prop. */\n    thumb: {\n      boxShadow: theme.shadows[1],\n      backgroundColor: 'currentColor',\n      width: 20,\n      height: 20,\n      borderRadius: '50%'\n    },\n\n    /* Styles applied to the track element. */\n    track: {\n      height: '100%',\n      width: '100%',\n      borderRadius: 14 / 2,\n      zIndex: -1,\n      transition: theme.transitions.create(['opacity', 'background-color'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white,\n      opacity: theme.palette.type === 'light' ? 0.38 : 0.3\n    }\n  };\n};\nvar Switch = /*#__PURE__*/React.forwardRef(function Switch(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'secondary' : _props$color,\n      _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"edge\", \"size\"]);\n\n  var icon = /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.thumb\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.root, className, {\n      'start': classes.edgeStart,\n      'end': classes.edgeEnd\n    }[edge], size === \"small\" && classes[\"size\".concat(capitalize(size))])\n  }, /*#__PURE__*/React.createElement(SwitchBase, _extends({\n    type: \"checkbox\",\n    icon: icon,\n    checkedIcon: icon,\n    classes: {\n      root: clsx(classes.switchBase, classes[\"color\".concat(capitalize(color))]),\n      input: classes.input,\n      checked: classes.checked,\n      disabled: classes.disabled\n    },\n    ref: ref\n  }, other)), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.track\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiSwitch'\n})(Switch);","import { useContext, useState } from \"react\";\nimport { deviceSpecificationFromFirmwareIdentifier, deviceSpecifications } from \"../../../jacdac-ts/src/jdom/spec\";\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\";\nimport useEffectAsync from \"../useEffectAsync\";\nimport { unique } from \"../../../jacdac-ts/src/jdom/utils\";\nimport { BootloaderCmd, ControlReg, DEVICE_CHANGE, SRV_BOOTLOADER } from \"../../../jacdac-ts/src/jdom/constants\";\nimport useEventRaised from \"../../jacdac/useEventRaised\";\nimport Packet from \"../../../jacdac-ts/src/jdom/packet\";\n\nexport default function useFirmwareRepos(showAllRepos?: boolean) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const [repos, setRepos] = useState<string[]>([])\n\n    const devices = useEventRaised(DEVICE_CHANGE, bus, () => bus.devices().filter(dev => dev.announced))\n    const bootloaders = devices.filter(device => device?.hasService(SRV_BOOTLOADER));\n    const registers = devices\n        .filter(device => !device?.hasService(SRV_BOOTLOADER)) // not a bootloader\n        .map(device => device?.service(0)?.register(ControlReg.FirmwareIdentifier))\n        .filter(reg => !!reg);\n\n    useEffectAsync(async (mounted) => {\n        let repos: string[] = [];\n        if (showAllRepos)\n            repos = deviceSpecifications().map(spec => spec.repo);\n        else {\n            const firmwares: number[] = [];\n            // ask firmware registers\n            for (const register of registers) {\n                await register.refresh(true)\n                const firmwareIdentifier = register.intValue;\n                if (firmwareIdentifier !== undefined && firmwares.indexOf(firmwareIdentifier) < 0)\n                    firmwares.push(firmwareIdentifier);\n            }\n            // ask bootloaders\n            for (const bootloader of bootloaders) {\n                const boot = bootloader.services({ serviceClass: SRV_BOOTLOADER })[0];\n                const bl_announce = Packet.onlyHeader(BootloaderCmd.Info)\n                try {\n                    const resp = await boot.sendCmdAwaitResponseAsync(bl_announce);\n                    const [, , , firmwareIdentifier] = resp.jdunpack<[number, number, number, number]>(\"u32 u32 u32 u32\");\n                    if (firmwareIdentifier !== undefined && firmwares.indexOf(firmwareIdentifier) < 0)\n                        firmwares.push(firmwareIdentifier);\n                }\n                catch (e) {\n                    console.warn(`bootloader firmware identifier failed`, e)\n                }\n            }\n            repos = firmwares.map(fw => deviceSpecificationFromFirmwareIdentifier(fw)?.repo)\n                .filter(repo => !!repo);\n        }\n        if (mounted)\n            setRepos(unique(repos))\n    }, [devices.map(dev => dev.id).join(), registers.map(reg => reg.id).join(), showAllRepos])\n    return repos;\n}","import React, { lazy, useState } from \"react\"\nimport { Button, Card, CardHeader, CardActions, CardContent, ListItem, List, ListItemText, Typography } from \"@material-ui/core\";\nimport { useFirmwareBlob } from \"./useFirmwareBlobs\";\nimport Alert from \"../ui/Alert\";\nimport Suspense from \"../ui/Suspense\"\nconst ImportButton = lazy(() => import(\"../ImportButton\"))\n\nconst LOCAL_FILE_SLUG = \"local file\";\n\nexport default function LocalFileFirmwareCard() {\n    const slug = LOCAL_FILE_SLUG;\n    const [downloading, setDownloading] = useState(false)\n    const [error, setError] = useState(\"\")\n    const { setFirmwareFile, firmwareBlobs } = useFirmwareBlob(slug)\n    const disabled = downloading;\n    const version = firmwareBlobs?.[0].version\n\n    const handleFiles = async (files: File[]) => {\n        const file = files[0]\n        if (file) {\n            try {\n                setDownloading(true)\n                await setFirmwareFile(undefined, file)\n            } finally {\n                setDownloading(false)\n            }\n        }\n    }\n\n    const handleClear = async () => {\n        try {\n            setError(\"\")\n            setDownloading(true)\n            setFirmwareFile(undefined, undefined)\n        }\n        finally {\n            setDownloading(false)\n        }\n    }\n\n    return <Card>\n        <CardHeader\n            title={slug} />\n        <CardContent>\n            {error && <Alert severity=\"error\">{error}</Alert>}\n            {version && <Typography variant=\"body2\">version <code>{version}</code></Typography>}\n            {!!firmwareBlobs?.length && <List dense>\n                {firmwareBlobs.map(blob => <ListItem key={blob.firmwareIdentifier}>\n                    <ListItemText primary={blob.name} secondary={`0x${blob.firmwareIdentifier.toString(16)}`} />\n                </ListItem>)}\n            </List>}\n        </CardContent>\n        <CardActions>\n            {!downloading && <Suspense><ImportButton text={\"Import UF2 file\"} onFilesUploaded={handleFiles} /></Suspense>}\n            {!downloading && firmwareBlobs?.length && <Button disabled={disabled} variant=\"text\" arial-label={\"Clear\"} onClick={handleClear}>\n                Clear\n            </Button>}\n        </CardActions>\n    </Card>\n}","import { Grid, Switch } from \"@material-ui/core\";\nimport React, { useContext, useState } from \"react\";\nimport useGridBreakpoints from \"../useGridBreakpoints\";\nimport FirmwareCard from \"./FirmwareCard\";\n// tslint:disable-next-line: no-submodule-imports\nimport useFirmwareRepos from \"./useFirmwareRepos\";\nimport LocalFileFirmwareCard from \"./LocalFileFirmwareCard\";\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\";\nimport useChange from \"../../jacdac/useChange\";\n\nexport default function FirmwareCardGrid() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const gridBreakpoints = useGridBreakpoints()\n    const safeBoot = useChange(bus, b => b.safeBoot);\n    const firmwareRepos = useFirmwareRepos(safeBoot)\n\n    return <Grid container spacing={2}>\n        <Grid {...gridBreakpoints} item key=\"localfile\">\n            <LocalFileFirmwareCard />\n        </Grid>\n        {firmwareRepos.map(firmwareRepo => <Grid {...gridBreakpoints} item key={`firmwarerepo${firmwareRepo}`}>\n            <FirmwareCard slug={firmwareRepo} />\n        </Grid>)}\n    </Grid>\n}\n","import { Button, Grid } from \"@material-ui/core\"\nimport { Alert } from \"@material-ui/lab\"\nimport React, { useContext, useEffect, useState } from \"react\"\nimport {\n    DEVICE_CHANGE,\n    FIRMWARE_BLOBS_CHANGE,\n    SRV_BOOTLOADER,\n} from \"../../jacdac-ts/src/jdom/constants\"\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\"\nimport {\n    scanFirmwares,\n    flashFirmwareBlob,\n    updateApplicable,\n} from \"../../jacdac-ts/src/jdom/flashing\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\nimport CircularProgressWithLabel from \"./ui/CircularProgressWithLabel\"\nimport DeviceCard from \"./DeviceCard\"\nimport useGridBreakpoints from \"./useGridBreakpoints\"\nimport { BusState } from \"../../jacdac-ts/src/jdom/bus\"\nimport AppContext from \"./AppContext\"\nimport useChange from \"../jacdac/useChange\"\nimport useDevices from \"./hooks/useDevices\"\nimport useFirmwareBlobs from \"./firmware/useFirmwareBlobs\"\nimport ConnectAlert from \"./alert/ConnectAlert\"\nimport useMounted from \"./hooks/useMounted\"\n\nfunction UpdateDeviceCard(props: { device: JDDevice }) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { device } = props\n    const { setError } = useContext(AppContext)\n    const [progress, setProgress] = useState(0)\n    const blobs = useFirmwareBlobs()\n    const firmwareInfo = useChange(device, d => d.firmwareInfo)\n    const blob =\n        firmwareInfo &&\n        blobs?.find(\n            b => firmwareInfo.firmwareIdentifier == b.firmwareIdentifier\n        )\n    const update = blob && firmwareInfo && updateApplicable(firmwareInfo, blob)\n    const flashing = useChange(device, d => d.flashing)\n\n    const handleFlashing = async () => {\n        if (device.flashing) return\n        try {\n            setProgress(0)\n            device.flashing = true // don't refresh registers while flashing\n            const updateCandidates = [firmwareInfo]\n            await flashFirmwareBlob(bus, blob, updateCandidates, prog =>\n                setProgress(prog)\n            )\n            // trigger info\n            device.firmwareInfo = undefined\n        } catch (e) {\n            setError(e)\n        } finally {\n            device.flashing = false\n        }\n    }\n\n    return (\n        <DeviceCard\n            device={device}\n            showFirmware={true}\n            content={update && <span>Update to {blob.version}</span>}\n            // tslint:disable-next-line: react-this-binding-issue\n            action={\n                flashing ? (\n                    <CircularProgressWithLabel value={progress} />\n                ) : update ? (\n                    <Button\n                        aria-label=\"deploy new firmware to device\"\n                        disabled={flashing}\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleFlashing}\n                    >\n                        Flash\n                    </Button>\n                ) : firmwareInfo ? (\n                    <Alert severity=\"success\">Up to date!</Alert>\n                ) : undefined\n            }\n        />\n    )\n}\n\nexport default function UpdateDeviceList() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const [scanning, setScanning] = useState(false)\n    const gridBreakpoints = useGridBreakpoints()\n    const safeBoot = useChange(bus, b => b.safeBoot)\n    const devices = useDevices(\n        {\n            announced: true,\n            ignoreSelf: true,\n            ignoreSimulators: true,\n            firmwareIdentifier: true,\n        },\n        [safeBoot]\n    ).filter(dev => safeBoot || !dev.hasService(SRV_BOOTLOADER))\n    const isFlashing = devices.some(dev => dev.flashing)\n    const blobs = useFirmwareBlobs()\n    const mounted = useMounted()\n    async function scan() {\n        if (!blobs?.length || isFlashing || scanning) return\n        console.log(`start scanning bus`)\n        try {\n            setScanning(true)\n            await scanFirmwares(bus)\n        } finally {\n            if (mounted()) setScanning(false)\n        }\n    }\n    // load indexed db file once\n    useEffect(() => {\n        scan()\n    }, [isFlashing, blobs])\n    useEffect(\n        () =>\n            bus.subscribe([DEVICE_CHANGE, FIRMWARE_BLOBS_CHANGE], () => scan()),\n        []\n    )\n\n    return (\n        <Grid container spacing={2}>\n            {devices.map(device => (\n                <Grid key={device.id} item {...gridBreakpoints}>\n                    <UpdateDeviceCard device={device} />\n                </Grid>\n            ))}\n        </Grid>\n    )\n}\n","import { Box, Button, Switch, Typography } from \"@material-ui/core\";\nimport React, { useContext, useEffect, useState } from \"react\";\n// tslint:disable-next-line: no-submodule-imports\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\";\nimport Alert from \"../ui/Alert\";\nimport DbContext, { DbContextProps } from \"../DbContext\";\n// tslint:disable-next-line: match-default-export-name tslint:disable-next-line: no-submodule-imports\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport { useSnackbar } from \"notistack\";\n\nexport default function SafeBootAlert() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { db } = useContext<DbContextProps>(DbContext)\n    const { enqueueSnackbar } = useSnackbar();\n    const [safeBoot, setSafeBoot] = useState(bus.safeBoot);\n    const firmwares = db?.firmwares;\n\n    const handleRecovery = async () => {\n        const v = !safeBoot;\n        setSafeBoot(v);\n    }\n    const handleClear = async () => {\n        await firmwares.clear();\n        enqueueSnackbar(\"firmwares cleared\", {\n            variant: \"info\"\n        })\n    }\n\n    // turn on and off safeboot mode\n    useEffect(() => {\n        bus.safeBoot = safeBoot;\n        return () => { bus.safeBoot = false }\n    }, [safeBoot]);\n\n    return (<>\n        <Alert severity=\"info\">\n            <Switch value={safeBoot} onChange={handleRecovery} />\n            <Typography component=\"span\" variant=\"body1\">\n                recovery mode\n                </Typography>\n            <Box mr={1}>\n                <Typography component=\"span\" variant=\"caption\">\n                    If your module is malfunctioning from the start, you can flash it in bootloader mode.\n                    Turn on recovery mode and unplug/replug any malfunctioning device to switch it to bootloader mode (glowing status LED).\n                    Once your module is flashed, turn off recovery mode and unplug/replug your module again.\n                    </Typography>\n            </Box>\n        </Alert>\n        {safeBoot && <Alert severity=\"warning\">\n            <Button size=\"small\" variant=\"outlined\" disabled={!firmwares} onClick={handleClear} startIcon={<DeleteForeverIcon />}>\n                clear cache\n            </Button>\n            <Box mr={1}>\n                <Typography component=\"span\" variant=\"caption\">\n                    Delete all firmware cached in the browser. The firmware will have to be deleted again from this interface.\n                    </Typography>\n            </Box>\n        </Alert>}\n    </>)\n}\n","import { Box, Tab, Tabs } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport TabPanel, { a11yProps } from '../ui/TabPanel';\nimport ConnectAlert from \"../alert/ConnectAlert\";\nimport FirmwareCardGrid from \"../firmware/FirmwareCardGrid\";\n// tslint:disable-next-line: no-submodule-imports\nimport UpdateDeviceList from \"../UpdateDeviceList\";\nimport SafeBootAlert from \"../firmware/SafeBootAlert\";\n\nexport default function Flash() {\n    const [tab, setTab] = useState(0);\n    const handleTabChange = (event: React.ChangeEvent<unknown>, newValue: number) => {\n        setTab(newValue);\n    }\n\n    return (\n        <Box mb={2}>\n            <ConnectAlert />\n            <Tabs value={tab} onChange={handleTabChange} aria-label=\"View specification formats\">\n                <Tab label={`Updates`} {...a11yProps(1)} />\n                <Tab label={`Firmwares`} {...a11yProps(0)} />\n            </Tabs>\n            <TabPanel value={tab} index={0}>\n                <UpdateDeviceList />\n            </TabPanel>\n            <TabPanel value={tab} index={1}>\n                <FirmwareCardGrid />\n            </TabPanel>\n            <SafeBootAlert />\n        </Box>\n    )\n}\n","import React from \"react\"\nimport Flash from \"../../components/tools/Flash\"\n\nexport default function Page() {\n    return <>\n        <h1>Firmware Updater</h1>\n        <p>\n        This page allows you to update your Jacdac module with new firmware. Find the latest UF2 firmware file from your manufacturer \nand import it with the button below.\n            \n        </p>\n        <Flash />\n    </>\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport ButtonBase from '../ButtonBase';\nimport isMuiElement from '../utils/isMuiElement';\nimport useForkRef from '../utils/useForkRef';\nimport ListContext from '../List/ListContext';\nimport * as ReactDOM from 'react-dom';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the (normally root) `component` element. May be wrapped by a `container`. */\n    root: {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      position: 'relative',\n      textDecoration: 'none',\n      width: '100%',\n      boxSizing: 'border-box',\n      textAlign: 'left',\n      paddingTop: 8,\n      paddingBottom: 8,\n      '&$focusVisible': {\n        backgroundColor: theme.palette.action.selected\n      },\n      '&$selected, &$selected:hover': {\n        backgroundColor: theme.palette.action.selected\n      },\n      '&$disabled': {\n        opacity: 0.5\n      }\n    },\n\n    /* Styles applied to the `container` element if `children` includes `ListItemSecondaryAction`. */\n    container: {\n      position: 'relative'\n    },\n\n    /* Pseudo-class applied to the `component`'s `focusVisibleClassName` prop if `button={true}`. */\n    focusVisible: {},\n\n    /* Styles applied to the `component` element if dense. */\n    dense: {\n      paddingTop: 4,\n      paddingBottom: 4\n    },\n\n    /* Styles applied to the `component` element if `alignItems=\"flex-start\"`. */\n    alignItemsFlexStart: {\n      alignItems: 'flex-start'\n    },\n\n    /* Pseudo-class applied to the inner `component` element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the inner `component` element if `divider={true}`. */\n    divider: {\n      borderBottom: \"1px solid \".concat(theme.palette.divider),\n      backgroundClip: 'padding-box'\n    },\n\n    /* Styles applied to the inner `component` element if `disableGutters={false}`. */\n    gutters: {\n      paddingLeft: 16,\n      paddingRight: 16\n    },\n\n    /* Styles applied to the inner `component` element if `button={true}`. */\n    button: {\n      transition: theme.transitions.create('background-color', {\n        duration: theme.transitions.duration.shortest\n      }),\n      '&:hover': {\n        textDecoration: 'none',\n        backgroundColor: theme.palette.action.hover,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Styles applied to the `component` element if `children` includes `ListItemSecondaryAction`. */\n    secondaryAction: {\n      // Add some space to avoid collision as `ListItemSecondaryAction`\n      // is absolutely positioned.\n      paddingRight: 48\n    },\n\n    /* Pseudo-class applied to the root element if `selected={true}`. */\n    selected: {}\n  };\n};\nvar useEnhancedEffect = typeof window === 'undefined' ? React.useEffect : React.useLayoutEffect;\n/**\n * Uses an additional container component if `ListItemSecondaryAction` is the last child.\n */\n\nvar ListItem = /*#__PURE__*/React.forwardRef(function ListItem(props, ref) {\n  var _props$alignItems = props.alignItems,\n      alignItems = _props$alignItems === void 0 ? 'center' : _props$alignItems,\n      _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      _props$button = props.button,\n      button = _props$button === void 0 ? false : _props$button,\n      childrenProp = props.children,\n      classes = props.classes,\n      className = props.className,\n      componentProp = props.component,\n      _props$ContainerCompo = props.ContainerComponent,\n      ContainerComponent = _props$ContainerCompo === void 0 ? 'li' : _props$ContainerCompo,\n      _props$ContainerProps = props.ContainerProps;\n  _props$ContainerProps = _props$ContainerProps === void 0 ? {} : _props$ContainerProps;\n\n  var ContainerClassName = _props$ContainerProps.className,\n      ContainerProps = _objectWithoutProperties(_props$ContainerProps, [\"className\"]),\n      _props$dense = props.dense,\n      dense = _props$dense === void 0 ? false : _props$dense,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      _props$divider = props.divider,\n      divider = _props$divider === void 0 ? false : _props$divider,\n      focusVisibleClassName = props.focusVisibleClassName,\n      _props$selected = props.selected,\n      selected = _props$selected === void 0 ? false : _props$selected,\n      other = _objectWithoutProperties(props, [\"alignItems\", \"autoFocus\", \"button\", \"children\", \"classes\", \"className\", \"component\", \"ContainerComponent\", \"ContainerProps\", \"dense\", \"disabled\", \"disableGutters\", \"divider\", \"focusVisibleClassName\", \"selected\"]);\n\n  var context = React.useContext(ListContext);\n  var childContext = {\n    dense: dense || context.dense || false,\n    alignItems: alignItems\n  };\n  var listItemRef = React.useRef(null);\n  useEnhancedEffect(function () {\n    if (autoFocus) {\n      if (listItemRef.current) {\n        listItemRef.current.focus();\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.error('Material-UI: Unable to set focus to a ListItem whose component has not been rendered.');\n      }\n    }\n  }, [autoFocus]);\n  var children = React.Children.toArray(childrenProp);\n  var hasSecondaryAction = children.length && isMuiElement(children[children.length - 1], ['ListItemSecondaryAction']);\n  var handleOwnRef = React.useCallback(function (instance) {\n    // #StrictMode ready\n    listItemRef.current = ReactDOM.findDOMNode(instance);\n  }, []);\n  var handleRef = useForkRef(handleOwnRef, ref);\n\n  var componentProps = _extends({\n    className: clsx(classes.root, className, childContext.dense && classes.dense, !disableGutters && classes.gutters, divider && classes.divider, disabled && classes.disabled, button && classes.button, alignItems !== \"center\" && classes.alignItemsFlexStart, hasSecondaryAction && classes.secondaryAction, selected && classes.selected),\n    disabled: disabled\n  }, other);\n\n  var Component = componentProp || 'li';\n\n  if (button) {\n    componentProps.component = componentProp || 'div';\n    componentProps.focusVisibleClassName = clsx(classes.focusVisible, focusVisibleClassName);\n    Component = ButtonBase;\n  }\n\n  if (hasSecondaryAction) {\n    // Use div by default.\n    Component = !componentProps.component && !componentProp ? 'div' : Component; // Avoid nesting of li > li.\n\n    if (ContainerComponent === 'li') {\n      if (Component === 'li') {\n        Component = 'div';\n      } else if (componentProps.component === 'li') {\n        componentProps.component = 'div';\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(ListContext.Provider, {\n      value: childContext\n    }, /*#__PURE__*/React.createElement(ContainerComponent, _extends({\n      className: clsx(classes.container, ContainerClassName),\n      ref: handleRef\n    }, ContainerProps), /*#__PURE__*/React.createElement(Component, componentProps, children), children.pop()));\n  }\n\n  return /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: childContext\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: handleRef\n  }, componentProps), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItem'\n})(ListItem);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'DeleteForever');\n\nexports.default = _default;","import { ButtonProps } from \"@material-ui/core\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React from \"react\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\n\nexport default function ServiceButton(\n    props: { service: JDService; onClick?: () => void } & ButtonProps\n) {\n    const { service, onClick, ...others } = props\n    return (\n        <Button\n            {...others}\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={onClick}\n        >\n            {service.name}\n        </Button>\n    )\n}\n","import React from 'react';\n// tslint:disable-next-line: no-submodule-imports\nimport { makeStyles } from '@material-ui/core/styles';\n// tslint:disable-next-line: no-submodule-imports\nimport Card from '@material-ui/core/Card';\n// tslint:disable-next-line: no-submodule-imports\nimport CardContent from '@material-ui/core/CardContent';\nimport { JDDevice } from '../../jacdac-ts/src/jdom/device';\nimport { SRV_CTRL, SRV_LOGGER, ControlReg } from '../../jacdac-ts/src/jdom/constants';\nimport ServiceButton from './ServiceButton';\nimport useChange from '../jacdac/useChange';\nimport { navigate } from \"gatsby\";\nimport { JDService } from '../../jacdac-ts/src/jdom/service';\nimport { CardActions, createStyles } from '@material-ui/core';\nimport DeviceCardHeader from './DeviceCardHeader';\nimport { useRegisterStringValue } from '../jacdac/useRegisterValue';\nimport { DeviceLostAlert } from './alert/DeviceLostAlert';\n\nconst useStyles = makeStyles(() => createStyles({\n    root: {\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n}));\n\nfunction navigateToService(service: JDService) {\n    const spec = service.specification;\n    if (spec)\n        navigate(`/services/${spec.shortId}/`) // todo spec\n}\n\nfunction DeviceDescription(props: { device: JDDevice }) {\n    const { device } = props;\n    const register = device?.service(0)?.register(ControlReg.DeviceDescription)\n    const description = useRegisterStringValue(register)\n    return <span>{description || \"\"}</span>\n}\n\nexport default function DeviceCard(props: {\n    device: JDDevice,\n    children?: any,\n    action?: JSX.Element | JSX.Element[],\n    content?: JSX.Element | JSX.Element[],\n    showDeviceId?: boolean,\n    showServices?: boolean,\n    showTemperature?: boolean,\n    showFirmware?: boolean,\n    showDescription?: boolean\n}) {\n    const { device, children, action, content,\n        showDeviceId,\n        showDescription, showTemperature, showFirmware, showServices } = props;\n    const classes = useStyles();\n    const services = useChange(device, () => device.services()\n        .filter(service => service.serviceClass != SRV_CTRL && service.serviceClass != SRV_LOGGER));\n\n    return (\n        <Card className={classes.root}>\n            <DeviceCardHeader device={device}\n                showDeviceId={showDeviceId}\n                showTemperature={showTemperature}\n                showFirmware={showFirmware}\n                showMedia={true} />\n            {(showDescription || content) &&\n                <CardContent>\n                    {<DeviceLostAlert device={device} />}\n                    {showDescription && <DeviceDescription device={device} />}\n                    {content}\n                </CardContent>}\n            <CardActions>\n                {action}\n                {showServices && services?.map(service => <ServiceButton key={service.id} service={service} onClick={() => navigateToService(service)} />)}\n            </CardActions>\n            {children}\n        </Card>\n    );\n}\n"],"sourceRoot":""}