{"version":3,"file":"5233-8f520a702bf836c62df3.js","mappings":"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","sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/MouseOutlined.js","webpack://jacdac-docs/./src/components/dashboard/DashboardHIDMouse.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 9c-.04-4.39-3.6-7.93-8-7.93S4.04 4.61 4 9v6c0 4.42 3.58 8 8 8s8-3.58 8-8V9zm-2 0h-5V3.16c2.81.47 4.96 2.9 5 5.84zm-7-5.84V9H6c.04-2.94 2.19-5.37 5-5.84zM18 15c0 3.31-2.69 6-6 6s-6-2.69-6-6v-4h12v4z\"\n}), 'MouseOutlined');\n\nexports.default = _default;","/* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nimport React, { KeyboardEvent, MouseEvent, useRef, useState } from \"react\"\nimport { createStyles, Grid, makeStyles, Typography } from \"@material-ui/core\"\nimport {\n    HidMouseButton,\n    HidMouseButtonEvent,\n    HidMouseCmd,\n} from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { jdpack } from \"../../../jacdac-ts/src/jdom/pack\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport HIDMouseServer, {\n    renderHidMouseButtons,\n} from \"../../../jacdac-ts/src/servers/hidmouseserver\"\nimport useChange from \"../../jacdac/useChange\"\nimport MouseIcon from \"@material-ui/icons/MouseOutlined\"\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        capture: {\n            whiteSpace: \"pre-wrap\",\n            cursor: \"pointer\",\n            \"&:hover\": {\n                borderColor: theme.palette.primary.main,\n            },\n            \"&:focus\": {\n                borderColor: theme.palette.action.active,\n            },\n        },\n    })\n)\n\nexport default function DashboardHIDMouse(props: DashboardServiceProps) {\n    const { service } = props\n    const classes = useStyles()\n    const preRef = useRef<HTMLPreElement>()\n    const server = useServiceServer<HIDMouseServer>(service)\n    const [observed, setObserved] = useState(\"\")\n    const sendButton = async (\n        buttons: HidMouseButton,\n        event: HidMouseButtonEvent\n    ) => {\n        const data = jdpack<[HidMouseButton, HidMouseButtonEvent]>(\"u16 u8\", [\n            buttons,\n            event,\n        ])\n        await service.sendCmdAsync(HidMouseCmd.SetButton, data)\n    }\n    const sendMove = async (dx: number, dy: number) => {\n        const data = jdpack<[number, number, number]>(\"i16 i16 u16\", [\n            dx,\n            dy,\n            100,\n        ])\n        await service.sendCmdAsync(HidMouseCmd.Move, data)\n    }\n    const sendWheel = async (dy: number) => {\n        const data = jdpack<[number, number]>(\"i16 u16\", [dy, 100])\n        await service.sendCmdAsync(HidMouseCmd.Wheel, data)\n    }\n    const serverValue = useChange(server, _ => _?.lastCommand)\n    const preview = serverValue || observed\n    const handleMouseDown = (ev: MouseEvent<HTMLPreElement>) => {\n        const { buttons } = ev\n        preRef.current.focus()\n        setObserved(`set button ${renderHidMouseButtons(buttons)} down`)\n    }\n    const handleMouseUp = (ev: MouseEvent<HTMLPreElement>) => {\n        const { buttons } = ev\n        setObserved(`set button ${renderHidMouseButtons(buttons)} up`)\n    }\n    const handleKeyDown = async (ev: KeyboardEvent<HTMLPreElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        const { key } = ev\n        switch (key) {\n            case \"l\":\n                sendButton(HidMouseButton.Left, HidMouseButtonEvent.Click)\n                break\n            case \"r\":\n                sendButton(HidMouseButton.Right, HidMouseButtonEvent.Click)\n                break\n            case \"m\":\n                sendButton(HidMouseButton.Middle, HidMouseButtonEvent.Click)\n                break\n            case \"ArrowRight\":\n                sendMove(10, 0)\n                break\n            case \"ArrowLeft\":\n                sendMove(-10, 0)\n                break\n            case \"ArrowUp\":\n                sendMove(0, -10)\n                break\n            case \"ArrowDown\":\n                sendMove(0, 10)\n                break\n            case \"w\":\n                sendWheel(-10)\n                break\n            case \"s\":\n                sendWheel(10)\n                break\n        }\n    }\n\n    return (\n        <Grid container spacing={1}>\n            <Grid item>\n                <MouseIcon fontSize=\"large\" />\n            </Grid>\n            <Grid item xs>\n                <pre\n                    ref={preRef}\n                    className={classes.capture}\n                    tabIndex={0}\n                    onMouseDown={handleMouseDown}\n                    onMouseUp={handleMouseUp}\n                    onKeyDown={handleKeyDown}\n                >\n                    focus and type l(eft), r(ight), m(iddle) for buttons, arrow\n                    keys to move, w(heel up), d(wheel down) for the wheel\n                </pre>\n            </Grid>\n            {server && preview && (\n                <Grid item xs={12}>\n                    <Typography variant=\"caption\" component=\"pre\">\n                        mouse preview: {preview || \"...\"}\n                    </Typography>\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n"],"names":["React","useRef","useState","createStyles","Grid","makeStyles","Typography","HidMouseButton","HidMouseButtonEvent","HidMouseCmd","jdpack","useServiceServer","renderHidMouseButtons","useChange","MouseIcon","useStyles","theme","capture","whiteSpace","cursor","borderColor","palette","primary","main","action","active","DashboardHIDMouse","props","service","classes","preRef","server","observed","setObserved","sendButton","buttons","event","data","sendCmdAsync","SetButton","sendMove","dx","dy","Move","sendWheel","Wheel","serverValue","_","lastCommand","preview","handleMouseDown","ev","current","focus","handleMouseUp","handleKeyDown","stopPropagation","preventDefault","key","Left","Click","Right","Middle"],"sourceRoot":""}