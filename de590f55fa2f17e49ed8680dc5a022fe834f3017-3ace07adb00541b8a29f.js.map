{"version":3,"sources":["webpack://jacdac-docs/./node_modules/@material-ui/core/esm/CardActions/CardActions.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/CardMedia/CardMedia.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Category.js","webpack://jacdac-docs/./src/components/ServiceButton.tsx","webpack://jacdac-docs/./src/components/DeviceCard.tsx","webpack://jacdac-docs/./src/components/ui/CardMediaWithSkeleton.tsx","webpack://jacdac-docs/./src/components/DeviceCardMedia.tsx","webpack://jacdac-docs/./src/components/DeviceCardHeader.tsx","webpack://jacdac-docs/./src/components/IDChip.tsx","webpack://jacdac-docs/./src/components/KindChip.tsx","webpack://jacdac-docs/./src/components/ui/AutoGrid.tsx","webpack://jacdac-docs/./src/components/ServiceRegisters.tsx","webpack://jacdac-docs/./src/components/EventInput.tsx","webpack://jacdac-docs/./src/components/ServiceEvents.tsx","webpack://jacdac-docs/./jacdac-ts/src/jdom/command.ts","webpack://jacdac-docs/./src/components/CommandInput.tsx","webpack://jacdac-docs/./src/components/DecodedPacketItem.tsx","webpack://jacdac-docs/./src/components/ServiceCard.tsx","webpack://jacdac-docs/./src/components/DeviceList.tsx","webpack://jacdac-docs/./src/components/PacketMembersChip.tsx","webpack://jacdac-docs/./src/components/PacketSpecification.tsx","webpack://jacdac-docs/./src/components/ServiceSpecificationStatusAlert.tsx","webpack://jacdac-docs/./src/components/alert/DeviceLostAlert.tsx","webpack://jacdac-docs/./src/components/useGridBreakpoints.ts","webpack://jacdac-docs/./src/jacdac/useEventCount.ts"],"names":["ServiceButton","props","service","onClick","others","name","useStyles","makeStyles","createStyles","root","bullet","display","margin","transform","title","fontSize","pos","marginBottom","navigateToService","spec","specification","navigate","shortId","DeviceDescription","device","register","ControlReg","useRegisterUnpackedValue","description","DeviceCard","children","action","content","showDeviceId","showDescription","showTemperature","showFirmware","showServices","classes","services","useChange","filter","serviceClass","SRV_CTRL","SRV_LOGGER","map","id","theme","media","height","paddingTop","CardMediaWithSkeleton","image","src","className","hasImage","DeviceCardMedia","useDeviceSpecification","imageUrl","useDeviceImage","DeviceFirmwareVersionChip","firmwareVersionRegister","firmwareVersion","DeviceTemperatureChip","tempRegister","temperature","undefined","DeviceCardHeader","showMedia","showAvatar","identifierToUrlPath","deviceId","s","join","IDChip","useContext","PacketsContext","packetFilter","setPacketFilter","setFilter","AppContext","setDrawerType","ids","toString","filtered","indexOf","handleFilterClick","replace","trim","DrawerType","icon","KindChip","kind","KindIcon","chipFilter","handleClick","kindName","AutoGrid","spacing","Array","isArray","child","i","key","ServiceRegisters","registerIdentifiers","showRegisterName","hideMissingValues","showTrends","registers","useMemo","packets","pkt","isRegister","identifier","r","reg","code","SystemReg","EventInput","event","showName","showDeviceName","count","useEventCount","ServiceEvents","eventIdentifiers","showEventName","events","isEvent","packArguments","info","args","repeatIdx","numReps","argIdx","dst","buf","Uint8Array","fields","length","arg0","fld","startRepeats","arg1","type","arg","stringToUint8Array","toUTF8","intVal","scaleFloatToInt","storage","Error","fmt","numberFormatFromStorageType","setNumber","clampToStorage","sizeOfNumberFormat","size","Math","abs","argCut","slice","set","JD_SERIAL_MAX_PAYLOAD_SIZE","cmd","CMD_SET_REG","Packet","isCommand","CommandInput","command","setReports","JacdacContext","bus","requiredArgLength","hasPipeReport","missingArguments","disabled","reportSpec","hasReport","find","p","isReportOf","sendCmdAwaitResponseAsync","reportPacket","decoded","inp","InPipeReader","openCommand","sendPacketAsync","console","log","printPacket","readAll","output","reports","ot","data","unmount","serviceName","DecodedPacketItem","specifications","d","values","value","minWidth","ServiceCard","linkToService","showServiceName","showMemberName","commandIdentifier","useState","commandArgs","setCommandArgs","hasCommandIdentifier","hasRegisterIdentifiers","hasEventIdentifiers","report","ri","DeviceList","showServiceButtons","devices","n","hasServiceClass","gridBreakpoints","useGridBreakpoints","PacketMembersChip","members","label","packFormat","textDecoration","field","verticalAlign","chip","MemberType","member","helperText","prettyMemberUnit","MembersType","repeatIndex","findIndex","m","beforeRepeat","afterRepeat","PacketSpecification","packetInfo","reportInfo","pipeReportInfo","showDevices","setArgs","isCmd","optional","derived","StatusAlert","status","ServiceSpecificationStatusAlert","React","DeviceLostAlert","lost","useEventRaised","LOST","FOUND","dev","itemCount","drawerType","xs","sm","md","lg","xl","setCount","useEffect","subscribe","CHANGE"],"mappings":"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","file":"de590f55fa2f17e49ed8680dc5a022fe834f3017-3ace07adb00541b8a29f.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  },\n\n  /* Styles applied to the root element if `disableSpacing={false}`. */\n  spacing: {\n    '& > :not(:first-child)': {\n      marginLeft: 8\n    }\n  }\n};\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(props, ref) {\n  var _props$disableSpacing = props.disableSpacing,\n      disableSpacing = _props$disableSpacing === void 0 ? false : _props$disableSpacing,\n      classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"disableSpacing\", \"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, !disableSpacing && classes.spacing),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardActions'\n})(CardActions);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { chainPropTypes } from '@material-ui/utils';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'block',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n\n  /* Styles applied to the root element if `component=\"video, audio, picture, iframe, or img\"`. */\n  media: {\n    width: '100%'\n  },\n\n  /* Styles applied to the root element if `component=\"picture or img\"`. */\n  img: {\n    // ⚠️ object-fit is not supported by IE 11.\n    objectFit: 'cover'\n  }\n};\nvar MEDIA_COMPONENTS = ['video', 'audio', 'picture', 'iframe', 'img'];\nvar CardMedia = /*#__PURE__*/React.forwardRef(function CardMedia(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      image = props.image,\n      src = props.src,\n      style = props.style,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"image\", \"src\", \"style\"]);\n\n  var isMediaComponent = MEDIA_COMPONENTS.indexOf(Component) !== -1;\n  var composedStyle = !isMediaComponent && image ? _extends({\n    backgroundImage: \"url(\\\"\".concat(image, \"\\\")\")\n  }, style) : style;\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, isMediaComponent && classes.media, \"picture img\".indexOf(Component) !== -1 && classes.img),\n    ref: ref,\n    style: composedStyle,\n    src: isMediaComponent ? image || src : undefined\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardMedia'\n})(CardMedia);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2l-5.5 9h11z\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"17.5\",\n  cy: \"17.5\",\n  r: \"4.5\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 13.5h8v8H3z\"\n})), 'Category');\n\nexports.default = _default;","import { ButtonProps } from \"@material-ui/core\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React from \"react\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\n\nexport default function ServiceButton(\n    props: { service: JDService; onClick?: () => void } & ButtonProps\n) {\n    const { service, onClick, ...others } = props\n    return (\n        <Button\n            {...others}\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={onClick}\n        >\n            {service.name}\n        </Button>\n    )\n}\n","import React, { ReactNode } from 'react';\n// tslint:disable-next-line: no-submodule-imports\nimport { makeStyles } from '@material-ui/core/styles';\n// tslint:disable-next-line: no-submodule-imports\nimport Card from '@material-ui/core/Card';\n// tslint:disable-next-line: no-submodule-imports\nimport CardContent from '@material-ui/core/CardContent';\nimport { JDDevice } from '../../jacdac-ts/src/jdom/device';\nimport { SRV_CTRL, SRV_LOGGER, ControlReg } from '../../jacdac-ts/src/jdom/constants';\nimport ServiceButton from './ServiceButton';\nimport useChange from '../jacdac/useChange';\nimport { navigate } from \"gatsby\";\nimport { JDService } from '../../jacdac-ts/src/jdom/service';\nimport { CardActions, createStyles } from '@material-ui/core';\nimport DeviceCardHeader from './DeviceCardHeader';\nimport { useRegisterUnpackedValue } from '../jacdac/useRegisterValue';\nimport { DeviceLostAlert } from './alert/DeviceLostAlert';\n\nconst useStyles = makeStyles(() => createStyles({\n    root: {\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n}));\n\nfunction navigateToService(service: JDService) {\n    const spec = service.specification;\n    if (spec)\n        navigate(`/services/${spec.shortId}/`) // todo spec\n}\n\nfunction DeviceDescription(props: { device: JDDevice }) {\n    const { device } = props;\n    const register = device?.service(0)?.register(ControlReg.DeviceDescription)\n    const [description] = useRegisterUnpackedValue<[string]>(register)\n    return <span>{description || \"\"}</span>\n}\n\nexport default function DeviceCard(props: {\n    device: JDDevice,\n    children?: ReactNode,\n    action?: JSX.Element | JSX.Element[],\n    content?: JSX.Element | JSX.Element[],\n    showDeviceId?: boolean,\n    showServices?: boolean,\n    showTemperature?: boolean,\n    showFirmware?: boolean,\n    showDescription?: boolean\n}) {\n    const { device, children, action, content,\n        showDeviceId,\n        showDescription, showTemperature, showFirmware, showServices } = props;\n    const classes = useStyles();\n    const services = useChange(device, () => device.services()\n        .filter(service => service.serviceClass != SRV_CTRL && service.serviceClass != SRV_LOGGER));\n\n    return (\n        <Card className={classes.root}>\n            <DeviceCardHeader device={device}\n                showDeviceId={showDeviceId}\n                showTemperature={showTemperature}\n                showFirmware={showFirmware}\n                showMedia={true} />\n            {(showDescription || content) &&\n                <CardContent>\n                    {<DeviceLostAlert device={device} />}\n                    {showDescription && <DeviceDescription device={device} />}\n                    {content}\n                </CardContent>}\n            <CardActions>\n                {action}\n                {showServices && services?.map(service => <ServiceButton key={service.id} service={service} onClick={() => navigateToService(service)} />)}\n            </CardActions>\n            {children}\n        </Card>\n    );\n}\n","import { CardMedia, CardMediaProps, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n    media: {\n        height: 0,\n        paddingTop: '75%', // 4:3\n    }\n}));\n\n/*\n        [theme.breakpoints.down('lg')]: {\n            paddingTop: '56.72%', // 16:9\n        },\n        [theme.breakpoints.down('xs')]: {\n            paddingTop: '18%',\n        },\n        [theme.breakpoints.down('md')]: { // 6:3\n            paddingTop: '50%',\n        }\n*/\n\nexport default function CardMediaWithSkeleton(props: CardMediaProps) {\n    const { image, src, className, ...others } = props;\n    const classes = useStyles();\n    const hasImage = !!image || !!src;\n    return hasImage ?\n        <CardMedia className={className || classes.media} {...others} image={image} src={src} />\n        : <></>;\n}","import React from \"react\";\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\";\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\";\nimport useDeviceImage from \"./devices/useDeviceImage\";\nimport CardMediaWithSkeleton from \"./ui/CardMediaWithSkeleton\";\n\nexport default function DeviceCardMedia(props: { device: JDDevice }) {\n    const { device } = props;\n    const specification = useDeviceSpecification(device)\n    const imageUrl = useDeviceImage(specification)\n\n    return <CardMediaWithSkeleton\n        image={imageUrl}\n        title={specification?.name}\n    />\n}","import { ControlReg } from \"../../jacdac-ts/src/jdom/constants\"\nimport { CardHeader, Chip, Typography } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport { Link } from \"gatsby-theme-material-ui\"\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\"\nimport React from \"react\"\nimport {\n    useRegisterUnpackedValue,\n} from \"../jacdac/useRegisterValue\"\nimport DeviceActions from \"./DeviceActions\"\nimport DeviceName from \"./devices/DeviceName\"\nimport DeviceCardMedia from \"./DeviceCardMedia\"\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\"\nimport { identifierToUrlPath } from \"../../jacdac-ts/src/jdom/spec\"\nimport DeviceAvatar from \"./devices/DeviceAvatar\"\n\nfunction DeviceFirmwareVersionChip(props: { device: JDDevice }) {\n    const { device } = props\n    const firmwareVersionRegister = device\n        ?.service(0)\n        ?.register(ControlReg.FirmwareVersion)\n    const [firmwareVersion] = useRegisterUnpackedValue<[string]>(firmwareVersionRegister)\n\n    return (\n        (firmwareVersion && <Chip size=\"small\" label={firmwareVersion} />) || (\n            <></>\n        )\n    )\n}\n\nfunction DeviceTemperatureChip(props: { device: JDDevice }) {\n    const { device } = props\n    const tempRegister = device?.service(0)?.register(ControlReg.McuTemperature)\n    const [temperature] = useRegisterUnpackedValue<[number]>(tempRegister)\n    return (\n        (temperature !== undefined && (\n            <Chip size=\"small\" label={`${temperature}°`} />\n        )) || <></>\n    )\n}\n\nexport default function DeviceCardHeader(props: {\n    device: JDDevice\n    showAvatar?: boolean\n    showDeviceId?: boolean\n    showFirmware?: boolean\n    showTemperature?: boolean\n    showMedia?: boolean\n}) {\n    const {\n        device,\n        showFirmware,\n        showTemperature,\n        showMedia,\n        showDeviceId,\n        showAvatar,\n    } = props\n    const specification = useDeviceSpecification(device)\n\n    return (\n        <>\n            {showMedia && <DeviceCardMedia device={device} />}\n            <CardHeader\n                avatar={showAvatar && <DeviceAvatar device={device} />}\n                action={<DeviceActions device={device} showReset={true} />}\n                title={\n                    <Link\n                        color=\"textPrimary\"\n                        to={`/devices/${\n                            identifierToUrlPath(specification?.id) || \"\"\n                        }`}\n                    >\n                        <DeviceName device={device} />\n                    </Link>\n                }\n                subheader={\n                    <>\n                        <Typography variant=\"caption\" gutterBottom>\n                            {[\n                                specification?.name,\n                                showDeviceId && device.deviceId,\n                            ]\n                                .filter(s => !!s)\n                                .join(\", \")}\n                        </Typography>\n                        {showFirmware && (\n                            <DeviceFirmwareVersionChip device={device} />\n                        )}\n                        {showTemperature && (\n                            <DeviceTemperatureChip device={device} />\n                        )}\n                    </>\n                }\n            />\n        </>\n    )\n}\n","import React, { useContext } from \"react\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport { Chip, IconButton } from '@material-ui/core';\nimport PacketsContext from \"./PacketsContext\";\nimport AppContext, { DrawerType } from \"./AppContext\";\nimport Tooltip from \"./ui/Tooltip\";\n\nexport default function IDChip(props: { id: number | string, className?: string, filter?: string }) {\n    const { id, className, filter } = props\n    const { filter: packetFilter, setFilter: setPacketFilter } = useContext(PacketsContext);\n    const { setDrawerType } = useContext(AppContext)\n\n    const ids = typeof id === \"string\" ? id : `0x${id !== undefined ? (id as number).toString(16) : \"???\"}`\n    const filtered = packetFilter && packetFilter.indexOf(filter) > -1\n    const handleFilterClick = () => {\n        if (filtered)\n            setPacketFilter(packetFilter?.replace(filter, '')?.trim())\n        else\n            setPacketFilter(packetFilter?.trim() + ' ' + filter)\n        setDrawerType(DrawerType.Packets)\n    }\n    const icon = <FingerprintIcon />;\n    const title = filtered ? `remove filter ${filter}` : `add filter ${filter}`;\n    if (filter)\n        return <Tooltip title={filtered ? `remove filter ${filter}` : `add filter ${filter}`}>\n            <span>\n                <Chip className={className} size=\"small\" icon={\n                    <IconButton aria-label={title} onClick={handleFilterClick}>\n                        {icon}\n                    </IconButton>\n                } label={ids} />\n            </span>\n        </Tooltip>\n    else\n        return <Chip aria-label={title} className={className} size=\"small\" icon={icon} title={`identifier ${ids}`} label={ids} />;\n}","import React, { useContext } from \"react\"\nimport { Chip } from \"@material-ui/core\";\nimport KindIcon, { kindName } from \"./KindIcon\";\nimport PacketsContext from \"./PacketsContext\"\nimport AppContext, { DrawerType } from \"./AppContext\"\nimport Tooltip from \"./ui/Tooltip\";\n\nexport default function KindChip(props: { kind: string, className?: string }) {\n    const { kind, className } = props;\n    const { filter, setFilter } = useContext(PacketsContext);\n    const { setDrawerType } = useContext(AppContext)\n    const icon = KindIcon({ kind })\n    const chipFilter = `kind:${kind}`\n    const filtered = filter && filter.indexOf(chipFilter) > -1\n    const handleClick = () => {\n        if (filtered)\n            setFilter(filter?.replace(chipFilter, '')?.trim())\n        else\n            setFilter(filter?.trim() + ' ' + chipFilter)\n        setDrawerType(DrawerType.Packets)\n    }\n    return <Tooltip title={filtered ? `remove filter ${chipFilter}` : `add filter ${chipFilter}`}>\n        <span>\n            <Chip onClick={handleClick} className={className} size=\"small\" label={kindName(kind)} icon={icon} />\n        </span>\n    </Tooltip>\n\n}","import { Grid, GridSpacing } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function AutoGrid(props: { children: JSX.Element | JSX.Element[], spacing?: GridSpacing }) {\n    const { children, spacing } = props;\n    if (children && Array.isArray(children))\n        return <Grid container spacing={spacing}>\n            {(children as JSX.Element[]).map((child, i) => <Grid item xs={12} key={child.key || i}>\n                {child}\n            </Grid>)}\n        </Grid>\n    else\n        return children as JSX.Element;\n}","import React, { useMemo } from \"react\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\nimport { isRegister } from \"../../jacdac-ts/src/jdom/spec\"\nimport RegisterInput from \"./RegisterInput\"\nimport useChange from \"../jacdac/useChange\"\nimport AutoGrid from \"./ui/AutoGrid\"\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nimport { SystemReg } from \"../../jacdac-ts/src/jdom/constants\"\n\nexport default function ServiceRegisters(props: {\n    service: JDService\n    registerIdentifiers?: number[]\n    filter?: (register: JDRegister) => boolean\n    showRegisterName?: boolean\n    hideMissingValues?: boolean\n    showTrends?: boolean\n}) {\n    const {\n        service,\n        registerIdentifiers,\n        filter,\n        showRegisterName,\n        hideMissingValues,\n        showTrends,\n    } = props\n    const specification = useChange(service, spec => spec.specification)\n    const registers = useMemo(() => {\n        const packets = specification?.packets\n        const ids =\n            registerIdentifiers ||\n            packets?.filter(pkt => isRegister(pkt))?.map(pkt => pkt.identifier)\n        let r = ids?.map(id => service.register(id))?.filter(reg => !!reg) || []\n        if (filter) r = r.filter(filter)\n        return r\n    }, [specification, registerIdentifiers, filter])\n\n    return (\n        <AutoGrid spacing={1}>\n            {registers.map(register => (\n                <RegisterInput\n                    key={register.id}\n                    register={register}\n                    showRegisterName={showRegisterName}\n                    hideMissingValues={hideMissingValues}\n                    showTrend={\n                        showTrends && register.code === SystemReg.Reading\n                    }\n                    visible={true}\n                />\n            ))}\n        </AutoGrid>\n    )\n}\n","import React from \"react\"\nimport { JDEvent } from \"../../jacdac-ts/src/jdom/event\"\nimport { Typography, Badge } from \"@material-ui/core\"\nimport KindIcon from \"./KindIcon\"\nimport useEventCount from \"../jacdac/useEventCount\"\nimport DeviceName from \"./devices/DeviceName\"\n\nexport default function EventInput(props: {\n    event: JDEvent\n    showDeviceName?: boolean\n    showName?: boolean\n}) {\n    const { event, showName, showDeviceName } = props\n    const count = useEventCount(event)\n    const spec = event.specification\n\n    return (\n        <>\n            {showDeviceName && (\n                <Typography>\n                    <DeviceName device={event.service.device} />/\n                </Typography>\n            )}\n            {showName && spec && (\n                <Typography gutterBottom>{spec.name}</Typography>\n            )}\n            <Badge badgeContent={count} color=\"primary\">\n                <KindIcon kind={\"event\"} />\n            </Badge>\n        </>\n    )\n}\n","import React from \"react\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\nimport { isEvent } from \"../../jacdac-ts/src/jdom/spec\"\nimport EventInput from \"./EventInput\"\nimport AutoGrid from \"./ui/AutoGrid\"\n\nexport default function ServiceEvents(props: {\n    service: JDService\n    eventIdentifiers?: number[]\n    showEventName?: boolean\n}) {\n    const { service, eventIdentifiers, showEventName } = props\n    const spec = service.specification\n    const packets = spec.packets\n    let events = packets.filter(isEvent)\n    if (eventIdentifiers !== undefined)\n        events = events.filter(\n            event => eventIdentifiers.indexOf(event.identifier) > -1\n        )\n\n    return (\n        <AutoGrid spacing={1}>\n            {events.map(event => (\n                <EventInput\n                    key={`event${event.identifier}`}\n                    event={service.event(event.identifier)}\n                    showName={showEventName}\n                />\n            ))}\n        </AutoGrid>\n    )\n}\n","import { setNumber, sizeOfNumberFormat } from \"./buffer\"\nimport { CMD_SET_REG, JD_SERIAL_MAX_PAYLOAD_SIZE } from \"./constants\"\nimport Packet from \"./packet\"\nimport {\n    clampToStorage,\n    isRegister,\n    numberFormatFromStorageType,\n    scaleFloatToInt,\n} from \"./spec\"\nimport { stringToUint8Array, toUTF8 } from \"./utils\"\n\nexport type ArgType = number | boolean | string | Uint8Array\nexport function packArguments(info: jdspec.PacketInfo, args: ArgType[]) {\n    let repeatIdx = -1\n    let numReps = 0\n    let argIdx = 0\n    let dst = 0\n\n    const buf = new Uint8Array(256)\n\n    for (let i = 0; i < info.fields.length; ++argIdx, ++i) {\n        if (argIdx >= args.length && numReps > 0) break\n        const arg0 = argIdx < args.length ? args[argIdx] : 0\n        const fld = info.fields[i]\n\n        if (repeatIdx == -1 && fld.startRepeats) repeatIdx = i\n\n        const arg1 =\n            fld.type == \"string0\" && typeof arg0 == \"string\"\n                ? arg0 + \"\\u0000\"\n                : arg0\n\n        const arg =\n            typeof arg1 == \"boolean\"\n                ? arg1\n                    ? 1\n                    : 0\n                : typeof arg1 == \"string\"\n                ? stringToUint8Array(toUTF8(arg1))\n                : arg1\n\n        if (typeof arg == \"number\") {\n            const intVal = scaleFloatToInt(arg, fld)\n            if (fld.storage == 0)\n                throw new Error(`expecting ${fld.type} got number`)\n\n            const fmt = numberFormatFromStorageType(fld.storage)\n            setNumber(buf, fmt, dst, clampToStorage(intVal, fld.storage))\n            dst += sizeOfNumberFormat(fmt)\n        } else {\n            let size = Math.abs(fld.storage)\n            if (typeof arg1 == \"string\") {\n                if (size == 0) size = arg.length\n                const argCut = arg.slice(0, size)\n                buf.set(argCut, dst)\n                dst += size\n            } else if (size == 0 || size == arg.length) {\n                buf.set(arg, dst)\n                dst += arg.length\n            } else {\n                throw new Error(\n                    `expecting ${Math.abs(fld.storage)} bytes; got ${\n                        arg.length\n                    }`\n                )\n            }\n        }\n\n        if (dst >= JD_SERIAL_MAX_PAYLOAD_SIZE)\n            throw new Error(\n                `jacdac packet length too large, ${dst} > ${JD_SERIAL_MAX_PAYLOAD_SIZE} bytes`\n            )\n\n        if (repeatIdx != -1 && i + 1 >= info.fields.length) {\n            i = repeatIdx - 1\n            numReps++\n        }\n    }\n\n    const cmd = isRegister(info)\n        ? info.identifier | CMD_SET_REG\n        : info.identifier\n    const pkt = Packet.from(cmd, buf.slice(0, dst))\n    if (info.kind != \"report\") pkt.isCommand = true\n    return pkt\n}\n","import React, { useContext } from \"react\"\nimport { Typography } from \"@material-ui/core\"\nimport { InPipeReader } from \"../../jacdac-ts/src/jdom/pipes\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\nimport DeviceName from \"./devices/DeviceName\"\nimport { hasPipeReport, isReportOf } from \"../../jacdac-ts/src/jdom/spec\"\nimport { packArguments } from \"../../jacdac-ts/src/jdom/command\"\nimport {\n    DecodedPacket,\n    printPacket,\n    serviceName,\n} from \"../../jacdac-ts/src/jdom/pretty\"\nimport Packet from \"../../jacdac-ts/src/jdom/packet\"\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\"\nimport CmdButton from \"./CmdButton\"\nimport { PackedValues } from \"../../jacdac-ts/src/jdom/pack\"\n\nexport default function CommandInput(props: {\n    service: JDService\n    command: jdspec.PacketInfo\n    showDeviceName?: boolean\n    args?: PackedValues\n    setReports?: (reports: DecodedPacket[]) => void\n}) {\n    const { service, command, showDeviceName, args, setReports } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n\n    const { specification } = service\n    const requiredArgLength =\n        command.fields.length - (hasPipeReport(command) ? 1 : 0)\n    const missingArguments = (args?.length || 0) !== requiredArgLength\n    const disabled = missingArguments\n    const reportSpec =\n        command.hasReport &&\n        specification.packets.find(p => isReportOf(command, p))\n    const handleClick = async () => {\n        const pkt = !args?.length\n            ? Packet.onlyHeader(command.identifier)\n            : packArguments(command, args)\n        if (setReports && reportSpec) {\n            const reportPacket = await service.sendCmdAwaitResponseAsync(pkt)\n            const decoded = reportPacket?.decoded\n            setReports([decoded])\n        } else if (setReports && hasPipeReport(command)) {\n            let inp: InPipeReader\n            try {\n                inp = new InPipeReader(bus)\n                const cmd = inp.openCommand(command.identifier)\n                await service.sendPacketAsync(cmd, true)\n                console.log(printPacket(cmd)) // keep this call, it sets up pretty to understand packages\n                const { output } = await inp.readAll()\n                const reports = output\n                    .filter(ot => !!ot.data?.length)\n                    .map(ot => ot?.decoded)\n                setReports(reports)\n            } finally {\n                inp?.unmount()\n            }\n        } else await service.sendPacketAsync(pkt, true)\n    }\n\n    return (\n        <CmdButton\n            trackName={`command.input`}\n            trackProperties={{\n                service: serviceName(service.serviceClass),\n                serviceClass: service.serviceClass,\n            }}\n            variant=\"contained\"\n            disabled={disabled}\n            onClick={handleClick}\n        >\n            {showDeviceName && (\n                <Typography>\n                    <DeviceName device={service.device} />/\n                </Typography>\n            )}\n            {command.name.replace(/_/g, \" \")}\n        </CmdButton>\n    )\n}\n","import React, { useMemo } from \"react\"\nimport { DecodedPacket } from \"../../jacdac-ts/src/jdom/pretty\";\nimport MembersInput from \"./fields/MembersInput\";\n\nexport default function DecodedPacketItem(props: { pkt: DecodedPacket }) {\n    const { pkt } = props;\n    const { decoded, service } = pkt;\n    const specifications = useMemo(() => decoded.map(d => d.info), [decoded]);\n    const values = useMemo(() => decoded.map(d => d.value), [decoded]);\n    return <MembersInput\n        serviceSpecification={service}\n        specifications={specifications}\n        values={values}\n    />;\n}","import React, { useState } from \"react\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\n// tslint:disable-next-line: no-submodule-imports\nimport { makeStyles } from \"@material-ui/core/styles\"\n// tslint:disable-next-line: no-submodule-imports\nimport Card from \"@material-ui/core/Card\"\n// tslint:disable-next-line: no-submodule-imports\nimport CardContent from \"@material-ui/core/CardContent\"\n// tslint:disable-next-line: no-submodule-imports\nimport Typography from \"@material-ui/core/Typography\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport ServiceRegisters from \"./ServiceRegisters\"\nimport ServiceEvents from \"./ServiceEvents\"\nimport { isCommand } from \"../../jacdac-ts/src/jdom/spec\"\nimport { CardActions, List, ListItem } from \"@material-ui/core\"\nimport DeviceCardHeader from \"./DeviceCardHeader\"\nimport { DeviceLostAlert } from \"./alert/DeviceLostAlert\"\nimport CommandInput from \"./CommandInput\"\nimport { DecodedPacket } from \"../../jacdac-ts/src/jdom/pretty\"\nimport DecodedPacketItem from \"./DecodedPacketItem\"\nimport ServiceSpecificationStatusAlert from \"./ServiceSpecificationStatusAlert\"\nimport MembersInput from \"./fields/MembersInput\"\n\nconst useStyles = makeStyles({\n    root: {\n        minWidth: 275,\n    },\n    bullet: {\n        display: \"inline-block\",\n        margin: \"0 2px\",\n        transform: \"scale(0.8)\",\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n})\n\nexport default function ServiceCard(props: {\n    service: JDService\n    linkToService?: boolean\n    showServiceName?: boolean\n    showMemberName?: boolean\n    registerIdentifiers?: number[]\n    eventIdentifiers?: number[]\n    commandIdentifier?: number\n}) {\n    const {\n        service,\n        linkToService,\n        registerIdentifiers,\n        showServiceName,\n        showMemberName,\n        eventIdentifiers,\n        commandIdentifier,\n    } = props\n    const { specification } = service\n    const [reports, setReports] = useState<DecodedPacket[]>(undefined)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const [commandArgs, setCommandArgs] = useState<any[]>([])\n    const classes = useStyles()\n    const hasCommandIdentifier = commandIdentifier !== undefined\n    const hasRegisterIdentifiers = !!registerIdentifiers?.length\n    const hasEventIdentifiers = !!eventIdentifiers?.length\n    const command =\n        commandIdentifier !== undefined &&\n        specification?.packets.find(\n            pkt => isCommand(pkt) && pkt.identifier === commandIdentifier\n        )\n\n    return (\n        <Card className={classes.root}>\n            <DeviceCardHeader device={service.device} showAvatar={true} />\n            <CardContent>\n                {showServiceName && (\n                    <Typography\n                        className={classes.title}\n                        color=\"textSecondary\"\n                        gutterBottom\n                    >\n                        <Link\n                            to={\n                                linkToService && service.specification\n                                    ? `/services/${service.specification.shortId}/`\n                                    : \"/clients/web/jdom/service\"\n                            }\n                        >\n                            {service.name}\n                        </Link>\n                    </Typography>\n                )}\n                <Typography variant=\"body2\" component=\"div\">\n                    {hasRegisterIdentifiers && (\n                        <ServiceRegisters\n                            key={\"reg\" + service.id}\n                            service={service}\n                            showRegisterName={showMemberName}\n                            registerIdentifiers={registerIdentifiers}\n                        />\n                    )}\n                    {hasEventIdentifiers && (\n                        <ServiceEvents\n                            key={\"ev\" + service.id}\n                            service={service}\n                            showEventName={showMemberName}\n                            eventIdentifiers={eventIdentifiers}\n                        />\n                    )}\n                    {command && (\n                        <MembersInput\n                            serviceSpecification={specification}\n                            serviceMemberSpecification={command}\n                            specifications={command.fields}\n                            values={commandArgs}\n                            setValues={setCommandArgs}\n                            showDataType={true}\n                        />\n                    )}\n                    {!!reports?.length && (\n                        <List key={\"reports\"} dense>\n                            {reports?.map((report, ri) => (\n                                <ListItem key={`report${ri}`}>\n                                    <DecodedPacketItem pkt={report} />\n                                </ListItem>\n                            ))}\n                        </List>\n                    )}\n                </Typography>\n                {!hasCommandIdentifier &&\n                    !hasRegisterIdentifiers &&\n                    !hasEventIdentifiers && (\n                        <ServiceSpecificationStatusAlert\n                            specification={specification}\n                        />\n                    )}\n                <DeviceLostAlert device={service?.device} />\n            </CardContent>\n            <CardActions>\n                {command && (\n                    <CommandInput\n                        service={service}\n                        command={command}\n                        args={commandArgs}\n                        setReports={setReports}\n                    />\n                )}\n            </CardActions>\n        </Card>\n    )\n}\n","import React, { useContext } from 'react';\nimport { Grid, makeStyles, Theme, createStyles } from '@material-ui/core';\nimport DeviceCard from './DeviceCard';\nimport ServiceCard from './ServiceCard';\nimport useChange from '../jacdac/useChange';\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\";\nimport useGridBreakpoints from './useGridBreakpoints';\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n    root: {\n        marginBottom: theme.spacing(1)\n    },\n}))\n\nexport default function DeviceList(props: {\n    serviceClass?: number,\n    linkToService?: boolean,\n    registerIdentifiers?: number[],\n    eventIdentifiers?: number[],\n    commandIdentifier?: number,\n    showServiceName?: boolean,\n    showMemberName?: boolean,\n    showTemperature?: boolean,\n    showFirmware?: boolean,\n    showServiceButtons?: boolean\n}) {\n    const { serviceClass, linkToService, registerIdentifiers,\n        showServiceName, showMemberName, showFirmware, showTemperature,\n        showServiceButtons,\n        eventIdentifiers, commandIdentifier } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const devices = useChange(bus, n => n.devices({ serviceClass }))\n    const services = useChange(bus, n => n.services({ serviceClass }))\n    const classes = useStyles()\n    const hasServiceClass = serviceClass !== undefined\n    const gridBreakpoints = useGridBreakpoints(devices?.length)\n\n    return (\n        <Grid\n            container\n            spacing={2}\n            className={classes.root}\n        >\n            {!hasServiceClass && devices.map(device => <Grid key={device.id} item {...gridBreakpoints}>\n                <DeviceCard\n                    device={device}\n                    showDescription={true}\n                    showTemperature={showTemperature}\n                    showFirmware={showFirmware}\n                    showServices={showServiceButtons}\n                />\n            </Grid>)}\n            {hasServiceClass && services.map(service => {\n                return <Grid key={service.id} item {...gridBreakpoints}>\n                    <ServiceCard service={service}\n                        linkToService={linkToService}\n                        showServiceName={showServiceName}\n                        showMemberName={showMemberName}\n                        registerIdentifiers={registerIdentifiers}\n                        eventIdentifiers={eventIdentifiers}\n                        commandIdentifier={commandIdentifier}\n                    />\n                </Grid>\n            })}\n        </Grid>\n    )\n}\n","import React from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport Chip from \"@material-ui/core/Chip\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport CategoryIcon from \"@material-ui/icons/Category\"\nimport Tooltip from \"./ui/Tooltip\"\n\nexport default function PacketMembersChip(props: {\n    spec: jdspec.PacketInfo\n    members: jdspec.PacketMember[]\n    className?: string\n}) {\n    const { members, className, spec } = props\n    if (!members?.length) return null\n\n    const label = spec?.packFormat\n    const title = \"pack format\"\n    return (\n        <Tooltip title={title}>\n            <Chip\n                style={{ textDecoration: \"none\" }}\n                href=\"/reference/pack-format/\"\n                component=\"a\"\n                clickable\n                className={className}\n                size=\"small\"\n                icon={<CategoryIcon />}\n                label={label}\n            />\n        </Tooltip>\n    )\n}\n","import {\n    isRegister,\n    isEvent,\n    isCommand,\n} from \"../../jacdac-ts/src/jdom/spec\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"./ui/Alert\"\nimport React, { useState } from \"react\"\n// tslint:disable-next-line: no-submodule-imports\nimport Chip from \"@material-ui/core/Chip\"\nimport DeviceList from \"./DeviceList\"\nimport { makeStyles, createStyles } from \"@material-ui/core\"\nimport IDChip from \"./IDChip\"\nimport KindChip from \"./KindChip\"\nimport PacketMembersChip from \"./PacketMembersChip\"\nimport Markdown from \"./ui/Markdown\"\nimport { prettyMemberUnit } from \"../../jacdac-ts/src/jdom/pretty\"\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        root: {\n            marginBottom: theme.spacing(1),\n        },\n        field: {\n            \"& > div\": { verticalAlign: \"middle\" },\n        },\n        chip: {\n            margin: theme.spacing(0.5),\n        },\n    })\n)\n\nfunction MemberType(props: { member: jdspec.PacketMember }) {\n    const { member } = props\n    const classes = useStyles()\n    const helperText = prettyMemberUnit(member, true)\n\n    return (\n        <>\n            <li className={classes.field}>\n                {member.name !== \"_\" && `${member.name}: `}\n                <code>{helperText}</code>\n            </li>\n        </>\n    )\n}\n\nfunction MembersType(props: {\n    members: jdspec.PacketMember[]\n    title?: string\n}) {\n    const { members, title } = props\n\n    let repeatIndex = members.findIndex(m => !!m.startRepeats)\n    if (repeatIndex < 0) repeatIndex = members.length\n    const beforeRepeat = members.slice(0, repeatIndex)\n    const afterRepeat = members.slice(repeatIndex)\n\n    return (\n        <>\n            {!!title && <h4>{title}</h4>}\n            {!!beforeRepeat.length && (\n                <ul>\n                    {beforeRepeat.map((member, i) => (\n                        <MemberType\n                            key={`member${member.name}`}\n                            member={member}\n                        />\n                    ))}\n                </ul>\n            )}\n            {!!afterRepeat.length && (\n                <>\n                    <h5>starts repeating</h5>\n                    <ul>\n                        {afterRepeat.map((member, i) => (\n                            <MemberType\n                                key={`member${member.name}`}\n                                member={member}\n                            />\n                        ))}\n                    </ul>\n                </>\n            )}\n        </>\n    )\n}\n\nexport default function PacketSpecification(props: {\n    serviceClass: number\n    packetInfo: jdspec.PacketInfo\n    reportInfo?: jdspec.PacketInfo\n    pipeReportInfo?: jdspec.PacketInfo\n    showDevices?: boolean\n}) {\n    const {\n        serviceClass,\n        packetInfo,\n        reportInfo,\n        pipeReportInfo,\n        showDevices,\n    } = props\n    const [args, setArgs] = useState<any[]>([])\n    const classes = useStyles()\n    if (!packetInfo)\n        return (\n            <Alert severity=\"error\">{`Unknown member ${serviceClass.toString(\n                16\n            )}:${packetInfo.identifier}`}</Alert>\n        )\n    const { fields } = packetInfo\n    const isCmd = isCommand(packetInfo)\n\n    return (\n        <div className={classes.root}>\n            <h3 id={`${packetInfo.kind}:${packetInfo.identifier}`}>\n                {packetInfo.name}\n                <PacketMembersChip\n                    spec={packetInfo}\n                    className={classes.chip}\n                    members={packetInfo.fields}\n                />\n                {packetInfo.identifier !== undefined && (\n                    <IDChip\n                        className={classes.chip}\n                        id={packetInfo.identifier}\n                        filter={`pkt:0x${packetInfo.identifier.toString(16)}`}\n                    />\n                )}\n                <KindChip className={classes.chip} kind={packetInfo.kind} />\n                {packetInfo.optional && (\n                    <Chip\n                        className={classes.chip}\n                        size=\"small\"\n                        label=\"optional\"\n                    />\n                )}\n                {packetInfo.derived && (\n                    <Chip\n                        className={classes.chip}\n                        size=\"small\"\n                        label=\"derived\"\n                    />\n                )}\n            </h3>\n            <Markdown source={packetInfo.description} />\n            {!!fields.length && (\n                <MembersType members={fields} title={isCmd && \"Arguments\"} />\n            )}\n            {!!reportInfo && (\n                <MembersType members={reportInfo.fields} title=\"Report\" />\n            )}\n            {!!pipeReportInfo && (\n                <MembersType\n                    members={pipeReportInfo.fields}\n                    title=\"Pipe report\"\n                />\n            )}\n            {showDevices && isCommand(packetInfo) && (\n                <DeviceList\n                    serviceClass={serviceClass}\n                    commandIdentifier={packetInfo.identifier}\n                />\n            )}\n            {showDevices && isRegister(packetInfo) && (\n                <DeviceList\n                    serviceClass={serviceClass}\n                    registerIdentifiers={[packetInfo.identifier]}\n                />\n            )}\n            {showDevices && isEvent(packetInfo) && (\n                <DeviceList\n                    serviceClass={serviceClass}\n                    eventIdentifiers={[packetInfo.identifier]}\n                />\n            )}\n        </div>\n    )\n}\n","import React from \"react\";\nimport Alert from \"./ui/Alert\";\n\nexport function StatusAlert(props: { specification: jdspec.ServiceSpec }) {\n    const { specification } = props;\n\n    switch (specification?.status) {\n        case \"deprecated\": return <Alert severity=\"warning\">Deprecated</Alert>\n        case \"experimental\": return <Alert severity=\"info\">Experimental</Alert>\n        default: return null;\n    }\n}\n\nconst ServiceSpecificationStatusAlert = React.memo(StatusAlert);\n\nexport default ServiceSpecificationStatusAlert;","import React from \"react\";\nimport { LOST, FOUND } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport useEventRaised from \"../../jacdac/useEventRaised\";\nimport Alert from \"../ui/Alert\";\n\nexport function DeviceLostAlert(props: { device: JDDevice }) {\n    const { device } = props;\n    const lost = useEventRaised([LOST, FOUND], device, dev => !!dev?.lost)\n    return <>\n        {lost && <Alert severity=\"info\">Device lost...</Alert>}\n    </>\n}","import { GridSize } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport AppContext, { DrawerType } from \"./AppContext\"\n\nexport interface GridBreakpoints {\n    xs?: GridSize,\n    md?: GridSize,\n    sm?: GridSize,\n    lg?: GridSize,\n    xl?: GridSize\n}\n\nexport default function useGridBreakpoints(itemCount?: number): GridBreakpoints {\n    const { drawerType } = useContext(AppContext)\n\n    if (itemCount !== undefined) {\n        switch (itemCount) {\n            case 1:\n            case 2: return { xs: 12, sm: 6, md: 6, lg: 6, xl: 6 }\n            case 3: return { xs: 12, sm: 6, md: 6, lg: 4, xl: 4 }\n        }\n    }\n\n    if (drawerType != DrawerType.None)\n        return { xs: 12, md: 6, sm: 6, lg: 6, xl: 4 }\n    else return {\n        xs: 12,\n        sm: 6,\n        md: 4,\n        lg: 4,\n        xl: 3\n    }\n}","import { useState, useEffect } from \"react\"\nimport { JDEvent } from \"../../jacdac-ts/src/jdom/event\"\nimport { CHANGE } from \"../../jacdac-ts/src/jdom/constants\"\n\nexport default function useEventCount(event: JDEvent) {\n    const [count, setCount] = useState(event?.count || 0)\n    useEffect(() => event?.subscribe(CHANGE, () => {\n        setCount(event.count)\n    }), [event])\n\n    return count;\n}"],"sourceRoot":""}