{"version":3,"sources":["webpack:///./node_modules/@material-ui/icons/Add.js","webpack:///./node_modules/@material-ui/core/esm/Card/Card.js","webpack:///./node_modules/@material-ui/core/esm/CardHeader/CardHeader.js","webpack:///./src/components/alert/ConnectAlert.tsx","webpack:///./src/components/ui/GridHeader.tsx","webpack:///./src/jacdac/useDeviceSpecification.ts","webpack:///./src/components/dashboard/DashboardDeviceItem.tsx","webpack:///./node_modules/@material-ui/icons/Devices.js","webpack:///./src/components/devices/useDeviceImage.ts","webpack:///./src/jacdac/useRegisterValue.ts","webpack:///./node_modules/@material-ui/core/esm/CardContent/CardContent.js","webpack:///./node_modules/@material-ui/core/esm/internal/svg-icons/Person.js","webpack:///./node_modules/@material-ui/core/esm/Avatar/Avatar.js","webpack:///./src/components/devices/useDeviceStatusLightStyle.ts","webpack:///./src/components/devices/DeviceAvatar.tsx","webpack:///./src/jacdac/useSelectedNodes.ts","webpack:///./src/components/dashboard/DashboardDeviceGroup.tsx","webpack:///./src/components/dashboard/Dashboard.tsx","webpack:///./node_modules/@material-ui/icons/Clear.js"],"names":["useStyles","makeStyles","theme","createStyles","button","marginLeft","spacing","NoSsrConnectAlert","props","classes","serviceClass","useContext","JacdacContext","bus","transports","devices","useChange","b","ignoreSelf","spec","serviceSpecificationFromClassIdentifier","length","name","map","transport","type","ConnectAlert","hr","background","palette","text","disabled","marginBottom","start","width","GridHeader","title","count","variant","action","clsx","undefined","useDeviceSpecification","device","firmwareIdentifierRegister","service","register","ControlReg","FirmwareIdentifier","useRegisterUnpackedValue","firmwareIdentifier","specification","deviceSpecificationFromFirmwareIdentifier","DashboardDeviceItem","expanded","toggleExpanded","other","AppContext","drawerType","breakpoints","breakpointWeight","services","srv","dashboardServiceWeight","readingRegister","valueRegister","intensityRegister","reduce","c","v","DrawerType","None","xs","sm","md","lg","xl","useDeviceImage","suffix","withPrefix","identifierToUrlPath","id","useRegisterHumanValue","options","useState","humanValue","value","setValue","visible","useEffect","subscribe","REPORT_UPDATE","unpackedValue","useRegisterBoolValue","boolValue","statusHue","statusSaturation","bootloaderAnimation","identifyAnimation","startupAnimation","connectedAnimation","disconnectedAnimation","panicFrames","statusAnimation","status","useDeviceStatusLightStyle","img","marginTop","small","height","large","DeviceAvatar","size","imageUrl","useDeviceName","sizeClassName","host","useDeviceHost","source","statusLEDClassName","className","statusLEDHelmetStyle","helmetStyle","handleIdentify","identify","VIRTUAL_DEVICE_NODE_NAME","useSelectedNodes","singleSelection","nodes","useRef","Set","change","setChange","selected","node","current","has","setSelected","s","delete","clear","add","hasSelection","toggleSelected","DeviceGroup","children","handleExpand","sectionId","useId","defaultDeviceSort","l","r","srvScore","packets","prev","pkt","isReading","isValueOrIntensity","score","srvs","ls","slice","filter","rs","strcmp","deviceId","defaultDeviceFilter","d","Dashboard","showConnect","showStartSimulators","deviceSort","deviceFilter","toggleShowDeviceHostsDialog","useDevices","announced","sort","useTheme","mobile","useMediaQuery","down","MOBILE_BREAKPOINT","splitFilter","deviceHost","hosted","physicals","roleManager","useRoleManager","handleClearSimulators","deviceHosts","forEach","dev","removeDeviceHost","handleStartSimulators","startSimulators"],"mappings":";;;;;;AAAa;;AAEb,6BAA6B,mBAAO,CAAC,MAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,MAA+C;;AAErF;AACA;AACA,CAAC;AACD;;AAEA,oCAAoC,mBAAO,CAAC,MAAO;;AAEnD,4CAA4C,mBAAO,CAAC,MAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,2B;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AACK;AACiB;AACvC;AACP;AACA;AACA;AACA;AACA;AACA,wBAAwB,gDAAgB;AACxC;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC,sBAAsB,mDAAmB,CAAC,sDAAK,EAAE,0FAAQ;AACzD,eAAe,4DAAI;AACnB;AACA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,OAAO,E;;;;;;;;AC5BR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AACsB;AACP;AAChC;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA,WAAW;;AAEX;AACA;AACA;AACA,8BAA8B,gDAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC;;AAEA,sCAAsC,2DAAU;AAChD,yBAAyB,mDAAmB,CAAC,2DAAU,EAAE,0FAAQ;AACjE;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA,8CAA8C,2DAAU;AACxD,6BAA6B,mDAAmB,CAAC,2DAAU,EAAE,0FAAQ;AACrE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,sBAAsB,mDAAmB,YAAY,0FAAQ;AAC7D,eAAe,4DAAI;AACnB;AACA,GAAG,iCAAiC,mDAAmB;AACvD;AACA,GAAG,wBAAwB,mDAAmB;AAC9C;AACA,GAAG,4CAA4C,mDAAmB;AAClE;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,aAAa,E;;;;;;;;AC3Fd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,SAAS,GAAGC,yEAAU,CAAC,UAAAC,KAAK;AAAA,SAC9BC,yEAAY,CAAC;AACTC,UAAM,EAAE;AACJC,gBAAU,EAAEH,KAAK,CAACI,OAAN,CAAc,CAAd;AADR;AADC,GAAD,CADkB;AAAA,CAAN,CAA5B;;AAQA,SAASC,iBAAT,CAA2BC,KAA3B,EAA6D;AACzD,MAAMC,OAAO,GAAGT,SAAS,EAAzB;AADyD,MAEjDU,YAFiD,GAEhCF,KAFgC,CAEjDE,YAFiD;;AAAA,oBAGzCC,wDAAU,CAAqBC,+DAArB,CAH+B;AAAA,MAGjDC,GAHiD,eAGjDA,GAHiD;;AAAA,MAIjDC,UAJiD,GAIlCD,GAJkC,CAIjDC,UAJiD;AAKzD,MAAMC,OAAO,GAAGC,yEAAS,CAACH,GAAD,EAAM,UAAAI,CAAC;AAAA,WAAIA,CAAC,CAACF,OAAF,CAAU;AAAEL,kBAAY,EAAZA,YAAF;AAAgBQ,gBAAU,EAAE;AAA5B,KAAV,CAAJ;AAAA,GAAP,CAAzB;AACA,MAAMC,IAAI,GAAGC,gHAAuC,CAACV,YAAD,CAApD,CANyD,CAQzD;;AACA,MAAI,CAACI,UAAU,CAACO,MAAZ,IAAsBN,OAAtB,aAAsBA,OAAtB,eAAsBA,OAAO,CAAEM,MAAnC,EAA2C,OAAO,IAAP;AAE3C,sBACI,2DAAC,iEAAD;AAAK,gBAAY,EAAC;AAAlB,kBACI,2DAAC,yDAAD;AAAO,YAAQ,EAAC,MAAhB;AAAuB,aAAS,EAAE;AAAlC,KACK,CAACF,IAAD,iBAAS,wGADd,EAEKA,IAAI,iBAAI,+FAAyBA,IAAI,CAACG,IAA9B,aAFb,EAGKR,UAAU,CAACS,GAAX,CAAe,UAAAC,SAAS;AAAA,wBACrB,2DAAC,qEAAD;AACI,SAAG,EAAEA,SAAS,CAACC,IADnB;AAEI,eAAS,EAAED,SAFf;AAGI,eAAS,EAAEf,OAAO,CAACL,MAHvB;AAII,UAAI,EAAE,IAJV;AAKI,iBAAW,EAAE;AALjB,MADqB;AAAA,GAAxB,CAHL,CADJ,CADJ;AAiBH;;AAEc,SAASsB,YAAT,CAAsBlB,KAAtB,EAAwD;AACnE,sBACI,2DAAC,iEAAD,qBACI,2DAAC,iBAAD,EAAuBA,KAAvB,CADJ,CADJ;AAKH,C;;;;;;;;ACvDD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA,IAAMR,SAAS,GAAGC,yEAAU,CAAC,UAACC,KAAD;AAAA,SAAWC,yEAAY,CAAC;AACjDwB,MAAE,EAAE;AACAC,gBAAU,EAAE1B,KAAK,CAAC2B,OAAN,CAAcC,IAAd,CAAmBC,QAD/B;AAEAC,kBAAY,EAAE;AAFd,KAD6C;AAKjDC,SAAK,EAAE;AACHC,WAAK,EAAEhC,KAAK,CAACI,OAAN,CAAc,CAAd;AADJ;AAL0C,GAAD,CAAvB;AAAA,CAAD,CAA5B;AAUe,SAAS6B,UAAT,CAAoB3B,KAApB,EAKZ;AAAA,MACS4B,KADT,GAC2C5B,KAD3C,CACS4B,KADT;AAAA,MACgBC,KADhB,GAC2C7B,KAD3C,CACgB6B,KADhB;AAAA,MACuBC,OADvB,GAC2C9B,KAD3C,CACuB8B,OADvB;AAAA,MACgCC,MADhC,GAC2C/B,KAD3C,CACgC+B,MADhC;AAEC,MAAM9B,OAAO,GAAGT,SAAS,EAAzB;AACA,sBAAO,2DAAC,iEAAD;AAAM,QAAI,MAAV;AAAW,MAAE,EAAE;AAAf,kBACH,2DAAC,iEAAD;AAAM,aAAS,MAAf;AAAgB,aAAS,EAAC,KAA1B;AAAgC,WAAO,EAAE,CAAzC;AAA4C,WAAO,EAAC,QAApD;AAA6D,cAAU,EAAC;AAAxE,kBACI,2DAAC,iEAAD;AAAM,QAAI;AAAV,kBACI;AAAI,aAAS,EAAEwC,4DAAI,CAAC/B,OAAO,CAACkB,EAAT,EAAalB,OAAO,CAACwB,KAArB;AAAnB,IADJ,CADJ,eAII,2DAAC,iEAAD;AAAM,QAAI;AAAV,KACKM,MAAM,iBAAI,2DAAC,iEAAD;AAAK,aAAS,EAAC,MAAf;AAAsB,MAAE,EAAE;AAA1B,KAA8BA,MAA9B,CADf,eAEI,2DAAC,iEAAD;AAAY,aAAS,EAAC,MAAtB;AAA6B,WAAO,EAAED,OAAO,IAAI;AAAjD,KAA+DF,KAA/D,CAFJ,EAGKC,KAAK,KAAKI,SAAV,iBAAuB,2DAAC,iEAAD;AAAK,aAAS,EAAC,MAAf;AAAsB,MAAE,EAAE;AAA1B,kBAA+B,2DAAC,iEAAD;AAAM,SAAK,EAAEJ;AAAb,IAA/B,CAH5B,CAJJ,eASI,2DAAC,iEAAD;AAAM,QAAI,MAAV;AAAW,MAAE;AAAb,kBACI;AAAI,aAAS,EAAE5B,OAAO,CAACkB;AAAvB,IADJ,CATJ,CADG,CAAP;AAeH,C;;;;;;;;ACrCD;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEe,SAASe,sBAAT,CAAgCC,MAAhC,EAAkD;AAAA;;AAC7D,MAAMC,0BAA0B,GAAGD,MAAH,aAAGA,MAAH,0CAAGA,MAAM,CAAEE,OAAR,CAAgB,CAAhB,CAAH,oDAAG,gBAAoBC,QAApB,CAA6BC,gFAAU,CAACC,kBAAxC,CAAnC;;AAD6D,8BAEhCC,0FAAwB,CAAWL,0BAAX,CAFQ;AAAA,MAEtDM,kBAFsD;;AAG7D,MAAMC,aAAa,GAAGC,kHAAyC,CAACF,kBAAD,CAA/D;AACA,SAAOC,aAAP;AACH,C;;;;;;;;;;;;;;;;;;ACVD;AACA;AAEA;AAGA;AACA;AACA;AAEe,SAASE,mBAAT,CAA6B7C,KAA7B,EAKW;AAAA,MACdmC,MADc,GAC0CnC,KAD1C,CACdmC,MADc;AAAA,MACNW,QADM,GAC0C9C,KAD1C,CACN8C,QADM;AAAA,MACIC,cADJ,GAC0C/C,KAD1C,CACI+C,cADJ;AAAA,MACoBjB,OADpB,GAC0C9B,KAD1C,CACoB8B,OADpB;AAAA,MACgCkB,KADhC,mHAC0ChD,KAD1C;;AAAA,oBAECG,wDAAU,CAAC8C,2DAAD,CAFX;AAAA,MAEdC,UAFc,eAEdA,UAFc;;AAGtB,MAAMC,WAA4B,GAAG3C,yEAAS,CAAC2B,MAAD,EAAS,YAAM;AACzD,QAAMiB,gBAAgB,GAAGjB,MAAM,CAACkB,QAAP,GACpBtC,GADoB,CAChB,UAAAuC,GAAG,EAAI;AACR,aAAOC,8FAAsB,CAACD,GAAD,CAAtB,KACCA,GAAG,CAACE,eAAJ,IAAuBF,GAAG,CAACG,aAA3B,IAA4CH,GAAG,CAACI,iBAAhD,GAAoE,CAApE,GAAwE,CADzE,CAAP;AAEH,KAJoB,EAKpBC,MALoB,CAKb,UAACC,CAAD,EAAYC,CAAZ;AAAA,aAAkBD,CAAC,GAAGC,CAAtB;AAAA,KALa,EAKY,CALZ,CAAzB;AAOA,QAAIT,gBAAgB,GAAG,CAAnB,IAAwBF,UAAU,KAAKY,8DAAU,CAACC,IAAtD,EACI,OAAO;AAAEC,QAAE,EAAE,EAAN;AAAUC,QAAE,EAAE,EAAd;AAAkBC,QAAE,EAAE,EAAtB;AAA0BC,QAAE,EAAE,CAA9B;AAAiCC,QAAE,EAAE;AAArC,KAAP,CADJ,KAEK,IAAIhB,gBAAgB,IAAI,CAAxB,EACD,OAAO;AAAEY,QAAE,EAAE,EAAN;AAAUC,QAAE,EAAE,EAAd;AAAkBC,QAAE,EAAE,CAAtB;AAAyBC,QAAE,EAAE,CAA7B;AAAgCC,QAAE,EAAE;AAApC,KAAP,CADC,KAEA,IAAIhB,gBAAgB,IAAI,CAAxB,EACD,OAAO;AAAEY,QAAE,EAAE,EAAN;AAAUC,QAAE,EAAE,CAAd;AAAiBC,QAAE,EAAE,CAArB;AAAwBC,QAAE,EAAE,CAA5B;AAA+BC,QAAE,EAAE;AAAnC,KAAP,CADC,KAGD,OAAO;AAAEJ,QAAE,EAAElB,QAAQ,GAAG,EAAH,GAAQ,CAAtB;AAAyBmB,QAAE,EAAE,CAA7B;AAAgCC,QAAE,EAAE,CAApC;AAAuCC,QAAE,EAAE,CAA3C;AAA8CC,QAAE,EAAE;AAAlD,KAAP;AACP,GAhB6C,EAgB3C,CAACtB,QAAD,EAAWI,UAAX,CAhB2C,CAA9C,CAHsB,CAqBtB;;AACA,sBAAO,2DAAC,iEAAD;AAAM,QAAI;AAAV,KAAeC,WAAf,gBACH,2DAAC,gEAAD;AACI,UAAM,EAAEhB,MADZ;AAEI,YAAQ,EAAEW,QAFd;AAGI,kBAAc,EAAEC,cAHpB;AAII,WAAO,EAAEjB;AAJb,KAKQkB,KALR,EADG,CAAP;AASH,C;;;;;;;;AC9CY;;AAEb,6BAA6B,mBAAO,CAAC,MAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,MAA+C;;AAErF;AACA;AACA,CAAC;AACD;;AAEA,oCAAoC,mBAAO,CAAC,MAAO;;AAEnD,4CAA4C,mBAAO,CAAC,MAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,2B;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AACA;AAEe,SAASqB,cAAT,CAAwB1B,aAAxB,EAA0D2B,MAA1D,EAA2E;AACtF,SAAO3B,aAAa,IAAI4B,8DAAU,qBAAmBC,4FAAmB,CAAC7B,aAAa,CAAC8B,EAAf,CAAtC,IAA2DH,MAAM,SAAOA,MAAP,GAAkB,EAAnF,WAAlC;AACH,C;;;;;;;;ACLD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQO,SAASI,qBAAT,CACHpC,QADG,EAEHqC,OAFG,EAGG;AAAA,kBACoBC,sDAAQ,CAAStC,QAAT,aAASA,QAAT,uBAASA,QAAQ,CAAEuC,UAAnB,CAD5B;AAAA,MACCC,KADD;AAAA,MACQC,QADR;;AAAA,aAEcJ,OAAO,IAAI;AAAEK,WAAO,EAAE;AAAX,GAFzB;AAAA,MAEEA,OAFF,QAEEA,OAFF,EAGN;;;AACAC,yDAAS,CACL;AAAA,WACID,OAAO,KACP1C,QADO,aACPA,QADO,uBACPA,QAAQ,CAAE4C,SAAV,CAAoBC,oFAApB,EAAmC,YAAM;AACrCJ,cAAQ,CAACzC,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEuC,UAAX,CAAR;AACH,KAFD,CADO,CADX;AAAA,GADK,EAML,CAACvC,QAAD,EAAW0C,OAAX,CANK,CAAT;AAQA,SAAOF,KAAP;AACH;AAEM,SAASrC,wBAAT,CACHH,QADG,EAEHqC,OAFG,EAGF;AAAA,mBACyBC,sDAAQ,CAAItC,QAAJ,aAAIA,QAAJ,uBAAIA,QAAQ,CAAE8C,aAAd,CADjC;AAAA,MACMN,KADN;AAAA,MACaC,QADb;;AAAA,cAEmBJ,OAAO,IAAI;AAAEK,WAAO,EAAE;AAAX,GAF9B;AAAA,MAEOA,OAFP,SAEOA,OAFP;;AAGDC,yDAAS,CACL;AAAA,WACID,OAAO,KACP1C,QADO,aACPA,QADO,uBACPA,QAAQ,CAAE4C,SAAV,CAAoBC,oFAApB,EAAmC,YAAM;AACrCJ,cAAQ,CAACzC,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAE8C,aAAX,CAAR;AACH,KAFD,CADO,CADX;AAAA,GADK,EAML,CAAC9C,QAAD,EAAW0C,OAAX,CANK,CAAT;AAQA,SAAOF,KAAK,IAAK,EAAjB;AACH;AAEM,SAASO,oBAAT,CACH/C,QADG,EAEHqC,OAFG,EAGI;AAAA,mBACmBC,sDAAQ,CAAUtC,QAAV,aAAUA,QAAV,uBAAUA,QAAQ,CAAEgD,SAApB,CAD3B;AAAA,MACAR,KADA;AAAA,MACOC,QADP;;AAAA,cAEaJ,OAAO,IAAI;AAAEK,WAAO,EAAE;AAAX,GAFxB;AAAA,MAECA,OAFD,SAECA,OAFD,EAGP;;;AACAC,yDAAS,CACL;AAAA,WACID,OAAO,KACP1C,QADO,aACPA,QADO,uBACPA,QAAQ,CAAE4C,SAAV,CAAoBC,oFAApB,EAAmC,YAAM;AACrCJ,cAAQ,CAACzC,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEgD,SAAX,CAAR;AACH,KAFD,CADO,CADX;AAAA,GADK,EAML,CAAChD,QAAD,EAAW0C,OAAX,CANK,CAAT;AAQA,SAAOF,KAAP;AACH,C;;;;;;;;AC5DD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AACsB;AACvC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gDAAgB;AAC/C;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC,sBAAsB,mDAAmB,YAAY,0FAAQ;AAC7D,eAAe,4DAAI;AACnB;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,cAAc,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BgB;AACuB;AACtD;AACA;AACA;;AAEe,mFAAa,eAAe,sBAAmB;AAC9D;AACA,CAAC,YAAY,E;;ACR6C;AACgC;AAC3D;AACP;AAC4B;AACN;AACI;AAC3C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,cAAc;;AAEd;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB,iBAAc;AACtC;AACA;;AAEA,EAAE,kBAAe;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,IAAI,aAAM,gBAAgB,mBAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,kDAAwB;;AAEtC,sBAAsB;;AAEtB;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,4BAA4B,sBAAmB,QAAQ,sCAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH,4BAA4B,sBAAmB,CAAC,MAAM;AACtD;AACA,KAAK;AACL;;AAEA,sBAAsB,sBAAmB,YAAY,sCAAQ;AAC7D,eAAe,iCAAI;AACnB;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,2FAAU;AACzB;AACA,CAAC,EAAE,aAAM,CAAC,E;;;;;;;;;;;;;;;;;AC/JV,IAAMS,SAAS,GAAG,EAAlB;AACA,IAAMC,gBAAgB,GAAG,GAAzB;AAIA;AACA,IAAMC,mBAAqC,GAAG,CAC1C,CAD0C,EAE1C,CACI,CAACF,SAAD,EAAYC,gBAAZ,EAA8B,EAA9B,EAAkC,MAAM,CAAxC,CADJ,EAEI,CAACD,SAAD,EAAYC,gBAAZ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","file":"7a6ddfc67c61f6ab4d0fd9135a6802daa2a5a396-55f3d306d0118c206021.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = /*#__PURE__*/React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 16\n  },\n\n  /* Styles applied to the avatar element. */\n  avatar: {\n    flex: '0 0 auto',\n    marginRight: 16\n  },\n\n  /* Styles applied to the action element. */\n  action: {\n    flex: '0 0 auto',\n    alignSelf: 'flex-start',\n    marginTop: -8,\n    marginRight: -8\n  },\n\n  /* Styles applied to the content wrapper element. */\n  content: {\n    flex: '1 1 auto'\n  },\n\n  /* Styles applied to the title Typography element. */\n  title: {},\n\n  /* Styles applied to the subheader Typography element. */\n  subheader: {}\n};\nvar CardHeader = /*#__PURE__*/React.forwardRef(function CardHeader(props, ref) {\n  var action = props.action,\n      avatar = props.avatar,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      subheaderProp = props.subheader,\n      subheaderTypographyProps = props.subheaderTypographyProps,\n      titleProp = props.title,\n      titleTypographyProps = props.titleTypographyProps,\n      other = _objectWithoutProperties(props, [\"action\", \"avatar\", \"classes\", \"className\", \"component\", \"disableTypography\", \"subheader\", \"subheaderTypographyProps\", \"title\", \"titleTypographyProps\"]);\n\n  var title = titleProp;\n\n  if (title != null && title.type !== Typography && !disableTypography) {\n    title = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'h5',\n      className: classes.title,\n      component: \"span\",\n      display: \"block\"\n    }, titleTypographyProps), title);\n  }\n\n  var subheader = subheaderProp;\n\n  if (subheader != null && subheader.type !== Typography && !disableTypography) {\n    subheader = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'body1',\n      className: classes.subheader,\n      color: \"textSecondary\",\n      component: \"span\",\n      display: \"block\"\n    }, subheaderTypographyProps), subheader);\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), avatar && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.avatar\n  }, avatar), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content\n  }, title, subheader), action && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.action\n  }, action));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardHeader'\n})(CardHeader);","// tslint:disable-next-line: no-submodule-imports\nimport { Box, createStyles, makeStyles } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport ConnectButton from \"../../jacdac/ConnectButton\"\nimport { NoSsr } from \"@material-ui/core\"\nimport useChange from \"../../jacdac/useChange\"\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        button: {\n            marginLeft: theme.spacing(2),\n        },\n    })\n)\n\nfunction NoSsrConnectAlert(props: { serviceClass?: number }) {\n    const classes = useStyles()\n    const { serviceClass } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useChange(bus, b => b.devices({ serviceClass, ignoreSelf: true }))\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n\n    // don't show if no transport, some devices\n    if (!transports.length || devices?.length) return null\n\n    return (\n        <Box displayPrint=\"none\">\n            <Alert severity=\"info\" closeable={true}>\n                {!spec && <span>Did you connect your device?</span>}\n                {spec && <span>Did you connect a {spec.name} device?</span>}\n                {transports.map(transport => (\n                    <ConnectButton\n                        key={transport.type}\n                        transport={transport}\n                        className={classes.button}\n                        full={true}\n                        transparent={true}\n                    />\n                ))}\n            </Alert>\n        </Box>\n    )\n}\n\nexport default function ConnectAlert(props: { serviceClass?: number }) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","import { Box, Chip, createStyles, Grid, makeStyles, Typography, useTheme } from \"@material-ui/core\";\nimport React from \"react\";\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => createStyles({\n    hr: {\n        background: theme.palette.text.disabled,\n        marginBottom: \"unset\"\n    },\n    start: {\n        width: theme.spacing(2)\n    },\n}));\n\nexport default function GridHeader(props: {\n    title?: string,\n    count?: number,\n    variant?: \"subtitle1\" | \"caption\" | \"subtitle2\",\n    action?: JSX.Element\n}) {\n    const { title, count, variant, action } = props;\n    const classes = useStyles();\n    return <Grid item xs={12}>\n        <Grid container direction=\"row\" spacing={1} justify=\"center\" alignItems=\"center\">\n            <Grid item>\n                <hr className={clsx(classes.hr, classes.start)} />\n            </Grid>\n            <Grid item>\n                {action && <Box component=\"span\" mr={1}>{action}</Box>}\n                <Typography component=\"span\" variant={variant || \"subtitle1\"}>{title}</Typography>\n                {count !== undefined && <Box component=\"span\" ml={0.5}><Chip label={count} /></Box>}\n            </Grid>\n            <Grid item xs>\n                <hr className={classes.hr} />\n            </Grid>\n        </Grid>\n    </Grid>\n}\n","import { ControlReg } from \"../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\";\nimport { deviceSpecificationFromFirmwareIdentifier } from \"../../jacdac-ts/src/jdom/spec\";\nimport { useRegisterUnpackedValue } from \"./useRegisterValue\";\n\nexport default function useDeviceSpecification(device: JDDevice) {\n    const firmwareIdentifierRegister = device?.service(0)?.register(ControlReg.FirmwareIdentifier);\n    const [firmwareIdentifier] = useRegisterUnpackedValue<[number]>(firmwareIdentifierRegister);\n    const specification = deviceSpecificationFromFirmwareIdentifier(firmwareIdentifier);\n    return specification;\n}\n","import { Grid } from \"@material-ui/core\";\nimport React, { useContext } from \"react\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport DashboardDevice from \"./DashboardDevice\";\nimport { GridBreakpoints } from \"../useGridBreakpoints\";\nimport { DashboardDeviceProps } from \"./Dashboard\";\nimport useChange from \"../../jacdac/useChange\";\nimport { dashboardServiceWeight } from \"./DashboardServiceWidget\";\nimport AppContext, { DrawerType } from \"../AppContext\";\n\nexport default function DashboardDeviceItem(props: {\n    device: JDDevice,\n    expanded?: boolean,\n    toggleExpanded?: () => void,\n    variant?: \"icon\" | \"\"\n} & DashboardDeviceProps) {\n    const { device, expanded, toggleExpanded, variant, ...other } = props;\n    const { drawerType } = useContext(AppContext)\n    const breakpoints: GridBreakpoints = useChange(device, () => {\n        const breakpointWeight = device.services()\n            .map(srv => {\n                return dashboardServiceWeight(srv)\n                    || (srv.readingRegister || srv.valueRegister || srv.intensityRegister ? 1 : 0)\n            })\n            .reduce((c: number, v) => c + v, 0);\n\n        if (breakpointWeight > 3 || drawerType !== DrawerType.None)\n            return { xs: 12, sm: 12, md: 12, lg: 6, xl: 6 };\n        else if (breakpointWeight == 3)\n            return { xs: 12, sm: 12, md: 4, lg: 4, xl: 4 };\n        else if (breakpointWeight == 2)\n            return { xs: 12, sm: 6, md: 4, lg: 3, xl: 4 };\n        else\n            return { xs: expanded ? 12 : 6, sm: 4, md: 3, lg: 2, xl: \"auto\" };\n    }, [expanded, drawerType]);\n\n    // based on size, expanded or reduce widget size\n    return <Grid item {...breakpoints}>\n        <DashboardDevice\n            device={device}\n            expanded={expanded}\n            toggleExpanded={toggleExpanded}\n            variant={variant}\n            {...other}\n        />\n    </Grid>\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4V6zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-1 9h-4v-7h4v7z\"\n}), 'Devices');\n\nexports.default = _default;","import { withPrefix } from \"gatsby-link\";\nimport { identifierToUrlPath } from \"../../../jacdac-ts/src/jdom/spec\";\n\nexport default function useDeviceImage(specification: jdspec.DeviceSpec, suffix?: string) {\n    return specification && withPrefix(`images/devices/${identifierToUrlPath(specification.id)}${suffix ? `.${suffix}` : ''}.jpg`);\n}\n","import { useEffect, useState } from \"react\"\nimport { REPORT_UPDATE } from \"../../jacdac-ts/src/jdom/constants\"\nimport { PackedValues } from \"../../jacdac-ts/src/jdom/pack\"\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nexport interface RegisterOptions {\n    // Indicates if the HTML element is visible in view. If not, updates may be slowed or stopped.\n    visible?: boolean\n}\n\nexport function useRegisterHumanValue(\n    register: JDRegister,\n    options?: RegisterOptions\n): string {\n    const [value, setValue] = useState<string>(register?.humanValue)\n    const { visible } = options || { visible: true }\n    // update value\n    useEffect(\n        () =>\n            visible &&\n            register?.subscribe(REPORT_UPDATE, () => {\n                setValue(register?.humanValue)\n            }),\n        [register, visible]\n    )\n    return value\n}\n\nexport function useRegisterUnpackedValue<T extends PackedValues>(\n    register: JDRegister,\n    options?: RegisterOptions\n): T {\n    const [value, setValue] = useState<T>(register?.unpackedValue as T)\n    const { visible } = options || { visible: true }\n    useEffect(\n        () =>\n            visible &&\n            register?.subscribe(REPORT_UPDATE, () => {\n                setValue(register?.unpackedValue as T)\n            }),\n        [register, visible]\n    )\n    return value || ([] as T)\n}\n\nexport function useRegisterBoolValue(\n    register: JDRegister,\n    options?: RegisterOptions\n): boolean {\n    const [value, setValue] = useState<boolean>(register?.boolValue)\n    const { visible } = options || { visible: true }\n    // update value\n    useEffect(\n        () =>\n            visible &&\n            register?.subscribe(REPORT_UPDATE, () => {\n                setValue(register?.boolValue)\n            }),\n        [register, visible]\n    )\n    return value\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  }\n};\nvar CardContent = /*#__PURE__*/React.forwardRef(function CardContent(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardContent'\n})(CardContent);","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'Person');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport Person from '../internal/svg-icons/Person';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexShrink: 0,\n      width: 40,\n      height: 40,\n      fontFamily: theme.typography.fontFamily,\n      fontSize: theme.typography.pxToRem(20),\n      lineHeight: 1,\n      borderRadius: '50%',\n      overflow: 'hidden',\n      userSelect: 'none'\n    },\n\n    /* Styles applied to the root element if not `src` or `srcSet`. */\n    colorDefault: {\n      color: theme.palette.background.default,\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[600]\n    },\n\n    /* Styles applied to the root element if `variant=\"circle\"`. */\n    circle: {},\n\n    /* Styles applied to the root element if `variant=\"circular\"`. */\n    circular: {},\n\n    /* Styles applied to the root element if `variant=\"rounded\"`. */\n    rounded: {\n      borderRadius: theme.shape.borderRadius\n    },\n\n    /* Styles applied to the root element if `variant=\"square\"`. */\n    square: {\n      borderRadius: 0\n    },\n\n    /* Styles applied to the img element if either `src` or `srcSet` is defined. */\n    img: {\n      width: '100%',\n      height: '100%',\n      textAlign: 'center',\n      // Handle non-square image. The property isn't supported by IE 11.\n      objectFit: 'cover',\n      // Hide alt text.\n      color: 'transparent',\n      // Hide the image broken icon, only works on Chrome.\n      textIndent: 10000\n    },\n\n    /* Styles applied to the fallback icon */\n    fallback: {\n      width: '75%',\n      height: '75%'\n    }\n  };\n};\n\nfunction useLoaded(_ref) {\n  var src = _ref.src,\n      srcSet = _ref.srcSet;\n\n  var _React$useState = React.useState(false),\n      loaded = _React$useState[0],\n      setLoaded = _React$useState[1];\n\n  React.useEffect(function () {\n    if (!src && !srcSet) {\n      return undefined;\n    }\n\n    setLoaded(false);\n    var active = true;\n    var image = new Image();\n    image.src = src;\n    image.srcSet = srcSet;\n\n    image.onload = function () {\n      if (!active) {\n        return;\n      }\n\n      setLoaded('loaded');\n    };\n\n    image.onerror = function () {\n      if (!active) {\n        return;\n      }\n\n      setLoaded('error');\n    };\n\n    return function () {\n      active = false;\n    };\n  }, [src, srcSet]);\n  return loaded;\n}\n\nvar Avatar = /*#__PURE__*/React.forwardRef(function Avatar(props, ref) {\n  var alt = props.alt,\n      childrenProp = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      imgProps = props.imgProps,\n      sizes = props.sizes,\n      src = props.src,\n      srcSet = props.srcSet,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'circle' : _props$variant,\n      other = _objectWithoutProperties(props, [\"alt\", \"children\", \"classes\", \"className\", \"component\", \"imgProps\", \"sizes\", \"src\", \"srcSet\", \"variant\"]);\n\n  var children = null; // Use a hook instead of onError on the img element to support server-side rendering.\n\n  var loaded = useLoaded({\n    src: src,\n    srcSet: srcSet\n  });\n  var hasImg = src || srcSet;\n  var hasImgNotFailing = hasImg && loaded !== 'error';\n\n  if (hasImgNotFailing) {\n    children = /*#__PURE__*/React.createElement(\"img\", _extends({\n      alt: alt,\n      src: src,\n      srcSet: srcSet,\n      sizes: sizes,\n      className: classes.img\n    }, imgProps));\n  } else if (childrenProp != null) {\n    children = childrenProp;\n  } else if (hasImg && alt) {\n    children = alt[0];\n  } else {\n    children = /*#__PURE__*/React.createElement(Person, {\n      className: classes.fallback\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, classes.system, classes[variant], className, !hasImgNotFailing && classes.colorDefault),\n    ref: ref\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAvatar'\n})(Avatar);","import { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\n\nconst statusHue = 32\nconst statusSaturation = 255\n\ntype LedAnimationData = [number, number[][]]\n\n//Every 524ms it changes from 5.9% and 1.6% (i.e. 1 sec duty cycle)\nconst bootloaderAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 96, 524 / 8],\n        [statusHue, statusSaturation, 96, 0.1],\n        [statusHue, statusSaturation, 72, 524 / 8],\n        [statusHue, statusSaturation, 72, 0.1],\n    ],\n]\n// 50ms every 150ms (50 on, 100 off) seven times (i.e. for 1 second)\nconst identifyAnimation: LedAnimationData = [\n    7,\n    [\n        [statusHue, statusSaturation, 255, 50 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, 0, 100 / 8],\n        [statusHue, statusSaturation, 0, 0.1],\n    ],\n]\n// lights at 100% for 270ms, then 5.9% for rest of 530ms,\n// then goes into application that turns it on full for 200ms\nconst startupAnimation: LedAnimationData = [\n    1,\n    [\n        [statusHue, statusSaturation, 255, 270 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, (6 / 100) * 0xff, 530 / 8],\n        [statusHue, statusSaturation, (6 / 100) * 0xff, 0.1],\n        [statusHue, statusSaturation, 255, 200 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, 0, 0.1],\n    ],\n]\n// Synchronized fast blink 50us every 500ms\nconst connectedAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 0, 500 / 8],\n        [statusHue, statusSaturation, 0, 0.1],\n        [statusHue, statusSaturation, 96, 24 / 8],\n        [statusHue, statusSaturation, 96, 0.1],\n        [statusHue, statusSaturation, 0, 0.1],\n    ],\n]\n//5ms every 250ms\nconst disconnectedAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 128, 40 / 8],\n        [statusHue, statusSaturation, 128, 0.1],\n        [statusHue, statusSaturation, 16, 250 / 8],\n        [statusHue, statusSaturation, 16, 0.1],\n    ],\n]\n// fast blink 70ms on, 70ms off - 30 times (4.2 seconds) before a reboot\nconst panicFrames: LedAnimationData = [\n    30,\n    [\n        [statusHue, statusSaturation, 128, 70 / 8],\n        [statusHue, statusSaturation, 128, 0.1],\n        [statusHue, statusSaturation, 16, 70 / 8],\n        [statusHue, statusSaturation, 16, 0.1],\n    ],\n]\n\nexport type LEDStatus =\n    | \"startup\"\n    | \"identify\"\n    | \"connected\"\n    | \"disconnected\"\n    | \"panic\"\n    | \"bootloader\"\n\nexport function statusAnimation(status: LEDStatus): LedAnimationData {\n    switch (status) {\n        case \"startup\":\n            return startupAnimation\n        case \"identify\":\n            return identifyAnimation\n        case \"connected\":\n            return connectedAnimation\n        case \"disconnected\":\n            return disconnectedAnimation\n        case \"panic\":\n            return panicFrames\n        case \"bootloader\":\n            return bootloaderAnimation\n        default:\n            return [0, []]\n    }\n}\n\nexport default function useDeviceStatusLightStyle(\n    device: JDDevice,\n    options?: LedAnimationProps\n) {\n    /*\n    const bootloader = useChange(device, d => d.hasService(SRV_BOOTLOADER))\n    const identifying = useChange(device, d => d?.identifying)\n    TODO\n    const registerAnimation = useRegisterUnpackedValue<LedAnimationData>(\n        register\n    ) || [0, []]\n\n    // pick animation step\n    const animation: LedAnimationData = identifying\n        ? identifyAnimation\n        : bootloader\n        ? bootloaderAnimation\n        : undefined\n    */\n\n    return {}\n}\n","import { Avatar, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\nimport { VIRTUAL_DEVICE_NODE_NAME } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\";\nimport CmdButton from \"../CmdButton\";\nimport useDeviceHost from \"../hooks/useDeviceHost\";\nimport KindIcon from \"../KindIcon\"\nimport useDeviceStatusLightStyle from \"./useDeviceStatusLightStyle\";\nimport Helmet from \"react-helmet\"\nimport useDeviceName from \"./useDeviceName\";\nimport useDeviceImage from \"./useDeviceImage\";\nimport TransportIcon from \"../icons/TransportIcon\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    img: {\n      marginTop: \"58%\",\n    },\n    small: {\n      width: theme.spacing(3),\n      height: theme.spacing(3),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n  }),\n);\n\nexport default function DeviceAvatar(props: { device: JDDevice, size?: \"small\" | \"large\" }) {\n  const { device, size } = props;\n  const specification = useDeviceSpecification(device);\n  const imageUrl = useDeviceImage(specification, \"avatar\")\n  const name = useDeviceName(device);\n  const classes = useStyles();\n  const sizeClassName = size === \"small\" ? classes.small : size === \"large\" ? classes.large : undefined;\n  const host = useDeviceHost(device);\n  const source = device.source;\n  const {\n    className: statusLEDClassName,\n    helmetStyle: statusLEDHelmetStyle } = useDeviceStatusLightStyle(device)\n\n  const handleIdentify = async () => await device.identify();\n  return <>\n    {statusLEDHelmetStyle && <Helmet><style>{statusLEDHelmetStyle}</style></Helmet>}\n    <CmdButton\n      trackName=\"device.identify\"\n      size=\"small\"\n      title={`identify ${host ? \"simulator\" : \"device\"} ${name}`}\n      onClick={handleIdentify}\n      className={statusLEDClassName}\n      icon={host ? <KindIcon kind={VIRTUAL_DEVICE_NODE_NAME} /> : !imageUrl ? <TransportIcon type={source} /> : <Avatar\n        className={sizeClassName}\n        alt={specification?.name || \"Image of the device\"}\n        src={imageUrl}\n        classes={{\n          img: classes.img\n        }}\n      />}\n    />\n  </>\n}","import React, { useRef, useState } from \"react\"\nimport { JDNode } from \"../../jacdac-ts/src/jdom/node\"\n\nexport default function useSelectedNodes<TNode extends JDNode>(singleSelection?: boolean) {\n    const nodes = useRef<Set<string>>(new Set<string>())\n    const [change, setChange] = useState(0)\n\n    const selected = (node: TNode) => nodes.current.has(node?.id)\n    const setSelected = (node: TNode, value: boolean) => {\n        if (!node) return;\n        const s = selected(node)\n        if (!!value !== s) {\n            if (!value)\n                nodes.current.delete(node.id)\n            else {\n                if (singleSelection)\n                    nodes.current.clear();\n                nodes.current.add(node.id)\n            }\n            setChange(change + 1)\n        }\n    }\n    return {\n        hasSelection: nodes.current.size > 0,\n        selected,\n        setSelected,\n        toggleSelected: (node: TNode) => {\n            setSelected(node, !selected(node))\n        },\n        clear: () => {\n            nodes.current.clear()\n            setChange(0)\n        }\n    }\n}","import { Grid } from \"@material-ui/core\";\nimport React, { } from \"react\";\nimport { useId } from \"react-use-id-hook\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport GridHeader from \"../ui/GridHeader\"\nimport { DashboardDeviceProps } from \"./Dashboard\";\nimport DashboardDeviceItem from \"./DashboardDeviceItem\";\n\nexport default function DeviceGroup(props: {\n    title: string,\n    action?: JSX.Element,\n    devices: JDDevice[],\n    expanded?: (device: JDDevice) => boolean,\n    toggleExpanded?: (device: JDDevice) => void,\n    children?: JSX.Element | JSX.Element[]\n} & DashboardDeviceProps) {\n    const { title, action, devices, expanded, toggleExpanded, children, ...other } = props;\n    const handleExpand = (device: JDDevice) => () => toggleExpanded(device)\n    const sectionId = useId()\n\n    if (!action && !devices?.length)\n        return null\n\n    return <section id={sectionId}>\n        <Grid container spacing={1}>\n            <GridHeader title={title} action={action} />\n            {devices?.map(device => <DashboardDeviceItem\n                key={device.id}\n                device={device}\n                expanded={expanded(device)}\n                toggleExpanded={handleExpand(device)}\n                {...other} />)}\n            {children}\n        </Grid>\n    </section>\n}\n","import { Grid, useMediaQuery, useTheme } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\nimport useSelectedNodes from \"../../jacdac/useSelectedNodes\"\nimport { isReading, isValueOrIntensity } from \"../../../jacdac-ts/src/jdom/spec\"\nimport { splitFilter, strcmp } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useDevices from \"../hooks/useDevices\"\nimport { MOBILE_BREAKPOINT } from \"../layout\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport AppContext from \"../AppContext\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport DashboardDeviceGroup from \"./DashboardDeviceGroup\"\nimport AddIcon from \"@material-ui/icons/Add\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ClearIcon from \"@material-ui/icons/Clear\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DevicesIcon from \"@material-ui/icons/Devices\"\nimport ConnectAlert from \"../alert/ConnectAlert\"\nimport ConnectButtons from \"../../jacdac/ConnectButtons\"\nimport useRoleManager from \"../services/useRoleManager\"\n\nfunction defaultDeviceSort(l: JDDevice, r: JDDevice): number {\n    const srvScore = (srv: jdspec.ServiceSpec) =>\n        srv.packets.reduce(\n            (prev, pkt) =>\n                prev + (isReading(pkt) ? 10 : isValueOrIntensity(pkt) ? 1 : 0),\n            0\n        ) || 0\n    const score = (srvs: jdspec.ServiceSpec[]) =>\n        srvs.reduce((prev, srv) => srvScore(srv), 0)\n\n    const ls = score(\n        l\n            .services()\n            .slice(1)\n            .map(srv => srv.specification)\n            .filter(spec => !!spec)\n    )\n    const rs = score(\n        r\n            .services()\n            .slice(1)\n            .map(srv => srv.specification)\n            .filter(spec => !!spec)\n    )\n    if (ls !== rs) return -ls + rs\n    return strcmp(l.deviceId, r.deviceId)\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction defaultDeviceFilter(d: JDDevice): boolean {\n    return true\n}\n\nexport interface DashboardDeviceProps {\n    showHeader?: boolean\n    showAvatar?: boolean\n}\n\nexport interface DashboardProps extends DashboardDeviceProps {\n    showStartSimulators?: boolean\n    showConnect?: boolean\n    deviceFilter?: (d: JDDevice) => boolean\n    deviceSort?: (l: JDDevice, r: JDDevice) => number\n}\n\nexport default function Dashboard(props: DashboardProps) {\n    const {\n        showConnect,\n        showStartSimulators,\n        deviceSort = defaultDeviceSort,\n        deviceFilter = defaultDeviceFilter,\n        ...other\n    } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { toggleShowDeviceHostsDialog } = useContext(AppContext)\n    const devices = useDevices({ announced: true, ignoreSelf: true })\n        .filter(deviceFilter)\n        .sort(deviceSort)\n    const theme = useTheme()\n    const mobile = useMediaQuery(theme.breakpoints.down(MOBILE_BREAKPOINT))\n    const { selected, toggleSelected } = useSelectedNodes(mobile)\n    const [hosted, physicals] = splitFilter(\n        devices,\n        d => !!bus.deviceHost(d.deviceId)\n    )\n    const roleManager = useRoleManager()\n    const handleClearSimulators = () => {\n        bus.deviceHosts().forEach(dev => bus.removeDeviceHost(dev))\n    }\n    const handleStartSimulators = () => roleManager?.startSimulators()\n\n    return (\n        <>\n            <DashboardDeviceGroup\n                title=\"Simulators\"\n                action={\n                    <>\n                        {showStartSimulators && !!roleManager && (\n                            <IconButtonWithTooltip\n                                title=\"start missing simulators\"\n                                onClick={handleStartSimulators}\n                            >\n                                <DevicesIcon />\n                            </IconButtonWithTooltip>\n                        )}\n                        <IconButtonWithTooltip\n                            title=\"start simulator\"\n                            onClick={toggleShowDeviceHostsDialog}\n                        >\n                            <AddIcon />\n                        </IconButtonWithTooltip>\n                        <IconButtonWithTooltip\n                            title=\"clear simulators\"\n                            onClick={handleClearSimulators}\n                        >\n                            <ClearIcon />\n                        </IconButtonWithTooltip>{\" \"}\n                    </>\n                }\n                devices={hosted}\n                expanded={selected}\n                toggleExpanded={toggleSelected}\n                {...other}\n            />\n            <DashboardDeviceGroup\n                title=\"Devices\"\n                action={\n                    showConnect && (\n                        <ConnectButtons full={false} transparent={true} />\n                    )\n                }\n                devices={physicals}\n                expanded={selected}\n                toggleExpanded={toggleSelected}\n                {...other}\n            >\n                {showConnect && !physicals.length && (\n                    <Grid item xs={12}>\n                        <ConnectAlert />\n                    </Grid>\n                )}\n            </DashboardDeviceGroup>\n        </>\n    )\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');\n\nexports.default = _default;"],"sourceRoot":""}