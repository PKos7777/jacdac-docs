{"version":3,"sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/Clear.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Keyboard.js","webpack://jacdac-docs/./src/components/dashboard/DashboardHIDKeyboard.tsx","webpack://jacdac-docs/./src/components/ui/KeyboardKeyInput.tsx"],"names":["DashboardHIDKeyboard","props","service","useState","selector","setSelector","HidKeyboardModifiers","modifiers","setModifiers","handleKeyChange","newSelector","newModifiers","handleClear","sendCmdAsync","HidKeyboardCmd","handleClick","unpacked","HidKeyboardAction","data","jdpack","disabled","selectors","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","$","enter","escape","backspace","tab","_","capslock","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","printscreen","scrolllock","pause","insert","home","pageup","delete","end","pagedown","arrowright","arrowleft","arrowdown","arrowup","numlock","numpaddivide","numpadmultiply","numpadsubstract","numpadadd","numpadenter","numpad1","numpad2","numpad3","numpad4","numpad5","numpad6","numpad7","numpad8","numpad9","numpad0","numpaddecimal","numpadequal","f13","f14","f15","f16","f17","f18","f19","f20","f21","f22","f23","f24","execute","help","contextmenu","select","stop","again","undo","cut","copy","paste","find","mute","volumeup","volumedown","numpadcomma","reverseSelectors","Object","keys","reduce","key","modifierCodes","controlleft","altleft","shiftleft","metaleft","controlright","altright","shiftright","metaright","RightGUI","useStyles","makeStyles","theme","createStyles","capture","cursor","borderColor","palette","primary","main","action","active","buttonSelected","background","dark","color","renderKey","flags","values","forEach","flag","push","sel","undefined","length","value","filter","join","KeyboardKeyInput","keyboardRef","useRef","onChange","classes","layout","default","display","handleKeyboardKeyPress","code","toLowerCase","replace","msel","mcode","useEffect","current","addButtonTheme","removeButtonTheme"],"mappings":"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","file":"5969-ad0812dc2de0984e1870.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z\"\n}), 'Keyboard');\n\nexports.default = _default;","import React, { useState } from \"react\"\nimport { Grid } from \"@material-ui/core\"\nimport {\n    HidKeyboardAction,\n    HidKeyboardCmd,\n    HidKeyboardModifiers,\n} from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { jdpack } from \"../../../jacdac-ts/src/jdom/pack\"\nimport CmdButton from \"../CmdButton\"\nimport ClearIcon from \"@material-ui/icons/Clear\"\nimport KeyboardKeyInput from \"../ui/KeyboardKeyInput\"\nimport KeyboardIcon from \"@material-ui/icons/Keyboard\"\nexport default function DashboardHIDKeyboard(props: DashboardServiceProps) {\n    const { service } = props\n    const [selector, setSelector] = useState(0)\n    const [modifiers, setModifiers] = useState(HidKeyboardModifiers.None)\n\n    const handleKeyChange = (\n        newSelector: number,\n        newModifiers: HidKeyboardModifiers\n    ) => {\n        setSelector(newSelector)\n        setModifiers(newModifiers)\n    }\n\n    const handleClear = async () => {\n        setSelector(0)\n        setModifiers(HidKeyboardModifiers.None)\n        await service.sendCmdAsync(HidKeyboardCmd.Clear)\n    }\n\n    const handleClick = async () => {\n        const unpacked: [[number, HidKeyboardModifiers, HidKeyboardAction][]] =\n            [[[selector, modifiers, HidKeyboardAction.Press]]]\n        const data = jdpack(\"r: u16 u8 u8\", unpacked)\n        await service.sendCmdAsync(HidKeyboardCmd.Key, data)\n    }\n\n    const disabled = !selector && !modifiers\n\n    return (\n        <Grid container direction=\"column\" spacing={1}>\n            <Grid item xs={12}>\n                <KeyboardKeyInput\n                    selector={selector}\n                    modifiers={modifiers}\n                    onChange={handleKeyChange}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <CmdButton\n                    title=\"send keys\"\n                    disabled={disabled}\n                    onClick={handleClick}\n                    icon={<KeyboardIcon />}\n                />\n                <CmdButton\n                    title=\"clear keys\"\n                    disabled={disabled}\n                    onClick={handleClear}\n                    icon={<ClearIcon />}\n                />\n            </Grid>\n        </Grid>\n    )\n}\n","import React, { useEffect, useRef } from \"react\"\nimport { createStyles, makeStyles } from \"@material-ui/core\"\nimport { HidKeyboardModifiers } from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport Keyboard from \"react-simple-keyboard\"\nimport \"react-simple-keyboard/build/css/index.css\"\n\nconst selectors = {\n    a: 0x04,\n    b: 0x05,\n    c: 0x06,\n    d: 0x07,\n    e: 0x08,\n    f: 0x09,\n    g: 0x0a,\n    h: 0x0b,\n    i: 0x0c,\n    j: 0x0d,\n    k: 0x0e,\n    l: 0x0f,\n    m: 0x10,\n    n: 0x11,\n    o: 0x12,\n    p: 0x13,\n    q: 0x14,\n    r: 0x15,\n    s: 0x16,\n    t: 0x17,\n    u: 0x18,\n    v: 0x19,\n    w: 0x1a,\n    x: 0x1b,\n    y: 0x1c,\n    z: 0x1d,\n\n    \"1\": 0x1e,\n    \"2\": 0x1f,\n    \"3\": 0x20,\n    \"4\": 0x21,\n    \"5\": 0x22,\n    \"6\": 0x23,\n    \"7\": 0x24,\n    \"8\": 0x25,\n    \"9\": 0x26,\n    \"0\": 0x27,\n\n    \"!\": 0x1e,\n    \"@\": 0x1f,\n    \"#\": 0x20,\n    $: 0x21,\n    \"%\": 0x22,\n    \"^\": 0x23,\n    \"&\": 0x24,\n    \"*\": 0x25,\n    \"(\": 0x26,\n    \")\": 0x27,\n\n    enter: 0x28,\n    escape: 0x29,\n    backspace: 0x2a,\n    tab: 0x2b,\n    \" \": 0x2c,\n    \"-\": 0x2d,\n    _: 0x2d,\n    \"=\": 0x2e,\n    \"+\": 0x2e,\n    \"[\": 0x2f,\n    \"{\": 0x2f,\n    \"]\": 0x30,\n    \"}\": 0x30,\n    \"\\\\\": 0x31,\n    \"|\": 0x31,\n    // non-US #\n    \"~\": 0x32,\n    \";\": 0x33,\n    \":\": 0x33,\n    \"'\": 0x34,\n    '\"': 0x34,\n    // grave accent tilde\n    \",\": 0x36,\n    \"<\": 0x37,\n    \".\": 0x37,\n    \">\": 0x37,\n    \"/\": 0x38,\n    \"?\": 0x38,\n    capslock: 0x39,\n    f1: 0x3a,\n    f2: 0x3b,\n    f3: 0x3c,\n    f4: 0x3d,\n    f5: 0x3e,\n    f6: 0x3f,\n    f7: 0x40,\n    f8: 0x41,\n    f9: 0x42,\n    f10: 0x43,\n    f11: 0x44,\n    f12: 0x45,\n    printscreen: 0x46,\n    scrolllock: 0x47,\n    pause: 0x48,\n    insert: 0x49,\n    home: 0x4a,\n    pageup: 0x4b,\n    delete: 0x4c,\n    end: 0x4d,\n    pagedown: 0x4e,\n    arrowright: 0x4f,\n    arrowleft: 0x50,\n    arrowdown: 0x51,\n    arrowup: 0x52,\n    numlock: 0x53,\n    numpaddivide: 0x54,\n    numpadmultiply: 0x55,\n    numpadsubstract: 0x56,\n    numpadadd: 0x57,\n    numpadenter: 0x58,\n    numpad1: 0x59,\n    numpad2: 0x5a,\n    numpad3: 0x5b,\n    numpad4: 0x5c,\n    numpad5: 0x5d,\n    numpad6: 0x5e,\n    numpad7: 0x5f,\n    numpad8: 0x60,\n    numpad9: 0x61,\n    numpad0: 0x62,\n    numpaddecimal: 0x63,\n    numpadequal: 0x67,\n    f13: 0x68,\n    f14: 0x69,\n    f15: 0x6a,\n    f16: 0x6b,\n    f17: 0x6c,\n    f18: 0x6d,\n    f19: 0x6e,\n    f20: 0x6f,\n    f21: 0x70,\n    f22: 0x71,\n    f23: 0x72,\n    f24: 0x73,\n    execute: 0x74,\n    help: 0x75,\n    contextmenu: 0x76,\n    select: 0x77,\n    stop: 0x78,\n    again: 0x79,\n    undo: 0x7a,\n    cut: 0x7b,\n    copy: 0x7c,\n    paste: 0x7d,\n    find: 0x7e,\n    mute: 0x7f,\n    volumeup: 0x80,\n    volumedown: 0x81,\n\n    numpadcomma: 0x85,\n}\nconst reverseSelectors: { [index: number]: string } = Object.keys(\n    selectors\n).reduce((r, key) => {\n    if (!r[selectors[key]]) r[selectors[key]] = key\n    return r\n}, {})\nconst modifierCodes = {\n    controlleft: HidKeyboardModifiers.LeftControl,\n    altleft: HidKeyboardModifiers.LeftAlt,\n    shiftleft: HidKeyboardModifiers.LeftShift,\n    metaleft: HidKeyboardModifiers.LeftGUI,\n\n    controlright: HidKeyboardModifiers.RightControl,\n    altright: HidKeyboardModifiers.RightAlt,\n    shiftright: HidKeyboardModifiers.RightShift,\n    metaright: HidKeyboardModifiers.RightGUI,\n}\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        capture: {\n            cursor: \"pointer\",\n            \"&:hover\": {\n                borderColor: theme.palette.primary.main,\n            },\n            \"&:focus\": {\n                borderColor: theme.palette.action.active,\n            },\n        },\n        buttonSelected: {\n            background: `${theme.palette.primary.dark} !important`,\n            color: \"white !important\",\n        },\n    })\n)\n\nexport function renderKey(selector: number, modifiers: HidKeyboardModifiers) {\n    const flags = [\n        \"controlleft\",\n        \"shiftleft\",\n        \"altleft\",\n        \"metaleft\",\n        \"controlright\",\n        \"shiftright\",\n        \"altright\",\n        \"metaright\",\n    ]\n    const values = []\n    flags.forEach((flag, i) => {\n        if (modifiers & (1 << i)) {\n            values.push(`{${flag}}`)\n        }\n    })\n    const sel = reverseSelectors[selector]\n    if (sel !== undefined) values.push(sel.length > 1 ? `{${sel}}` : sel)\n    const value = values.filter(v => !!v).join(\" \")\n    return value\n}\n\nexport default function KeyboardKeyInput(props: {\n    selector: number\n    modifiers: HidKeyboardModifiers\n    onChange: (newSelector: number, newModifiers: HidKeyboardModifiers) => void\n}) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const keyboardRef = useRef<any>()\n    const { selector, modifiers, onChange } = props\n    const classes = useStyles()\n\n    const layout = {\n        default: [\n            \"{escape} {f1} {f2} {f3} {f4} {f5} {f6} {f7} {f8} {f9} {f10} {f11} {f12}\",\n            \"` 1 2 3 4 5 6 7 8 9 0 - = {backspace}\",\n            \"{tab} q w e r t y u i o p [ ] \\\\\",\n            \"{capslock} a s d f g h j k l ; ' {enter}\",\n            \"{shiftleft} z x c v b n m , . / {shiftright}\",\n            \"{controlleft} {altleft} {metaleft} {space} {metaright} {altright}\",\n        ],\n    }\n    const display = {\n        \"{escape}\": \"esc ⎋\",\n        \"{tab}\": \"tab ⇥\",\n        \"{backspace}\": \"backspace ⌫\",\n        \"{enter}\": \"enter ↵\",\n        \"{capslock}\": \"caps lock ⇪\",\n        \"{shiftleft}\": \"shift ⇧\",\n        \"{shiftright}\": \"shift ⇧\",\n        \"{controlleft}\": \"ctrl ⌃\",\n        \"{controlright}\": \"ctrl ⌃\",\n        \"{altleft}\": \"alt ⌥\",\n        \"{altright}\": \"alt ⌥\",\n        \"{metaleft}\": \"cmd ⌘\",\n        \"{metaright}\": \"cmd ⌘\",\n    }\n    const handleKeyboardKeyPress = (code: string) => {\n        code = code.toLowerCase().replace(/[{}]/g, \"\")\n        let newSelector = selector\n        let newModifiers = modifiers\n        const msel = selectors[code]\n        const mcode = modifierCodes[code]\n        if (msel) {\n            if (msel === selector) newSelector = undefined\n            else newSelector = msel\n        } else {\n            if (mcode) {\n                if (newModifiers & mcode) newModifiers &= ~mcode\n                else newModifiers |= mcode\n            }\n        }\n        onChange(newSelector, newModifiers)\n    }\n\n    // todo: render value to simple-keyboard selectors\n    const value = renderKey(selector, modifiers)\n    useEffect(() => {\n        keyboardRef.current?.addButtonTheme(value, classes.buttonSelected)\n        return () =>\n            keyboardRef.current?.removeButtonTheme(\n                value,\n                classes.buttonSelected\n            )\n    }, [value])\n\n    return (\n        <Keyboard\n            keyboardRef={r => (keyboardRef.current = r)}\n            onKeyPress={handleKeyboardKeyPress}\n            layout={layout}\n            display={display}\n            mergeDisplay={true}\n        />\n    )\n}\n"],"sourceRoot":""}