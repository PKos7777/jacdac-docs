{"version":3,"sources":["webpack://jacdac-docs/./node_modules/@material-ui/core/esm/Grid/Grid.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/TextField/TextField.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Add.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Delete.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Error.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Save.js","webpack://jacdac-docs/./src/components/AddServiceIconButton.tsx","webpack://jacdac-docs/./src/components/hooks/useAnalytics.ts","webpack://jacdac-docs/./src/components/CmdButton.tsx","webpack://jacdac-docs/./src/components/ServiceSpecificationSelect.tsx","webpack://jacdac-docs/./src/components/hooks/useMounted.tsx","webpack://jacdac-docs/./src/components/makecode/MakeCodeEditorExtensionClient.ts","webpack://jacdac-docs/./src/components/makecode/MakeCodeEditorExtension.tsx","webpack://jacdac-docs/./src/components/makecode/MakeCodeEditorExtensionPage.tsx","webpack://jacdac-docs/./src/pages/tools/makecode-editor-extension.tsx"],"names":["AddServiceIconButton","props","error","onAdd","children","serviceFilter","React","servicesAnchorEl","setServicesAnchorEl","servicesMenuId","useId","services","useMemo","serviceSpecifications","filter","srv","isInfrastructure","handleServiceAddClick","event","currentTarget","handleServiceAddClose","id","undefined","serviceSpecificationFromClassIdentifier","Boolean","map","classIdentifier","toString","name","useAnalytics","page","track","ACK_RESET_DELAY","ERROR_RESET_DELAY","useStyles","makeStyles","theme","getBackgroundColor","palette","type","lighten","darken","createStyles","ack","color","fontWeight","typography","fontWeightMedium","backgroundColor","success","main","CmdButton","onClick","className","icon","title","disabled","disableReset","autoRun","trackName","trackProperties","ackResetDelay","others","useContext","AppContext","setAppError","setError","classes","useState","working","setWorking","setAck","mounted","useMounted","_disabled","run","delay","handleClick","ev","stopPropagation","statusIcon","modeClassName","elClassName","clsx","useEffect","root","minWidth","ServiceSpecificationSelect","label","serviceClass","setServiceClass","variant","fullWidth","Math","random","labelId","specs","spec","test","shortId","handleChange","parseInt","target","value","useRef","current","READ","MESSAGE_PACKET","HIDDEN","SHOWN","SENDER","MakeCodeEditorExtensionClient","pendingCommands","extensionId","inIFrame","window","location","hash","substr","_connected","_visible","nextRequestId","handleMessage","bind","addEventListener","mount","removeEventListener","on","refresh","init","setVisible","vis","emit","CHANGE","mkRequest","resolve","reject","action","body","extId","response","sendRequest","log","Promise","msg","parent","postMessage","data","_target","CONNECT","console","debug","resp","read","r","readUser","write","code","json","jres","dependencies","queryPermission","requestPermission","dataStreamConsole","dataStreamMessages","messages","JDClient","useMakeCodeEditorExtensionClient","JacdacContext","bus","client","setClient","c","clear","channel","source","pkts","Packet","timestamp","pkt","sender","processPacket","unmount","toTypescript","config","ns","roles","role","camelize","resolveMakecodeServiceFromClassIdentifier","service","qName","join","toDependencies","forEach","mk","repo","toJSON","JSON","stringify","ClientRoleRow","component","onUpdate","validateClientRole","nameError","serviceError","textId","handleComponentNameChange","escapeName","handleSetService","handleComponentDelete","splice","indexOf","MakeCodeEditorExtension","connected","useChange","configuration","setConfiguration","subscribe","cfg","JSONTryParse","hasMakeCodeService","resolveMakecodeService","update","clone","handleAddService","names","concat","camelName","n","push","uniqueName","handleSave","ts","deps","i","content","display","minHeight","flexDirection","padding","spacing","transition","transitions","create","easing","sharp","duration","leavingScreen","flexGrow","MakeCodeEditorExtensionPage","DarkModeContext","toggleDarkMode","rawTheme","createMuiTheme","primary","secondary","contrastThreshold","responsiveFontSizes","Flags","Page"],"mappings":";;;;;;;;;;;;AAA0F;AAChC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE+B;AACP;AACsB;AACe;AAC7D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL,oEAAoE;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,EAAE;;AAEL;AACA,IAAI,oFAAQ;AACZ,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;;AAGO;AACP,SAAS,oFAAQ;AACjB;AACA,YAAY;;AAEZ,yDAAyD,KAAK;AAC9D;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,oDAAoD,KAAK;AACzD;AACA;AACA;;AAEA,KAAK;;AAEL,4DAA4D,KAAK;AACjE;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG,IAAI;AACP;AACA,wBAAwB,6CAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oGAAwB;;AAEtC,kBAAkB,sDAAI;AACtB,sBAAsB,gDAAmB,YAAY,oFAAQ;AAC7D;AACA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,CAAM;AAC9C,iBAAiB,oEAAU;AAC3B;AACA,CAAC;;AAED,IAAI,KAAqC,EAAE,oBAe1C;;AAED,yDAAe,UAAU,E;;;;;;;;;;;;;;;;;;;;;ACzRiC;AACgC;AAC3D;AACP;AACqB;AAChB;AACY;AACI;AACN;AACE;AACM;AAChB;AACe;AAC9C;AACA,YAAY,oDAAK;AACjB,UAAU,0DAAW;AACrB,YAAY,4DAAa;AACzB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,WAAW;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B,6CAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oGAAwB;;AAEtC,MAAM,KAAqC,EAAE,EAI1C;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAqC,gDAAmB,CAAC,2CAAc;AACvE;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC,gDAAmB,iBAAiB,oFAAQ;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"component---src-pages-tools-makecode-editor-extension-tsx-6ff03ab802a9149d2df9.js","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\"; // A grid component using the following libs as inspiration.\n//\n// For the implementation:\n// - https://getbootstrap.com/docs/4.3/layout/grid/\n// - https://github.com/kristoferjoseph/flexboxgrid/blob/master/src/css/flexboxgrid.css\n// - https://github.com/roylee0704/react-flexbox-grid\n// - https://material.angularjs.org/latest/layout/introduction\n//\n// Follow this flexbox Guide to better understand the underlying model:\n// - https://css-tricks.com/snippets/css/a-guide-to-flexbox/\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport requirePropFactory from '../utils/requirePropFactory';\nvar SPACINGS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nvar GRID_SIZES = ['auto', true, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\n\nfunction generateGrid(globalStyles, theme, breakpoint) {\n  var styles = {};\n  GRID_SIZES.forEach(function (size) {\n    var key = \"grid-\".concat(breakpoint, \"-\").concat(size);\n\n    if (size === true) {\n      // For the auto layouting\n      styles[key] = {\n        flexBasis: 0,\n        flexGrow: 1,\n        maxWidth: '100%'\n      };\n      return;\n    }\n\n    if (size === 'auto') {\n      styles[key] = {\n        flexBasis: 'auto',\n        flexGrow: 0,\n        maxWidth: 'none'\n      };\n      return;\n    } // Keep 7 significant numbers.\n\n\n    var width = \"\".concat(Math.round(size / 12 * 10e7) / 10e5, \"%\"); // Close to the bootstrap implementation:\n    // https://github.com/twbs/bootstrap/blob/8fccaa2439e97ec72a4b7dc42ccc1f649790adb0/scss/mixins/_grid.scss#L41\n\n    styles[key] = {\n      flexBasis: width,\n      flexGrow: 0,\n      maxWidth: width\n    };\n  }); // No need for a media query for the first size.\n\n  if (breakpoint === 'xs') {\n    _extends(globalStyles, styles);\n  } else {\n    globalStyles[theme.breakpoints.up(breakpoint)] = styles;\n  }\n}\n\nfunction getOffset(val) {\n  var div = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var parse = parseFloat(val);\n  return \"\".concat(parse / div).concat(String(val).replace(String(parse), '') || 'px');\n}\n\nfunction generateGutter(theme, breakpoint) {\n  var styles = {};\n  SPACINGS.forEach(function (spacing) {\n    var themeSpacing = theme.spacing(spacing);\n\n    if (themeSpacing === 0) {\n      return;\n    }\n\n    styles[\"spacing-\".concat(breakpoint, \"-\").concat(spacing)] = {\n      margin: \"-\".concat(getOffset(themeSpacing, 2)),\n      width: \"calc(100% + \".concat(getOffset(themeSpacing), \")\"),\n      '& > $item': {\n        padding: getOffset(themeSpacing, 2)\n      }\n    };\n  });\n  return styles;\n} // Default CSS values\n// flex: '0 1 auto',\n// flexDirection: 'row',\n// alignItems: 'flex-start',\n// flexWrap: 'nowrap',\n// justifyContent: 'flex-start',\n\n\nexport var styles = function styles(theme) {\n  return _extends({\n    /* Styles applied to the root element. */\n    root: {},\n\n    /* Styles applied to the root element if `container={true}`. */\n    container: {\n      boxSizing: 'border-box',\n      display: 'flex',\n      flexWrap: 'wrap',\n      width: '100%'\n    },\n\n    /* Styles applied to the root element if `item={true}`. */\n    item: {\n      boxSizing: 'border-box',\n      margin: '0' // For instance, it's useful when used with a `figure` element.\n\n    },\n\n    /* Styles applied to the root element if `zeroMinWidth={true}`. */\n    zeroMinWidth: {\n      minWidth: 0\n    },\n\n    /* Styles applied to the root element if `direction=\"column\"`. */\n    'direction-xs-column': {\n      flexDirection: 'column'\n    },\n\n    /* Styles applied to the root element if `direction=\"column-reverse\"`. */\n    'direction-xs-column-reverse': {\n      flexDirection: 'column-reverse'\n    },\n\n    /* Styles applied to the root element if `direction=\"row-reverse\"`. */\n    'direction-xs-row-reverse': {\n      flexDirection: 'row-reverse'\n    },\n\n    /* Styles applied to the root element if `wrap=\"nowrap\"`. */\n    'wrap-xs-nowrap': {\n      flexWrap: 'nowrap'\n    },\n\n    /* Styles applied to the root element if `wrap=\"reverse\"`. */\n    'wrap-xs-wrap-reverse': {\n      flexWrap: 'wrap-reverse'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"center\"`. */\n    'align-items-xs-center': {\n      alignItems: 'center'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"flex-start\"`. */\n    'align-items-xs-flex-start': {\n      alignItems: 'flex-start'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"flex-end\"`. */\n    'align-items-xs-flex-end': {\n      alignItems: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `alignItems=\"baseline\"`. */\n    'align-items-xs-baseline': {\n      alignItems: 'baseline'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"center\"`. */\n    'align-content-xs-center': {\n      alignContent: 'center'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"flex-start\"`. */\n    'align-content-xs-flex-start': {\n      alignContent: 'flex-start'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"flex-end\"`. */\n    'align-content-xs-flex-end': {\n      alignContent: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"space-between\"`. */\n    'align-content-xs-space-between': {\n      alignContent: 'space-between'\n    },\n\n    /* Styles applied to the root element if `alignContent=\"space-around\"`. */\n    'align-content-xs-space-around': {\n      alignContent: 'space-around'\n    },\n\n    /* Styles applied to the root element if `justify=\"center\"`. */\n    'justify-xs-center': {\n      justifyContent: 'center'\n    },\n\n    /* Styles applied to the root element if `justify=\"flex-end\"`. */\n    'justify-xs-flex-end': {\n      justifyContent: 'flex-end'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-between\"`. */\n    'justify-xs-space-between': {\n      justifyContent: 'space-between'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-around\"`. */\n    'justify-xs-space-around': {\n      justifyContent: 'space-around'\n    },\n\n    /* Styles applied to the root element if `justify=\"space-evenly\"`. */\n    'justify-xs-space-evenly': {\n      justifyContent: 'space-evenly'\n    }\n  }, generateGutter(theme, 'xs'), theme.breakpoints.keys.reduce(function (accumulator, key) {\n    // Use side effect over immutability for better performance.\n    generateGrid(accumulator, theme, key);\n    return accumulator;\n  }, {}));\n};\nvar Grid = /*#__PURE__*/React.forwardRef(function Grid(props, ref) {\n  var _props$alignContent = props.alignContent,\n      alignContent = _props$alignContent === void 0 ? 'stretch' : _props$alignContent,\n      _props$alignItems = props.alignItems,\n      alignItems = _props$alignItems === void 0 ? 'stretch' : _props$alignItems,\n      classes = props.classes,\n      classNameProp = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$container = props.container,\n      container = _props$container === void 0 ? false : _props$container,\n      _props$direction = props.direction,\n      direction = _props$direction === void 0 ? 'row' : _props$direction,\n      _props$item = props.item,\n      item = _props$item === void 0 ? false : _props$item,\n      _props$justify = props.justify,\n      justify = _props$justify === void 0 ? 'flex-start' : _props$justify,\n      _props$lg = props.lg,\n      lg = _props$lg === void 0 ? false : _props$lg,\n      _props$md = props.md,\n      md = _props$md === void 0 ? false : _props$md,\n      _props$sm = props.sm,\n      sm = _props$sm === void 0 ? false : _props$sm,\n      _props$spacing = props.spacing,\n      spacing = _props$spacing === void 0 ? 0 : _props$spacing,\n      _props$wrap = props.wrap,\n      wrap = _props$wrap === void 0 ? 'wrap' : _props$wrap,\n      _props$xl = props.xl,\n      xl = _props$xl === void 0 ? false : _props$xl,\n      _props$xs = props.xs,\n      xs = _props$xs === void 0 ? false : _props$xs,\n      _props$zeroMinWidth = props.zeroMinWidth,\n      zeroMinWidth = _props$zeroMinWidth === void 0 ? false : _props$zeroMinWidth,\n      other = _objectWithoutProperties(props, [\"alignContent\", \"alignItems\", \"classes\", \"className\", \"component\", \"container\", \"direction\", \"item\", \"justify\", \"lg\", \"md\", \"sm\", \"spacing\", \"wrap\", \"xl\", \"xs\", \"zeroMinWidth\"]);\n\n  var className = clsx(classes.root, classNameProp, container && [classes.container, spacing !== 0 && classes[\"spacing-xs-\".concat(String(spacing))]], item && classes.item, zeroMinWidth && classes.zeroMinWidth, direction !== 'row' && classes[\"direction-xs-\".concat(String(direction))], wrap !== 'wrap' && classes[\"wrap-xs-\".concat(String(wrap))], alignItems !== 'stretch' && classes[\"align-items-xs-\".concat(String(alignItems))], alignContent !== 'stretch' && classes[\"align-content-xs-\".concat(String(alignContent))], justify !== 'flex-start' && classes[\"justify-xs-\".concat(String(justify))], xs !== false && classes[\"grid-xs-\".concat(String(xs))], sm !== false && classes[\"grid-sm-\".concat(String(sm))], md !== false && classes[\"grid-md-\".concat(String(md))], lg !== false && classes[\"grid-lg-\".concat(String(lg))], xl !== false && classes[\"grid-xl-\".concat(String(xl))]);\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: className,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nvar StyledGrid = withStyles(styles, {\n  name: 'MuiGrid'\n})(Grid);\n\nif (process.env.NODE_ENV !== 'production') {\n  var requireProp = requirePropFactory('Grid');\n  StyledGrid.propTypes = _extends({}, StyledGrid.propTypes, {\n    alignContent: requireProp('container'),\n    alignItems: requireProp('container'),\n    direction: requireProp('container'),\n    justify: requireProp('container'),\n    lg: requireProp('item'),\n    md: requireProp('item'),\n    sm: requireProp('item'),\n    spacing: requireProp('container'),\n    wrap: requireProp('container'),\n    xs: requireProp('item'),\n    zeroMinWidth: requireProp('item')\n  });\n}\n\nexport default StyledGrid;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport Input from '../Input';\nimport FilledInput from '../FilledInput';\nimport OutlinedInput from '../OutlinedInput';\nimport InputLabel from '../InputLabel';\nimport FormControl from '../FormControl';\nimport FormHelperText from '../FormHelperText';\nimport Select from '../Select';\nimport withStyles from '../styles/withStyles';\nvar variantComponent = {\n  standard: Input,\n  filled: FilledInput,\n  outlined: OutlinedInput\n};\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {}\n};\n/**\n * The `TextField` is a convenience wrapper for the most common cases (80%).\n * It cannot be all things to all people, otherwise the API would grow out of control.\n *\n * ## Advanced Configuration\n *\n * It's important to understand that the text field is a simple abstraction\n * on top of the following components:\n *\n * - [FormControl](/api/form-control/)\n * - [InputLabel](/api/input-label/)\n * - [FilledInput](/api/filled-input/)\n * - [OutlinedInput](/api/outlined-input/)\n * - [Input](/api/input/)\n * - [FormHelperText](/api/form-helper-text/)\n *\n * If you wish to alter the props applied to the `input` element, you can do so as follows:\n *\n * ```jsx\n * const inputProps = {\n *   step: 300,\n * };\n *\n * return <TextField id=\"time\" type=\"time\" inputProps={inputProps} />;\n * ```\n *\n * For advanced cases, please look at the source of TextField by clicking on the\n * \"Edit this page\" button above. Consider either:\n *\n * - using the upper case props for passing values directly to the components\n * - using the underlying components directly as shown in the demos\n */\n\nvar TextField = /*#__PURE__*/React.forwardRef(function TextField(props, ref) {\n  var autoComplete = props.autoComplete,\n      _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      defaultValue = props.defaultValue,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$error = props.error,\n      error = _props$error === void 0 ? false : _props$error,\n      FormHelperTextProps = props.FormHelperTextProps,\n      _props$fullWidth = props.fullWidth,\n      fullWidth = _props$fullWidth === void 0 ? false : _props$fullWidth,\n      helperText = props.helperText,\n      hiddenLabel = props.hiddenLabel,\n      id = props.id,\n      InputLabelProps = props.InputLabelProps,\n      inputProps = props.inputProps,\n      InputProps = props.InputProps,\n      inputRef = props.inputRef,\n      label = props.label,\n      _props$multiline = props.multiline,\n      multiline = _props$multiline === void 0 ? false : _props$multiline,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      placeholder = props.placeholder,\n      _props$required = props.required,\n      required = _props$required === void 0 ? false : _props$required,\n      rows = props.rows,\n      rowsMax = props.rowsMax,\n      _props$select = props.select,\n      select = _props$select === void 0 ? false : _props$select,\n      SelectProps = props.SelectProps,\n      type = props.type,\n      value = props.value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'standard' : _props$variant,\n      other = _objectWithoutProperties(props, [\"autoComplete\", \"autoFocus\", \"children\", \"classes\", \"className\", \"color\", \"defaultValue\", \"disabled\", \"error\", \"FormHelperTextProps\", \"fullWidth\", \"helperText\", \"hiddenLabel\", \"id\", \"InputLabelProps\", \"inputProps\", \"InputProps\", \"inputRef\", \"label\", \"multiline\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"placeholder\", \"required\", \"rows\", \"rowsMax\", \"select\", \"SelectProps\", \"type\", \"value\", \"variant\"]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (select && !children) {\n      console.error('Material-UI: `children` must be passed when using the `TextField` component with `select`.');\n    }\n  }\n\n  var InputMore = {};\n\n  if (variant === 'outlined') {\n    if (InputLabelProps && typeof InputLabelProps.shrink !== 'undefined') {\n      InputMore.notched = InputLabelProps.shrink;\n    }\n\n    if (label) {\n      var _InputLabelProps$requ;\n\n      var displayRequired = (_InputLabelProps$requ = InputLabelProps === null || InputLabelProps === void 0 ? void 0 : InputLabelProps.required) !== null && _InputLabelProps$requ !== void 0 ? _InputLabelProps$requ : required;\n      InputMore.label = /*#__PURE__*/React.createElement(React.Fragment, null, label, displayRequired && \"\\xA0*\");\n    }\n  }\n\n  if (select) {\n    // unset defaults from textbox inputs\n    if (!SelectProps || !SelectProps.native) {\n      InputMore.id = undefined;\n    }\n\n    InputMore['aria-describedby'] = undefined;\n  }\n\n  var helperTextId = helperText && id ? \"\".concat(id, \"-helper-text\") : undefined;\n  var inputLabelId = label && id ? \"\".concat(id, \"-label\") : undefined;\n  var InputComponent = variantComponent[variant];\n  var InputElement = /*#__PURE__*/React.createElement(InputComponent, _extends({\n    \"aria-describedby\": helperTextId,\n    autoComplete: autoComplete,\n    autoFocus: autoFocus,\n    defaultValue: defaultValue,\n    fullWidth: fullWidth,\n    multiline: multiline,\n    name: name,\n    rows: rows,\n    rowsMax: rowsMax,\n    type: type,\n    value: value,\n    id: id,\n    inputRef: inputRef,\n    onBlur: onBlur,\n    onChange: onChange,\n    onFocus: onFocus,\n    placeholder: placeholder,\n    inputProps: inputProps\n  }, InputMore, InputProps));\n  return /*#__PURE__*/React.createElement(FormControl, _extends({\n    className: clsx(classes.root, className),\n    disabled: disabled,\n    error: error,\n    fullWidth: fullWidth,\n    hiddenLabel: hiddenLabel,\n    ref: ref,\n    required: required,\n    color: color,\n    variant: variant\n  }, other), label && /*#__PURE__*/React.createElement(InputLabel, _extends({\n    htmlFor: id,\n    id: inputLabelId\n  }, InputLabelProps), label), select ? /*#__PURE__*/React.createElement(Select, _extends({\n    \"aria-describedby\": helperTextId,\n    id: id,\n    labelId: inputLabelId,\n    value: value,\n    input: InputElement\n  }, SelectProps), children) : InputElement, helperText && /*#__PURE__*/React.createElement(FormHelperText, _extends({\n    id: helperTextId\n  }, FormHelperTextProps), helperText));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTextField'\n})(TextField);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"\n}), 'Error');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"\n}), 'Save');\n\nexports.default = _default;","import React, { useMemo } from 'react';\nimport { Menu, MenuItem, Typography } from '@material-ui/core';\nimport { isInfrastructure, serviceSpecificationFromClassIdentifier, serviceSpecifications } from '../../jacdac-ts/src/jdom/spec';\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport AddIcon from '@material-ui/icons/Add';\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\"\nimport { useId } from \"react-use-id-hook\"\n\nexport default function AddServiceIconButton(props: {\n    onAdd: (service: jdspec.ServiceSpec) => void,\n    serviceFilter?: (service: jdspec.ServiceSpec) => boolean,\n    error?: string,\n    children?: JSX.Element | JSX.Element[]\n}) {\n    const { error, onAdd, children, serviceFilter } = props;\n    const [servicesAnchorEl, setServicesAnchorEl] = React.useState<null | HTMLElement>(null);\n    const servicesMenuId = useId();\n    const services = useMemo(() => serviceSpecifications()\n        .filter(srv => !isInfrastructure(srv))\n        .filter(srv => !serviceFilter || serviceFilter(srv))\n        , [serviceFilter])\n\n    const handleServiceAddClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        setServicesAnchorEl(event.currentTarget);\n    };\n    const handleServiceAddClose = (id: number) => () => {\n        setServicesAnchorEl(null);\n        if (id !== undefined) {\n            const srv = serviceSpecificationFromClassIdentifier(id);\n            onAdd(srv);\n        }\n    };\n\n    return <>\n        <IconButtonWithTooltip title=\"Add a service\" aria-controls={servicesMenuId} aria-haspopup=\"true\" onClick={handleServiceAddClick}>\n            {children || <AddIcon />}\n        </IconButtonWithTooltip>\n        <Menu\n            id={servicesMenuId}\n            anchorEl={servicesAnchorEl}\n            keepMounted\n            open={Boolean(servicesAnchorEl)}\n            onClose={handleServiceAddClose(undefined)}\n        >\n            {services.map(srv => <MenuItem key={srv.classIdentifier} value={srv.classIdentifier.toString(16)}\n                onClick={handleServiceAddClose(srv.classIdentifier)}>\n                {srv.name}\n            </MenuItem>)}\n        </Menu>\n        <Typography variant=\"caption\" color={error ? \"error\" : \"inherit\"} component=\"div\">\n            {error || \"Select one or more services.\"}\n        </Typography></>\n}","/*\nrequires \"@microsoft/applicationinsights-web-basic\": \"^2.6.1\",\nimport { ApplicationInsights } from \"@microsoft/applicationinsights-web-basic\"\n\n// YOUR_INSTRUMENTATION_KEY_GOES_HERE\nconst instrumentationKey: string = undefined\nconst appInsights =\n    instrumentationKey &&\n    new ApplicationInsights({\n        instrumentationKey,\n        isStorageUseDisabled: true,\n        isCookieUseDisabled: true,\n    })\nconst page =\n    typeof window !== \"undefined\"\n        ? () =>\n              appInsights?.track({\n                  name: window.location.href,\n                  time: new Date().toUTCString(),\n                  baseType: \"PageData\",\n              })\n        : () => {}\nconst track =\n    typeof window !== \"undefined\"\n        ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (name: string, properties?: { [key: string]: any }) =>\n              appInsights?.track({\n                  name,\n                  time: new Date().toUTCString(),\n                  data: properties,\n                  baseType: \"EventData\",\n              })\n        : // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          (name, properties) => {}\nif (typeof window !== \"undefined\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ;(window as any).analytics = {\n        page,\n        track,\n    }\n}\n*/\n\nexport default function useAnalytics(): {\n    page: () => void\n    track: (name: string, properties?: { [key: string]: string | number }) => void\n} {\n    const page = () => {}\n    const track = () => {}\n    return {\n        page,\n        track,\n    }\n}\n","import { createStyles, darken, lighten, makeStyles, Theme } from \"@material-ui/core\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport React, { ReactNode, useContext, useEffect, useState } from \"react\"\nimport AppContext from \"./AppContext\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { delay } from \"../../jacdac-ts/src/jdom/utils\";\nimport IconButtonWithTooltip from \"./ui/IconButtonWithTooltip\";\nimport useAnalytics from \"./hooks/useAnalytics\";\nimport useMounted from \"./hooks/useMounted\";\nimport clsx from \"clsx\";\n\nconst ACK_RESET_DELAY = 500\nconst ERROR_RESET_DELAY = 2000\n\nconst useStyles = makeStyles((theme: Theme) => {\n    const getBackgroundColor = theme.palette.type === 'light' ? lighten : darken;\n    return createStyles({\n        ack: {\n            color: '#fff',\n            fontWeight: theme.typography.fontWeightMedium,\n            backgroundColor: theme.palette.success.main\n        },\n        error: {\n            color: '#fff',\n            backgroundColor: getBackgroundColor(theme.palette.error.main, 0.6),\n        },\n    })\n})\n\nexport default function CmdButton(props: {\n    onClick: () => Promise<void>,\n    className?: string,\n    title?: string,\n    children?: ReactNode,\n    icon?: JSX.Element,\n    size?: \"small\" | undefined,\n    variant?: \"outlined\" | \"contained\" | undefined,\n    disabled?: boolean,\n    disableReset?: boolean,\n    autoRun?: boolean,\n    trackName?: string,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    trackProperties?: { [key: string]: any },\n    ackResetDelay?: number\n}) {\n    const { onClick, className, children, icon, title, disabled, disableReset, autoRun,\n        trackName, trackProperties, ackResetDelay, ...others } = props\n    const { setError: setAppError } = useContext(AppContext)\n    const classes = useStyles()\n    const [working, setWorking] = useState(false)\n    const [ack, setAck] = useState(false)\n    const [error, setError] = useState(undefined)\n    const { track } = useAnalytics()\n    const mounted = useMounted();\n\n    const _disabled = disabled || working;\n\n    const run = async () => {\n        if (working) return; // already working\n\n        if (trackName)\n            track('cmd.' + trackName, trackProperties)\n        try {\n            setError(undefined)\n            setAck(false)\n            setWorking(true)\n            await onClick()\n            if (!mounted())\n                return;\n            setAck(true)\n            if (!disableReset) {\n                await delay(ackResetDelay || ACK_RESET_DELAY)\n                if (!mounted) return;\n                setAck(false)\n            }\n        }\n        catch (e) {\n            if (!mounted())\n                return;\n            setAppError(e)\n            setError(e)\n            if (!disableReset) {\n                await delay(ERROR_RESET_DELAY)\n                if (!mounted())\n                    return;\n                setError(undefined)\n            }\n        }\n        finally {\n            if (mounted())\n                setWorking(false)\n        }\n    }\n\n    const handleClick = async (ev: React.MouseEvent<HTMLButtonElement>) => {\n        ev.stopPropagation()\n        run();\n    }\n\n    const statusIcon = error ? <ErrorIcon /> : undefined;\n    const modeClassName = error ? classes.error : ack ? classes.ack : undefined;\n    const elClassName = clsx(className, modeClassName)\n\n    // run once\n    useEffect(() => {\n        if (autoRun)\n            run()\n    }, [autoRun]);\n\n    if (!children && icon)\n        return <IconButtonWithTooltip\n            className={elClassName}\n            onClick={handleClick}\n            aria-label={title}\n            title={title}\n            disabled={_disabled}\n            {...others}>{statusIcon || icon}</IconButtonWithTooltip>\n    else\n        return <Button\n            className={elClassName}\n            startIcon={icon}\n            endIcon={statusIcon}\n            onClick={handleClick}\n            aria-label={title}\n            title={title}\n            disabled={_disabled}\n            {...others}>{children}</Button>\n}","import { createStyles, makeStyles, MenuItem, TextField, Theme } from \"@material-ui/core\";\nimport React, { ChangeEvent, useState } from \"react\";\nimport { serviceSpecifications } from \"../../jacdac-ts/src/jdom/spec\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        root: {\n            minWidth: \"18rem\",\n        }\n    }),\n);\n\nexport default function ServiceSpecificationSelect(props: {\n    label: string,\n    serviceClass: number;\n    setServiceClass: (serviceClass: number) => void;\n    variant?: \"outlined\" | \"filled\" | \"standard\";\n    fullWidth?: boolean;\n    error?: string;\n}) {\n    const { label, serviceClass, setServiceClass, variant, fullWidth, error } = props;\n    const [labelId] = useState('select-' + Math.random());\n    const classes = useStyles();\n    const specs = serviceSpecifications().filter(spec => !/^_/.test(spec.shortId))\n\n    const handleChange = (event: ChangeEvent<HTMLInputElement>) =>\n        setServiceClass(parseInt(event.target.value));\n\n    return <TextField\n        id={labelId}\n        className={classes.root}\n        label={label}\n        error={!!error}\n        helperText={error}\n        value={serviceClass}\n        select\n        variant={variant}\n        fullWidth={fullWidth}\n        onChange={handleChange}>\n        <MenuItem key=\"none\" value=\"NaN\">No service selected</MenuItem>\n        {specs.map(spec => <MenuItem\n            key={spec.classIdentifier}\n            value={spec.classIdentifier}>{spec.name}</MenuItem>)}\n    </TextField>\n}","import { useEffect, useRef } from \"react\";\n\nexport default function useMounted(): () => boolean {\n    const mounted = useRef(false);\n    useEffect(() => {\n        mounted.current = true;\n        return () => { mounted.current = false; }\n    }, []);\n    return () => mounted.current;\n}","import { useContext, useEffect, useState } from \"react\";\nimport { JDClient } from \"../../../jacdac-ts/src/jdom/client\";\nimport { CHANGE, CONNECT, CONNECTING, PACKET_SEND } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { inIFrame } from \"../../../jacdac-ts/src/jdom/iframeclient\";\nimport Packet from \"../../../jacdac-ts/src/jdom/packet\";\nimport { SMap } from \"../../../jacdac-ts/src/jdom/utils\";\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\";\n\nexport const READ = \"read\"\nexport const MESSAGE_PACKET = \"messagepacket\"\nconst HIDDEN = \"hidden\"\nconst SHOWN = \"shown\"\nconst SENDER = \"jacdac-editor-extension\"\n\nexport interface ReadResponse {\n    code?: string;\n    json?: string;\n    jres?: string;\n}\n\nexport class MakeCodeEditorExtensionClient extends JDClient {\n    private readonly pendingCommands: {\n        [key: string]: {\n            action: string;\n            resolve: (resp: any) => void;\n            reject: (e: any) => void;\n        }\n    } = {};\n    private readonly extensionId: string = inIFrame() ? window.location.hash.substr(1) : undefined;\n    private _target: any; // full apptarget\n    private _connected = false;\n    private _visible = false;\n\n    constructor() {\n        super();\n        this.handleMessage = this.handleMessage.bind(this);\n        if (typeof window !== \"undefined\") {\n            window.addEventListener(\"message\", this.handleMessage, false);\n            this.mount(() => window.removeEventListener(\"message\", this.handleMessage));\n        }\n        // always refresh on load\n        this.on(SHOWN, () => this.refresh());\n        // notify parent that we're ready\n        this.init();\n    }\n\n    get target() {\n        return this._target;\n    }\n\n    get connected() {\n        return this._connected;\n    }\n\n    get visible() {\n        return this._visible;\n    }\n\n    private setVisible(vis: boolean) {\n        if (this._visible !== vis) {\n            this._visible = vis;\n            this.emit(CHANGE);\n        }\n    }\n\n    private nextRequestId = 1;\n    private mkRequest(resolve: (resp: any) => void, reject: (e: any) => void, action: string, body?: any): any {\n        const id = \"jd_\" + this.nextRequestId++;\n        this.pendingCommands[id] = { action, resolve, reject };\n        return {\n            type: \"pxtpkgext\",\n            action,\n            extId: this.extensionId,\n            response: true,\n            id,\n            body\n        }\n    }\n\n    private sendRequest<T>(action: string, body?: any): Promise<T> {\n        this.log(`send ${action}`)\n        if (!this.extensionId)\n            return Promise.resolve(undefined);\n\n        return new Promise((resolve, reject) => {\n            const msg = this.mkRequest(resolve, reject, action, body);\n            window.parent.postMessage(msg, \"*\");\n        })\n    }\n\n    private handleMessage(ev: any) {\n        const msg = ev.data;\n        if (msg?.type !== \"pxtpkgext\")\n            return;\n        if (!msg.id) {\n            switch (msg.event) {\n                case \"extinit\":\n                    this.log(`init`)\n                    this._target = msg.target;\n                    this._connected = true;\n                    this.emit(CONNECT);\n                    this.emit(CHANGE);\n                    break;\n                case \"extloaded\":\n                    this.log(`loaded`)\n                    break;\n                case \"extshown\":\n                    this.setVisible(true)\n                    this.emit(SHOWN);\n                    this.emit(CHANGE);\n                    break;\n                case \"exthidden\":\n                    this.setVisible(false)\n                    this.emit(HIDDEN);\n                    this.emit(CHANGE);\n                    break;\n                case \"extdatastream\":\n                    this.emit('datastream', true);\n                    break;\n                case \"extconsole\":\n                    this.emit('console', msg.body);\n                    break;\n                case \"extmessagepacket\":\n                    this.emit(MESSAGE_PACKET, msg.body);\n                    break;\n                default:\n                    console.debug(\"Unhandled event\", msg);\n            }\n        }\n        else {\n            const { action, resolve, reject } = this.pendingCommands[msg.id] || {};\n            delete this.pendingCommands[msg.id];\n\n            if (msg.success && resolve)\n                resolve(msg.resp);\n            else if (!msg.success && reject)\n                reject(msg.resp);\n            // raise event as well\n            switch (action) {\n                case \"extinit\":\n                    this._connected = true;\n                    this.emit(CONNECT);\n                    this.emit(CHANGE);\n                    break;\n                case \"extusercode\":\n                    // Loaded, set the target\n                    this.emit('readuser', msg.resp);\n                    this.emit(CHANGE);\n                    break;\n                case \"extreadcode\":\n                    // Loaded, set the target\n                    this.emit(READ, msg.resp);\n                    this.emit(CHANGE);\n                    break;\n                case \"extwritecode\":\n                    this.emit('written', undefined);\n                    break;\n            }\n        }\n    }\n\n    private async init() {\n        this.log(`initializing`)\n        await this.sendRequest<void>('extinit');\n        this.log(`connected`)\n        await this.refresh();\n    }\n\n    private async refresh() {\n        this.log(`refresh`)\n        const r = await this.read();\n    }\n\n    async read(): Promise<ReadResponse> {\n        if (!this.extensionId) {\n            const r: ReadResponse = {};\n            this.emit(READ, r);\n            return r;\n        } else {\n            const resp: ReadResponse = await this.sendRequest('extreadcode');\n            return resp;\n        }\n    }\n\n    async readUser() {\n        await this.sendRequest('extusercode')\n    }\n\n    async write(code: string, json?: string, jres?: string, dependencies?: SMap<string>): Promise<void> {\n        if (!this.extensionId) {\n            // Write to local storage instead\n            this.emit('written', undefined);\n        } else {\n            await this.sendRequest<void>('extwritecode', {\n                code: code || undefined,\n                json: json || undefined,\n                jres: jres || undefined,\n                dependencies\n            })\n        }\n    }\n\n    async queryPermission() {\n        await this.sendRequest('extquerypermission');\n    }\n\n    async requestPermission(console: boolean) {\n        await this.sendRequest('extrequestpermission', {\n            console\n        })\n    }\n\n    async dataStreamConsole(console: boolean) {\n        await this.sendRequest('extdatastream', {\n            console\n        })\n    }\n\n    async dataStreamMessages(messages: boolean) {\n        await this.sendRequest('extdatastream', {\n            messages\n        })\n    }\n}\n\n\nexport default function useMakeCodeEditorExtensionClient() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext);\n    const [client, setClient] = useState<MakeCodeEditorExtensionClient>(undefined);\n    useEffect(() => {\n        console.log(`mkcd: new editor client`)\n        const c = new MakeCodeEditorExtensionClient();\n        c.on(CONNECT, () => {\n            console.log(`mkcd: stream messages`)\n            c.dataStreamMessages(true)\n        });\n        c.on([HIDDEN, SHOWN], () => bus.clear());\n        c.on(MESSAGE_PACKET, (msg) => {\n            if (msg.channel === \"jacdac\" && msg.source !== SENDER) {\n                const pkts = Packet.fromFrame(msg.data, bus.timestamp);\n                for (const pkt of pkts) {\n                    pkt.sender = msg.source || \"makecode\";\n                    bus.processPacket(pkt);\n                }\n            }\n        })\n        setClient(c);\n        return () => c?.unmount()\n    }, []);\n    return client;\n}","import { Grid, TextField } from \"@material-ui/core\"\nimport React, { ChangeEvent, useEffect, useMemo, useState } from \"react\"\nimport {\n    clone,\n    JSONTryParse,\n    SMap,\n    uniqueName,\n} from \"../../../jacdac-ts/src/jdom/utils\"\nimport useChange from \"../../jacdac/useChange\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeleteIcon from \"@material-ui/icons/Delete\"\nimport {\n    serviceSpecifications,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport AddServiceIconButton from \"../AddServiceIconButton\"\nimport ServiceSpecificationSelect from \"../ServiceSpecificationSelect\"\nimport { escapeName } from \"../../../jacdac-ts/src/azure-iot/dtdl\"\nimport IconButtonWithTooltip from \"../ui/IconButtonWithTooltip\"\nimport useMakeCodeEditorExtensionClient, {\n    READ,\n    ReadResponse,\n} from \"./MakeCodeEditorExtensionClient\"\nimport CmdButton from \"../CmdButton\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport SaveIcon from \"@material-ui/icons/Save\"\nimport { camelize } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport { useId } from \"react-use-id-hook\"\nimport { resolveMakecodeService, resolveMakecodeServiceFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/makecode\"\n\ninterface ClientRole {\n    name: string\n    service: number\n}\n\ninterface Configuration {\n    roles: ClientRole[]\n}\n\nfunction toTypescript(config: Configuration) {\n    const ns = \"myModules\"\n    return `// auto-generated, do not edit.\nnamespace ${ns} {\n${config.roles\n    .map(\n        role => `\n    //% fixedInstance block=\"${role.name}\"\n    export const ${camelize(role.name)} = new ${\n            resolveMakecodeServiceFromClassIdentifier(role.service).client.qName\n        }(\"${camelize(role.name)}\");\n`\n    )\n    .join(\"\")}\n\n    // start after main\n    control.runInParallel(function() {\n        ${config.roles\n            .map(\n                role => `    ${ns}.${camelize(role.name)}.start();\n        `\n            )\n            .join(\"\")}\n    })\n}\n    `\n}\n\nfunction toDependencies(config: Configuration) {\n    const r: SMap<string> = {}\n    config?.roles.forEach(role => {\n        const mk = resolveMakecodeServiceFromClassIdentifier(role.service)\n        r[mk.client.name] = `github:${mk.client.repo}`\n    })\n    return r\n}\n\nfunction toJSON(config: Configuration) {\n    return config && JSON.stringify(config, null, 4)\n}\n\nfunction ClientRoleRow(props: {\n    config: Configuration\n    component: ClientRole\n    onUpdate: () => void\n}) {\n    const { component, onUpdate, config } = props\n    const { name, service } = component\n    const { nameError, serviceError } = useMemo(\n        () => validateClientRole(config, component),\n        [config, component]\n    )\n    const textId = useId()\n    const handleComponentNameChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        component.name = escapeName(ev.target.value)\n        onUpdate()\n    }\n    const handleSetService = (serviceClass: number) => {\n        component.service = serviceClass\n        onUpdate()\n    }\n    const handleComponentDelete = () => {\n        config.roles.splice(config.roles.indexOf(component), 1)\n        onUpdate()\n    }\n    return (\n        <Grid item xs={12}>\n            <Grid container spacing={2}>\n                <Grid item xs={4} md={6}>\n                    <TextField\n                        id={textId}\n                        fullWidth={true}\n                        error={!!nameError}\n                        variant=\"outlined\"\n                        label=\"name\"\n                        helperText={nameError}\n                        value={name}\n                        onChange={handleComponentNameChange}\n                    />\n                </Grid>\n                <Grid item xs={4} md={4}>\n                    <ServiceSpecificationSelect\n                        variant=\"outlined\"\n                        label=\"service\"\n                        serviceClass={service}\n                        setServiceClass={handleSetService}\n                        error={serviceError}\n                    />\n                </Grid>\n                <Grid item>\n                    <IconButtonWithTooltip\n                        title=\"Remove service\"\n                        onClick={handleComponentDelete}\n                    >\n                        <DeleteIcon />\n                    </IconButtonWithTooltip>\n                </Grid>\n            </Grid>\n        </Grid>\n    )\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction validateClientRole(config: Configuration, role: ClientRole) {\n    const serviceError: string = undefined\n    const nameError: string = undefined\n    // TODO\n    return { serviceError, nameError }\n}\n\nexport default function MakeCodeEditorExtension() {\n    const client = useMakeCodeEditorExtensionClient()\n    const connected = useChange(client, c => c?.connected)\n    const [configuration, setConfiguration] = useState<Configuration>({\n        roles: [],\n    } as Configuration)\n    useEffect(\n        () =>\n            client?.subscribe(READ, (resp: ReadResponse) => {\n                console.log(`mkcd: read received`)\n                const cfg = JSONTryParse(resp.json)\n                console.log({ resp, cfg })\n                if (cfg) setConfiguration(cfg)\n            }),\n        [client]\n    )\n    const hasMakeCodeService = (srv: jdspec.ServiceSpec) =>\n        !!resolveMakecodeService(srv)\n    const update = () => {\n        setConfiguration(clone(configuration))\n    }\n    const handleAddService = (service: jdspec.ServiceSpec) => {\n        if (!configuration.roles) configuration.roles = []\n        const names = configuration.roles\n            .map(c => c.name)\n            .concat(serviceSpecifications().map(spec => spec.camelName))\n            .filter(n => !!n)\n        configuration.roles.push({\n            name: uniqueName(names, service.camelName || service.shortId),\n            service: service.classIdentifier,\n        })\n        update()\n    }\n    const handleSave = async () => {\n        const ts = toTypescript(configuration)\n        const json = toJSON(configuration)\n        const deps = toDependencies(configuration)\n        console.log(`mkcd: saving...`)\n        await client.write(ts, json, undefined, deps)\n    }\n\n    return (\n        <Grid container direction=\"row\" spacing={2}>\n            {configuration.roles?.map((c, i) => (\n                <ClientRoleRow\n                    key={\"config\" + i}\n                    config={configuration}\n                    component={c}\n                    onUpdate={update}\n                />\n            ))}\n            <Grid item xs={12}>\n                <AddServiceIconButton\n                    serviceFilter={hasMakeCodeService}\n                    onAdd={handleAddService}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <CmdButton\n                    trackName=\"makecode.save\"\n                    variant=\"contained\"\n                    disabled={!connected}\n                    icon={<SaveIcon />}\n                    onClick={handleSave}\n                >\n                    save\n                </CmdButton>\n            </Grid>\n        </Grid>\n    )\n}\n","import React, { useContext, useEffect } from \"react\"\nimport { createMuiTheme, createStyles, responsiveFontSizes } from \"@material-ui/core\";\nimport ThemedLayout from \"../../components/ui/ThemedLayout\";\nimport MakeCodeEditorExtension from \"../../components/makecode/MakeCodeEditorExtension\"\nimport { makeStyles } from '@material-ui/core';\nimport PaperBox from \"../../components/ui/PaperBox\";\nimport Flags from \"../../../jacdac-ts/src/jdom/flags\";\nimport DarkModeContext from \"../ui/DarkModeContext\";\n\nconst useStyles = makeStyles((theme) => createStyles({\n    content: {\n        display: 'flex',\n        minHeight: '100vh',\n        minWidth: '10rem',\n        flexDirection: 'column',\n        padding: theme.spacing(3),\n        transition: theme.transitions.create('margin', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        flexGrow: 1\n    },\n}));\n\nexport default function MakeCodeEditorExtensionPage() {\n    const { toggleDarkMode } = useContext(DarkModeContext)\n    const rawTheme = createMuiTheme({\n        palette: {\n            primary: {\n                main: '#2e7d32',\n            },\n            secondary: {\n                main: '#ffc400',\n            },\n            contrastThreshold: 5.1,\n            type: 'dark'\n        },\n    })\n    const classes = useStyles();\n    const theme = responsiveFontSizes(rawTheme);\n    useEffect(() => {\n        Flags.webUSB = false;\n        toggleDarkMode('dark');\n    }, [])\n    return <ThemedLayout theme={theme}>\n        <div className={classes.content}>\n            <PaperBox>\n                <MakeCodeEditorExtension />\n            </PaperBox>\n        </div>\n    </ThemedLayout>\n}\n","import React from \"react\"\nimport MakeCodeEditorExtensionPage from \"../../components/makecode/MakeCodeEditorExtensionPage\"\n\nexport default function Page() {\n    return <MakeCodeEditorExtensionPage />\n}"],"sourceRoot":""}