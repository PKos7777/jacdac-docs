{"version":3,"sources":["webpack:///(webpack)/buildin/harmony-module.js","webpack:///./src/components/dashboard/DashboardGyroscope.tsx","webpack:///(webpack)/buildin/module.js"],"names":["Sliders","props","host","register","rates","useRegisterUnpackedValue","handleChangeX","event","newValue","reading","values","y","z","n","setValues","sendGetAsync","handleChangeY","x","handleChangeZ","valueDisplay","v","roundWithPrecision","length","step","marks","value","DashboardGyroscope","service","GyroscopeReg","RotationRates","useServiceHost","color","useWidgetTheme","active","rotator","useCallback","delta","rotation","unpackedValue","degreesToRadians","Math","PI","f"],"mappings":"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","file":"98-48ddf3479eba012f3c2f.js","sourcesContent":["module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import React, { useCallback } from \"react\";\nimport { GyroscopeReg } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\";\nimport { useRegisterUnpackedValue } from \"../../jacdac/useRegisterValue\";\nimport useWidgetTheme from \"../widgets/useWidgetTheme\";\nimport useServiceHost from \"../hooks/useServiceHost\";\nimport SensorServiceHost from \"../../../jacdac-ts/src/hosts/sensorservicehost\";\nimport { JDRegister } from \"../../../jacdac-ts/src/jdom/register\";\nimport { Grid, Mark, NoSsr } from \"@material-ui/core\";\nimport { roundWithPrecision } from \"../../../jacdac-ts/src/jdom/utils\";\nimport CanvasWidget from \"../widgets/CanvasWidget\";\nimport { Vector } from \"../widgets/threeutils\";\nimport LoadingProgress from \"../ui/LoadingProgress\";\nimport Suspense from \"../ui/Suspense\"\nimport SliderWithLabel from \"../ui/SliderWithLabel\";\n\nfunction Sliders(props: { host: SensorServiceHost<[number, number, number]>, register: JDRegister }) {\n    const { host, register } = props;\n    const rates = useRegisterUnpackedValue<[number, number, number]>(register);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleChangeX: any = (event: unknown, newValue: number | number[]) => {\n        const [, y, z] = host.reading.values();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const n = newValue as any as number;\n        host.reading.setValues([n, y, z]);\n        register.sendGetAsync()\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleChangeY: any = (event: unknown, newValue: number | number[]) => {\n        const [x, , z] = host.reading.values();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const n = newValue as any as number;\n        host.reading.setValues([x, n, z]);\n        register.sendGetAsync()\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleChangeZ: any = (event: unknown, newValue: number | number[]) => {\n        const [x, y] = host.reading.values();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const n = newValue as any as number;\n        host.reading.setValues([x, y, n]);\n        register.sendGetAsync()\n    }\n    const valueDisplay = (v: number) => `${roundWithPrecision(v, 1)}Â°/s`\n\n    if (!rates?.length)\n        return <LoadingProgress />;\n    const [x, y, z] = rates;\n    const step = 1\n    const marks: Mark[] = [\n        {\n            value: 0,\n        },\n    ]\n    return <>\n        <Grid item xs={12}>\n            <SliderWithLabel\n                label=\"X\"\n                valueLabelDisplay=\"auto\"\n                valueLabelFormat={valueDisplay}\n                aria-label=\"x rotation rate slider\" min={-180} max={180} step={step}\n                value={x}\n                marks={marks}\n                onChange={handleChangeX} />\n        </Grid>\n        <Grid item xs={12}>\n            <SliderWithLabel\n                label={\"Y\"}\n                valueLabelDisplay=\"auto\"\n                valueLabelFormat={valueDisplay}\n                aria-label=\"y rotation rate slider\" min={-180} max={180} step={step}\n                value={y}\n                marks={marks}\n                onChange={handleChangeY} />\n        </Grid>\n        <Grid item xs={12}>\n            <SliderWithLabel\n                label=\"Z\"\n                valueLabelDisplay=\"auto\"\n                valueLabelFormat={valueDisplay}\n                aria-label=\"z rotation rate slider\" min={-180} max={180} step={step}\n                value={z}\n                marks={marks}\n                onChange={handleChangeZ} />\n        </Grid>\n    </>\n}\n\nexport default function DashboardGyroscope(props: DashboardServiceProps) {\n    const { service } = props;\n    const register = service.register(GyroscopeReg.RotationRates);\n    const host = useServiceHost<SensorServiceHost<[number, number, number]>>(service);\n    const color = host ? \"secondary\" : \"primary\"\n    const { active } = useWidgetTheme(color)\n    const rotator = useCallback((delta, rotation: Vector) => {\n        const rates = register.unpackedValue;\n        if (!rates) return;\n\n        const [x, y, z] = rates; // degrees\n        const degreesToRadians = Math.PI / 180;\n        const f = delta * degreesToRadians;\n        return {\n            x: rotation.x + x * f,\n            y: rotation.y - z * f,\n            z: rotation.z - y * f\n        }\n    }, [register])\n\n    return <Grid container direction=\"row\">\n        <Grid item>\n            <NoSsr><Suspense>\n                <CanvasWidget color={active} rotator={rotator} />\n            </Suspense></NoSsr>\n        </Grid>\n        {host && <Sliders host={host} register={register} />}\n    </Grid>\n}","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n"],"sourceRoot":""}