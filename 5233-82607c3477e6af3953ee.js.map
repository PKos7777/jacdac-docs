{"version":3,"sources":["webpack://jacdac-docs/./src/components/dashboard/DashboardHIDMouse.tsx"],"names":["useStyles","makeStyles","theme","createStyles","capture","cursor","borderColor","palette","primary","main","action","active","DashboardHIDMouse","props","service","classes","server","useServiceServer","sendButton","buttons","event","data","jdpack","sendCmdAsync","HidMouseCmd","sendMove","dx","dy","sendWheel","serverValue","useChange","_","lastCommand","value","handleKeyDown","ev","stopPropagation","preventDefault","key","console","log","HidMouseButton","HidMouseButtonEvent"],"mappings":"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","file":"5233-82607c3477e6af3953ee.js","sourcesContent":["import React, { KeyboardEvent } from \"react\"\nimport { createStyles, Grid, makeStyles, Typography } from \"@material-ui/core\"\nimport { HidMouseButton, HidMouseButtonEvent, HidMouseCmd } from \"../../../jacdac-ts/jacdac-spec/dist/specconstants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { jdpack } from \"../../../jacdac-ts/src/jdom/pack\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport HIDMouseServer from \"../../../jacdac-ts/src/servers/hidmouseserver\"\nimport useChange from \"../../jacdac/useChange\"\n\nconst useStyles = makeStyles((theme) => createStyles({\n    capture: {\n        cursor: \"pointer\",\n        \"&:hover\": {\n            borderColor: theme.palette.primary.main,\n        },\n        \"&:focus\": {\n            borderColor: theme.palette.action.active,\n        }\n    }\n}));\n\n\nexport default function DashboardHIDMouse(props: DashboardServiceProps) {\n    const { service } = props\n    const classes = useStyles()\n    const server = useServiceServer<HIDMouseServer>(service)\n    const sendButton = async (buttons: HidMouseButton, event: HidMouseButtonEvent) => {\n        const data = jdpack<[HidMouseButton, HidMouseButtonEvent]>(\"u16 u8\", [buttons, event])\n        await service.sendCmdAsync(HidMouseCmd.SetButton, data)\n    }\n    const sendMove = async (dx: number, dy: number) => {\n        const data = jdpack<[number, number, number]>(\"i16 i16 u16\", [dx, dy, 100])\n        await service.sendCmdAsync(HidMouseCmd.Move, data)\n    }\n    const sendWheel = async (dy: number) => {\n        const data = jdpack<[number, number]>(\"i16 u16\", [dy, 100])\n        await service.sendCmdAsync(HidMouseCmd.Wheel, data)\n    }\n    const serverValue = useChange(server, _ => _?.lastCommand)\n    const value = serverValue || \"...\"\n    const handleKeyDown = async (ev: KeyboardEvent<HTMLInputElement>) => {\n        ev.stopPropagation()\n        ev.preventDefault()\n        const { key } = ev\n        console.log({ key })\n        switch (key) {\n            case \"l\": sendButton(HidMouseButton.Left, HidMouseButtonEvent.Click); break;\n            case \"r\": sendButton(HidMouseButton.Right, HidMouseButtonEvent.Click); break;\n            case \"m\": sendButton(HidMouseButton.Middle, HidMouseButtonEvent.Click); break;\n            case \"ArrowRight\": sendMove(10, 0); break;\n            case \"ArrowLeft\": sendMove(-10, 0); break;\n            case \"ArrowUp\": sendMove(0, 10); break;\n            case \"ArrowDown\": sendMove(0, -10); break;\n            case \"w\": sendWheel(10); break;\n            case \"s\": sendWheel(-10); break;\n        }\n    }\n\n    return <Grid container spacing={1}>\n        <Grid item>\n            <pre\n                className={classes.capture}\n                tabIndex={0}\n                onKeyDown={handleKeyDown}>\n                {value || \"...\"}\n            </pre>\n            <Typography variant=\"caption\">focus and type l(eft), r(ight), m(iddle) for buttons, arrow keys to move, w(heel up), d(wheel down) for the wheel</Typography>\n        </Grid>\n        {server && <Grid item xs={12}>\n            <Typography variant=\"caption\" component=\"pre\">\n                mouse status: {serverValue || \"...\"}\n            </Typography>\n        </Grid>}\n    </Grid>\n}\n"],"sourceRoot":""}