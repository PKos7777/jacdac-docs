{"version":3,"sources":["webpack:///./node_modules/@material-ui/core/esm/ListItemText/ListItemText.js","webpack:///./src/components/Toc.tsx"],"names":["useStyles","makeStyles","theme","createStyles","root","width","backgroundColor","palette","background","paper","treeifyToc","toc","tree","slice","tocNodes","forEach","node","index","k","path","replace","undefined","filter","parts","split","pop","length","parentPath","join","parent","children","push","r","nodes","sortNodes","sort","l","order","Toc","props","pagePath","useContext","AppContext","setDrawerType","useTheme","classes","data","useStaticQuery","handleClick","DrawerType","None","useMemo","name","allMdx","edges","map","frontmatter","title","headings","test","value","fields","slug","TocListItem","entry","level","selected","sub","color","text","primary","child","i"],"mappings":"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","file":"86-3804a782121a6eb3d89d.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nimport ListContext from '../List/ListContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    flex: '1 1 auto',\n    minWidth: 0,\n    marginTop: 4,\n    marginBottom: 4\n  },\n\n  /* Styles applied to the `Typography` components if primary and secondary are set. */\n  multiline: {\n    marginTop: 6,\n    marginBottom: 6\n  },\n\n  /* Styles applied to the `Typography` components if dense. */\n  dense: {},\n\n  /* Styles applied to the root element if `inset={true}`. */\n  inset: {\n    paddingLeft: 56\n  },\n\n  /* Styles applied to the primary `Typography` component. */\n  primary: {},\n\n  /* Styles applied to the secondary `Typography` component. */\n  secondary: {}\n};\nvar ListItemText = /*#__PURE__*/React.forwardRef(function ListItemText(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      _props$inset = props.inset,\n      inset = _props$inset === void 0 ? false : _props$inset,\n      primaryProp = props.primary,\n      primaryTypographyProps = props.primaryTypographyProps,\n      secondaryProp = props.secondary,\n      secondaryTypographyProps = props.secondaryTypographyProps,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"disableTypography\", \"inset\", \"primary\", \"primaryTypographyProps\", \"secondary\", \"secondaryTypographyProps\"]);\n\n  var _React$useContext = React.useContext(ListContext),\n      dense = _React$useContext.dense;\n\n  var primary = primaryProp != null ? primaryProp : children;\n\n  if (primary != null && primary.type !== Typography && !disableTypography) {\n    primary = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: dense ? 'body2' : 'body1',\n      className: classes.primary,\n      component: \"span\",\n      display: \"block\"\n    }, primaryTypographyProps), primary);\n  }\n\n  var secondary = secondaryProp;\n\n  if (secondary != null && secondary.type !== Typography && !disableTypography) {\n    secondary = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: \"body2\",\n      className: classes.secondary,\n      color: \"textSecondary\",\n      display: \"block\"\n    }, secondaryTypographyProps), secondary);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, dense && classes.dense, inset && classes.inset, primary && secondary && classes.multiline),\n    ref: ref\n  }, other), primary, secondary);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItemText'\n})(ListItemText);","import React, { useContext, useMemo } from \"react\"\nimport { makeStyles, createStyles, Theme, List, ListItem, Typography, useTheme, Box } from '@material-ui/core';\nimport { Link } from 'gatsby-theme-material-ui';\n// tslint:disable-next-line: no-submodule-imports\nimport ListItemText from '@material-ui/core/ListItemText';\nimport AppContext, { DrawerType } from \"./AppContext\"\nimport { graphql, useStaticQuery } from \"gatsby\";\n\ninterface TocNode {\n  name: string;\n  path: string;\n  order: number;\n  children?: TocNode[];\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      backgroundColor: theme.palette.background.paper\n    }\n  }),\n);\n\nfunction treeifyToc(toc: TocNode[]) {\n  let tree = toc.slice(0)\n\n  // reconstruct tree\n  const tocNodes: { [index: string]: TocNode } = {};\n  tree.forEach((node, index) => {\n    const k = node.path.replace(/\\/$/, '')\n    if (tocNodes[k]) {\n      tree[index] = undefined\n    }\n    else\n      tocNodes[k] = node\n  });\n  tree = tree.filter(node => !!node)\n  tree.forEach((node, index) => {\n    const parts = node.path.replace(/\\/$/, '').split(\"/\");\n    parts.pop();\n    while (parts.length) {\n      const parentPath = `${parts.join(\"/\")}`;\n      const parent = tocNodes[parentPath]\n      if (parent) {\n        if (!parent.children)\n          parent.children = [];\n        parent.children.push(node)\n        tree[index] = undefined;\n        break;\n      }\n      parts.pop();\n    }\n  })\n  const r = {\n    tree: tree.filter(node => !!node),\n    nodes: tocNodes\n  }\n\n  function sortNodes(nodes: TocNode[]) {\n    nodes.sort((l, r) => l.order - r.order)\n    nodes.forEach(node => node.children && sortNodes(node.children))\n  }\n  sortNodes(r.tree)\n\n  return r;\n}\n\nexport default function Toc(props: { pagePath: string }) {\n  const { pagePath } = props;\n  const { setDrawerType } = useContext(AppContext)\n  const theme = useTheme();\n  const classes = useStyles();\n\n  const data = useStaticQuery(graphql`\n  query {\n     allMdx {\n      edges {\n        node {\n          headings {\n            value\n          }\n          frontmatter {\n            title\n            order\n            hideToc\n          }\n          excerpt\n          fields {\n            slug\n          }\n          parent {\n            ... on File {\n              sourceInstanceName\n            }\n          }\n        }\n      }\n    }\n  }`);\n\n  /*\n      site {\n        siteMetadata {\n          title\n        }\n    }\n  \n    allServicesJson {\n        nodes {\n          name\n          shortId\n        }\n      } \n    allDevicesJson {\n        nodes {\n          id\n          name\n        }\n      }\n   */\n\n  const handleClick = () => {\n    setDrawerType(DrawerType.None)\n  }\n\n  const tree = useMemo(() => {\n    // convert pages into tree\n    const toc: TocNode[] = [{\n      name: \"Home\",\n      path: \"/\",\n      order: 0\n    }, {\n      name: \"Dashboard\",\n      path: \"/dashboard/\",\n      order: 0.5\n    }, {\n      name: \"Reference\",\n      path: \"/reference/\",\n      order: 1\n    }, {\n      name: \"Services\",\n      path: \"/services/\",\n      order: 0.6\n    }, {\n      name: \"Devices\",\n      path: \"/devices/\",\n      order: 0.7\n    }, {\n      name: \"Tools\",\n      path: \"/tools/\",\n      order: 4\n    }, {\n      name: \"Clients\",\n      path: \"/clients/\",\n      order: 5\n    }]\n\n    data.allMdx.edges.map(node => node.node)\n      .filter(node => !!node.frontmatter?.title\n        || (!!node.headings.length && !/404/.test(node.headings[0].value)))\n      .map(node => {\n        const r = {\n          name: node.frontmatter?.title || node.headings[0].value,\n          path: node.fields.slug,\n          order: node.frontmatter?.order !== undefined ? node.frontmatter?.order : 50\n        }\n        return r;\n      })\n      .forEach(node => toc.push(node))\n\n    /*\n    data.allServicesJson.nodes.map(node => {\n      return {\n        name: node.name,\n        path: `/services/${node.shortId}/`\n      }\n    }).forEach(node => toc.push(node))\n\n    data.allDevicesJson.nodes.map(node => {\n      return {\n        name: node.name,\n        path: `/devices/${identifierToUrlPath(node.id)}/`\n      }\n    }).forEach(node => toc.push(node));\n    */\n\n    const { tree } = treeifyToc(toc)\n    return tree;\n  }, []);\n\n  function TocListItem(props: { entry: TocNode, level: number }) {\n    const { entry, level } = props;\n    const { path, children, name } = entry;\n    const selected = pagePath === path;\n    const sub = level === 1 || (!!children && !!children.length);\n\n    return <>\n      <ListItem button\n        selected={selected}\n        key={'tocitem' + path}>\n        <Link style={({ color: theme.palette.text.primary })} onClick={handleClick} to={path}>\n          <ListItemText\n            primary={<Typography variant={sub ? \"button\" : \"caption\"}>{name}</Typography>} />\n        </Link>\n      </ListItem>\n      { sub && !!children?.length && <Box ml={level > 0 ? 1 : 0}>\n        {children?.map(child => <TocListItem key={'tocitem' + child.path} entry={child} level={level + 1} />)}\n      </Box>}\n    </>\n  }\n\n  return <List dense className={classes.root}>\n    {tree.map((entry, i) => <TocListItem key={i} entry={entry} level={0} />)}\n  </List>\n}\n"],"sourceRoot":""}