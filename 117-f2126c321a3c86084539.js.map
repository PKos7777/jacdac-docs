{"version":3,"sources":["webpack:///./src/components/dashboard/DashboardRoleManager.tsx"],"names":["DashboardRoleManager","props","service","useContext","JacdacContext","bus","autoBindRegister","register","RoleManagerReg","AutoBind","autoBind","useRegisterBoolValue","handleChecked","ev","checked","sendSetBoolAsync","switchId","useId","labelId","roleManager","useChange","_","roles","handleClick","startSimulators","undefined","length","map","role","name"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe,SAASA,oBAAT,CAA8BC,KAA9B,EAA4D;AAAA,MAC/DC,OAD+D,GACnDD,KADmD,CAC/DC,OAD+D;;AAAA,oBAEvDC,wDAAU,CAAqBC,gEAArB,CAF6C;AAAA,MAE/DC,GAF+D,eAE/DA,GAF+D;;AAGvE,MAAMC,gBAAgB,GAAGJ,OAAO,CAACK,QAAR,CAAiBC,qFAAc,CAACC,QAAhC,CAAzB;AACA,MAAMC,QAAQ,GAAGC,6FAAoB,CAACL,gBAAD,EAAmBL,KAAnB,CAArC;;AACA,MAAMW,aAAa;AAAA,wMAAG,iBAAOC,EAAP,EAAWC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZR,gBAAgB,CAACS,gBAAjB,CAAkCD,OAAlC,EAA2C,IAA3C,CADY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAbF,aAAa;AAAA;AAAA;AAAA,KAAnB;;AAGA,MAAMI,QAAQ,GAAGC,uEAAK,EAAtB;AACA,MAAMC,OAAO,GAAGD,uEAAK,EAArB;AACA,MAAME,WAAW,GAAGC,0EAAS,CAACf,GAAD,EAAM,UAAAgB,CAAC;AAAA,WAAIA,CAAC,CAACF,WAAN;AAAA,GAAP,CAA7B;AACA,MAAMG,KAAK,GAAGF,0EAAS,CAACD,WAAD,EAAc,UAAAE,CAAC;AAAA,WAAIA,CAAC,CAACC,KAAN;AAAA,GAAf,CAAvB;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAMJ,WAAN,aAAMA,WAAN,uBAAMA,WAAW,CAAEK,eAAb,EAAN;AAAA,GAApB;;AAEA,MAAId,QAAQ,KAAKe,SAAjB,EAA4B,oBAAO,2DAAC,mEAAD,OAAP;AAE5B,sBACI,wHACK,CAAC,EAACH,KAAD,aAACA,KAAD,eAACA,KAAK,CAAEI,MAAR,CAAD,iBACG,2DAAC,iEAAD;AAAM,QAAI,MAAV;AAAW,MAAE,EAAE;AAAf,kBACI,2DAAC,iEAAD;AAAM,SAAK,EAAE;AAAb,KACKJ,KAAK,CAACK,GAAN,CAAU,UAAAC,IAAI;AAAA,wBACX,2DAAC,4EAAD;AAAc,SAAG,EAAEA,IAAI,CAACC,IAAxB;AAA8B,UAAI,EAAED;AAApC,MADW;AAAA,GAAd,CADL,CADJ,CAFR,eAUI,2DAAC,iEAAD;AAAM,QAAI,MAAV;AAAW,MAAE,EAAE;AAAf,kBACI,2DAAC,iEAAD;AACI,MAAE,EAAEZ,QADR;AAEI,WAAO,EAAEN,QAFb;AAGI,YAAQ,EAAEE,aAHd;AAII,uBAAiBM;AAJrB,IADJ,eAOI;AAAO,MAAE,EAAEA;AAAX,yBAPJ,CAVJ,eAmBI,2DAAC,iEAAD;AAAM,QAAI,MAAV;AAAW,MAAE,EAAE;AAAf,kBACI,2DAAC,gEAAD;AACI,YAAQ,EAAE,CAACC,WADf;AAEI,WAAO,EAAC,UAFZ;AAGI,WAAO,EAAEI;AAHb,wBADJ,CAnBJ,CADJ;AA+BH,C","file":"117-f2126c321a3c86084539.js","sourcesContent":["import { Grid, List, Switch } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport { RoleManagerReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { useId } from \"react-use-id-hook\"\nimport { useRegisterBoolValue } from \"../../jacdac/useRegisterValue\"\nimport LoadingProgress from \"../ui/LoadingProgress\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport useChange from \"../../jacdac/useChange\"\nimport { RoleListItem } from \"../services/RoleListItem\"\n\nexport default function DashboardRoleManager(props: DashboardServiceProps) {\n    const { service } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const autoBindRegister = service.register(RoleManagerReg.AutoBind)\n    const autoBind = useRegisterBoolValue(autoBindRegister, props)\n    const handleChecked = async (ev, checked: boolean) => {\n        await autoBindRegister.sendSetBoolAsync(checked, true)\n    }\n    const switchId = useId()\n    const labelId = useId()\n    const roleManager = useChange(bus, _ => _.roleManager)\n    const roles = useChange(roleManager, _ => _.roles)\n\n    const handleClick = () => roleManager?.startSimulators()\n\n    if (autoBind === undefined) return <LoadingProgress />\n\n    return (\n        <>\n            {!!roles?.length && (\n                <Grid item xs={12}>\n                    <List dense={true}>\n                        {roles.map(role => (\n                            <RoleListItem key={role.name} role={role} />\n                        ))}\n                    </List>\n                </Grid>\n            )}\n            <Grid item xs={12}>\n                <Switch\n                    id={switchId}\n                    checked={autoBind}\n                    onChange={handleChecked}\n                    aria-labelledby={labelId}\n                />\n                <label id={labelId}>auto assign roles</label>\n            </Grid>\n            <Grid item xs={12}>\n                <Button\n                    disabled={!roleManager}\n                    variant=\"outlined\"\n                    onClick={handleClick}\n                >\n                    Start simulators\n                </Button>\n            </Grid>\n        </>\n    )\n}\n"],"sourceRoot":""}