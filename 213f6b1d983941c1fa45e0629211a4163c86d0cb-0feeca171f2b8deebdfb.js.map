{"version":3,"sources":["webpack:///./node_modules/@material-ui/core/esm/Card/Card.js","webpack:///./node_modules/@material-ui/core/esm/CardHeader/CardHeader.js","webpack:///./src/components/ui/CardMediaWithSkeleton.tsx","webpack:///./src/components/DeviceCardMedia.tsx","webpack:///./src/components/DeviceCardHeader.tsx","webpack:///./node_modules/@material-ui/core/esm/CardMedia/CardMedia.js","webpack:///./src/jacdac/useDeviceSpecification.ts","webpack:///./src/components/devices/useDeviceImage.ts","webpack:///./src/jacdac/useRegisterValue.ts","webpack:///./node_modules/@material-ui/core/esm/CardActions/CardActions.js","webpack:///./node_modules/@material-ui/core/esm/CardContent/CardContent.js","webpack:///./node_modules/@material-ui/core/esm/internal/svg-icons/Person.js","webpack:///./node_modules/@material-ui/core/esm/Avatar/Avatar.js","webpack:///./src/components/devices/useDeviceStatusLightStyle.ts","webpack:///./src/components/devices/DeviceAvatar.tsx"],"names":["useStyles","makeStyles","theme","createStyles","media","height","paddingTop","CardMediaWithSkeleton","props","image","src","className","others","classes","hasImage","DeviceCardMedia","device","specification","useDeviceSpecification","imageUrl","useDeviceImage","name","DeviceFirmwareVersionChip","firmwareVersionRegister","service","register","ControlReg","FirmwareVersion","useRegisterUnpackedValue","firmwareVersion","DeviceTemperatureChip","tempRegister","McuTemperature","temperature","undefined","DeviceCardHeader","showFirmware","showTemperature","showMedia","showDeviceId","showAvatar","identifierToUrlPath","id","deviceId","filter","s","join","firmwareIdentifierRegister","FirmwareIdentifier","firmwareIdentifier","deviceSpecificationFromFirmwareIdentifier","suffix","withPrefix","useRegisterHumanValue","options","useState","humanValue","value","setValue","visible","useEffect","subscribe","REPORT_UPDATE","unpackedValue","useRegisterBoolValue","boolValue","statusHue","statusSaturation","bootloaderAnimation","identifyAnimation","startupAnimation","connectedAnimation","disconnectedAnimation","panicFrames","statusAnimation","status","useDeviceStatusLightStyle","img","marginTop","small","width","spacing","large","DeviceAvatar","size","useDeviceName","sizeClassName","host","useServiceProvider","source","statusLEDClassName","statusLEDHelmetStyle","helmetStyle","handleIdentify","identify","VIRTUAL_DEVICE_NODE_NAME"],"mappings":"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;AAEtC,sBAAsB,mDAAmB,YAAY,0FAAQ;AAC7D,eAAe,4DAAI;AACnB;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,cAAc,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BgB;AACuB;AACtD;AACA;AACA;;AAEe,mFAAa,eAAe,sBAAmB;AAC9D;AACA,CAAC,YAAY,E;;ACR6C;AACgC;AAC3D;AACP;AAC4B;AACN;AACI;AAC3C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,cAAc;;AAEd;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB,iBAAc;AACtC;AACA;;AAEA,EAAE,kBAAe;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,IAAI,aAAM,gBAAgB,mBAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,kDAAwB;;AAEtC,sBAAsB;;AAEtB;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,4BAA4B,sBAAmB,QAAQ,sCAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH,4BAA4B,sBAAmB,CAAC,MAAM;AACtD;AACA,KAAK;AACL;;AAEA,sBAAsB,sBAAmB,YAAY,sCAAQ;AAC7D,eAAe,iCAAI;AACnB;AACA,GAAG;AAC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","file":"213f6b1d983941c1fa45e0629211a4163c86d0cb-0feeca171f2b8deebdfb.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = /*#__PURE__*/React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 16\n  },\n\n  /* Styles applied to the avatar element. */\n  avatar: {\n    flex: '0 0 auto',\n    marginRight: 16\n  },\n\n  /* Styles applied to the action element. */\n  action: {\n    flex: '0 0 auto',\n    alignSelf: 'flex-start',\n    marginTop: -8,\n    marginRight: -8\n  },\n\n  /* Styles applied to the content wrapper element. */\n  content: {\n    flex: '1 1 auto'\n  },\n\n  /* Styles applied to the title Typography element. */\n  title: {},\n\n  /* Styles applied to the subheader Typography element. */\n  subheader: {}\n};\nvar CardHeader = /*#__PURE__*/React.forwardRef(function CardHeader(props, ref) {\n  var action = props.action,\n      avatar = props.avatar,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      subheaderProp = props.subheader,\n      subheaderTypographyProps = props.subheaderTypographyProps,\n      titleProp = props.title,\n      titleTypographyProps = props.titleTypographyProps,\n      other = _objectWithoutProperties(props, [\"action\", \"avatar\", \"classes\", \"className\", \"component\", \"disableTypography\", \"subheader\", \"subheaderTypographyProps\", \"title\", \"titleTypographyProps\"]);\n\n  var title = titleProp;\n\n  if (title != null && title.type !== Typography && !disableTypography) {\n    title = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'h5',\n      className: classes.title,\n      component: \"span\",\n      display: \"block\"\n    }, titleTypographyProps), title);\n  }\n\n  var subheader = subheaderProp;\n\n  if (subheader != null && subheader.type !== Typography && !disableTypography) {\n    subheader = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'body1',\n      className: classes.subheader,\n      color: \"textSecondary\",\n      component: \"span\",\n      display: \"block\"\n    }, subheaderTypographyProps), subheader);\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), avatar && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.avatar\n  }, avatar), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content\n  }, title, subheader), action && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.action\n  }, action));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardHeader'\n})(CardHeader);","import { CardMedia, CardMediaProps, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n    media: {\n        height: 0,\n        paddingTop: '75%', // 4:3\n    }\n}));\n\n/*\n        [theme.breakpoints.down('lg')]: {\n            paddingTop: '56.72%', // 16:9\n        },\n        [theme.breakpoints.down('xs')]: {\n            paddingTop: '18%',\n        },\n        [theme.breakpoints.down('md')]: { // 6:3\n            paddingTop: '50%',\n        }\n*/\n\nexport default function CardMediaWithSkeleton(props: CardMediaProps) {\n    const { image, src, className, ...others } = props;\n    const classes = useStyles();\n    const hasImage = !!image || !!src;\n    return hasImage ?\n        <CardMedia className={className || classes.media} {...others} image={image} src={src} />\n        : <></>;\n}","import React from \"react\";\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\";\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\";\nimport useDeviceImage from \"./devices/useDeviceImage\";\nimport CardMediaWithSkeleton from \"./ui/CardMediaWithSkeleton\";\n\nexport default function DeviceCardMedia(props: { device: JDDevice }) {\n    const { device } = props;\n    const specification = useDeviceSpecification(device)\n    const imageUrl = useDeviceImage(specification)\n\n    return <CardMediaWithSkeleton\n        image={imageUrl}\n        title={specification?.name}\n    />\n}","import { ControlReg } from \"../../jacdac-ts/src/jdom/constants\"\nimport { CardHeader, Chip, Typography } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport { Link } from \"gatsby-theme-material-ui\"\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\"\nimport React from \"react\"\nimport {\n    useRegisterUnpackedValue,\n} from \"../jacdac/useRegisterValue\"\nimport DeviceActions from \"./DeviceActions\"\nimport DeviceName from \"./devices/DeviceName\"\nimport DeviceCardMedia from \"./DeviceCardMedia\"\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\"\nimport { identifierToUrlPath } from \"../../jacdac-ts/src/jdom/spec\"\nimport DeviceAvatar from \"./devices/DeviceAvatar\"\n\nfunction DeviceFirmwareVersionChip(props: { device: JDDevice }) {\n    const { device } = props\n    const firmwareVersionRegister = device\n        ?.service(0)\n        ?.register(ControlReg.FirmwareVersion)\n    const [firmwareVersion] = useRegisterUnpackedValue<[string]>(firmwareVersionRegister)\n\n    return (\n        (firmwareVersion && <Chip size=\"small\" label={firmwareVersion} />) || (\n            <></>\n        )\n    )\n}\n\nfunction DeviceTemperatureChip(props: { device: JDDevice }) {\n    const { device } = props\n    const tempRegister = device?.service(0)?.register(ControlReg.McuTemperature)\n    const [temperature] = useRegisterUnpackedValue<[number]>(tempRegister)\n    return (\n        (temperature !== undefined && (\n            <Chip size=\"small\" label={`${temperature}°`} />\n        )) || <></>\n    )\n}\n\nexport default function DeviceCardHeader(props: {\n    device: JDDevice\n    showAvatar?: boolean\n    showDeviceId?: boolean\n    showFirmware?: boolean\n    showTemperature?: boolean\n    showMedia?: boolean\n}) {\n    const {\n        device,\n        showFirmware,\n        showTemperature,\n        showMedia,\n        showDeviceId,\n        showAvatar,\n    } = props\n    const specification = useDeviceSpecification(device)\n\n    return (\n        <>\n            {showMedia && <DeviceCardMedia device={device} />}\n            <CardHeader\n                avatar={showAvatar && <DeviceAvatar device={device} />}\n                action={<DeviceActions device={device} showReset={true} />}\n                title={\n                    <Link\n                        color=\"textPrimary\"\n                        to={`/devices/${\n                            identifierToUrlPath(specification?.id) || \"\"\n                        }`}\n                    >\n                        <DeviceName device={device} />\n                    </Link>\n                }\n                subheader={\n                    <>\n                        <Typography variant=\"caption\" gutterBottom>\n                            {[\n                                specification?.name,\n                                showDeviceId && device.deviceId,\n                            ]\n                                .filter(s => !!s)\n                                .join(\", \")}\n                        </Typography>\n                        {showFirmware && (\n                            <DeviceFirmwareVersionChip device={device} />\n                        )}\n                        {showTemperature && (\n                            <DeviceTemperatureChip device={device} />\n                        )}\n                    </>\n                }\n            />\n        </>\n    )\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { chainPropTypes } from '@material-ui/utils';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'block',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n\n  /* Styles applied to the root element if `component=\"video, audio, picture, iframe, or img\"`. */\n  media: {\n    width: '100%'\n  },\n\n  /* Styles applied to the root element if `component=\"picture or img\"`. */\n  img: {\n    // ⚠️ object-fit is not supported by IE 11.\n    objectFit: 'cover'\n  }\n};\nvar MEDIA_COMPONENTS = ['video', 'audio', 'picture', 'iframe', 'img'];\nvar CardMedia = /*#__PURE__*/React.forwardRef(function CardMedia(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      image = props.image,\n      src = props.src,\n      style = props.style,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"image\", \"src\", \"style\"]);\n\n  var isMediaComponent = MEDIA_COMPONENTS.indexOf(Component) !== -1;\n  var composedStyle = !isMediaComponent && image ? _extends({\n    backgroundImage: \"url(\\\"\".concat(image, \"\\\")\")\n  }, style) : style;\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, isMediaComponent && classes.media, \"picture img\".indexOf(Component) !== -1 && classes.img),\n    ref: ref,\n    style: composedStyle,\n    src: isMediaComponent ? image || src : undefined\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardMedia'\n})(CardMedia);","import { ControlReg } from \"../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\";\nimport { deviceSpecificationFromFirmwareIdentifier } from \"../../jacdac-ts/src/jdom/spec\";\nimport { useRegisterUnpackedValue } from \"./useRegisterValue\";\n\nexport default function useDeviceSpecification(device: JDDevice) {\n    const firmwareIdentifierRegister = device?.service(0)?.register(ControlReg.FirmwareIdentifier);\n    const [firmwareIdentifier] = useRegisterUnpackedValue<[number]>(firmwareIdentifierRegister);\n    const specification = deviceSpecificationFromFirmwareIdentifier(firmwareIdentifier);\n    return specification;\n}\n","import { withPrefix } from \"gatsby-link\";\nimport { identifierToUrlPath } from \"../../../jacdac-ts/src/jdom/spec\";\n\nexport default function useDeviceImage(specification: jdspec.DeviceSpec, suffix?: string) {\n    return specification && withPrefix(`images/devices/${identifierToUrlPath(specification.id)}${suffix ? `.${suffix}` : ''}.jpg`);\n}\n","import { useEffect, useState } from \"react\"\nimport { REPORT_UPDATE } from \"../../jacdac-ts/src/jdom/constants\"\nimport { PackedValues } from \"../../jacdac-ts/src/jdom/pack\"\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\"\nexport interface RegisterOptions {\n    // Indicates if the HTML element is visible in view. If not, updates may be slowed or stopped.\n    visible?: boolean\n}\n\nexport function useRegisterHumanValue(\n    register: JDRegister,\n    options?: RegisterOptions\n): string {\n    const [value, setValue] = useState<string>(register?.humanValue)\n    const { visible } = options || { visible: true }\n    // update value\n    useEffect(\n        () =>\n            visible &&\n            register?.subscribe(REPORT_UPDATE, () => {\n                setValue(register?.humanValue)\n            }),\n        [register, visible]\n    )\n    return value\n}\n\nexport function useRegisterUnpackedValue<T extends PackedValues>(\n    register: JDRegister,\n    options?: RegisterOptions\n): T {\n    const [value, setValue] = useState<T>(register?.unpackedValue as T)\n    const { visible } = options || { visible: true }\n    useEffect(\n        () =>\n            visible &&\n            register?.subscribe(REPORT_UPDATE, () => {\n                setValue(register?.unpackedValue as T)\n            }),\n        [register, visible]\n    )\n    return value || ([] as T)\n}\n\nexport function useRegisterBoolValue(\n    register: JDRegister,\n    options?: RegisterOptions\n): boolean {\n    const [value, setValue] = useState<boolean>(register?.boolValue)\n    const { visible } = options || { visible: true }\n    // update value\n    useEffect(\n        () =>\n            visible &&\n            register?.subscribe(REPORT_UPDATE, () => {\n                setValue(register?.boolValue)\n            }),\n        [register, visible]\n    )\n    return value\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  },\n\n  /* Styles applied to the root element if `disableSpacing={false}`. */\n  spacing: {\n    '& > :not(:first-child)': {\n      marginLeft: 8\n    }\n  }\n};\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(props, ref) {\n  var _props$disableSpacing = props.disableSpacing,\n      disableSpacing = _props$disableSpacing === void 0 ? false : _props$disableSpacing,\n      classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"disableSpacing\", \"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, !disableSpacing && classes.spacing),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardActions'\n})(CardActions);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  }\n};\nvar CardContent = /*#__PURE__*/React.forwardRef(function CardContent(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardContent'\n})(CardContent);","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n}), 'Person');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport Person from '../internal/svg-icons/Person';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexShrink: 0,\n      width: 40,\n      height: 40,\n      fontFamily: theme.typography.fontFamily,\n      fontSize: theme.typography.pxToRem(20),\n      lineHeight: 1,\n      borderRadius: '50%',\n      overflow: 'hidden',\n      userSelect: 'none'\n    },\n\n    /* Styles applied to the root element if not `src` or `srcSet`. */\n    colorDefault: {\n      color: theme.palette.background.default,\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[600]\n    },\n\n    /* Styles applied to the root element if `variant=\"circle\"`. */\n    circle: {},\n\n    /* Styles applied to the root element if `variant=\"circular\"`. */\n    circular: {},\n\n    /* Styles applied to the root element if `variant=\"rounded\"`. */\n    rounded: {\n      borderRadius: theme.shape.borderRadius\n    },\n\n    /* Styles applied to the root element if `variant=\"square\"`. */\n    square: {\n      borderRadius: 0\n    },\n\n    /* Styles applied to the img element if either `src` or `srcSet` is defined. */\n    img: {\n      width: '100%',\n      height: '100%',\n      textAlign: 'center',\n      // Handle non-square image. The property isn't supported by IE 11.\n      objectFit: 'cover',\n      // Hide alt text.\n      color: 'transparent',\n      // Hide the image broken icon, only works on Chrome.\n      textIndent: 10000\n    },\n\n    /* Styles applied to the fallback icon */\n    fallback: {\n      width: '75%',\n      height: '75%'\n    }\n  };\n};\n\nfunction useLoaded(_ref) {\n  var src = _ref.src,\n      srcSet = _ref.srcSet;\n\n  var _React$useState = React.useState(false),\n      loaded = _React$useState[0],\n      setLoaded = _React$useState[1];\n\n  React.useEffect(function () {\n    if (!src && !srcSet) {\n      return undefined;\n    }\n\n    setLoaded(false);\n    var active = true;\n    var image = new Image();\n    image.src = src;\n    image.srcSet = srcSet;\n\n    image.onload = function () {\n      if (!active) {\n        return;\n      }\n\n      setLoaded('loaded');\n    };\n\n    image.onerror = function () {\n      if (!active) {\n        return;\n      }\n\n      setLoaded('error');\n    };\n\n    return function () {\n      active = false;\n    };\n  }, [src, srcSet]);\n  return loaded;\n}\n\nvar Avatar = /*#__PURE__*/React.forwardRef(function Avatar(props, ref) {\n  var alt = props.alt,\n      childrenProp = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      imgProps = props.imgProps,\n      sizes = props.sizes,\n      src = props.src,\n      srcSet = props.srcSet,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'circle' : _props$variant,\n      other = _objectWithoutProperties(props, [\"alt\", \"children\", \"classes\", \"className\", \"component\", \"imgProps\", \"sizes\", \"src\", \"srcSet\", \"variant\"]);\n\n  var children = null; // Use a hook instead of onError on the img element to support server-side rendering.\n\n  var loaded = useLoaded({\n    src: src,\n    srcSet: srcSet\n  });\n  var hasImg = src || srcSet;\n  var hasImgNotFailing = hasImg && loaded !== 'error';\n\n  if (hasImgNotFailing) {\n    children = /*#__PURE__*/React.createElement(\"img\", _extends({\n      alt: alt,\n      src: src,\n      srcSet: srcSet,\n      sizes: sizes,\n      className: classes.img\n    }, imgProps));\n  } else if (childrenProp != null) {\n    children = childrenProp;\n  } else if (hasImg && alt) {\n    children = alt[0];\n  } else {\n    children = /*#__PURE__*/React.createElement(Person, {\n      className: classes.fallback\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, classes.system, classes[variant], className, !hasImgNotFailing && classes.colorDefault),\n    ref: ref\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAvatar'\n})(Avatar);","import { JDDevice } from \"../../../jacdac-ts/src/jdom/device\"\n\nconst statusHue = 32\nconst statusSaturation = 255\n\ntype LedAnimationData = [number, number[][]]\n\n//Every 524ms it changes from 5.9% and 1.6% (i.e. 1 sec duty cycle)\nconst bootloaderAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 96, 524 / 8],\n        [statusHue, statusSaturation, 96, 0.1],\n        [statusHue, statusSaturation, 72, 524 / 8],\n        [statusHue, statusSaturation, 72, 0.1],\n    ],\n]\n// 50ms every 150ms (50 on, 100 off) seven times (i.e. for 1 second)\nconst identifyAnimation: LedAnimationData = [\n    7,\n    [\n        [statusHue, statusSaturation, 255, 50 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, 0, 100 / 8],\n        [statusHue, statusSaturation, 0, 0.1],\n    ],\n]\n// lights at 100% for 270ms, then 5.9% for rest of 530ms,\n// then goes into application that turns it on full for 200ms\nconst startupAnimation: LedAnimationData = [\n    1,\n    [\n        [statusHue, statusSaturation, 255, 270 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, (6 / 100) * 0xff, 530 / 8],\n        [statusHue, statusSaturation, (6 / 100) * 0xff, 0.1],\n        [statusHue, statusSaturation, 255, 200 / 8],\n        [statusHue, statusSaturation, 255, 0.1],\n        [statusHue, statusSaturation, 0, 0.1],\n    ],\n]\n// Synchronized fast blink 50us every 500ms\nconst connectedAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 0, 500 / 8],\n        [statusHue, statusSaturation, 0, 0.1],\n        [statusHue, statusSaturation, 96, 24 / 8],\n        [statusHue, statusSaturation, 96, 0.1],\n        [statusHue, statusSaturation, 0, 0.1],\n    ],\n]\n//5ms every 250ms\nconst disconnectedAnimation: LedAnimationData = [\n    0,\n    [\n        [statusHue, statusSaturation, 128, 40 / 8],\n        [statusHue, statusSaturation, 128, 0.1],\n        [statusHue, statusSaturation, 16, 250 / 8],\n        [statusHue, statusSaturation, 16, 0.1],\n    ],\n]\n// fast blink 70ms on, 70ms off - 30 times (4.2 seconds) before a reboot\nconst panicFrames: LedAnimationData = [\n    30,\n    [\n        [statusHue, statusSaturation, 128, 70 / 8],\n        [statusHue, statusSaturation, 128, 0.1],\n        [statusHue, statusSaturation, 16, 70 / 8],\n        [statusHue, statusSaturation, 16, 0.1],\n    ],\n]\n\nexport type LEDStatus =\n    | \"startup\"\n    | \"identify\"\n    | \"connected\"\n    | \"disconnected\"\n    | \"panic\"\n    | \"bootloader\"\n\nexport function statusAnimation(status: LEDStatus): LedAnimationData {\n    switch (status) {\n        case \"startup\":\n            return startupAnimation\n        case \"identify\":\n            return identifyAnimation\n        case \"connected\":\n            return connectedAnimation\n        case \"disconnected\":\n            return disconnectedAnimation\n        case \"panic\":\n            return panicFrames\n        case \"bootloader\":\n            return bootloaderAnimation\n        default:\n            return [0, []]\n    }\n}\n\nexport default function useDeviceStatusLightStyle(\n    device: JDDevice,\n    options?: LedAnimationProps\n) {\n    /*\n    const bootloader = useChange(device, d => d.hasService(SRV_BOOTLOADER))\n    const identifying = useChange(device, d => d?.identifying)\n    TODO\n    const registerAnimation = useRegisterUnpackedValue<LedAnimationData>(\n        register\n    ) || [0, []]\n\n    // pick animation step\n    const animation: LedAnimationData = identifying\n        ? identifyAnimation\n        : bootloader\n        ? bootloaderAnimation\n        : undefined\n    */\n\n    return {}\n}\n","import { Avatar, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\nimport { VIRTUAL_DEVICE_NODE_NAME } from \"../../../jacdac-ts/src/jdom/constants\";\nimport { JDDevice } from \"../../../jacdac-ts/src/jdom/device\";\nimport useDeviceSpecification from \"../../jacdac/useDeviceSpecification\";\nimport CmdButton from \"../CmdButton\";\nimport useServiceProvider from \"../hooks/useServiceProvider\";\nimport KindIcon from \"../KindIcon\"\nimport useDeviceStatusLightStyle from \"./useDeviceStatusLightStyle\";\nimport Helmet from \"react-helmet\"\nimport useDeviceName from \"./useDeviceName\";\nimport useDeviceImage from \"./useDeviceImage\";\nimport TransportIcon from \"../icons/TransportIcon\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    img: {\n      marginTop: \"58%\",\n    },\n    small: {\n      width: theme.spacing(3),\n      height: theme.spacing(3),\n    },\n    large: {\n      width: theme.spacing(7),\n      height: theme.spacing(7),\n    },\n  }),\n);\n\nexport default function DeviceAvatar(props: { device: JDDevice, size?: \"small\" | \"large\" }) {\n  const { device, size } = props;\n  const specification = useDeviceSpecification(device);\n  const imageUrl = useDeviceImage(specification, \"avatar\")\n  const name = useDeviceName(device);\n  const classes = useStyles();\n  const sizeClassName = size === \"small\" ? classes.small : size === \"large\" ? classes.large : undefined;\n  const host = useServiceProvider(device);\n  const source = device.source;\n  const {\n    className: statusLEDClassName,\n    helmetStyle: statusLEDHelmetStyle } = useDeviceStatusLightStyle(device)\n\n  const handleIdentify = async () => await device.identify();\n  return <>\n    {statusLEDHelmetStyle && <Helmet><style>{statusLEDHelmetStyle}</style></Helmet>}\n    <CmdButton\n      trackName=\"device.identify\"\n      size=\"small\"\n      title={`identify ${host ? \"simulator\" : \"device\"} ${name}`}\n      onClick={handleIdentify}\n      className={statusLEDClassName}\n      icon={host ? <KindIcon kind={VIRTUAL_DEVICE_NODE_NAME} /> : !imageUrl ? <TransportIcon type={source} /> : <Avatar\n        className={sizeClassName}\n        alt={specification?.name || \"Image of the device\"}\n        src={imageUrl}\n        classes={{\n          img: classes.img\n        }}\n      />}\n    />\n  </>\n}"],"sourceRoot":""}