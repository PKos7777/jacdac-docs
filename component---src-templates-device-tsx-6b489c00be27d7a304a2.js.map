{"version":3,"sources":["webpack:///./node_modules/@material-ui/core/esm/Card/Card.js","webpack:///./node_modules/@material-ui/core/esm/CardHeader/CardHeader.js","webpack:///./src/components/ui/Snippet.tsx","webpack:///./node_modules/@material-ui/icons/Fingerprint.js","webpack:///./src/components/useGridBreakpoints.ts","webpack:///./src/components/IDChip.tsx","webpack:///./src/components/ServiceSpecificationStatusAlert.tsx","webpack:///./src/components/ServiceSpecificationCard.tsx","webpack:///./src/components/devices/useDeviceImage.ts","webpack:///./src/components/DeviceDTDLSnippet.tsx","webpack:///./src/components/DeviceSpecificationSource.tsx","webpack:///./src/components/DeviceSpecification.tsx","webpack:///./src/templates/device.tsx","webpack:///./node_modules/@material-ui/core/esm/CardContent/CardContent.js","webpack:///./jacdac-ts/src/azure-iot/dtdl.ts"],"names":["Snippet","props","value","mode","download","url","caption","v","className","useGridBreakpoints","itemCount","useContext","AppContext","drawerType","undefined","xs","sm","md","lg","xl","DrawerType","None","IDChip","id","filter","PacketsContext","packetFilter","setPacketFilter","setFilter","setDrawerType","ids","toString","filtered","indexOf","handleFilterClick","replace","trim","Packets","icon","title","StatusAlert","specification","status","ServiceSpecificationStatusAlert","React","memo","ServiceSpecificationCard","JacdacContext","bus","serviceClass","showReleaseStatus","showServiceClass","spec","serviceSpecificationFromClassIdentifier","sc","classIdentifier","srv","shortId","hostDefinition","hostDefinitionFromServiceClass","handleSimulatorClick","addHost","services","navigate","name","VIRTUAL_DEVICE_NODE_NAME","notes","split","useDeviceImage","suffix","withPrefix","identifierToUrlPath","DeviceDTDLSnippet","dev","inlineServices","dtdl","useMemo","JSON","stringify","deviceSpecificationToDTDL","useStyles","makeStyles","theme","createStyles","root","flexGrow","backgroundColor","palette","background","paper","marginBottom","spacing","pre","margin","padding","whiteSpec","DeviceSpecificationSource","deviceSpecification","showSpecification","showDTDL","showJSON","classes","useState","tab","setTab","handleTabChange","event","newValue","index","n","map","i","a11yProps","DeviceSpecification","device","showSource","gridBreakpoints","imageUrl","link","escapeDeviceIdentifier","company","description","repo","firmwares","length","firmware","Page","pageContext","node","deviceSpecificationFromIdentifier","DTDL_REFERENCE_URL","DTDL_NAME","DTDL_CONTEXT","toDTMI","segments","version","seg","join","toLowerCase","toUnit","pkt","fields","field","unit","units","semantic","rad","m","m2","s","ms","us","K","C","F","g","mA","uA","A","mV","uV","V","enumDTDI","en","enumSchema","valueSchema","enumValues","Object","keys","members","k","escapeName","displayName","enumValue","fieldType","type","isFloat","isSimpleType","test","shift","enums","objectSchema","schemas","arraySchema","schema","elementSchema","toSchema","supportsArray","startRepeats","repeatIndex","findIndex","nonRepeat","slice","repeats","packetToDTDL","types","const","rw","ro","kind","writable","escapeDisplayName","serviceSpecificationToDTDL","serviceSpecificationDTMI","contents","packets","derived","internal","e","console","log","c","extends","serviceSpecificationFromName","hasEvents","find","hasEnums","push","concat","serviceSpecificationToComponent","deviceSpecificationDTMI","DTMIToRoute","dtmi","route","options","uniqueServices","uniqueMap","names","forEach","shortName","count"],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AACK;AACiB;AACvC;AACP;AACA;AACA;AACA;AACA;AACA,wBAAwB,gDAAgB;AACxC;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC,sBAAsB,mDAAmB,CAAC,sDAAK,EAAE,0FAAQ;AACzD,eAAe,4DAAI;AACnB;AACA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,OAAO,E;;;;;;;;AC5BR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AACsB;AACP;AAChC;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA,WAAW;;AAEX;AACA;AACA;AACA,8BAA8B,gDAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC;;AAEA,sCAAsC,2DAAU;AAChD,yBAAyB,mDAAmB,CAAC,2DAAU,EAAE,0FAAQ;AACjE;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA,8CAA8C,2DAAU;AACxD,6BAA6B,mDAAmB,CAAC,2DAAU,EAAE,0FAAQ;AACrE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,sBAAsB,mDAAmB,YAAY,0FAAQ;AAC7D,eAAe,4DAAI;AACnB;AACA,GAAG,iCAAiC,mDAAmB;AACvD;AACA,GAAG,wBAAwB,mDAAmB;AAC9C;AACA,GAAG,4CAA4C,mDAAmB;AAClE;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,aAAa,E;;;;;;;;AC3Fd;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEe,SAASA,OAAT,CAAiBC,KAAjB,EAMZ;AAAA,MACSC,KADT,GACiDD,KADjD,CACSC,KADT;AAAA,MACgBC,IADhB,GACiDF,KADjD,CACgBE,IADhB;AAAA,MACsBC,QADtB,GACiDH,KADjD,CACsBG,QADtB;AAAA,MACgCC,GADhC,GACiDJ,KADjD,CACgCI,GADhC;AAAA,MACqCC,OADrC,GACiDL,KADjD,CACqCK,OADrC;AAEC,MAAMC,CAAS,GAAG,OAAOL,KAAP,KAAiB,UAAjB,GAA8BA,KAAK,EAAnC,GAAwCA,KAA1D;AACA,MAAMM,SAAS,GAAGL,IAAI,mBAAgBA,IAAI,KAAK,KAAT,GAAiB,IAAjB,GAAwBA,IAAxC,CAAtB;AACA,sBAAO,qIACH,2DAAC,kDAAD;AAAW,aAAS,EAAEK,SAAtB;AAAiC,gBAAY,EAAEJ,QAA/C;AAAyD,gBAAY,EAAEA,QAAQ,IAAIG,CAAnF;AAAsF,OAAG,EAAEF;AAA3F,KAAiGE,CAAjG,CADG,EAEFD,OAAO,iBAAI,2DAAC,iEAAD;AAAY,WAAO,EAAC;AAApB,KAA+BA,OAA/B,CAFT,CAAP;AAIH,C;;;;;;;;ACnBY;;AAEb,6BAA6B,mBAAO,CAAC,MAA8C;;AAEnF,8BAA8B,mBAAO,CAAC,MAA+C;;AAErF;AACA;AACA,CAAC;AACD;;AAEA,oCAAoC,mBAAO,CAAC,MAAO;;AAEnD,4CAA4C,mBAAO,CAAC,MAAuB;;AAE3E;AACA;AACA,CAAC;;AAED,2B;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAA;AACA;AAUe,SAASG,kBAAT,CAA4BC,SAA5B,EAAiE;AAAA,oBACrDC,wDAAU,CAACC,2DAAD,CAD2C;AAAA,MACpEC,UADoE,eACpEA,UADoE;;AAG5E,MAAIH,SAAS,KAAKI,SAAlB,EAA6B;AACzB,YAAQJ,SAAR;AACI,WAAK,CAAL;AACA,WAAK,CAAL;AAAQ,eAAO;AAAEK,YAAE,EAAE,EAAN;AAAUC,YAAE,EAAE,CAAd;AAAiBC,YAAE,EAAE,CAArB;AAAwBC,YAAE,EAAE,CAA5B;AAA+BC,YAAE,EAAE;AAAnC,SAAP;;AACR,WAAK,CAAL;AAAQ,eAAO;AAAEJ,YAAE,EAAE,EAAN;AAAUC,YAAE,EAAE,CAAd;AAAiBC,YAAE,EAAE,CAArB;AAAwBC,YAAE,EAAE,CAA5B;AAA+BC,YAAE,EAAE;AAAnC,SAAP;AAHZ;AAKH;;AAED,MAAIN,UAAU,IAAIO,8DAAU,CAACC,IAA7B,EACI,OAAO;AAAEN,MAAE,EAAE,EAAN;AAAUE,MAAE,EAAE,CAAd;AAAiBD,MAAE,EAAE,CAArB;AAAwBE,MAAE,EAAE,CAA5B;AAA+BC,MAAE,EAAE;AAAnC,GAAP,CADJ,KAEK,OAAO;AACRJ,MAAE,EAAE,EADI;AAERC,MAAE,EAAE,CAFI;AAGRC,MAAE,EAAE,CAHI;AAIRC,MAAE,EAAE,CAJI;AAKRC,MAAE,EAAE;AALI,GAAP;AAOR,C;;;;;;;;AChCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CACA;;AACA;AACA;AACA;AACA;AACA;AAEe,SAASG,MAAT,CAAgBrB,KAAhB,EAAqF;AAAA,MACxFsB,EADwF,GAC9DtB,KAD8D,CACxFsB,EADwF;AAAA,MACpFf,SADoF,GAC9DP,KAD8D,CACpFO,SADoF;AAAA,MACzEgB,MADyE,GAC9DvB,KAD8D,CACzEuB,MADyE;;AAAA,oBAEnCb,wDAAU,CAACc,+DAAD,CAFyB;AAAA,MAEhFC,YAFgF,eAExFF,MAFwF;AAAA,MAEvDG,eAFuD,eAElEC,SAFkE;;AAAA,qBAGtEjB,wDAAU,CAACC,2DAAD,CAH4D;AAAA,MAGxFiB,aAHwF,gBAGxFA,aAHwF;;AAKhG,MAAMC,GAAG,GAAG,OAAOP,EAAP,KAAc,QAAd,GAAyBA,EAAzB,WAAmCA,EAAE,KAAKT,SAAP,GAAoBS,EAAD,CAAeQ,QAAf,CAAwB,EAAxB,CAAnB,GAAiD,KAApF,CAAZ;AACA,MAAMC,QAAQ,GAAGN,YAAY,IAAIA,YAAY,CAACO,OAAb,CAAqBT,MAArB,IAA+B,CAAC,CAAjE;;AACA,MAAMU,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAAA;;AAC5B,QAAIF,QAAJ,EACIL,eAAe,CAACD,YAAD,aAACA,YAAD,gDAACA,YAAY,CAAES,OAAd,CAAsBX,MAAtB,EAA8B,EAA9B,CAAD,0DAAC,sBAAmCY,IAAnC,EAAD,CAAf,CADJ,KAGIT,eAAe,CAAC,CAAAD,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAEU,IAAd,MAAuB,GAAvB,GAA6BZ,MAA9B,CAAf;AACJK,iBAAa,CAACT,8DAAU,CAACiB,OAAZ,CAAb;AACH,GAND;;AAOA,MAAMC,IAAI,gBAAG,2DAAC,qEAAD,OAAb;AACA,MAAMC,KAAK,GAAGP,QAAQ,sBAAoBR,MAApB,mBAA6CA,MAAnE;AACA,MAAIA,MAAJ,EACI,oBAAO,2DAAC,2DAAD;AAAS,SAAK,EAAEQ,QAAQ,sBAAoBR,MAApB,mBAA6CA;AAArE,kBACH,sFACI,2DAAC,iEAAD;AAAM,aAAS,EAAEhB,SAAjB;AAA4B,QAAI,EAAC,OAAjC;AAAyC,QAAI,eACzC,2DAAC,iEAAD;AAAY,oBAAY+B,KAAxB;AAA+B,aAAO,EAAEL;AAAxC,OACKI,IADL,CADJ;AAIE,SAAK,EAAER;AAJT,IADJ,CADG,CAAP,CADJ,KAWI,oBAAO,2DAAC,iEAAD;AAAM,kBAAYS,KAAlB;AAAyB,aAAS,EAAE/B,SAApC;AAA+C,QAAI,EAAC,OAApD;AAA4D,QAAI,EAAE8B,IAAlE;AAAwE,SAAK,kBAAgBR,GAA7F;AAAoG,SAAK,EAAEA;AAA3G,IAAP;AACP,C;;;;;;;;ACpCD;AAAA;AAAA;AAAA;AAAA;AACA;AAEO,SAASU,WAAT,CAAqBvC,KAArB,EAAmE;AAAA,MAC9DwC,aAD8D,GAC5CxC,KAD4C,CAC9DwC,aAD8D;;AAGtE,UAAQA,aAAR,aAAQA,aAAR,uBAAQA,aAAa,CAAEC,MAAvB;AACI,SAAK,YAAL;AAAmB,0BAAO,2DAAC,yDAAD;AAAO,gBAAQ,EAAC;AAAhB,sBAAP;;AACnB,SAAK,cAAL;AAAqB,0BAAO,2DAAC,yDAAD;AAAO,gBAAQ,EAAC;AAAhB,wBAAP;;AACrB;AAAS,aAAO,IAAP;AAHb;AAKH;AAED,IAAMC,+BAA+B,gBAAGC,4CAAK,CAACC,IAAN,CAAWL,WAAX,CAAxC;AAEeG,wFAAf,E;;;;;;;;ACfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe,SAASG,wBAAT,CAAkC7C,KAAlC,EAKZ;AAAA;;AAAA,oBACiBU,wDAAU,CAAqBoC,gEAArB,CAD3B;AAAA,MACSC,GADT,eACSA,GADT;;AAAA,MAESC,YAFT,GAE8EhD,KAF9E,CAESgD,YAFT;AAAA,MAEuBR,aAFvB,GAE8ExC,KAF9E,CAEuBwC,aAFvB;AAAA,MAEsCS,iBAFtC,GAE8EjD,KAF9E,CAEsCiD,iBAFtC;AAAA,MAEyDC,gBAFzD,GAE8ElD,KAF9E,CAEyDkD,gBAFzD;AAGC,MAAIC,IAAI,GAAGX,aAAX;AACA,MAAI,CAACW,IAAD,IAASH,YAAY,KAAKnC,SAA9B,EACIsC,IAAI,GAAGC,gHAAuC,CAACJ,YAAD,CAA9C;AACJ,MAAMK,EAAE,GAAG,UAAAF,IAAI,UAAJ,sCAAMG,eAAN,KAAyBN,YAApC;AACA,MAAMO,GAAG,GAAG,WAAAJ,IAAI,UAAJ,wCAAMK,OAAN,MAAiBH,EAAjB,aAAiBA,EAAjB,uBAAiBA,EAAE,CAAEvB,QAAJ,CAAa,EAAb,CAAjB,CAAZ;AACA,MAAM2B,cAAc,GAAGC,0GAA8B,CAACL,EAAD,CAArD;;AACA,MAAMM,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AAC/BC,uFAAO,CAACb,GAAD,EAAMU,cAAc,CAACI,QAAf,EAAN,CAAP;AACAC,4DAAQ,CAAC,aAAD,CAAR;AACH,GAHD;;AAKA,sBAAO,2DAAC,iEAAD,qBACH,2DAAC,iEAAD;AACI,SAAK,EAAE,WAAAX,IAAI,UAAJ,wCAAMY,IAAN,KAAc,KADzB;AAEI,aAAS,EAAEb,gBAAgB,IAAIK,GAApB,iBAA2B,2DAAC,uDAAD;AAAQ,QAAE,EAAEF,EAAZ;AAAgB,YAAM,WAASE;AAA/B,MAF1C;AAGI,UAAM,eAAE,wHACHE,cAAc,iBAAI,2DAAC,iEAAD;AAAM,UAAI,EAAC,OAAX;AACf,aAAO,EAAEE,oBADM;AAEf,YAAM,eAAE,2DAAC,0DAAD;AAAU,YAAI,EAAEK,gGAAwBA;AAAxC,QAFO;AAGf,oBAAW,oCAHI;AAIf,WAAK,EAAC;AAJS,MADf;AAHZ,IADG,eAaH,2DAAC,iEAAD,QACK,WAAAb,IAAI,UAAJ,wCAAMc,KAAN,CAAY,OAAZ,mBACG,2DAAC,iEAAD;AAAY,WAAO,EAAC,OAApB;AAA4B,aAAS,EAAC;AAAtC,kBACI,2DAAC,6DAAD;AAAU,UAAM,EAAE,WAAAd,IAAI,UAAJ,wCAAMc,KAAN,CAAY,OAAZ,EAAqBC,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,EAAmC,CAAnC,KAAwC;AAA1D,IADJ,CAFR,EAMKjB,iBAAiB,iBAAI,2DAAC,iFAAD;AAAiC,iBAAa,EAAEE;AAAhD,IAN1B,CAbG,EAqBFA,IAAI,iBAAI,2DAAC,iEAAD,qBACL,2DAAC,+DAAD;AAAQ,WAAO,EAAC,UAAhB;AAA2B,oCAA4BA,IAAI,CAACK,OAAjC,UAA3B;AAA4E,MAAE,iBAAeL,IAAI,CAACK,OAApB;AAA9E,eADK,CArBN,CAAP;AAyBH,C;;;;;;;;ACzDD;AAAA;AAAA;AAAA;AAAA;AACA;AAEe,SAASW,cAAT,CAAwB3B,aAAxB,EAA0D4B,MAA1D,EAA2E;AACtF,SAAO5B,aAAa,IAAI6B,8DAAU,qBAAmBC,4FAAmB,CAAC9B,aAAa,CAAClB,EAAf,CAAtC,IAA2D8C,MAAM,SAAOA,MAAP,GAAkB,EAAnF,WAAlC;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLD;AACA;AACA;AACA;AAEO,SAASG,iBAAT,CAA2BvE,KAA3B,EAAwF;AAAA,MACnFwE,GADmF,GAC3DxE,KAD2D,CACnFwE,GADmF;AAAA,MAC9EC,cAD8E,GAC3DzE,KAD2D,CAC9EyE,cAD8E;AAG3F,MAAMC,IAAI,GAAGC,wBAAO,CAChB;AAAA,WAAMC,IAAI,CAACC,SAAL,CAAeC,2DAAyB,CAACN,GAAD,EAAM;AAAEC,oBAAc,EAAdA;AAAF,KAAN,CAAxC,EAAmE,IAAnE,EAAyE,CAAzE,CAAN;AAAA,GADgB,EAEhB,CAACD,GAAD,CAFgB,CAApB;AAIA,sBAAO,8BAAC,0BAAD;AAAS,SAAK,EAAEE,IAAhB;AAAsB,QAAI,EAAC,MAA3B;AAAkC,YAAQ,EAAKF,GAAG,CAACT,IAAT,UAA1C;AACH,WAAO,eAAE,2EAAE,8BAAC,gCAAD;AAAM,QAAE,EAAC;AAAT,cAAF;AADN,IAAP;AAEH,C;;CCbD;;CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMgB,SAAS,GAAGC,qCAAU,CAAC,UAACC,KAAD;AAAA,SAAkBC,uCAAY,CAAC;AACxDC,QAAI,EAAE;AACFC,cAAQ,EAAE,CADR;AAEFC,qBAAe,EAAEJ,KAAK,CAACK,OAAN,CAAcC,UAAd,CAAyBC,KAFxC;AAGFC,kBAAY,EAAER,KAAK,CAACS,OAAN,CAAc,CAAd;AAHZ,KADkD;AAMxDC,OAAG,EAAE;AACDC,YAAM,EAAE,GADP;AAEDC,aAAO,EAAE,GAFR;AAGDR,qBAAe,EAAE,aAHhB;AAIDS,eAAS,EAAE;AAJV;AANmD,GAAD,CAA9B;AAAA,CAAD,CAA5B;AAce,SAASC,yBAAT,CAAmC/F,KAAnC,EAKZ;AAAA,MACSgG,mBADT,GACwEhG,KADxE,CACSgG,mBADT;AAAA,MAC8BC,iBAD9B,GACwEjG,KADxE,CAC8BiG,iBAD9B;AAAA,MACiDC,QADjD,GACwElG,KADxE,CACiDkG,QADjD;AAAA,MAC2DC,QAD3D,GACwEnG,KADxE,CAC2DmG,QAD3D;AAEC,MAAMC,OAAO,GAAGrB,SAAS,EAAzB;;AAFD,kBAGuBsB,yBAAQ,CAAC,CAAD,CAH/B;AAAA,MAGQC,GAHR;AAAA,MAGaC,MAHb;;AAIC,MAAMpD,IAAI,GAAG6C,mBAAb;;AAEA,MAAMQ,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAoCC,QAApC,EAAyD;AAC7EH,UAAM,CAACG,QAAD,CAAN;AACH,GAFD;;AAIA,MAAIC,KAAK,GAAG,CAAZ;AACA,sBACI;AAAK,aAAS,EAAEP,OAAO,CAACjB;AAAxB,kBACI,8BAAC,wBAAD;AAAO,UAAM;AAAb,kBACI,8BAAC,uBAAD;AAAM,SAAK,EAAEmB,GAAb;AAAkB,YAAQ,EAAEE,eAA5B;AAA6C,kBAAW;AAAxD,KACK,CACGP,iBAAiB,IAAI,eADxB,EAEGE,QAAQ,IAAI,MAFf,EAGGD,QAAQ,IAAI,aAHf,EAIC3E,MAJD,CAIQ,UAAAqF,CAAC;AAAA,WAAI,CAAC,CAACA,CAAN;AAAA,GAJT,EAKIC,GALJ,CAKQ,UAACD,CAAD,EAAIE,CAAJ;AAAA,wBAAU,8BAAC,sBAAD;AAAK,SAAG,EAAEF,CAAV;AAAa,WAAK,EAAEA;AAApB,OAA2BG,qCAAS,CAACD,CAAD,CAApC,EAAV;AAAA,GALR,CADL,CADJ,EASKb,iBAAiB,iBAAI,8BAAC,2BAAD;AAAU,OAAG,EAAC,MAAd;AAAqB,SAAK,EAAEK,GAA5B;AAAiC,SAAK,EAAEK,KAAK;AAA7C,kBAClB,8BAAC,mBAAD;AAAqB,UAAM,EAAExD;AAA7B,IADkB,CAT1B,EAYKgD,QAAQ,iBAAI,8BAAC,2BAAD;AAAU,OAAG,YAAb;AAA2B,SAAK,EAAEG,GAAlC;AAAuC,SAAK,EAAEK,KAAK;AAAnD,kBACT,8BAAC,0BAAD;AAAS,SAAK,EAAE/B,IAAI,CAACC,SAAL,CAAe1B,IAAf,EAAqB,IAArB,EAA2B,CAA3B,CAAhB;AAA+C,QAAI,EAAE;AAArD,IADS,CAZjB,EAeK+C,QAAQ,iBAAI,8BAAC,2BAAD;AAAU,OAAG,EAAC,MAAd;AAAqB,SAAK,EAAEI,GAA5B;AAAiC,SAAK,EAAEK,KAAK;AAA7C,kBACT,8BAAC,iBAAD;AAAmB,OAAG,EAAEX;AAAxB,IADS,CAfjB,CADJ,CADJ;AAuBH,C;;;;;;;;;;;AChED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe,SAASgB,mBAAT,CAA6BhH,KAA7B,EAAwF;AAAA,MAC3FiH,MAD2F,GACpEjH,KADoE,CAC3FiH,MAD2F;AAAA,MACnFC,UADmF,GACpElH,KADoE,CACnFkH,UADmF;AAEnG,MAAMC,eAAe,GAAG3G,6CAAkB,EAA1C;AACA,MAAM4G,QAAQ,GAAGjD,yCAAc,CAAC8C,MAAD,CAA/B;AAEA,sBAAO,2EACH;AAAI,OAAG,EAAC;AAAR,kBACI,8BAAC,gCAAD;AAAM,MAAE,EAAEA,MAAM,CAACI;AAAjB,KAAwBJ,MAAM,CAAClD,IAA/B,CADJ,CADG,eAIH,8BAAC,6BAAD;AAAY,WAAO,EAAC;AAApB,yBAAmC,8BAAC,gCAAD;AAAM,MAAE,gBAAcO,gDAAmB,CAACgD,gDAAsB,CAACL,MAAM,CAACM,OAAR,CAAvB;AAAzC,KAAsFN,MAAM,CAACM,OAA7F,CAAnC,CAJG,eAKF;AAAK,OAAG,EAAC,qBAAT;AAA+B,OAAG,EAAEH,QAApC;AAA8C,WAAO,EAAC;AAAtD,IALE,EAMFH,MAAM,CAACO,WAAP,iBAAsB,8BAAC,2BAAD;AAAU,UAAM,EAAEP,MAAM,CAACO;AAAzB,IANpB,EAOFP,MAAM,CAACQ,IAAP,iBAAe,8BAAC,+BAAD;AAAc,QAAI,EAAER,MAAM,CAACQ;AAA3B,IAPb,EAQF,CAAC,CAACR,MAAM,CAACS,SAAP,CAAiBC,MAAnB,iBAA6B,2EAAE,iEAAF,eAC1B,0CACKV,MAAM,CAACS,SAAP,CAAiBb,GAAjB,CAAqB,UAAAe,QAAQ;AAAA,wBAAI;AAAI,SAAG,EAAEA;AAAT,oBAAmB,8BAAC,yBAAD;AAAQ,QAAE,EAAEA,QAAZ;AAAsB,YAAM,YAAUA,QAAQ,CAAC9F,QAAT,CAAkB,EAAlB;AAAtC,MAAnB,CAAJ;AAAA,GAA7B,CADL,CAD0B,CAR3B,eAYH,qDAZG,eAaH,8BAAC,uBAAD;AAAM,aAAS,MAAf;AAAgB,WAAO,EAAE;AAAzB,KACKmF,MAAM,CAACpD,QAAP,CAAgBgD,GAAhB,CAAoB,UAAAxD,EAAE;AAAA,WAAID,oEAAuC,CAACC,EAAD,CAA3C;AAAA,GAAtB,EACIwD,GADJ,CACQ,UAAA1D,IAAI;AAAA,wBAAI,8BAAC,uBAAD;AAAM,UAAI,MAAV;AAAW,SAAG,EAAEA,IAAI,CAACK;AAArB,OAAkC2D,eAAlC,gBACT,8BAAC,2CAAD;AAA0B,mBAAa,EAAEhE;AAAzC,MADS,CAAJ;AAAA,GADZ,CADL,CAbG,EAmBF+D,UAAU,iBAAI,2EACX,0DADW,eAEX,8BAAC,yBAAD;AAA2B,uBAAmB,EAAED,MAAhD;AACI,YAAQ,EAAE,IADd;AACoB,YAAQ,EAAE;AAD9B,IAFW,CAnBZ,CAAP;AAyBH,C;;AC3CD;AACA;AACA;AAEe,SAASY,IAAT,CAAc7H,KAAd,EAAgE;AAC3E,MAAMsB,EAAE,GAAGtB,KAAK,CAAC8H,WAAN,CAAkBC,IAAlB,CAAuBzG,EAAlC;AACA,MAAMkB,aAAa,GAAGwF,8DAAiC,CAAC1G,EAAD,CAAvD;AACA,sBAAO,8BAAC,mBAAD;AAAqB,UAAM,EAAEkB;AAA7B,IAAP;AACH,C;;;;;;;;ACRD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AACsB;AACvC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gDAAgB;AAC/C;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC,sBAAsB,mDAAmB,YAAY,0FAAQ;AAC7D,eAAe,4DAAI;AACnB;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,cAAc,E;;;;;;;;;;;;;;;;;;;;;;;AC7Bf;;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAEO,IAAMyF,kBAAkB,GAC3B,8EADG;AAEA,IAAMC,SAAS,GAAG,mCAAlB;AACA,IAAMC,YAAY,GAAG,qBAArB,C,CAEP;AACA;;AACA,SAASC,MAAT,CAAgBC,QAAhB,EAA+CC,OAA/C,EAAiE;AAC7D,SAAO,kBAAe,qGAAID,QAAJ,EACjBxB,GADiB,CACb,UAAA0B,GAAG;AAAA,WACJA,GAAG,KAAK1H,SAAR,GACM,KADN,GAEM,OAAO0H,GAAP,KAAe,QAAf,GACAA,GADA,SAEIA,GAAG,CAACzG,QAAJ,CAAa,EAAb,CALN;AAAA,GADU,EAQjB+E,GARiB,CAQb,UAAA0B,GAAG;AAAA,WAAIA,GAAG,CAACrG,OAAJ,CAAY,QAAZ,EAAsB,EAAtB,CAAJ;AAAA,GARU,EASjBsG,IATiB,CASZ,GATY,CAAf,UASWF,OAAO,KAAKzH,SAAZ,GAAwByH,OAAxB,GAAkC,CAT7C,GASiDG,WATjD,EAAP;AAUH;;AAED,SAASC,MAAT,CAAgBC,GAAhB,EAAwC;AACpC,MAAIA,GAAG,CAACC,MAAJ,CAAWjB,MAAX,KAAsB,CAA1B,EAA6B,OAAO9G,SAAP;AAC7B,MAAMgI,KAAK,GAAGF,GAAG,CAACC,MAAJ,CAAW,CAAX,CAAd;AACA,MAAI,CAACC,KAAK,CAACC,IAAX,EAAiB,OAAOjI,SAAP;AAEjB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEI,MAAMkI,KAAsD,GAAG;AAC3D,YAAQ;AACJC,cAAQ,EAAE,cADN;AAEJF,UAAI,EAAE;AAFF,KADmD;AAK3DG,OAAG,EAAE;AACDD,cAAQ,EAAE,OADT;AAEDF,UAAI,EAAE;AAFL,KALsD;AAS3D,aAAS;AACLE,cAAQ,EAAE,iBADL;AAELF,UAAI,EAAE;AAFD,KATkD;AAa3D,cAAU;AACNE,cAAQ,EAAE,qBADJ;AAENF,UAAI,EAAE;AAFA,KAbiD;AAiB3DI,KAAC,EAAE;AACCF,cAAQ,EAAE,QADX;AAECF,UAAI,EAAE;AAFP,KAjBwD;AAqB3DK,MAAE,EAAE;AACAH,cAAQ,EAAE,MADV;AAEAF,UAAI,EAAE;AAFN,KArBuD;AAyB3DM,KAAC,EAAE;AACCJ,cAAQ,EAAE,UADX;AAECF,UAAI,EAAE;AAFP,KAzBwD;AA6B3DO,MAAE,EAAE;AACAL,cAAQ,EAAE,UADV;AAEAF,UAAI,EAAE;AAFN,KA7BuD;AAiC3DQ,MAAE,EAAE;AACAN,cAAQ,EAAE,UADV;AAEAF,UAAI,EAAE;AAFN,KAjCuD;AAqC3DS,KAAC,EAAE;AACCP,cAAQ,EAAE,aADX;AAECF,UAAI,EAAE;AAFP,KArCwD;AAyC3DU,KAAC,EAAE;AACCR,cAAQ,EAAE,aADX;AAECF,UAAI,EAAE;AAFP,KAzCwD;AA6C3DW,KAAC,EAAE;AACCT,cAAQ,EAAE,aADX;AAECF,UAAI,EAAE;AAFP,KA7CwD;AAiD3DY,KAAC,EAAE;AACCV,cAAQ,EAAE,cADX;AAECF,UAAI,EAAE;AAFP,KAjDwD;AAqD3Da,MAAE,EAAE;AACAX,cAAQ,EAAE,SADV;AAEAF,UAAI,EAAE;AAFN,KArDuD;AAyD3Dc,MAAE,EAAE;AACAZ,cAAQ,EAAE,SADV;AAEAF,UAAI,EAAE;AAFN,KAzDuD;AA6D3De,KAAC,EAAE;AACCb,cAAQ,EAAE,SADX;AAECF,UAAI,EAAE;AAFP,KA7DwD;AAiE3DgB,MAAE,EAAE;AACAd,cAAQ,EAAE,SADV;AAEAF,UAAI,EAAE;AAFN,KAjEuD;AAqE3DiB,MAAE,EAAE;AACAf,cAAQ,EAAE,SADV;AAEAF,UAAI,EAAE;AAFN,KArEuD;AAyE3DkB,KAAC,EAAE;AACChB,cAAQ,EAAE,SADX;AAECF,UAAI,EAAE;AAFP;AAzEwD,GAA/D;AA8EA,MAAMA,IAAI,GAAGC,KAAK,CAACF,KAAK,CAACC,IAAP,CAAlB;AACA,MAAIA,IAAJ,EAAU,OAAOA,IAAP,CA9F0B,CAgGpC;;AACA,MAAI,CAAC,GAAD,EAAM,GAAN,EAAW9G,OAAX,CAAmB6G,KAAK,CAACC,IAAzB,IAAiC,CAAC,CAAtC,EAAyC,OAAOjI,SAAP,CAjGL,CAmGpC;;AACA,SAAOA,SAAP;AACH,C,CAED;;;AAEA,SAASoJ,QAAT,CAAkB1G,GAAlB,EAA2C2G,EAA3C,EAAwE;AACpE,SAAO9B,MAAM,CAAC,CAAC7E,GAAG,CAACD,eAAL,EAAsB4G,EAAE,CAACnG,IAAzB,CAAD,CAAb;AACH;;AAED,SAASoG,UAAT,CAAoB5G,GAApB,EAA6C2G,EAA7C,EAA8E;AAC1E,MAAMxF,IAAI,GAAG;AACT,aAAS,MADA;AAET,WAAOuF,QAAQ,CAAC1G,GAAD,EAAM2G,EAAN,CAFN;AAGTE,eAAW,EAAE,SAHJ;AAITC,cAAU,EAAEC,MAAM,CAACC,IAAP,CAAYL,EAAE,CAACM,OAAf,EAAwB3D,GAAxB,CAA4B,UAAA4D,CAAC;AAAA,aAAK;AAC1C1G,YAAI,EAAE2G,UAAU,CAACD,CAAD,CAD0B;AAE1CE,mBAAW,EAAEF,CAF6B;AAG1CG,iBAAS,EAAEV,EAAE,CAACM,OAAH,CAAWC,CAAX;AAH+B,OAAL;AAAA,KAA7B;AAJH,GAAb;AAUA,SAAO/F,IAAP;AACH;;AAED,SAASmG,SAAT,CACItH,GADJ,EAEIoF,GAFJ,EAGIE,KAHJ,EAIE;AACE,MAAIiC,IAAJ;AACA,MAAIjC,KAAK,CAACiC,IAAN,IAAc,MAAlB,EAA0BA,IAAI,GAAG,SAAP,CAA1B,KACK,IAAIjC,KAAK,CAACkC,OAAV,EAAmBD,IAAI,GAAG,OAAP,CAAnB,KACA,IAAIjC,KAAK,CAACmC,YAAV,EAAwB;AACzB,QAAI,SAASC,IAAT,CAAcpC,KAAK,CAACiC,IAApB,CAAJ,EAA+BA,IAAI,GAAG,SAAP,CAA/B,KACK,IAAIjC,KAAK,CAACiC,IAAN,KAAe,GAAnB,EACD;AACAA,UAAI,GAAG,QAAP;AACP,GALI,MAKE,IAAIjC,KAAK,CAACiC,IAAN,KAAe,QAAf,IAA2BjC,KAAK,CAACiC,IAAN,IAAc,SAA7C,EACHA,IAAI,GAAG,QAAP,CADG,KAEF,IAAIjC,KAAK,CAACqC,KAAN,IAAe,SAASD,IAAT,CAAcpC,KAAK,CAACiC,IAApB,CAAnB,EAA8CA,IAAI,GAAG,OAAP,CAA9C,CACL;AADK,OAEA;AACD,UAAMZ,EAAE,GAAG3G,GAAG,CAAC4H,KAAJ,CAAUtC,KAAK,CAACiC,IAAhB,CAAX;AACA,UAAIZ,EAAJ,EAAQY,IAAI,GAAGb,QAAQ,CAAC1G,GAAD,EAAM2G,EAAN,CAAf;AACX,KAhBH,CAkBE;AACA;;AAEA,SAAO;AACHnG,QAAI,EAAE8E,KAAK,CAAC9E,IAAN,IAAc,GAAd,GAAoB4E,GAAG,CAAC5E,IAAxB,GAA+B8E,KAAK,CAAC9E,IADxC;AAEH+G,QAAI,EAAEA;AAFH,GAAP;AAIH,C,CAED;;;AACA,SAASM,YAAT,CAAsBC,OAAtB,EAAyD;AACrD,SAAO;AACH,aAAS,QADN;AAEHzC,UAAM,EAAEyC;AAFL,GAAP;AAIH,C,CAED;;;AACA,SAASC,WAAT,CAAqBC,MAArB,EAA8D;AAC1D,SAAO;AACH,aAAS,OADN;AAEHC,iBAAa,EAAED;AAFZ,GAAP;AAIH,C,CAED;;;AACA,SAASE,QAAT,CACIlI,GADJ,EAEIoF,GAFJ,EAGI+C,aAHJ,EAIuB;AACnB,MAAM9C,MAAM,GAAGD,GAAG,CAACC,MAAJ,CAAW/B,GAAX,CAAe,UAAAgC,KAAK;AAAA,WAAIgC,SAAS,CAACtH,GAAD,EAAMoF,GAAN,EAAWE,KAAX,CAAb;AAAA,GAApB,CAAf;AACA,MAAI,CAACD,MAAM,CAACjB,MAAZ,EAAoB,OAAO9G,SAAP,CAFD,CAInB;;AACA,MAAI+H,MAAM,CAACjB,MAAP,KAAkB,CAAlB,IAAuB,CAACgB,GAAG,CAACC,MAAJ,CAAW,CAAX,EAAc+C,YAA1C,EACI,OAAO/C,MAAM,CAAC,CAAD,CAAN,CAAUkC,IAAjB,CANe,CAQnB;;AACA,MAAMO,OAAqB,GAAGzC,MAAM,CAAC/B,GAAP,CAAW,UAAAgC,KAAK;AAAA,WAAK;AAC/C9E,UAAI,EAAE8E,KAAK,CAAC9E,IADmC;AAE/CwH,YAAM,EAAE1C,KAAK,CAACiC;AAFiC,KAAL;AAAA,GAAhB,CAA9B,CATmB,CAcnB;;AACA,MAAMc,WAAW,GAAGjD,GAAG,CAACC,MAAJ,CAAWiD,SAAX,CAAqB,UAAAhD,KAAK;AAAA,WAAIA,KAAK,CAAC8C,YAAV;AAAA,GAA1B,CAApB;;AAEA,MAAIC,WAAW,GAAG,CAAlB,EAAqB;AACjB;AACA;AACA,WAAOR,YAAY,CAACC,OAAD,CAAnB;AACH,GArBkB,CAuBnB;;;AACA,MAAI,CAACK,aAAL,EAAoB;AAChB;AACA,WAAO7K,SAAP;AACH;;AAED,MAAI+K,WAAW,IAAI,CAAnB,EAAsB;AAClB;AACA,WAAON,WAAW,CAACF,YAAY,CAACC,OAAD,CAAb,CAAlB;AACH,GAHD,MAGO;AACH;AACA,QAAMS,SAAS,GAAGT,OAAO,CAACU,KAAR,CAAc,CAAd,EAAiBH,WAAjB,CAAlB;AACA,QAAMI,OAAO,GAAGX,OAAO,CAACU,KAAR,CAAcH,WAAd,CAAhB;AACA,WAAOR,YAAY,gHACZU,SADY,IAEf;AACI/H,UAAI,EAAE,QADV;AAEIwH,YAAM,EAAED,WAAW,CACfU,OAAO,CAACrE,MAAR,GAAiB,CAAjB,GAAqByD,YAAY,CAACY,OAAD,CAAjC,GAA6CA,OAAO,CAAC,CAAD,CADrC;AAFvB,KAFe,GAAnB;AASH;AACJ;;AAED,SAASC,YAAT,CACI1I,GADJ,EAEIoF,GAFJ,EAGe;AACX,MAAMuD,KAA0B,GAAG;AAC/BC,SAAK,EAAE,UADwB;AAE/BC,MAAE,EAAE,UAF2B;AAG/BC,MAAE,EAAE,WAH2B;AAI/B5F,SAAK,EAAE;AAJwB,GAAnC,CADW,CAOX;;AACA,MAAM/B,IAAS,GAAG;AACd,aAASwH,KAAK,CAACvD,GAAG,CAAC2D,IAAL,CAAL,oBAAiC3D,GAAG,CAAC2D,IADhC;AAEdvI,QAAI,EAAE4E,GAAG,CAAC5E,IAFI;AAGd,WAAOqE,MAAM,CAAC,CAAC7E,GAAG,CAACD,eAAL,EAAsBqF,GAAG,CAAC2D,IAA1B,EAAgC3D,GAAG,CAAC5E,IAApC,CAAD,CAHC;AAIdyD,eAAW,EAAEmB,GAAG,CAACnB;AAJH,GAAlB;;AAMA,UAAQmB,GAAG,CAAC2D,IAAZ;AACI,SAAK,QAAL;AACA,SAAK,SAAL;AACI;AACA,aAAOzL,SAAP;;AACJ,SAAK,OAAL;AACA,SAAK,IAAL;AACA,SAAK,IAAL;AACA,SAAK,OAAL;AAAc;AACV,YAAMiI,IAAI,GAAGJ,MAAM,CAACC,GAAD,CAAnB;;AACA,YAAIG,IAAJ,EAAU;AACNpE,cAAI,CAACoE,IAAL,GAAYA,IAAI,CAACA,IAAjB;AACH;;AACDpE,YAAI,CAAC6G,MAAL,GAAcE,QAAQ,CAAClI,GAAD,EAAMoF,GAAN,EAAW,KAAX,CAAtB;AACA,YAAIA,GAAG,CAAC2D,IAAJ,KAAa,IAAjB,EAAuB5H,IAAI,CAAC6H,QAAL,GAAgB,IAAhB;;AACvB,YAAI,CAAC7H,IAAI,CAAC6G,MAAN,IAAgB5C,GAAG,CAAC2D,IAAJ,KAAa,OAAjC,EAA0C;AACtC;AACA5H,cAAI,CAAC,OAAD,CAAJ,GAAgB,CAACA,IAAI,CAAC,OAAD,CAAL,EAAgB,OAAhB,CAAhB;AACAA,cAAI,CAAC6G,MAAL,GAAcnD,MAAM,CAAC,CAAC7E,GAAG,CAACD,eAAL,EAAsB,OAAtB,CAAD,CAApB;AACH,SAJD,MAIO,IAAIwF,IAAI,IAAIA,IAAI,CAACE,QAAjB,EACHtE,IAAI,CAAC,OAAD,CAAJ,GAAgB,CAACA,IAAI,CAAC,OAAD,CAAL,EAAgBoE,IAAI,CAACE,QAArB,CAAhB;;AACJ;AACH;;AACD;AACI;AACA;AAzBR;;AA4BA,MAAI,CAACtE,IAAI,CAAC6G,MAAV,EAAkB;AACd;AACA,WAAO1K,SAAP;AACH;;AAED,SAAO6D,IAAP;AACH;;AA+BM,SAASgG,UAAT,CAAoB3G,IAApB,EAAkC;AACrCA,MAAI,GAAGA,IAAI,CAAC5B,IAAL,GAAYD,OAAZ,CAAoB,gBAApB,EAAsC,GAAtC,CAAP;AACA,MAAI,CAAC,YAAY+I,IAAZ,CAAiBlH,IAAjB,CAAL,EAA6BA,IAAI,GAAG,MAAMA,IAAb;AAC7BA,MAAI,GAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQ0E,WAAR,KAAwB1E,IAAI,CAACgI,KAAL,CAAW,CAAX,CAA/B;AACA,SAAOhI,IAAI,CAACgI,KAAL,CAAW,CAAX,EAAc,EAAd,CAAP;AACH;;AAED,SAASS,iBAAT,CAA2BzI,IAA3B,EAAyC;AACrC,SAAOA,IAAI,CAACgI,KAAL,CAAW,CAAX,EAAc,EAAd,CAAP;AACH;;AAEM,SAASU,0BAAT,CACHlJ,GADG,EAEU;AACb,MAAMmB,IAAmB,GAAG;AACxB,aAAS,WADe;AAExB,WAAOgI,wBAAwB,CAACnJ,GAAD,CAFP;AAGxBoH,eAAW,EAAE6B,iBAAiB,CAACjJ,GAAG,CAACQ,IAAL,CAHN;AAIxByD,eAAW,EAAEjE,GAAG,CAACU,KAAJ,CAAU,OAAV,CAJW;AAKxB0I,YAAQ,EAAEpJ,GAAG,CAACqJ,OAAJ,CACLrL,MADK,CACE,UAAAoH,GAAG;AAAA,aAAI,CAACA,GAAG,CAACkE,OAAL,IAAgB,CAAClE,GAAG,CAACmE,QAAzB;AAAA,KADL,EAELjG,GAFK,CAED,UAAA8B,GAAG,EAAI;AACR,UAAI;AACA,eAAOsD,YAAY,CAAC1I,GAAD,EAAMoF,GAAN,CAAnB;AACH,OAFD,CAEE,OAAOoE,CAAP,EAAU;AACRC,eAAO,CAACC,GAAR,kCAA2C1J,GAAG,CAACQ,IAA/C,EAAuDgJ,CAAvD;AACA,eAAOlM,SAAP;AACH;AACJ,KATK,EAULU,MAVK,CAUE,UAAA2L,CAAC;AAAA,aAAI,CAAC,CAACA,CAAN;AAAA,KAVH;AALc,GAA5B;AAiBA,MAAI3J,GAAG,CAAC4J,OAAJ,CAAYxF,MAAhB,EACIjD,IAAI,CAACyI,OAAL,GAAe5J,GAAG,CAAC4J,OAAJ,CAAYtG,GAAZ,CAAgB,UAAAvF,EAAE;AAAA,WAC7BoL,wBAAwB,CAACU,uFAA4B,CAAC9L,EAAD,CAA7B,CADK;AAAA,GAAlB,CAAf;AAIJ,MAAM+L,SAAS,GAAG9J,GAAG,CAACqJ,OAAJ,CAAYU,IAAZ,CAAiB,UAAA3E,GAAG;AAAA,WAAIA,GAAG,CAAC2D,IAAJ,KAAa,OAAjB;AAAA,GAApB,CAAlB;AACA,MAAMiB,QAAQ,GAAGjD,MAAM,CAACC,IAAP,CAAYhH,GAAG,CAAC4H,KAAhB,EAAuBxD,MAAxC;;AACA,MAAI0F,SAAS,IAAIE,QAAjB,EAA2B;AACvB7I,QAAI,CAAC2G,OAAL,GAAe,EAAf;AACA,QAAIgC,SAAJ,EACI3I,IAAI,CAAC2G,OAAL,CAAamC,IAAb,CAAkB;AACd,aAAOpF,MAAM,CAAC,CAAC7E,GAAG,CAACD,eAAL,EAAsB,OAAtB,CAAD,CADC;AAEd,eAAS,QAFK;AAGdsF,YAAM,EAAE,CACJ;AACI7E,YAAI,EAAE,OADV;AAEIwH,cAAM,EAAE;AAFZ,OADI;AAHM,KAAlB;AAUJ,QAAIgC,QAAJ,EACI7I,IAAI,CAAC2G,OAAL,GAAe3G,IAAI,CAAC2G,OAAL,CAAaoC,MAAb,CACXnD,MAAM,CAACC,IAAP,CAAYhH,GAAG,CAAC4H,KAAhB,EAAuBtE,GAAvB,CAA2B,UAAAqD,EAAE;AAAA,aAAIC,UAAU,CAAC5G,GAAD,EAAMA,GAAG,CAAC4H,KAAJ,CAAUjB,EAAV,CAAN,CAAd;AAAA,KAA7B,CADW,CAAf;AAGP;;AACDxF,MAAI,CAAC,UAAD,CAAJ,GAAmByD,YAAnB;AACA,SAAOzD,IAAP;AACH;AAEM,SAASgJ,+BAAT,CACHnK,GADG,EAEHQ,IAFG,EAGA;AACH,MAAMW,IAAI,GAAG;AACT,aAAS,WADA;AAETX,QAAI,EAAEA,IAFG;AAGT4G,eAAW,EAAE6B,iBAAiB,CAACjJ,GAAG,CAACQ,IAAL,CAHrB;AAITwH,UAAM,EAAEmB,wBAAwB,CAACnJ,GAAD;AAJvB,GAAb;AAMA,SAAOmB,IAAP;AACH;AAMM,SAASgI,wBAAT,CAAkCnJ,GAAlC,EAA2D;AAC9D,SAAO6E,MAAM,CAAC,CAAC,UAAD,EAAa7E,GAAG,CAACD,eAAjB,CAAD,CAAb;AACH;AAEM,SAASqK,uBAAT,CAAiCnJ,GAAjC,EAAyD;AAC5D,SAAO4D,MAAM,CAAC,CAAC,SAAD,EAAY5D,GAAG,CAAClD,EAAJ,CAAOY,OAAP,CAAe,IAAf,EAAqB,GAArB,CAAZ,CAAD,CAAb;AACH;AAEM,SAAS0L,WAAT,CAAqBC,IAArB,EAAmC;AACtC,MAAMC,KAAK,GACPD,IAAI,CAACpF,WAAL,GAAmBvG,OAAnB,CAA2B,GAA3B,EAAgC,GAAhC,EAAqCA,OAArC,CAA6C,IAA7C,EAAmD,GAAnD,IAA0D,OAD9D;AAEA,SAAO4L,KAAP;AACH;AAEM,SAAShJ,yBAAT,CACHN,GADG,EAEHuJ,OAFG,EAGA;AACH,MAAMlK,QAAQ,GAAGW,GAAG,CAACX,QAAJ,CAAagD,GAAb,CAAiB,UAAAtD,GAAG;AAAA,WACjCH,kGAAuC,CAACG,GAAD,CADN;AAAA,GAApB,CAAjB;AAGA,MAAMyK,cAAc,GAAGC,qEAAS,CAC5BpK,QAD4B,EAE5B,UAAAN,GAAG;AAAA,WAAIA,GAAG,CAACD,eAAJ,CAAoBxB,QAApB,EAAJ;AAAA,GAFyB,EAG5B,UAAAyB,GAAG;AAAA,WAAIA,GAAJ;AAAA,GAHyB,CAAhC;AAKA,MAAM8H,OAAO,GAAG2C,cAAc,CAACnH,GAAf,CAAmB,UAAAtD,GAAG;AAAA,WAAIkJ,0BAA0B,CAAClJ,GAAD,CAA9B;AAAA,GAAtB,CAAhB,CATG,CAWH;;AACA,MAAM2K,KAAe,GAAG,EAAxB;AACArK,UAAQ,CAACsK,OAAT,CAAiB,UAAC5K,GAAD,EAAS;AACtB,QAAMQ,IAAI,GAAG2G,UAAU,CAACnH,GAAG,CAACC,OAAJ,IAAeD,GAAG,CAAC6K,SAApB,CAAvB;AACA,QAAIF,KAAK,CAAClM,OAAN,CAAc+B,IAAd,IAAsB,CAA1B,EAA6BmK,KAAK,CAACV,IAAN,CAAWzJ,IAAX,EAA7B,KACK;AACD,UAAIsK,KAAK,GAAG,CAAZ;;AACA,aAAOH,KAAK,CAAClM,OAAN,CAAc+B,IAAI,GAAGsK,KAArB,IAA8B,CAAC,CAAtC;AAAyCA,aAAK;AAA9C;;AACAH,WAAK,CAACV,IAAN,CAAWzJ,IAAI,GAAGsK,KAAlB;AACH;AACJ,GARD;AAUA,MAAM3J,IAAmB,GAAG;AACxB,aAAS,WADe;AAExB,WAAOiJ,uBAAuB,CAACnJ,GAAD,CAFN;AAGxBmG,eAAW,EAAE6B,iBAAiB,CAAChI,GAAG,CAACT,IAAL,CAHN;AAIxByD,eAAW,EAAEhD,GAAG,CAACgD,WAJO;AAKxBmF,YAAQ,EAAE9I,QAAQ,CAACgD,GAAT,CAAa,UAACtD,GAAD,EAAMuD,CAAN;AAAA,aACnB4G,+BAA+B,CAACnK,GAAD,EAAM2K,KAAK,CAACpH,CAAD,CAAX,CADZ;AAAA,KAAb,CALc;AAQxB,gBAAYqB;AARY,GAA5B;AAUA,MAAI4F,OAAJ,aAAIA,OAAJ,eAAIA,OAAO,CAAEtJ,cAAb,EAA6B,QAAQC,IAAR,8GAAiB2G,OAAjB,GAA7B,KACK,OAAO3G,IAAP;AACR,C","file":"component---src-templates-device-tsx-6b489c00be27d7a304a2.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = /*#__PURE__*/React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 16\n  },\n\n  /* Styles applied to the avatar element. */\n  avatar: {\n    flex: '0 0 auto',\n    marginRight: 16\n  },\n\n  /* Styles applied to the action element. */\n  action: {\n    flex: '0 0 auto',\n    alignSelf: 'flex-start',\n    marginTop: -8,\n    marginRight: -8\n  },\n\n  /* Styles applied to the content wrapper element. */\n  content: {\n    flex: '1 1 auto'\n  },\n\n  /* Styles applied to the title Typography element. */\n  title: {},\n\n  /* Styles applied to the subheader Typography element. */\n  subheader: {}\n};\nvar CardHeader = /*#__PURE__*/React.forwardRef(function CardHeader(props, ref) {\n  var action = props.action,\n      avatar = props.avatar,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      subheaderProp = props.subheader,\n      subheaderTypographyProps = props.subheaderTypographyProps,\n      titleProp = props.title,\n      titleTypographyProps = props.titleTypographyProps,\n      other = _objectWithoutProperties(props, [\"action\", \"avatar\", \"classes\", \"className\", \"component\", \"disableTypography\", \"subheader\", \"subheaderTypographyProps\", \"title\", \"titleTypographyProps\"]);\n\n  var title = titleProp;\n\n  if (title != null && title.type !== Typography && !disableTypography) {\n    title = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'h5',\n      className: classes.title,\n      component: \"span\",\n      display: \"block\"\n    }, titleTypographyProps), title);\n  }\n\n  var subheader = subheaderProp;\n\n  if (subheader != null && subheader.type !== Typography && !disableTypography) {\n    subheader = /*#__PURE__*/React.createElement(Typography, _extends({\n      variant: avatar ? 'body2' : 'body1',\n      className: classes.subheader,\n      color: \"textSecondary\",\n      component: \"span\",\n      display: \"block\"\n    }, subheaderTypographyProps), subheader);\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), avatar && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.avatar\n  }, avatar), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content\n  }, title, subheader), action && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.action\n  }, action));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardHeader'\n})(CardHeader);","import { IconButton, Typography } from \"@material-ui/core\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport React, { useContext } from \"react\"\nimport CodeBlock from \"../CodeBlock\"\n\nexport default function Snippet(props: {\n    value: string | (() => string),\n    mode?: string,\n    download?: string;\n    url?: string;\n    caption?: string | JSX.Element | JSX.Element[];\n}) {\n    const { value, mode, download, url, caption } = props\n    const v: string = typeof value === 'function' ? value() : value;\n    const className = mode && `language-${mode === \"sts\" ? \"ts\" : mode}`\n    return <>\n        <CodeBlock className={className} downloadName={download} downloadText={download && v} url={url}>{v}</CodeBlock>\n        {caption && <Typography variant=\"caption\">{caption}</Typography>}\n    </>\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z\"\n}), 'Fingerprint');\n\nexports.default = _default;","import { GridSize } from \"@material-ui/core\"\nimport React, { useContext } from \"react\"\nimport AppContext, { DrawerType } from \"./AppContext\"\n\nexport interface GridBreakpoints {\n    xs?: GridSize,\n    md?: GridSize,\n    sm?: GridSize,\n    lg?: GridSize,\n    xl?: GridSize\n}\n\nexport default function useGridBreakpoints(itemCount?: number): GridBreakpoints {\n    const { drawerType } = useContext(AppContext)\n\n    if (itemCount !== undefined) {\n        switch (itemCount) {\n            case 1:\n            case 2: return { xs: 12, sm: 6, md: 6, lg: 6, xl: 6 }\n            case 3: return { xs: 12, sm: 6, md: 6, lg: 4, xl: 4 }\n        }\n    }\n\n    if (drawerType != DrawerType.None)\n        return { xs: 12, md: 6, sm: 6, lg: 6, xl: 4 }\n    else return {\n        xs: 12,\n        sm: 6,\n        md: 4,\n        lg: 4,\n        xl: 3\n    }\n}","import React, { useContext } from \"react\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport FingerprintIcon from '@material-ui/icons/Fingerprint';\nimport { Chip, IconButton } from '@material-ui/core';\nimport PacketsContext from \"./PacketsContext\";\nimport AppContext, { DrawerType } from \"./AppContext\";\nimport Tooltip from \"./ui/Tooltip\";\n\nexport default function IDChip(props: { id: number | string, className?: string, filter?: string }) {\n    const { id, className, filter } = props\n    const { filter: packetFilter, setFilter: setPacketFilter } = useContext(PacketsContext);\n    const { setDrawerType } = useContext(AppContext)\n\n    const ids = typeof id === \"string\" ? id : `0x${id !== undefined ? (id as number).toString(16) : \"???\"}`\n    const filtered = packetFilter && packetFilter.indexOf(filter) > -1\n    const handleFilterClick = () => {\n        if (filtered)\n            setPacketFilter(packetFilter?.replace(filter, '')?.trim())\n        else\n            setPacketFilter(packetFilter?.trim() + ' ' + filter)\n        setDrawerType(DrawerType.Packets)\n    }\n    const icon = <FingerprintIcon />;\n    const title = filtered ? `remove filter ${filter}` : `add filter ${filter}`;\n    if (filter)\n        return <Tooltip title={filtered ? `remove filter ${filter}` : `add filter ${filter}`}>\n            <span>\n                <Chip className={className} size=\"small\" icon={\n                    <IconButton aria-label={title} onClick={handleFilterClick}>\n                        {icon}\n                    </IconButton>\n                } label={ids} />\n            </span>\n        </Tooltip>\n    else\n        return <Chip aria-label={title} className={className} size=\"small\" icon={icon} title={`identifier ${ids}`} label={ids} />;\n}","import React from \"react\";\nimport Alert from \"./ui/Alert\";\n\nexport function StatusAlert(props: { specification: jdspec.ServiceSpec }) {\n    const { specification } = props;\n\n    switch (specification?.status) {\n        case \"deprecated\": return <Alert severity=\"warning\">Deprecated</Alert>\n        case \"experimental\": return <Alert severity=\"info\">Experimental</Alert>\n        default: return null;\n    }\n}\n\nconst ServiceSpecificationStatusAlert = React.memo(StatusAlert);\n\nexport default ServiceSpecificationStatusAlert;","import React, { useContext } from \"react\"\nimport { Card, CardActions, CardContent, CardHeader, CardMedia, Chip, createStyles, Grid, makeStyles, Theme, Typography } from \"@material-ui/core\";\nimport { serviceSpecificationFromClassIdentifier } from \"../../jacdac-ts/src/jdom/spec\";\nimport IDChip from \"./IDChip\";\nimport { Button } from \"gatsby-theme-material-ui\";\nimport Markdown from \"./ui/Markdown\"\nimport ServiceSpecificationStatusAlert from \"./ServiceSpecificationStatusAlert\"\nimport { addHost, hostDefinitionFromServiceClass } from \"../../jacdac-ts/src/hosts/hosts\";\nimport JacdacContext, { JacdacContextProps } from \"../jacdac/Context\";\nimport KindIcon from \"./KindIcon\";\nimport { VIRTUAL_DEVICE_NODE_NAME } from \"../../jacdac-ts/src/jdom/constants\";\nimport { navigate } from \"gatsby\"\n\nexport default function ServiceSpecificationCard(props: {\n    serviceClass?: number,\n    specification?: jdspec.ServiceSpec,\n    showReleaseStatus?: boolean,\n    showServiceClass?: boolean\n}) {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { serviceClass, specification, showReleaseStatus, showServiceClass } = props;\n    let spec = specification;\n    if (!spec && serviceClass !== undefined)\n        spec = serviceSpecificationFromClassIdentifier(serviceClass)\n    const sc = spec?.classIdentifier || serviceClass;\n    const srv = spec?.shortId || sc?.toString(16);\n    const hostDefinition = hostDefinitionFromServiceClass(sc)\n    const handleSimulatorClick = () => {\n        addHost(bus, hostDefinition.services())\n        navigate(\"/dashboard/\")\n    }\n\n    return <Card>\n        <CardHeader\n            title={spec?.name || \"???\"}\n            subheader={showServiceClass && srv && <IDChip id={sc} filter={`srv:${srv}`} />}\n            action={<>\n                {hostDefinition && <Chip size=\"small\"\n                    onClick={handleSimulatorClick}\n                    avatar={<KindIcon kind={VIRTUAL_DEVICE_NODE_NAME} />}\n                    aria-label=\"start simulator and open dashboard\"\n                    label=\"simulator\" />}\n            </>\n            }\n        />\n        <CardContent>\n            {spec?.notes[\"short\"] &&\n                <Typography variant=\"body2\" component=\"div\">\n                    <Markdown source={spec?.notes[\"short\"].split(\".\", 1)[0] + \".\"} />\n                </Typography>\n            }\n            {showReleaseStatus && <ServiceSpecificationStatusAlert specification={spec} />}\n        </CardContent>\n        {spec && <CardActions>\n            <Button variant=\"outlined\" aria-label={`open service ${spec.shortId} page`} to={`/services/${spec.shortId}/`}>More...</Button>\n        </CardActions>}\n    </Card>\n}","import { withPrefix } from \"gatsby-link\";\nimport { identifierToUrlPath } from \"../../../jacdac-ts/src/jdom/spec\";\n\nexport default function useDeviceImage(specification: jdspec.DeviceSpec, suffix?: string) {\n    return specification && withPrefix(`images/devices/${identifierToUrlPath(specification.id)}${suffix ? `.${suffix}` : ''}.jpg`);\n}\n","import { Link } from \"gatsby-theme-material-ui\";\nimport React, { useMemo } from \"react\";\nimport { deviceSpecificationToDTDL } from \"../../jacdac-ts/src/azure-iot/dtdl\";\nimport Snippet from \"./ui/Snippet\";\n\nexport function DeviceDTDLSnippet(props: { dev: jdspec.DeviceSpec, inlineServices?: boolean }) {\n    const { dev, inlineServices } = props;\n\n    const dtdl = useMemo<string>(\n        () => JSON.stringify(deviceSpecificationToDTDL(dev, { inlineServices }), null, 2),\n        [dev]);\n\n    return <Snippet value={dtdl} mode=\"json\" download={`${dev.name}.json`}\n        caption={<><Link to=\"/dtmi\">DTDL</Link> is an open source modelling language developed by Microsoft Azure.</>} />\n}","import React, {  useState } from 'react';\n// tslint:disable-next-line: no-submodule-imports\nimport Tabs from '@material-ui/core/Tabs';\n// tslint:disable-next-line: no-submodule-imports\nimport Tab from '@material-ui/core/Tab';\nimport { Paper, createStyles, makeStyles, Theme } from '@material-ui/core';\nimport TabPanel, { a11yProps } from './ui/TabPanel';\nimport Snippet from './ui/Snippet';\nimport DeviceSpecification from './DeviceSpecification';\nimport { DeviceDTDLSnippet } from './DeviceDTDLSnippet';\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n    root: {\n        flexGrow: 1,\n        backgroundColor: theme.palette.background.paper,\n        marginBottom: theme.spacing(1)\n    },\n    pre: {\n        margin: \"0\",\n        padding: \"0\",\n        backgroundColor: \"transparent\",\n        whiteSpec: \"pre-wrap\"\n    }\n}));\n\nexport default function DeviceSpecificationSource(props: {\n    deviceSpecification?: jdspec.DeviceSpec,\n    showSpecification?: boolean,\n    showDTDL?: boolean,\n    showJSON?: boolean\n}) {\n    const { deviceSpecification, showSpecification, showDTDL, showJSON } = props;\n    const classes = useStyles();\n    const [tab, setTab] = useState(0);\n    const spec = deviceSpecification\n\n    const handleTabChange = (event: React.ChangeEvent<unknown>, newValue: number) => {\n        setTab(newValue);\n    };\n\n    let index = 0;\n    return (\n        <div className={classes.root}>\n            <Paper square>\n                <Tabs value={tab} onChange={handleTabChange} aria-label=\"View specification formats\">\n                    {[\n                        showSpecification && \"Specification\",\n                        showJSON && \"JSON\",\n                        showDTDL && \"Device Twin\",\n                    ].filter(n => !!n)\n                        .map((n, i) => <Tab key={n} label={n} {...a11yProps(i)} />)}\n                </Tabs>\n                {showSpecification && <TabPanel key=\"spec\" value={tab} index={index++}>\n                    <DeviceSpecification device={spec} />\n                </TabPanel>}\n                {showJSON && <TabPanel key={`convjson`} value={tab} index={index++}>\n                    <Snippet value={JSON.stringify(spec, null, 2)} mode={\"json\"} />\n                </TabPanel>}\n                {showDTDL && <TabPanel key=\"dtdl\" value={tab} index={index++}>\n                    <DeviceDTDLSnippet dev={deviceSpecification} />\n                </TabPanel>}\n            </Paper>\n        </div>\n    );\n}\n","import React from \"react\"\nimport IDChip from \"./IDChip\";\nimport { Link } from 'gatsby-theme-material-ui';\nimport { identifierToUrlPath, serviceSpecificationFromClassIdentifier } from \"../../jacdac-ts/src/jdom/spec\"\nimport ServiceSpecificationCard from \"./ServiceSpecificationCard\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport useGridBreakpoints from \"./useGridBreakpoints\";\nimport Markdown from \"./ui/Markdown\";\nimport DeviceSpecificationSource from \"./DeviceSpecificationSource\";\nimport FirmwareCard from \"./firmware/FirmwareCard\"\nimport { escapeDeviceIdentifier } from \"../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport useDeviceImage from \"./devices/useDeviceImage\";\n\nexport default function DeviceSpecification(props: { device: jdspec.DeviceSpec, showSource?: string }) {\n    const { device, showSource } = props;\n    const gridBreakpoints = useGridBreakpoints();\n    const imageUrl = useDeviceImage(device);\n\n    return <>\n        <h2 key=\"title\">\n            <Link to={device.link}>{device.name}</Link>\n        </h2>\n        <Typography variant=\"subtitle1\">by <Link to={`/devices/${identifierToUrlPath(escapeDeviceIdentifier(device.company))}`}>{device.company}</Link></Typography>\n        {<img alt=\"image of the device\" src={imageUrl} loading=\"lazy\" />}\n        {device.description && <Markdown source={device.description} />}\n        {device.repo && <FirmwareCard slug={device.repo} />}\n        {!!device.firmwares.length && <><h3>Firmware identifiers</h3>\n            <ul>\n                {device.firmwares.map(firmware => <li key={firmware}><IDChip id={firmware} filter={`fw:0x${firmware.toString(16)}`} /></li>)}\n            </ul></>}\n        <h3>Services</h3>\n        <Grid container spacing={2}>\n            {device.services.map(sc => serviceSpecificationFromClassIdentifier(sc))\n                .map(spec => <Grid item key={spec.shortId} {...gridBreakpoints}>\n                    <ServiceSpecificationCard specification={spec} />\n                </Grid>)}\n        </Grid>\n        {showSource && <>\n            <h2>Specification</h2>\n            <DeviceSpecificationSource deviceSpecification={device}\n                showJSON={true} showDTDL={true} />\n        </>}\n    </>\n}\n","import React from \"react\"\nimport { deviceSpecificationFromIdentifier } from \"../../jacdac-ts/src/jdom/spec\"\nimport DeviceSpecification from \"../components/DeviceSpecification\"\n\nexport default function Page(props: { pageContext: { node: { id: string } } }) {\n    const id = props.pageContext.node.id;\n    const specification = deviceSpecificationFromIdentifier(id)\n    return <DeviceSpecification device={specification} />\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  }\n};\nvar CardContent = /*#__PURE__*/React.forwardRef(function CardContent(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardContent'\n})(CardContent);","/* eslint-disable @typescript-eslint/no-explicit-any */\n/***\n * Jacdac service/device specification to DTDL\n *\n *  DTDL specification: https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md.\n */\n\nimport {\n    serviceSpecificationFromClassIdentifier,\n    serviceSpecificationFromName,\n} from \"../jdom/spec\"\nimport { uniqueMap } from \"../jdom/utils\"\n\nexport const DTDL_REFERENCE_URL =\n    \"https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md\"\nexport const DTDL_NAME = \"Digital Twins Definition Language\"\nexport const DTDL_CONTEXT = \"dtmi:dtdl:context;2\"\n\n// https://github.com/Azure/digital-twin-model-identifier\n// ^dtmi:(?:_+[A-Za-z0-9]|[A-Za-z])(?:[A-Za-z0-9_]*[A-Za-z0-9])?(?::(?:_+[A-Za-z0-9]|[A-Za-z])(?:[A-Za-z0-9_]*[A-Za-z0-9])?)*;[1-9][0-9]{0,8}$\nfunction toDTMI(segments: (string | number)[], version?: number) {\n    return `dtmi:jacdac:${[...segments]\n        .map(seg =>\n            seg === undefined\n                ? \"???\"\n                : typeof seg === \"string\"\n                ? seg\n                : `x${seg.toString(16)}`\n        )\n        .map(seg => seg.replace(/(-|_)/g, \"\"))\n        .join(\":\")};${version !== undefined ? version : 1}`.toLowerCase()\n}\n\nfunction toUnit(pkt: jdspec.PacketInfo) {\n    if (pkt.fields.length !== 1) return undefined\n    const field = pkt.fields[0]\n    if (!field.unit) return undefined\n\n    /**\n     *     type Unit = \"m\" | \"kg\" | \"g\" | \"s\" | \"A\" | \"K\" | \"cd\" | \"mol\" | \"Hz\" | \"rad\" | \"sr\" | \"N\" | \"Pa\" | \"J\" | \"W\" | \"C\" | \"V\" | \"F\" | \"Ohm\"\n        | \"S\" | \"Wb\" | \"T\" | \"H\" | \"Cel\" | \"lm\" | \"lx\" | \"Bq\" | \"Gy\" | \"Sv\" | \"kat\" | \"m2\" | \"m3\" | \"l\" | \"m/s\" | \"m/s2\" | \"m3/s\" | \"l/s\"\n        | \"W/m2\" | \"cd/m2\" | \"bit\" | \"bit/s\" | \"lat\" | \"lon\" | \"pH\" | \"dB\" | \"dBW\" | \"Bspl\" | \"count\" | \"/\" | \"%RH\" | \"%EL\" | \"EL\"\n        | \"1/s\" | \"1/min\" | \"beat/min\" | \"beats\" | \"S/m\" | \"B\" | \"VA\" | \"VAs\" | \"var\" | \"vars\" | \"J/m\" | \"kg/m3\" | \"deg\";\n\n    type SecondaryUnit = \"ms\" | \"min\" | \"h\" | \"MHz\" | \"kW\" | \"kVA\" | \"kvar\" | \"Ah\" | \"Wh\" | \"kWh\"\n        | \"varh\" | \"kvarh\" | \"kVAh\" | \"Wh/km\" | \"KiB\" | \"GB\" | \"Mbit/s\" | \"B/s\" | \"MB/s\" | \"mV\" | \"mA\" | \"dBm\" | \"ug/m3\"\n        | \"mm/h\" | \"m/h\" | \"ppm\" | \"/100\" | \"/1000\" | \"hPa\" | \"mm\" | \"cm\" | \"km\" | \"km/h\";\n     */\n    const units: jdspec.SMap<{ semantic: string; unit: string }> = {\n        \"m/s2\": {\n            semantic: \"Acceleration\",\n            unit: \"metrePerSecondSquared\",\n        },\n        rad: {\n            semantic: \"Angle\",\n            unit: \"radian\",\n        },\n        \"rad/s\": {\n            semantic: \"AngularVelocity\",\n            unit: \"radianPerSecond\",\n        },\n        \"rad/s2\": {\n            semantic: \"AngularAcceleration\",\n            unit: \"radianPerSecondSquared\",\n        },\n        m: {\n            semantic: \"Length\",\n            unit: \"metre\",\n        },\n        m2: {\n            semantic: \"Area\",\n            unit: \"squareMetre\",\n        },\n        s: {\n            semantic: \"TimeSpan\",\n            unit: \"second\",\n        },\n        ms: {\n            semantic: \"TimeSpan\",\n            unit: \"millisecond\",\n        },\n        us: {\n            semantic: \"TimeSpan\",\n            unit: \"microsecond\",\n        },\n        K: {\n            semantic: \"Temperature\",\n            unit: \"kelvin\",\n        },\n        C: {\n            semantic: \"Temperature\",\n            unit: \"degreeCelsius\",\n        },\n        F: {\n            semantic: \"Temperature\",\n            unit: \"degreeFahrenheit\",\n        },\n        g: {\n            semantic: \"Acceleration\",\n            unit: \"gForce\",\n        },\n        mA: {\n            semantic: \"Current\",\n            unit: \"milliampere\",\n        },\n        uA: {\n            semantic: \"Current\",\n            unit: \"microampere\",\n        },\n        A: {\n            semantic: \"Current\",\n            unit: \"ampere\",\n        },\n        mV: {\n            semantic: \"Voltage\",\n            unit: \"millivolt\",\n        },\n        uV: {\n            semantic: \"Voltage\",\n            unit: \"microvolt\",\n        },\n        V: {\n            semantic: \"Voltage\",\n            unit: \"volt\",\n        },\n    }\n    const unit = units[field.unit]\n    if (unit) return unit\n\n    // ignoring some known units\n    if ([\"#\", \"/\"].indexOf(field.unit) > -1) return undefined\n\n    //console.warn(`unsupported unit ${field.unit}`)\n    return undefined\n}\n\n// https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/dtdlv2.md#primitive-schemas\n\nfunction enumDTDI(srv: jdspec.ServiceSpec, en: jdspec.EnumInfo): string {\n    return toDTMI([srv.classIdentifier, en.name])\n}\n\nfunction enumSchema(srv: jdspec.ServiceSpec, en: jdspec.EnumInfo): DTDLSchema {\n    const dtdl = {\n        \"@type\": \"Enum\",\n        \"@id\": enumDTDI(srv, en),\n        valueSchema: \"integer\",\n        enumValues: Object.keys(en.members).map(k => ({\n            name: escapeName(k),\n            displayName: k,\n            enumValue: en.members[k],\n        })),\n    }\n    return dtdl\n}\n\nfunction fieldType(\n    srv: jdspec.ServiceSpec,\n    pkt: jdspec.PacketInfo,\n    field: jdspec.PacketMember\n) {\n    let type: string\n    if (field.type == \"bool\") type = \"boolean\"\n    else if (field.isFloat) type = \"float\"\n    else if (field.isSimpleType) {\n        if (/^(u|i)/.test(field.type)) type = \"integer\"\n        else if (field.type === \"B\")\n            // base64 encoded binary data\n            type = \"string\"\n    } else if (field.type === \"string\" || field.type == \"string0\")\n        type = \"string\"\n    else if (field.shift && /^(u|i)/.test(field.type)) type = \"float\"\n    // decimal type\n    else {\n        const en = srv.enums[field.type]\n        if (en) type = enumDTDI(srv, en)\n    }\n\n    //if (!type)\n    //    console.warn(`unknown field type ${field.type}`, field)\n\n    return {\n        name: field.name == \"_\" ? pkt.name : field.name,\n        type: type,\n    }\n}\n\n// warps fields into an object\nfunction objectSchema(schemas: DTDLSchema[]): DTDLSchema {\n    return {\n        \"@type\": \"Object\",\n        fields: schemas,\n    }\n}\n\n// wraps a schema into an array\nfunction arraySchema(schema: string | DTDLSchema): DTDLSchema {\n    return {\n        \"@type\": \"Array\",\n        elementSchema: schema,\n    }\n}\n\n// converts JADAC pkt data layout into a DTDL schema\nfunction toSchema(\n    srv: jdspec.ServiceSpec,\n    pkt: jdspec.PacketInfo,\n    supportsArray?: boolean\n): string | DTDLSchema {\n    const fields = pkt.fields.map(field => fieldType(srv, pkt, field))\n    if (!fields.length) return undefined\n\n    // a single data entry\n    if (fields.length === 1 && !pkt.fields[0].startRepeats)\n        return fields[0].type\n\n    // map fields into schema\n    const schemas: DTDLSchema[] = fields.map(field => ({\n        name: field.name,\n        schema: field.type,\n    }))\n\n    // is there an array?\n    const repeatIndex = pkt.fields.findIndex(field => field.startRepeats)\n\n    if (repeatIndex < 0) {\n        // no array\n        // wrap schemas into an object\n        return objectSchema(schemas)\n    }\n\n    // check if arrays are supported\n    if (!supportsArray) {\n        //console.warn(`arrays not supported in ${srv.shortName}.${pkt.name}`)\n        return undefined\n    }\n\n    if (repeatIndex == 0) {\n        // the whole structure is an array\n        return arraySchema(objectSchema(schemas))\n    } else {\n        // split fields into prelude and array data\n        const nonRepeat = schemas.slice(0, repeatIndex)\n        const repeats = schemas.slice(repeatIndex)\n        return objectSchema([\n            ...nonRepeat,\n            {\n                name: \"repeat\",\n                schema: arraySchema(\n                    repeats.length > 1 ? objectSchema(repeats) : repeats[0]\n                ),\n            },\n        ])\n    }\n}\n\nfunction packetToDTDL(\n    srv: jdspec.ServiceSpec,\n    pkt: jdspec.PacketInfo\n): DTDLContent {\n    const types: jdspec.SMap<string> = {\n        const: \"Property\",\n        rw: \"Property\",\n        ro: \"Telemetry\",\n        event: \"Telemetry\",\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const dtdl: any = {\n        \"@type\": types[pkt.kind] || `Unsupported${pkt.kind}`,\n        name: pkt.name,\n        \"@id\": toDTMI([srv.classIdentifier, pkt.kind, pkt.name]),\n        description: pkt.description,\n    }\n    switch (pkt.kind) {\n        case \"report\":\n        case \"command\":\n            // https://docs.microsoft.com/en-us/azure/digital-twins/concepts-models#azure-digital-twins-dtdl-implementation-specifics\n            return undefined\n        case \"const\":\n        case \"rw\":\n        case \"ro\":\n        case \"event\": {\n            const unit = toUnit(pkt)\n            if (unit) {\n                dtdl.unit = unit.unit\n            }\n            dtdl.schema = toSchema(srv, pkt, false)\n            if (pkt.kind === \"rw\") dtdl.writable = true\n            if (!dtdl.schema && pkt.kind === \"event\") {\n                // keep a count of the events\n                dtdl[\"@type\"] = [dtdl[\"@type\"], \"Event\"]\n                dtdl.schema = toDTMI([srv.classIdentifier, \"event\"])\n            } else if (unit && unit.semantic)\n                dtdl[\"@type\"] = [dtdl[\"@type\"], unit.semantic]\n            break\n        }\n        default:\n            //console.log(`unknown packet kind ${pkt.kind}`)\n            break\n    }\n\n    if (!dtdl.schema) {\n        //console.log(`unknown schema for ${srv.name}.${pkt.name}`);\n        return undefined\n    }\n\n    return dtdl\n}\n\ninterface DTDLNode {\n    \"@type\"?: string\n    \"@id\"?: string\n    // 1-64 characters\n    // ^[a-zA-Z](?:[a-zA-Z0-9_]*[a-zA-Z0-9])?$\n    name?: string\n    displayName?: string\n    description?: string\n}\n\ninterface DTDLSchema extends DTDLNode {\n    fields?: DTDLSchema[]\n    schema?: string | DTDLSchema\n    elementSchema?: string | DTDLSchema\n}\n\ninterface DTDLContent extends DTDLNode {\n    \"@type\": \"Property\" | \"Command\" | \"Component\" | \"Interface\"\n    unit?: string\n    schema?: string | DTDLSchema\n}\n\ninterface DTDLInterface extends DTDLContent {\n    contents: DTDLContent[]\n    extends?: string | string[]\n    schemas?: (DTDLSchema | DTDLInterface)[]\n    \"@context\"?: string\n}\n\nexport function escapeName(name: string) {\n    name = name.trim().replace(/[^a-zA-Z0-9_]/g, \"_\")\n    if (!/^[a-zA-Z]/.test(name)) name = \"a\" + name\n    name = name[0].toLowerCase() + name.slice(1)\n    return name.slice(0, 64)\n}\n\nfunction escapeDisplayName(name: string) {\n    return name.slice(0, 64)\n}\n\nexport function serviceSpecificationToDTDL(\n    srv: jdspec.ServiceSpec\n): DTDLInterface {\n    const dtdl: DTDLInterface = {\n        \"@type\": \"Interface\",\n        \"@id\": serviceSpecificationDTMI(srv),\n        displayName: escapeDisplayName(srv.name),\n        description: srv.notes[\"short\"],\n        contents: srv.packets\n            .filter(pkt => !pkt.derived && !pkt.internal)\n            .map(pkt => {\n                try {\n                    return packetToDTDL(srv, pkt)\n                } catch (e) {\n                    console.log(`failed to generate DTDL for ${srv.name}`, e)\n                    return undefined\n                }\n            })\n            .filter(c => !!c),\n    }\n    if (srv.extends.length)\n        dtdl.extends = srv.extends.map(id =>\n            serviceSpecificationDTMI(serviceSpecificationFromName(id))\n        )\n\n    const hasEvents = srv.packets.find(pkt => pkt.kind === \"event\")\n    const hasEnums = Object.keys(srv.enums).length\n    if (hasEvents || hasEnums) {\n        dtdl.schemas = []\n        if (hasEvents)\n            dtdl.schemas.push({\n                \"@id\": toDTMI([srv.classIdentifier, \"event\"]),\n                \"@type\": \"Object\",\n                fields: [\n                    {\n                        name: \"count\",\n                        schema: \"integer\",\n                    },\n                ],\n            })\n        if (hasEnums)\n            dtdl.schemas = dtdl.schemas.concat(\n                Object.keys(srv.enums).map(en => enumSchema(srv, srv.enums[en]))\n            )\n    }\n    dtdl[\"@context\"] = DTDL_CONTEXT\n    return dtdl\n}\n\nexport function serviceSpecificationToComponent(\n    srv: jdspec.ServiceSpec,\n    name: string\n): any {\n    const dtdl = {\n        \"@type\": \"Component\",\n        name: name,\n        displayName: escapeDisplayName(srv.name),\n        schema: serviceSpecificationDTMI(srv),\n    }\n    return dtdl\n}\n\nexport interface DTDLGenerationOptions {\n    inlineServices?: boolean // generate all services\n}\n\nexport function serviceSpecificationDTMI(srv: jdspec.ServiceSpec) {\n    return toDTMI([\"services\", srv.classIdentifier])\n}\n\nexport function deviceSpecificationDTMI(dev: jdspec.DeviceSpec) {\n    return toDTMI([\"devices\", dev.id.replace(/-/g, \":\")])\n}\n\nexport function DTMIToRoute(dtmi: string) {\n    const route =\n        dtmi.toLowerCase().replace(/;/, \"-\").replace(/:/g, \"/\") + \".json\"\n    return route\n}\n\nexport function deviceSpecificationToDTDL(\n    dev: jdspec.DeviceSpec,\n    options?: DTDLGenerationOptions\n): any {\n    const services = dev.services.map(srv =>\n        serviceSpecificationFromClassIdentifier(srv)\n    )\n    const uniqueServices = uniqueMap(\n        services,\n        srv => srv.classIdentifier.toString(),\n        srv => srv\n    )\n    const schemas = uniqueServices.map(srv => serviceSpecificationToDTDL(srv))\n\n    // allocate names\n    const names: string[] = []\n    services.forEach((srv) => {\n        const name = escapeName(srv.shortId || srv.shortName)\n        if (names.indexOf(name) < 0) names.push(name)\n        else {\n            let count = 2\n            while (names.indexOf(name + count) > -1) count++\n            names.push(name + count)\n        }\n    })\n\n    const dtdl: DTDLInterface = {\n        \"@type\": \"Interface\",\n        \"@id\": deviceSpecificationDTMI(dev),\n        displayName: escapeDisplayName(dev.name),\n        description: dev.description,\n        contents: services.map((srv, i) =>\n            serviceSpecificationToComponent(srv, names[i])\n        ),\n        \"@context\": DTDL_CONTEXT,\n    }\n    if (options?.inlineServices) return [dtdl, ...schemas]\n    else return dtdl\n}\n"],"sourceRoot":""}