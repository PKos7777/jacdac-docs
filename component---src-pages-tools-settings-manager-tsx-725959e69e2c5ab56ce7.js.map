{"version":3,"sources":["webpack:///./node_modules/@material-ui/icons/Add.js","webpack:///./src/components/ui/CardMediaWithSkeleton.tsx","webpack:///./src/components/DeviceCardMedia.tsx","webpack:///./src/components/DeviceCardHeader.tsx","webpack:///./src/components/alert/ConnectAlert.tsx","webpack:///./node_modules/@material-ui/icons/Delete.js","webpack:///./node_modules/@material-ui/core/esm/CardMedia/CardMedia.js","webpack:///./node_modules/@material-ui/core/esm/internal/SwitchBase.js","webpack:///./node_modules/@material-ui/core/esm/Switch/Switch.js","webpack:///./node_modules/@material-ui/core/esm/CardActions/CardActions.js","webpack:///./node_modules/@material-ui/core/esm/TextField/TextField.js","webpack:///./jacdac-ts/src/jdom/settingsclient.ts","webpack:///./src/components/SettingsCard.tsx","webpack:///./src/components/tools/SettingsManager.tsx","webpack:///./src/pages/tools/settings-manager.tsx","webpack:///./src/components/useServiceClient.ts"],"names":["useStyles","makeStyles","theme","createStyles","media","height","paddingTop","CardMediaWithSkeleton","props","image","src","className","others","classes","hasImage","DeviceCardMedia","device","specification","useDeviceSpecification","imageUrl","useDeviceImage","name","DeviceFirmwareVersionChip","firmwareVersionRegister","service","register","ControlReg","FirmwareVersion","firmwareVersion","useRegisterStringValue","DeviceTemperatureChip","tempRegister","McuTemperature","temperature","useRegisterIntValue","undefined","DeviceCardHeader","showFirmware","showTemperature","showMedia","showDeviceId","showAvatar","identifierToUrlPath","id","deviceId","filter","s","join","button","marginLeft","spacing","NoSsrConnectAlert","serviceClass","useContext","JacdacContext","bus","transports","devices","useChange","b","spec","serviceSpecificationFromClassIdentifier","disconnected","t","length","map","transport","type","ConnectAlert","SettingsClient","registersUseAcks","clear","sendCmdAsync","SettingsCmd","Clear","listKeys","inp","InPipeReader","sendPacketAsync","openCommand","ListKeys","readAll","output","keys","pkt","stringData","k","list","List","jdunpack","key","valueb","value","bufferToString","kv","setValue","trim","deleteValue","Packet","from","Set","jdpack","stringToBuffer","emit","CHANGE","getValue","Get","sendCmdAwaitResponseAsync","resp","data","rkey","console","error","Delete","JDServiceClient","SettingRow","client","mutable","isSecret","displayName","slice","handleComponentDelete","nameError","valueError","AddSettingRow","useState","setName","secret","setSecret","secretLabelId","useId","handleNameChange","ev","target","handleValueChange","handleChecked","checked","handleAdd","keyError","SettingsCard","useServiceClient","srv","values","useChangeAsync","c","handleClear","SettingsManager","services","SRV_SETTINGS","Page","factory","deps","setClient","useEffect","unmount"],"mappings":"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;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACgC;AAC3D;AACP;AACsB;AACM;AAC7C;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gDAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC;AACA,mDAAmD,0FAAQ;AAC3D;AACA,GAAG;AACH,sBAAsB,mDAAmB,YAAY,0FAAQ;AAC7D,eAAe,4DAAI;AACnB;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,mIAAU;AACzB;AACA,CAAC,YAAY,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpD6C;AACY;AACoB;AAC3D;AACP;AACqB;AACM;AACQ;AACb;AACP;AAChC,IAAI,iBAAM;AACjB;AACA;AACA,GAAG;AACH,aAAa;AACb,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,qBAAU,gBAAgB,mBAAgB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,kDAAwB;;AAEtC,uBAAuB,wCAAa;AACpC;AACA;AACA;AACA;AACA,GAAG;AACH,wBAAwB,wCAAc;AACtC;AACA;;AAEA,uBAAuB,yCAAc;;AAErC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,sBAAmB,CAAC,6BAAU,EAAE,sCAAQ;AAC9D;AACA,eAAe,iCAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,uBAAuB,sBAAmB,UAAU,sCAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,EAAE;AACH;;AAEA,MAAqC,GAAG,SAAM;AAC/B,6FAAU,CAAC,iBAAM;AAChC;AACA,CAAC,EAAE,qBAAU,CAAC,E;;AC1I4C;AACgC;;AAE3D;AACP;AACqB;AACC;AACI;AACL;AACG;AACzC,IAAI,aAAM;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAI;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAI;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe;;AAEf;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,IAAI,aAAM,gBAAgB,mBAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"component---src-pages-tools-settings-manager-tsx-725959e69e2c5ab56ce7.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","import { CardMedia, CardMediaProps, createStyles, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) => createStyles({\n    media: {\n        height: 0,\n        paddingTop: '75%', // 4:3\n    }\n}));\n\n/*\n        [theme.breakpoints.down('lg')]: {\n            paddingTop: '56.72%', // 16:9\n        },\n        [theme.breakpoints.down('xs')]: {\n            paddingTop: '18%',\n        },\n        [theme.breakpoints.down('md')]: { // 6:3\n            paddingTop: '50%',\n        }\n*/\n\nexport default function CardMediaWithSkeleton(props: CardMediaProps) {\n    const { image, src, className, ...others } = props;\n    const classes = useStyles();\n    const hasImage = !!image || !!src;\n    return hasImage ?\n        <CardMedia className={className || classes.media} {...others} image={image} src={src} />\n        : <></>;\n}","import React from \"react\";\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\";\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\";\nimport useDeviceImage from \"./devices/useDeviceImage\";\nimport CardMediaWithSkeleton from \"./ui/CardMediaWithSkeleton\";\n\nexport default function DeviceCardMedia(props: { device: JDDevice }) {\n    const { device } = props;\n    const specification = useDeviceSpecification(device)\n    const imageUrl = useDeviceImage(specification)\n\n    return <CardMediaWithSkeleton\n        image={imageUrl}\n        title={specification?.name}\n    />\n}","import { ControlReg } from \"../../jacdac-ts/src/jdom/constants\"\nimport { CardHeader, Chip, Typography } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport { Link } from \"gatsby-theme-material-ui\"\nimport { JDDevice } from \"../../jacdac-ts/src/jdom/device\"\nimport React from \"react\"\nimport {\n    useRegisterIntValue,\n    useRegisterStringValue,\n} from \"../jacdac/useRegisterValue\"\nimport DeviceActions from \"./DeviceActions\"\nimport DeviceName from \"./devices/DeviceName\"\nimport DeviceCardMedia from \"./DeviceCardMedia\"\nimport useDeviceSpecification from \"../jacdac/useDeviceSpecification\"\nimport { identifierToUrlPath } from \"../../jacdac-ts/src/jdom/spec\"\nimport DeviceAvatar from \"./devices/DeviceAvatar\"\n\nfunction DeviceFirmwareVersionChip(props: { device: JDDevice }) {\n    const { device } = props\n    const firmwareVersionRegister = device\n        ?.service(0)\n        ?.register(ControlReg.FirmwareVersion)\n    const firmwareVersion = useRegisterStringValue(firmwareVersionRegister)\n\n    return (\n        (firmwareVersion && <Chip size=\"small\" label={firmwareVersion} />) || (\n            <></>\n        )\n    )\n}\n\nfunction DeviceTemperatureChip(props: { device: JDDevice }) {\n    const { device } = props\n    const tempRegister = device?.service(0)?.register(ControlReg.McuTemperature)\n    const temperature = useRegisterIntValue(tempRegister)\n    return (\n        (temperature !== undefined && (\n            <Chip size=\"small\" label={`${temperature}°`} />\n        )) || <></>\n    )\n}\n\nexport default function DeviceCardHeader(props: {\n    device: JDDevice\n    showAvatar?: boolean\n    showDeviceId?: boolean\n    showFirmware?: boolean\n    showTemperature?: boolean\n    showMedia?: boolean\n}) {\n    const {\n        device,\n        showFirmware,\n        showTemperature,\n        showMedia,\n        showDeviceId,\n        showAvatar,\n    } = props\n    const specification = useDeviceSpecification(device)\n\n    return (\n        <>\n            {showMedia && <DeviceCardMedia device={device} />}\n            <CardHeader\n                avatar={showAvatar && <DeviceAvatar device={device} />}\n                action={<DeviceActions device={device} showReset={true} />}\n                title={\n                    <Link\n                        color=\"textPrimary\"\n                        to={`/devices/${\n                            identifierToUrlPath(specification?.id) || \"\"\n                        }`}\n                    >\n                        <DeviceName device={device} />\n                    </Link>\n                }\n                subheader={\n                    <>\n                        <Typography variant=\"caption\" gutterBottom>\n                            {[\n                                specification?.name,\n                                showDeviceId && device.deviceId,\n                            ]\n                                .filter(s => !!s)\n                                .join(\", \")}\n                        </Typography>\n                        {showFirmware && (\n                            <DeviceFirmwareVersionChip device={device} />\n                        )}\n                        {showTemperature && (\n                            <DeviceTemperatureChip device={device} />\n                        )}\n                    </>\n                }\n            />\n        </>\n    )\n}\n","// tslint:disable-next-line: no-submodule-imports\nimport { Box, createStyles, makeStyles } from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"../ui/Alert\"\nimport React, { useContext } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport ConnectButton from \"../../jacdac/ConnectButton\"\nimport { NoSsr } from \"@material-ui/core\"\nimport useChange from \"../../jacdac/useChange\"\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        button: {\n            marginLeft: theme.spacing(2),\n        },\n    })\n)\n\nfunction NoSsrConnectAlert(props: { serviceClass?: number }) {\n    const classes = useStyles()\n    const { serviceClass } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const { transports } = bus\n    const devices = useChange(bus, b => b.devices({ serviceClass }))\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n    const disconnected = useChange(bus, t => t.disconnected)\n\n    if (!devices?.length && disconnected)\n        return (\n            <Box displayPrint=\"none\">\n                <Alert severity=\"info\" closeable={true}>\n                    {!spec && <span>Did you connect your device?</span>}\n                    {spec && <span>Did you connect a {spec.name} device?</span>}\n                    {transports.map(transport => (\n                        <ConnectButton\n                            key={transport.type}\n                            transport={transport}\n                            className={classes.button}\n                            full={true}\n                            transparent={true}\n                        />\n                    ))}\n                </Alert>\n            </Box>\n        )\n    return null\n}\n\nexport default function ConnectAlert(props: { serviceClass?: number }) {\n    return (\n        <NoSsr>\n            <NoSsrConnectAlert {...props} />\n        </NoSsr>\n    )\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport { chainPropTypes } from '@material-ui/utils';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'block',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n\n  /* Styles applied to the root element if `component=\"video, audio, picture, iframe, or img\"`. */\n  media: {\n    width: '100%'\n  },\n\n  /* Styles applied to the root element if `component=\"picture or img\"`. */\n  img: {\n    // ⚠️ object-fit is not supported by IE 11.\n    objectFit: 'cover'\n  }\n};\nvar MEDIA_COMPONENTS = ['video', 'audio', 'picture', 'iframe', 'img'];\nvar CardMedia = /*#__PURE__*/React.forwardRef(function CardMedia(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      image = props.image,\n      src = props.src,\n      style = props.style,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"component\", \"image\", \"src\", \"style\"]);\n\n  var isMediaComponent = MEDIA_COMPONENTS.indexOf(Component) !== -1;\n  var composedStyle = !isMediaComponent && image ? _extends({\n    backgroundImage: \"url(\\\"\".concat(image, \"\\\")\")\n  }, style) : style;\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, isMediaComponent && classes.media, \"picture img\".indexOf(Component) !== -1 && classes.img),\n    ref: ref,\n    style: composedStyle,\n    src: isMediaComponent ? image || src : undefined\n  }, other), children);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardMedia'\n})(CardMedia);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport useControlled from '../utils/useControlled';\nimport useFormControl from '../FormControl/useFormControl';\nimport withStyles from '../styles/withStyles';\nimport IconButton from '../IconButton';\nexport var styles = {\n  root: {\n    padding: 9\n  },\n  checked: {},\n  disabled: {},\n  input: {\n    cursor: 'inherit',\n    position: 'absolute',\n    opacity: 0,\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n    margin: 0,\n    padding: 0,\n    zIndex: 1\n  }\n};\n/**\n * @ignore - internal component.\n */\n\nvar SwitchBase = /*#__PURE__*/React.forwardRef(function SwitchBase(props, ref) {\n  var autoFocus = props.autoFocus,\n      checkedProp = props.checked,\n      checkedIcon = props.checkedIcon,\n      classes = props.classes,\n      className = props.className,\n      defaultChecked = props.defaultChecked,\n      disabledProp = props.disabled,\n      icon = props.icon,\n      id = props.id,\n      inputProps = props.inputProps,\n      inputRef = props.inputRef,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      readOnly = props.readOnly,\n      required = props.required,\n      tabIndex = props.tabIndex,\n      type = props.type,\n      value = props.value,\n      other = _objectWithoutProperties(props, [\"autoFocus\", \"checked\", \"checkedIcon\", \"classes\", \"className\", \"defaultChecked\", \"disabled\", \"icon\", \"id\", \"inputProps\", \"inputRef\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"readOnly\", \"required\", \"tabIndex\", \"type\", \"value\"]);\n\n  var _useControlled = useControlled({\n    controlled: checkedProp,\n    default: Boolean(defaultChecked),\n    name: 'SwitchBase',\n    state: 'checked'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      checked = _useControlled2[0],\n      setCheckedState = _useControlled2[1];\n\n  var muiFormControl = useFormControl();\n\n  var handleFocus = function handleFocus(event) {\n    if (onFocus) {\n      onFocus(event);\n    }\n\n    if (muiFormControl && muiFormControl.onFocus) {\n      muiFormControl.onFocus(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    if (onBlur) {\n      onBlur(event);\n    }\n\n    if (muiFormControl && muiFormControl.onBlur) {\n      muiFormControl.onBlur(event);\n    }\n  };\n\n  var handleInputChange = function handleInputChange(event) {\n    var newChecked = event.target.checked;\n    setCheckedState(newChecked);\n\n    if (onChange) {\n      // TODO v5: remove the second argument.\n      onChange(event, newChecked);\n    }\n  };\n\n  var disabled = disabledProp;\n\n  if (muiFormControl) {\n    if (typeof disabled === 'undefined') {\n      disabled = muiFormControl.disabled;\n    }\n  }\n\n  var hasLabelFor = type === 'checkbox' || type === 'radio';\n  return /*#__PURE__*/React.createElement(IconButton, _extends({\n    component: \"span\",\n    className: clsx(classes.root, className, checked && classes.checked, disabled && classes.disabled),\n    disabled: disabled,\n    tabIndex: null,\n    role: undefined,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"input\", _extends({\n    autoFocus: autoFocus,\n    checked: checkedProp,\n    defaultChecked: defaultChecked,\n    className: classes.input,\n    disabled: disabled,\n    id: hasLabelFor && id,\n    name: name,\n    onChange: handleInputChange,\n    readOnly: readOnly,\n    ref: inputRef,\n    required: required,\n    tabIndex: tabIndex,\n    type: type,\n    value: value\n  }, inputProps)), checked ? checkedIcon : icon);\n}); // NB: If changed, please update Checkbox, Switch and Radio\n// so that the API documentation is updated.\n\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'PrivateSwitchBase'\n})(SwitchBase);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\"; // @inheritedComponent IconButton\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport { fade } from '../styles/colorManipulator';\nimport capitalize from '../utils/capitalize';\nimport SwitchBase from '../internal/SwitchBase';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      width: 34 + 12 * 2,\n      height: 14 + 12 * 2,\n      overflow: 'hidden',\n      padding: 12,\n      boxSizing: 'border-box',\n      position: 'relative',\n      flexShrink: 0,\n      zIndex: 0,\n      // Reset the stacking context.\n      verticalAlign: 'middle',\n      // For correct alignment with the text.\n      '@media print': {\n        colorAdjust: 'exact'\n      }\n    },\n\n    /* Styles applied to the root element if `edge=\"start\"`. */\n    edgeStart: {\n      marginLeft: -8\n    },\n\n    /* Styles applied to the root element if `edge=\"end\"`. */\n    edgeEnd: {\n      marginRight: -8\n    },\n\n    /* Styles applied to the internal `SwitchBase` component's `root` class. */\n    switchBase: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 1,\n      // Render above the focus ripple.\n      color: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[400],\n      transition: theme.transitions.create(['left', 'transform'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      '&$checked': {\n        transform: 'translateX(20px)'\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        opacity: 0.5\n      },\n      '&$disabled + $track': {\n        opacity: theme.palette.type === 'light' ? 0.12 : 0.1\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"primary\"`. */\n    colorPrimary: {\n      '&$checked': {\n        color: theme.palette.primary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.primary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.primary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      '&$checked': {\n        color: theme.palette.secondary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.secondary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the root element if `size=\"small\"`. */\n    sizeSmall: {\n      width: 40,\n      height: 24,\n      padding: 7,\n      '& $thumb': {\n        width: 16,\n        height: 16\n      },\n      '& $switchBase': {\n        padding: 4,\n        '&$checked': {\n          transform: 'translateX(16px)'\n        }\n      }\n    },\n\n    /* Pseudo-class applied to the internal `SwitchBase` component's `checked` class. */\n    checked: {},\n\n    /* Pseudo-class applied to the internal SwitchBase component's disabled class. */\n    disabled: {},\n\n    /* Styles applied to the internal SwitchBase component's input element. */\n    input: {\n      left: '-100%',\n      width: '300%'\n    },\n\n    /* Styles used to create the thumb passed to the internal `SwitchBase` component `icon` prop. */\n    thumb: {\n      boxShadow: theme.shadows[1],\n      backgroundColor: 'currentColor',\n      width: 20,\n      height: 20,\n      borderRadius: '50%'\n    },\n\n    /* Styles applied to the track element. */\n    track: {\n      height: '100%',\n      width: '100%',\n      borderRadius: 14 / 2,\n      zIndex: -1,\n      transition: theme.transitions.create(['opacity', 'background-color'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white,\n      opacity: theme.palette.type === 'light' ? 0.38 : 0.3\n    }\n  };\n};\nvar Switch = /*#__PURE__*/React.forwardRef(function Switch(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'secondary' : _props$color,\n      _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"edge\", \"size\"]);\n\n  var icon = /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.thumb\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.root, className, {\n      'start': classes.edgeStart,\n      'end': classes.edgeEnd\n    }[edge], size === \"small\" && classes[\"size\".concat(capitalize(size))])\n  }, /*#__PURE__*/React.createElement(SwitchBase, _extends({\n    type: \"checkbox\",\n    icon: icon,\n    checkedIcon: icon,\n    classes: {\n      root: clsx(classes.switchBase, classes[\"color\".concat(capitalize(color))]),\n      input: classes.input,\n      checked: classes.checked,\n      disabled: classes.disabled\n    },\n    ref: ref\n  }, other)), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.track\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiSwitch'\n})(Switch);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  },\n\n  /* Styles applied to the root element if `disableSpacing={false}`. */\n  spacing: {\n    '& > :not(:first-child)': {\n      marginLeft: 8\n    }\n  }\n};\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(props, ref) {\n  var _props$disableSpacing = props.disableSpacing,\n      disableSpacing = _props$disableSpacing === void 0 ? false : _props$disableSpacing,\n      classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"disableSpacing\", \"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, !disableSpacing && classes.spacing),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardActions'\n})(CardActions);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport Input from '../Input';\nimport FilledInput from '../FilledInput';\nimport OutlinedInput from '../OutlinedInput';\nimport InputLabel from '../InputLabel';\nimport FormControl from '../FormControl';\nimport FormHelperText from '../FormHelperText';\nimport Select from '../Select';\nimport withStyles from '../styles/withStyles';\nvar variantComponent = {\n  standard: Input,\n  filled: FilledInput,\n  outlined: OutlinedInput\n};\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {}\n};\n/**\n * The `TextField` is a convenience wrapper for the most common cases (80%).\n * It cannot be all things to all people, otherwise the API would grow out of control.\n *\n * ## Advanced Configuration\n *\n * It's important to understand that the text field is a simple abstraction\n * on top of the following components:\n *\n * - [FormControl](/api/form-control/)\n * - [InputLabel](/api/input-label/)\n * - [FilledInput](/api/filled-input/)\n * - [OutlinedInput](/api/outlined-input/)\n * - [Input](/api/input/)\n * - [FormHelperText](/api/form-helper-text/)\n *\n * If you wish to alter the props applied to the `input` element, you can do so as follows:\n *\n * ```jsx\n * const inputProps = {\n *   step: 300,\n * };\n *\n * return <TextField id=\"time\" type=\"time\" inputProps={inputProps} />;\n * ```\n *\n * For advanced cases, please look at the source of TextField by clicking on the\n * \"Edit this page\" button above. Consider either:\n *\n * - using the upper case props for passing values directly to the components\n * - using the underlying components directly as shown in the demos\n */\n\nvar TextField = /*#__PURE__*/React.forwardRef(function TextField(props, ref) {\n  var autoComplete = props.autoComplete,\n      _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      defaultValue = props.defaultValue,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$error = props.error,\n      error = _props$error === void 0 ? false : _props$error,\n      FormHelperTextProps = props.FormHelperTextProps,\n      _props$fullWidth = props.fullWidth,\n      fullWidth = _props$fullWidth === void 0 ? false : _props$fullWidth,\n      helperText = props.helperText,\n      hiddenLabel = props.hiddenLabel,\n      id = props.id,\n      InputLabelProps = props.InputLabelProps,\n      inputProps = props.inputProps,\n      InputProps = props.InputProps,\n      inputRef = props.inputRef,\n      label = props.label,\n      _props$multiline = props.multiline,\n      multiline = _props$multiline === void 0 ? false : _props$multiline,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      placeholder = props.placeholder,\n      _props$required = props.required,\n      required = _props$required === void 0 ? false : _props$required,\n      rows = props.rows,\n      rowsMax = props.rowsMax,\n      _props$select = props.select,\n      select = _props$select === void 0 ? false : _props$select,\n      SelectProps = props.SelectProps,\n      type = props.type,\n      value = props.value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'standard' : _props$variant,\n      other = _objectWithoutProperties(props, [\"autoComplete\", \"autoFocus\", \"children\", \"classes\", \"className\", \"color\", \"defaultValue\", \"disabled\", \"error\", \"FormHelperTextProps\", \"fullWidth\", \"helperText\", \"hiddenLabel\", \"id\", \"InputLabelProps\", \"inputProps\", \"InputProps\", \"inputRef\", \"label\", \"multiline\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"placeholder\", \"required\", \"rows\", \"rowsMax\", \"select\", \"SelectProps\", \"type\", \"value\", \"variant\"]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (select && !children) {\n      console.error('Material-UI: `children` must be passed when using the `TextField` component with `select`.');\n    }\n  }\n\n  var InputMore = {};\n\n  if (variant === 'outlined') {\n    if (InputLabelProps && typeof InputLabelProps.shrink !== 'undefined') {\n      InputMore.notched = InputLabelProps.shrink;\n    }\n\n    if (label) {\n      var _InputLabelProps$requ;\n\n      var displayRequired = (_InputLabelProps$requ = InputLabelProps === null || InputLabelProps === void 0 ? void 0 : InputLabelProps.required) !== null && _InputLabelProps$requ !== void 0 ? _InputLabelProps$requ : required;\n      InputMore.label = /*#__PURE__*/React.createElement(React.Fragment, null, label, displayRequired && \"\\xA0*\");\n    }\n  }\n\n  if (select) {\n    // unset defaults from textbox inputs\n    if (!SelectProps || !SelectProps.native) {\n      InputMore.id = undefined;\n    }\n\n    InputMore['aria-describedby'] = undefined;\n  }\n\n  var helperTextId = helperText && id ? \"\".concat(id, \"-helper-text\") : undefined;\n  var inputLabelId = label && id ? \"\".concat(id, \"-label\") : undefined;\n  var InputComponent = variantComponent[variant];\n  var InputElement = /*#__PURE__*/React.createElement(InputComponent, _extends({\n    \"aria-describedby\": helperTextId,\n    autoComplete: autoComplete,\n    autoFocus: autoFocus,\n    defaultValue: defaultValue,\n    fullWidth: fullWidth,\n    multiline: multiline,\n    name: name,\n    rows: rows,\n    rowsMax: rowsMax,\n    type: type,\n    value: value,\n    id: id,\n    inputRef: inputRef,\n    onBlur: onBlur,\n    onChange: onChange,\n    onFocus: onFocus,\n    placeholder: placeholder,\n    inputProps: inputProps\n  }, InputMore, InputProps));\n  return /*#__PURE__*/React.createElement(FormControl, _extends({\n    className: clsx(classes.root, className),\n    disabled: disabled,\n    error: error,\n    fullWidth: fullWidth,\n    hiddenLabel: hiddenLabel,\n    ref: ref,\n    required: required,\n    color: color,\n    variant: variant\n  }, other), label && /*#__PURE__*/React.createElement(InputLabel, _extends({\n    htmlFor: id,\n    id: inputLabelId\n  }, InputLabelProps), label), select ? /*#__PURE__*/React.createElement(Select, _extends({\n    \"aria-describedby\": helperTextId,\n    id: id,\n    labelId: inputLabelId,\n    value: value,\n    input: InputElement\n  }, SelectProps), children) : InputElement, helperText && /*#__PURE__*/React.createElement(FormHelperText, _extends({\n    id: helperTextId\n  }, FormHelperTextProps), helperText));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTextField'\n})(TextField);","import { CHANGE, SettingsCmd } from \"./constants\";\nimport { jdpack, jdunpack } from \"./pack\";\nimport Packet from \"./packet\";\nimport { InPipeReader } from \"./pipes\";\nimport { JDService } from \"./service\";\nimport { JDServiceClient } from \"./serviceclient\";\nimport { bufferToString, stringToBuffer } from \"./utils\";\n\nexport default class SettingsClient extends JDServiceClient {\n    constructor(service: JDService) {\n        super(service)\n        service.registersUseAcks = true;\n    }\n\n    async clear() {\n        await this.service.sendCmdAsync(SettingsCmd.Clear);\n    }\n\n    async listKeys(): Promise<string[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(inp.openCommand(SettingsCmd.ListKeys), true)\n        const { output } = await inp.readAll();\n        const keys = output.map(pkt => pkt.stringData);\n        return keys.filter(k => !!k)\n    }\n\n    async list(): Promise<{ key: string, value?: string }[]> {\n        const inp = new InPipeReader(this.bus)\n        await this.service.sendPacketAsync(inp.openCommand(SettingsCmd.List), true)\n        const { output } = await inp.readAll();\n        return output.map(pkt => {\n            const [key, valueb] = pkt.jdunpack<[string, Uint8Array]>(\"z b\");\n            const value = valueb.length > 0 ? bufferToString(valueb) : undefined;\n            return key && { key, value }\n        }).filter(kv => !!kv);\n    }\n\n    async setValue(key: string, value: string) {\n        key = key.trim();\n        if (value === undefined) {\n            await this.deleteValue(key);\n        } else {\n            const pkt = Packet.from(SettingsCmd.Set, jdpack(\"z b\", [key, stringToBuffer(value)]));\n            await this.service.sendPacketAsync(pkt);\n            this.emit(CHANGE);\n        }\n    }\n\n    async getValue(key: string): Promise<string> {\n        if (!key) return undefined;\n\n        key = key.trim();\n        const pkt = Packet.from(SettingsCmd.Get, jdpack(\"s\", [key]));\n        const resp = await this.service.sendCmdAwaitResponseAsync(pkt);\n        const [rkey, value] = jdunpack<[string, Uint8Array]>(resp.data, \"z b\");\n        if (key !== rkey) {\n            console.error(`device returned different key, got \"${rkey}\", expected \"${key}\"`)\n            return undefined;\n        }\n        return bufferToString(value);\n    }\n\n\n    async deleteValue(key: string) {\n        if (!key) return;\n        key = key.trim();\n        const pkt = Packet.from(SettingsCmd.Delete, jdpack(\"s\", [key]));\n        await this.service.sendPacketAsync(pkt);\n\n        this.emit(CHANGE);\n    }\n}\n\n","import { Card, CardActions, CardContent, FormLabel, Grid, Switch, TextField } from \"@material-ui/core\";\nimport React, { ChangeEvent, useState } from \"react\";\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\";\nimport DeviceCardHeader from \"./DeviceCardHeader\";\nimport useServiceClient from \"./useServiceClient\";\nimport SettingsClient from \"../../jacdac-ts/src/jdom/settingsclient\"\nimport { useChangeAsync } from \"../jacdac/useChange\";\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DeleteIcon from '@material-ui/icons/Delete';\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport AddIcon from '@material-ui/icons/Add';\nimport CmdButton from \"./CmdButton\";\nimport { useId } from \"react-use-id-hook\"\n\nfunction SettingRow(props: { client: SettingsClient, name: string, value?: string, mutable?: boolean }) {\n    const { client, name, value, mutable } = props;\n    const isSecret = name[0] == \"$\";\n    const displayName = isSecret ? name.slice(1) : name;\n    const handleComponentDelete = async () => {\n        await client.deleteValue(name)\n    }\n    const nameError = \"\"\n    const valueError = \"\"\n    return <Grid item xs={12}>\n        <Grid container spacing={1}>\n            <Grid item xs={4}>\n                <TextField fullWidth={true} error={!!nameError} variant=\"outlined\" label=\"key\" helperText={nameError} value={displayName} disabled={true} />\n            </Grid>\n            <Grid item xs={4}>\n                <TextField fullWidth={true} error={!!valueError} variant=\"outlined\" helperText={valueError} value={isSecret ? \"...\" : value} disabled={true} />\n            </Grid>\n            {mutable && <Grid item>\n                <CmdButton trackName=\"settings.delete\" title=\"Delete settings\" onClick={handleComponentDelete} icon={<DeleteIcon />} />\n            </Grid>}\n        </Grid>\n    </Grid>\n}\n\nfunction AddSettingRow(props: { client: SettingsClient }) {\n    const { client } = props;\n    const [name, setName] = useState(\"\")\n    const [value, setValue] = useState(\"\")\n    const [secret, setSecret] = useState(true)\n    const secretLabelId = useId();\n\n    const handleNameChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        setName(ev.target.value.trim())\n    }\n    const handleValueChange = (ev: ChangeEvent<HTMLInputElement>) => {\n        setValue(ev.target.value)\n    }\n    const handleChecked = (ev, checked: boolean) => {\n        setSecret(checked);\n    }\n    const handleAdd = async () => {\n        await client.setValue(`${secret ? \"$\" : \"\"}${name}`, value)\n        setName(\"\")\n        setValue(\"\")\n        setSecret(true)\n    }\n    const keyError = \"\"\n    const valueError = \"\"\n\n    return <Grid item xs={12}>\n        <Grid container spacing={1}>\n            <Grid item>\n                <TextField fullWidth={true} error={!!keyError} variant=\"outlined\" label=\"Add key\" helperText={keyError} value={name} onChange={handleNameChange} />\n            </Grid>\n            <Grid item>\n                <TextField fullWidth={true} error={!!valueError} variant=\"outlined\" label=\"value\" helperText={valueError} value={value} onChange={handleValueChange} />\n            </Grid>\n            <Grid item>\n                <Switch checked={secret} onChange={handleChecked} aria-labelledby={secretLabelId} />\n                <label id={secretLabelId}>Secret</label>\n            </Grid>\n            <Grid item>\n                <CmdButton trackName=\"settings.add\"\n                    disabled={!name || !!keyError || !!valueError} title=\"Add setting\" onClick={handleAdd} icon={<AddIcon />} />\n            </Grid>\n        </Grid>\n    </Grid>\n}\n\nexport default function SettingsCard(props: { service: JDService, mutable?: boolean }) {\n    const { service, mutable } = props;\n    const client = useServiceClient(service, srv => new SettingsClient(srv));\n    const values = useChangeAsync(client, c => c?.list());\n    if (!client)\n        return null // wait till loaded\n\n    const handleClear = async () => await client?.clear();\n    return <Card>\n        <DeviceCardHeader device={service.device} showMedia={true} />\n        <CardContent>\n            <Grid container spacing={2}>\n                {values?.map(({ key, value }) => <SettingRow key={key} name={key} value={value} client={client} mutable={mutable} />)}\n                {mutable && <AddSettingRow client={client} key=\"add\" />}\n            </Grid>\n        </CardContent>\n        {mutable && <CardActions>\n            <CmdButton trackName=\"settings.clearall\" title=\"Clear all settings\" icon={<DeleteIcon />} onClick={handleClear}>\n                Clear\n            </CmdButton>\n        </CardActions>}\n    </Card >\n}\n","import React, { useContext } from \"react\"\nimport { Grid } from \"@material-ui/core\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport { SRV_SETTINGS } from \"../../../jacdac-ts/src/jdom/constants\"\nimport useChange from \"../../jacdac/useChange\"\nimport ConnectAlert from \"../alert/ConnectAlert\"\nimport Alert from \"../ui/Alert\"\nimport SettingsCard from \"../SettingsCard\"\n\nexport default function SettingsManager() {\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n\n    const services = useChange(bus, b =>\n        b.services({ serviceClass: SRV_SETTINGS })\n    )\n\n    return (\n        <>\n            {<ConnectAlert serviceClass={SRV_SETTINGS} />}\n            {!services.length && (\n                <Alert severity=\"info\">\n                    We could not find any device with the settings storage\n                    service on the bus!\n                </Alert>\n            )}\n            <Grid container spacing={2}>\n                {services.map(service => (\n                    <Grid key={service.id} item xs={12}>\n                        <SettingsCard service={service} mutable={true} />\n                    </Grid>\n                ))}\n            </Grid>\n        </>\n    )\n}\n","import React from \"react\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport SettingsManager from \"../../components/tools/SettingsManager\"\n\nexport default function Page() {\n    return <>\n        <h1>\n            Settings Manager\n    </h1>\n        <p>\n            Configure settings in a <Link to=\"/services/settings/\">setting store</Link>.\n    </p>\n        <SettingsManager />\n    </>\n}","import { useEffect, useState } from \"react\"\nimport { JDService } from \"../../jacdac-ts/src/jdom/service\"\nimport { JDServiceClient } from \"../../jacdac-ts/src/jdom/serviceclient\"\n\nexport default function useServiceClient<T extends JDServiceClient>(service: JDService, factory: (service: JDService) => T, deps: React.DependencyList = []) {\n    const [client, setClient] = useState<T>(undefined)\n\n    useEffect(() => {\n        const c = service && factory(service)\n        setClient(c)\n        return () => c?.unmount()\n    }, [service, ...deps]) // don't use factory in cache!\n\n    return client;\n}"],"sourceRoot":""}