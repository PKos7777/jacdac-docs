{"version":3,"sources":["webpack://jacdac-docs/./src/components/dashboard/DashboardSolenoid.tsx"],"names":["DashboardSolenoid","props","service","pulledRegister","useRegister","SolenoidReg","pulled","useRegisterBoolValue","server","useServiceServer","color","useWidgetTheme","active","background","controlBackground","textProps","w","bw","h","m","bh","bsh","pos","useThrottledValue","label","onToggle","ev","register","setValues","refresh","buttonProps","useSvgButtonProps"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe,SAASA,iBAAT,CAA2BC,KAA3B,EAAyD;AAAA,MAC5DC,OAD4D,GAChDD,KADgD,CAC5DC,OAD4D;AAEpE,MAAMC,cAAc,GAAGC,oEAAW,CAACF,OAAD,EAAUG,+FAAV,CAAlC;AACA,MAAMC,MAAM,GAAGC,wFAAoB,CAACJ,cAAD,EAAiBF,KAAjB,CAAnC;AACA,MAAMO,MAAM,GAAGC,yEAAgB,CAACP,OAAD,CAA/B;AACA,MAAMQ,KAAK,GAAGF,MAAM,GAAG,WAAH,GAAiB,SAArC;;AALoE,wBAOhEG,yEAAc,CAACD,KAAD,CAPkD;AAAA,MAM5DE,MAN4D,mBAM5DA,MAN4D;AAAA,MAMpDC,UANoD,mBAMpDA,UANoD;AAAA,MAMxCC,iBANwC,mBAMxCA,iBANwC;AAAA,MAMrBC,SANqB,mBAMrBA,SANqB;;AASpE,MAAMC,CAAC,GAAG,GAAV;AACA,MAAMC,EAAE,GAAG,EAAX;AACA,MAAMC,CAAC,GAAG,EAAV;AACA,MAAMC,CAAC,GAAG,CAAV;AACA,MAAMC,EAAE,GAAGF,CAAC,GAAG,IAAIC,CAAnB;AACA,MAAME,GAAG,GAAGD,EAAE,GAAG,IAAID,CAArB;AAEA,MAAMG,GAAG,GAAGC,0EAAiB,CAACjB,MAAM,GAAGa,CAAH,GAAOH,CAAC,GAAGC,EAAJ,GAAS,IAAIE,CAA3B,EAA8BH,CAA9B,CAA7B;AACA,MAAMQ,KAAK,GAAGlB,MAAM,GAAG,eAAH,GAAqB,eAAzC;;AAEA,MAAMmB,QAAQ,GAAG,SAAXA,QAAW,CAACC,EAAD,EAA4B;AAAA;;AACzClB,UAAM,SAAN,IAAAA,MAAM,WAAN,gCAAAA,MAAM,CAAEmB,QAAR,CAAiBtB,+FAAjB,uEAAsCuB,SAAtC,CAAgD,CAAC,CAACtB,MAAD,GAAU,CAAV,GAAc,CAAf,CAAhD;AACAH,kBAAc,CAAC0B,OAAf;AACH,GAHD;;AAKA,MAAMC,WAAW,GAAGC,0EAAiB,CACjCP,KADiC,EAEjC,CAAC,CAAChB,MAAF,IAAYiB,QAFqB,CAArC;AAKA,sBACI,iDAAC,gEAAD;AAAW,SAAK,EAAET,CAAlB;AAAqB,UAAM,EAAEE,CAA7B;AAAgC,cAAU,EAAEL;AAA5C,kBACI;AACI,KAAC,EAAEM,CAAC,GAAGG,GADX;AAEI,KAAC,EAAEH,CAAC,GAAG,CAACC,EAAE,GAAGC,GAAN,IAAa,CAFxB;AAGI,SAAK,EAAEJ,EAHX;AAII,UAAM,EAAEI,GAJZ;AAKI,MAAE,EAAEF,CALR;AAMI,MAAE,EAAEA,CANR;AAOI,QAAI,EAAEP,MAPV;AAQI,UAAM,EAAEE;AARZ,IADJ,eAWI;AACI,KAAC,EAAEK,CADP;AAEI,KAAC,EAAEA,CAFP;AAGI,SAAK,EAAEF,EAHX;AAII,UAAM,EAAEG,EAJZ;AAKI,MAAE,EAAED,CALR;AAMI,MAAE,EAAEA,CANR;AAOI,UAAM,EAAEN,UAPZ;AAQI,QAAI,EAAEC;AARV,KASQgB,WATR,EAXJ,eAsBI,2EAAUf,SAAV;AAAqB,KAAC,EAAEI,CAAC,GAAGF,EAAE,GAAG,CAAjC;AAAoC,KAAC,EAAEE,CAAC,GAAGC,EAAE,GAAG;AAAhD,MACKd,MAAM,GAAG,QAAH,GAAc,QADzB,CAtBJ,CADJ;AA4BH,C","file":"3356-dc55922c2bcca9656812.js","sourcesContent":["import React from \"react\"\nimport { DashboardServiceProps } from \"./DashboardServiceWidget\"\nimport { useRegisterBoolValue } from \"../../jacdac/useRegisterValue\"\nimport SvgWidget from \"../widgets/SvgWidget\"\nimport useWidgetTheme from \"../widgets/useWidgetTheme\"\nimport { SolenoidReg } from \"../../../jacdac-ts/src/jdom/constants\"\nimport useThrottledValue from \"../hooks/useThrottledValue\"\nimport useSvgButtonProps from \"../hooks/useSvgButtonProps\"\nimport useServiceServer from \"../hooks/useServiceServer\"\nimport useRegister from \"../hooks/useRegister\"\n\nexport default function DashboardSolenoid(props: DashboardServiceProps) {\n    const { service } = props\n    const pulledRegister = useRegister(service, SolenoidReg.Pulled)\n    const pulled = useRegisterBoolValue(pulledRegister, props)\n    const server = useServiceServer(service)\n    const color = server ? \"secondary\" : \"primary\"\n    const { active, background, controlBackground, textProps } =\n        useWidgetTheme(color)\n\n    const w = 128\n    const bw = 84\n    const h = 72\n    const m = 6\n    const bh = h - 2 * m\n    const bsh = bh - 6 * m\n\n    const pos = useThrottledValue(pulled ? m : w - bw - 2 * m, w)\n    const label = pulled ? \"pull solenoid\" : \"push solenoid\"\n\n    const onToggle = (ev: React.PointerEvent) => {\n        server?.register(SolenoidReg.Pulled)?.setValues([!pulled ? 1 : 0])\n        pulledRegister.refresh()\n    }\n\n    const buttonProps = useSvgButtonProps<SVGRectElement>(\n        label,\n        !!server && onToggle\n    )\n\n    return (\n        <SvgWidget width={w} height={h} background={background}>\n            <rect\n                x={m + pos}\n                y={m + (bh - bsh) / 2}\n                width={bw}\n                height={bsh}\n                rx={m}\n                ry={m}\n                fill={active}\n                stroke={controlBackground}\n            />\n            <rect\n                x={m}\n                y={m}\n                width={bw}\n                height={bh}\n                rx={m}\n                ry={m}\n                stroke={background}\n                fill={controlBackground}\n                {...buttonProps}\n            />\n            <text {...textProps} x={m + bw / 2} y={m + bh / 2}>\n                {pulled ? \"pulled\" : \"pushed\"}\n            </text>\n        </SvgWidget>\n    )\n}\n"],"sourceRoot":""}