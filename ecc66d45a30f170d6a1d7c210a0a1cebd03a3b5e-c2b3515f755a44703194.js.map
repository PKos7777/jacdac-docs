{"version":3,"sources":["webpack:///./src/components/FieldDataSet.ts","webpack:///./src/components/useChartPalette.ts","webpack:///./node_modules/@material-ui/core/esm/internal/SwitchBase.js","webpack:///./node_modules/@material-ui/core/esm/Switch/Switch.js","webpack:///./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js","webpack:///./src/components/Trend.tsx","webpack:///./node_modules/@material-ui/core/esm/TextField/TextField.js"],"names":["Example","timestamp","data","toVector","startTimestamp","t","concat","FieldDataSet","create","bus","registers","name","palette","maxRows","fields","arrayConcatMany","map","reg","colors","f","i","length","set","undefined","id","Math","random","toString","rows","headers","field","friendlyName","units","unit","flatten","row","indexOf","colorOf","addRow","value","addExample","push","refreshminmax","d","shift","r","mins","slice","maxs","min","max","emit","CHANGE","toCSV","sep","options","allheaders","join","start","csv","forEach","cell","first","last","JDEventSource","useChartPalette","useContext","DarkModeContext","darkMode","useStyles","makeStyles","theme","createStyles","graph","marginTop","spacing","marginBottom","mini","display","width","UnitTrendChart","props","dataSet","useGradient","horizon","vpw","vph","dot","shape","symmetric","indexes","u","index","filter","times","ex","maxt","apply","mint","minv","maxv","opposite","sign","isNaN","abs","rv","margin","h","w","strokeWidth","axisWidth","axisColor","pointRadius","toffset","x","y","v","lastRow","color","path","ri","UnitTrend","height","gradient","classes","maxHeight","maxWidth","Trend","unique"],"mappings":"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AAC,6BAAU,EAAE,sCAAQ;AAC9D;AACA,eAAe,iCAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,uBAAuB,sBAAmB,UAAU,sCAAQ;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,EAAE;AACH;;AAEA,MAAqC,GAAG,SAAM;AAC/B,6FAAU,CAAC,iBAAM;AAChC;AACA,CAAC,EAAE,qBAAU,CAAC,E;;AC1I4C;AACgC;;AAE3D;AACP;AACqB;AACC;AACI;AACL;AACG;AACzC,IAAI,aAAM;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAI;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAI;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,eAAe;;AAEf;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,WAAW;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B,gDAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0GAAwB;;AAEtC,MAAM,KAAqC,EAAE,EAI1C;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAqC,mDAAmB,CAAC,8CAAc;AACvE;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC,mDAAmB,iBAAiB,0FAAQ;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,sBAAsB,mDAAmB,CAAC,4DAAW,EAAE,0FAAQ;AAC/D,eAAe,4DAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,gCAAgC,mDAAmB,CAAC,2DAAU,EAAE,0FAAQ;AAC3E;AACA;AACA,GAAG,kDAAkD,mDAAmB,CAAC,wDAAM,EAAE,0FAAQ;AACzF;AACA;AACA;AACA;AACA;AACA,GAAG,qEAAqE,mDAAmB,CAAC,+DAAc,EAAE,0FAAQ;AACpH;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,SAAM;AAC/B,oIAAU;AACzB;AACA,CAAC,YAAY,E","file":"ecc66d45a30f170d6a1d7c210a0a1cebd03a3b5e-c2b3515f755a44703194.js","sourcesContent":["import { JDBus } from \"../../jacdac-ts/src/jdom/bus\";\nimport { CHANGE } from \"../../jacdac-ts/src/jdom/constants\";\nimport { JDEventSource } from \"../../jacdac-ts/src/jdom/eventsource\";\nimport { JDField } from \"../../jacdac-ts/src/jdom/field\";\nimport { JDRegister } from \"../../jacdac-ts/src/jdom/register\";\nimport { arrayConcatMany } from \"../../jacdac-ts/src/jdom/utils\";\n\nexport class Example {\n    label: string;\n    constructor(\n        public readonly timestamp: number,\n        public readonly data: number[]\n    ) {\n\n    }\n\n    toVector(startTimestamp?: number): number[] {\n        const t = this.timestamp - (startTimestamp || 0)\n        return [t].concat(this.data)\n    }\n}\n\nexport default class FieldDataSet extends JDEventSource {\n    readonly id = Math.random().toString()\n    readonly rows: Example[];\n    readonly headers: string[];\n    readonly units: string[];\n    maxRows = -1;\n\n    // maintain computed min/max to avoid recomputation\n    mins: number[];\n    maxs: number[];\n\n    static create(bus: JDBus,\n        registers: JDRegister[],\n        name: string,\n        palette: string[],\n        maxRows?: number): FieldDataSet {\n        const fields = arrayConcatMany(registers.map(reg => reg.fields))\n        const colors = fields.map((f, i) => palette[i % palette.length])\n        const set = new FieldDataSet(bus, name, fields, colors)\n        if (maxRows !== undefined)\n            set.maxRows = maxRows\n        return set;\n    }\n\n    constructor(\n        public readonly bus: JDBus,\n        public readonly name: string,\n        public readonly fields: JDField[],\n        public readonly colors: string[] = [\"#000\"]\n    ) {\n        super();\n        this.rows = [];\n        this.headers = fields.map(field => field.friendlyName)\n        this.units = fields.map(field => field.unit)\n    }\n\n    get startTimestamp() {\n        const row = this.rows[0]\n        return row?.timestamp\n    }\n\n    get duration() {\n        const first = this.rows[0]\n        const last = this.rows[this.rows.length - 1]\n        return (first && last && last.timestamp - first.timestamp) || 0\n    }\n\n    get length() {\n        return this.rows.length\n    }\n\n    data(flatten?: boolean) {\n        if (flatten && this.headers.length == 1)\n            return this.rows.map(row => row.data[0])\n        else\n            return this.rows.map(row => row.data);\n    }\n\n    indexOf(field: JDField) {\n        return this.fields.indexOf(field)\n    }\n\n    colorOf(field: JDField) {\n        return this.colors[this.indexOf(field)]\n    }\n\n    addRow(data?: number[]) {\n        const timestamp = this.bus.timestamp;\n        if (!data)\n            data = this.fields.map(f => f.value)\n        this.addExample(timestamp, data)\n    }\n\n    private addExample(timestamp: number, data: number[]) {\n        this.rows.push(new Example(timestamp, data))\n\n        // drop rows if needed\n        let refreshminmax = false;\n        while (this.maxRows > 0 && this.rows.length > this.maxRows * 1.1) {\n            const d = this.rows.shift();\n            refreshminmax = true;\n        }\n\n        if (refreshminmax) {\n            // refresh entire mins/max\n            for (let r = 0; r < this.rows.length; ++r) {\n                const row = this.rows[r];\n                if (r == 0) {\n                    this.mins = row.data.slice(0)\n                    this.maxs = row.data.slice(0)\n                } else {\n                    for (let i = 0; i < row.data.length; ++i) {\n                        this.mins[i] = Math.min(this.mins[i], row.data[i])\n                        this.maxs[i] = Math.max(this.maxs[i], row.data[i])\n                    }\n                }\n            }\n        }\n        else {\n            // incremental update\n            if (!this.mins) {\n                this.mins = data.slice(0)\n                this.maxs = data.slice(0)\n            } else {\n                for (let i = 0; i < data.length; ++i) {\n                    this.mins[i] = Math.min(this.mins[i], data[i])\n                    this.maxs[i] = Math.max(this.maxs[i], data[i])\n                }\n            }\n        }\n\n        this.emit(CHANGE);\n    }\n\n    toCSV(sep = \",\", options?: { units?: boolean }) {\n        const allheaders = [\"time\", ...this.headers].join(sep)\n        const start = this.startTimestamp\n        const csv: string[] = [allheaders]\n        if (options?.units)\n            csv.push([\"ms\", ...this.units].join(sep))\n        this.rows.forEach(row => csv.push(\n            row.toVector(start).map(cell => cell !== undefined ? cell.toString() : \"\").join(sep)\n        ))\n        return csv.join('\\n');\n    }\n}\n","import { useContext } from \"react\";\nimport DarkModeContext from \"./ui/DarkModeContext\";\n\nexport default function useChartPalette(): string[] {\n    const { darkMode } = useContext(DarkModeContext);\n    if (darkMode == 'light') return [\n        \"#003f5c\",\n        \"#ffa600\",\n        \"#665191\",\n        \"#a05195\",\n        \"#ff7c43\",\n        \"#d45087\",\n        \"#f95d6a\",\n        \"#2f4b7c\",\n    ]\n    else return [\n        \"#60ccfe\",\n        \"#ffdd9e\",\n        \"#c3b9d8\",\n        \"#dcbbd7\",\n        \"#fecdb7\",\n        \"#eebcd1\",\n        \"#fcc1c6\",\n        \"#a1b6db\",\n    ]\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport useControlled from '../utils/useControlled';\nimport useFormControl from '../FormControl/useFormControl';\nimport withStyles from '../styles/withStyles';\nimport IconButton from '../IconButton';\nexport var styles = {\n  root: {\n    padding: 9\n  },\n  checked: {},\n  disabled: {},\n  input: {\n    cursor: 'inherit',\n    position: 'absolute',\n    opacity: 0,\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n    margin: 0,\n    padding: 0,\n    zIndex: 1\n  }\n};\n/**\n * @ignore - internal component.\n */\n\nvar SwitchBase = /*#__PURE__*/React.forwardRef(function SwitchBase(props, ref) {\n  var autoFocus = props.autoFocus,\n      checkedProp = props.checked,\n      checkedIcon = props.checkedIcon,\n      classes = props.classes,\n      className = props.className,\n      defaultChecked = props.defaultChecked,\n      disabledProp = props.disabled,\n      icon = props.icon,\n      id = props.id,\n      inputProps = props.inputProps,\n      inputRef = props.inputRef,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      readOnly = props.readOnly,\n      required = props.required,\n      tabIndex = props.tabIndex,\n      type = props.type,\n      value = props.value,\n      other = _objectWithoutProperties(props, [\"autoFocus\", \"checked\", \"checkedIcon\", \"classes\", \"className\", \"defaultChecked\", \"disabled\", \"icon\", \"id\", \"inputProps\", \"inputRef\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"readOnly\", \"required\", \"tabIndex\", \"type\", \"value\"]);\n\n  var _useControlled = useControlled({\n    controlled: checkedProp,\n    default: Boolean(defaultChecked),\n    name: 'SwitchBase',\n    state: 'checked'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      checked = _useControlled2[0],\n      setCheckedState = _useControlled2[1];\n\n  var muiFormControl = useFormControl();\n\n  var handleFocus = function handleFocus(event) {\n    if (onFocus) {\n      onFocus(event);\n    }\n\n    if (muiFormControl && muiFormControl.onFocus) {\n      muiFormControl.onFocus(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    if (onBlur) {\n      onBlur(event);\n    }\n\n    if (muiFormControl && muiFormControl.onBlur) {\n      muiFormControl.onBlur(event);\n    }\n  };\n\n  var handleInputChange = function handleInputChange(event) {\n    var newChecked = event.target.checked;\n    setCheckedState(newChecked);\n\n    if (onChange) {\n      // TODO v5: remove the second argument.\n      onChange(event, newChecked);\n    }\n  };\n\n  var disabled = disabledProp;\n\n  if (muiFormControl) {\n    if (typeof disabled === 'undefined') {\n      disabled = muiFormControl.disabled;\n    }\n  }\n\n  var hasLabelFor = type === 'checkbox' || type === 'radio';\n  return /*#__PURE__*/React.createElement(IconButton, _extends({\n    component: \"span\",\n    className: clsx(classes.root, className, checked && classes.checked, disabled && classes.disabled),\n    disabled: disabled,\n    tabIndex: null,\n    role: undefined,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"input\", _extends({\n    autoFocus: autoFocus,\n    checked: checkedProp,\n    defaultChecked: defaultChecked,\n    className: classes.input,\n    disabled: disabled,\n    id: hasLabelFor && id,\n    name: name,\n    onChange: handleInputChange,\n    readOnly: readOnly,\n    ref: inputRef,\n    required: required,\n    tabIndex: tabIndex,\n    type: type,\n    value: value\n  }, inputProps)), checked ? checkedIcon : icon);\n}); // NB: If changed, please update Checkbox, Switch and Radio\n// so that the API documentation is updated.\n\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'PrivateSwitchBase'\n})(SwitchBase);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\"; // @inheritedComponent IconButton\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport { fade } from '../styles/colorManipulator';\nimport capitalize from '../utils/capitalize';\nimport SwitchBase from '../internal/SwitchBase';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      width: 34 + 12 * 2,\n      height: 14 + 12 * 2,\n      overflow: 'hidden',\n      padding: 12,\n      boxSizing: 'border-box',\n      position: 'relative',\n      flexShrink: 0,\n      zIndex: 0,\n      // Reset the stacking context.\n      verticalAlign: 'middle',\n      // For correct alignment with the text.\n      '@media print': {\n        colorAdjust: 'exact'\n      }\n    },\n\n    /* Styles applied to the root element if `edge=\"start\"`. */\n    edgeStart: {\n      marginLeft: -8\n    },\n\n    /* Styles applied to the root element if `edge=\"end\"`. */\n    edgeEnd: {\n      marginRight: -8\n    },\n\n    /* Styles applied to the internal `SwitchBase` component's `root` class. */\n    switchBase: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 1,\n      // Render above the focus ripple.\n      color: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[400],\n      transition: theme.transitions.create(['left', 'transform'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      '&$checked': {\n        transform: 'translateX(20px)'\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        opacity: 0.5\n      },\n      '&$disabled + $track': {\n        opacity: theme.palette.type === 'light' ? 0.12 : 0.1\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"primary\"`. */\n    colorPrimary: {\n      '&$checked': {\n        color: theme.palette.primary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.primary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.primary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      '&$checked': {\n        color: theme.palette.secondary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.secondary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the root element if `size=\"small\"`. */\n    sizeSmall: {\n      width: 40,\n      height: 24,\n      padding: 7,\n      '& $thumb': {\n        width: 16,\n        height: 16\n      },\n      '& $switchBase': {\n        padding: 4,\n        '&$checked': {\n          transform: 'translateX(16px)'\n        }\n      }\n    },\n\n    /* Pseudo-class applied to the internal `SwitchBase` component's `checked` class. */\n    checked: {},\n\n    /* Pseudo-class applied to the internal SwitchBase component's disabled class. */\n    disabled: {},\n\n    /* Styles applied to the internal SwitchBase component's input element. */\n    input: {\n      left: '-100%',\n      width: '300%'\n    },\n\n    /* Styles used to create the thumb passed to the internal `SwitchBase` component `icon` prop. */\n    thumb: {\n      boxShadow: theme.shadows[1],\n      backgroundColor: 'currentColor',\n      width: 20,\n      height: 20,\n      borderRadius: '50%'\n    },\n\n    /* Styles applied to the track element. */\n    track: {\n      height: '100%',\n      width: '100%',\n      borderRadius: 14 / 2,\n      zIndex: -1,\n      transition: theme.transitions.create(['opacity', 'background-color'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white,\n      opacity: theme.palette.type === 'light' ? 0.38 : 0.3\n    }\n  };\n};\nvar Switch = /*#__PURE__*/React.forwardRef(function Switch(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'secondary' : _props$color,\n      _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"edge\", \"size\"]);\n\n  var icon = /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.thumb\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.root, className, {\n      'start': classes.edgeStart,\n      'end': classes.edgeEnd\n    }[edge], size === \"small\" && classes[\"size\".concat(capitalize(size))])\n  }, /*#__PURE__*/React.createElement(SwitchBase, _extends({\n    type: \"checkbox\",\n    icon: icon,\n    checkedIcon: icon,\n    classes: {\n      root: clsx(classes.switchBase, classes[\"color\".concat(capitalize(color))]),\n      input: classes.input,\n      checked: classes.checked,\n      disabled: classes.disabled\n    },\n    ref: ref\n  }, other)), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.track\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiSwitch'\n})(Switch);","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListItem from '../ListItem';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.body1, _defineProperty({\n      minHeight: 48,\n      paddingTop: 6,\n      paddingBottom: 6,\n      boxSizing: 'border-box',\n      width: 'auto',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap'\n    }, theme.breakpoints.up('sm'), {\n      minHeight: 'auto'\n    })),\n    // TODO v5: remove\n\n    /* Styles applied to the root element if `disableGutters={false}`. */\n    gutters: {},\n\n    /* Styles applied to the root element if `selected={true}`. */\n    selected: {},\n\n    /* Styles applied to the root element if dense. */\n    dense: _extends({}, theme.typography.body2, {\n      minHeight: 'auto'\n    })\n  };\n};\nvar MenuItem = /*#__PURE__*/React.forwardRef(function MenuItem(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'li' : _props$component,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      ListItemClasses = props.ListItemClasses,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'menuitem' : _props$role,\n      selected = props.selected,\n      tabIndexProp = props.tabIndex,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\", \"disableGutters\", \"ListItemClasses\", \"role\", \"selected\", \"tabIndex\"]);\n\n  var tabIndex;\n\n  if (!props.disabled) {\n    tabIndex = tabIndexProp !== undefined ? tabIndexProp : -1;\n  }\n\n  return /*#__PURE__*/React.createElement(ListItem, _extends({\n    button: true,\n    role: role,\n    tabIndex: tabIndex,\n    component: component,\n    selected: selected,\n    disableGutters: disableGutters,\n    classes: _extends({\n      dense: classes.dense\n    }, ListItemClasses),\n    className: clsx(classes.root, className, selected && classes.selected, !disableGutters && classes.gutters),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiMenuItem'\n})(MenuItem);","import React from \"react\"\nimport FieldDataSet, { Example } from \"./FieldDataSet\";\nimport { unique } from \"../../jacdac-ts/src/jdom/utils\";\nimport { Paper, makeStyles, createStyles } from \"@material-ui/core\";\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => createStyles({\n    graph: {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n    },\n    mini: {\n        display: \"inline-block\",\n        width: \"10rem\"\n    }\n}));\n\nexport interface TrendProps {\n    dataSet: FieldDataSet,\n    dot?: boolean;\n    gradient?: boolean;\n}\n\nfunction UnitTrendChart(props: {\n    data: Example[],\n    useGradient: boolean,\n    unit: string,\n    horizon?: number,\n    vpw: number,\n    vph: number,\n} & TrendProps) {\n    const { dataSet, useGradient, data, unit, horizon, vpw, vph, dot } = props;\n\n    const shape = unit == \"#\" ? \"step\" : \"line\"\n    const symmetric = unit == \"g\" ? true : false\n\n    const indexes = dataSet.units\n        .map((u, index) => (u || \"/\") === unit ? index : undefined)\n        .filter(index => index !== undefined)\n    const colors = indexes.map(i => dataSet.colors[i])\n    const times = data.map(ex => ex.timestamp)\n    const maxt = Math.max.apply(null, times);\n    const mint = Math.min.apply(null, times);\n    let minv = unit == \"/\" ? 0 : Math.min.apply(null, indexes.map(i => dataSet.mins[i]));\n    let maxv = unit == \"/\" ? 1 : Math.max.apply(null, indexes.map(i => dataSet.maxs[i]));\n    const opposite = unit != \"/\" && Math.sign(minv) != Math.sign(maxv)\n    if (isNaN(minv) && isNaN(maxv)) {\n        minv = 0\n        maxv = 1\n    }\n    if (symmetric) {\n        maxv = Math.max(Math.abs(minv), Math.abs(maxv))\n        minv = -maxv\n    }\n    const rv = maxv - minv;\n\n    const margin = 2;\n    const h = (maxv - minv) || 10;\n    const w = (maxt - mint) || 10;\n\n    const strokeWidth = 0.25\n    const axisWidth = 0.2\n    const axisColor = \"#ccc\"\n    const pointRadius = strokeWidth * 1.5\n    const toffset = - pointRadius * 3\n\n    function x(t: number) {\n        return (t - mint) / w * vpw\n    }\n    function y(v: number) {\n        if (v === undefined || isNaN(v))\n            v = minv;\n        // adding random for lineragradient bug workaround\n        // which does not render perfectly\n        // horizontal lines\n        return (Math.random() * 0.0001 * rv - (v - minv)) / h * (vph - 2 * margin)\n    }\n    const lastRow = data[data.length - 1]\n\n    return (\n        <>\n            {useGradient && <defs>\n                <linearGradient key={`gradaxis`} id={`gradientaxis`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                    <stop offset=\"0%\" stopOpacity=\"0\" stopColor={axisColor} />\n                    <stop offset=\"5%\" stopOpacity=\"0\" stopColor={axisColor} />\n                    <stop offset=\"40%\" stopOpacity=\"1\" stopColor={axisColor} />\n                    <stop offset=\"100%\" stopOpacity=\"1\" stopColor={axisColor} />\n                </linearGradient>\n                {indexes.map((index, i) =>\n                    <linearGradient key={`grad${i}`} id={`gradient${index}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                        <stop offset=\"0%\" stopOpacity=\"0\" stopColor={colors[i]} />\n                        <stop offset=\"5%\" stopOpacity=\"0\" stopColor={colors[i]} />\n                        <stop offset=\"40%\" stopOpacity=\"1\" stopColor={colors[i]} />\n                        <stop offset=\"100%\" stopOpacity=\"1\" stopColor={colors[i]} />\n                    </linearGradient>)}\n            </defs>}\n            <g transform={`translate(${toffset}, ${vph - margin})`}>\n                {opposite && <line x1={x(mint)} x2={x(maxt)} y1={y(0)} y2={y(0)} strokeWidth={axisWidth} stroke={useGradient ? `url(#gradientaxis)` : axisColor} />}\n                {indexes.map((index, i) => {\n                    const color = colors[i]\n                    const path = shape == \"step\"\n                        ? data.map((row, ri) => ri == 0 ? `M ${x(row.timestamp)} ${y(row.data[index])}` : `H ${x(row.timestamp)} V ${y(row.data[index])}`).join(' ')\n                        : data.map((row, ri) => `${ri == 0 ? `M` : `L`} ${x(row.timestamp)} ${y(row.data[index])}`).join(' ');\n                    return <g key={`line${index}`}>\n                        <path d={path} fill=\"none\" stroke={useGradient ? `url(#gradient${index})` : color} strokeWidth={strokeWidth} strokeLinejoin=\"round\" />\n                        {dot && <circle cx={x(lastRow.timestamp)} cy={y(lastRow.data[index])} r={pointRadius} fill={color} />}\n                    </g>\n                })}\n            </g>\n        </>\n    )\n}\n\nfunction UnitTrend(props: {\n    unit: string,\n    horizon?: number,\n    width?: number,\n    height?: number,\n    mini?: boolean\n} & TrendProps) {\n    const { dataSet, horizon, width, height, mini, gradient } = props;\n    const { rows } = dataSet;\n    const classes = useStyles()\n    const vpw = width || 80;\n    const vph = height || 15;\n    const data = rows.slice(-horizon)\n    const useGradient = gradient || data.length < rows.length\n    return (\n        <Paper className={classes.graph} square>\n            <svg viewBox={`0 0 ${vpw} ${vph}`} style={{ maxHeight: mini ? \"5vh\" : \"10vh\", maxWidth: \"100%\" }}>\n                {data.length > 1 && <UnitTrendChart data={data} useGradient={useGradient} vpw={vpw} vph={vph} {...props} />}\n            </svg>\n        </Paper>\n    )\n}\n\nexport default function Trend(props: {\n    horizon?: number,\n    width?: number,\n    height?: number,\n    mini?: boolean\n} & TrendProps) {\n    const { dataSet, mini } = props;\n    const classes = useStyles()\n\n    const units = unique(dataSet.units.map(unit => unit || \"/\"))\n    return <div className={mini ? classes.mini : undefined}>\n        {units.map(unit => <UnitTrend key={`graph${unit}`} unit={unit} {...props} />)}\n    </div>\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport Input from '../Input';\nimport FilledInput from '../FilledInput';\nimport OutlinedInput from '../OutlinedInput';\nimport InputLabel from '../InputLabel';\nimport FormControl from '../FormControl';\nimport FormHelperText from '../FormHelperText';\nimport Select from '../Select';\nimport withStyles from '../styles/withStyles';\nvar variantComponent = {\n  standard: Input,\n  filled: FilledInput,\n  outlined: OutlinedInput\n};\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {}\n};\n/**\n * The `TextField` is a convenience wrapper for the most common cases (80%).\n * It cannot be all things to all people, otherwise the API would grow out of control.\n *\n * ## Advanced Configuration\n *\n * It's important to understand that the text field is a simple abstraction\n * on top of the following components:\n *\n * - [FormControl](/api/form-control/)\n * - [InputLabel](/api/input-label/)\n * - [FilledInput](/api/filled-input/)\n * - [OutlinedInput](/api/outlined-input/)\n * - [Input](/api/input/)\n * - [FormHelperText](/api/form-helper-text/)\n *\n * If you wish to alter the props applied to the `input` element, you can do so as follows:\n *\n * ```jsx\n * const inputProps = {\n *   step: 300,\n * };\n *\n * return <TextField id=\"time\" type=\"time\" inputProps={inputProps} />;\n * ```\n *\n * For advanced cases, please look at the source of TextField by clicking on the\n * \"Edit this page\" button above. Consider either:\n *\n * - using the upper case props for passing values directly to the components\n * - using the underlying components directly as shown in the demos\n */\n\nvar TextField = /*#__PURE__*/React.forwardRef(function TextField(props, ref) {\n  var autoComplete = props.autoComplete,\n      _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      defaultValue = props.defaultValue,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$error = props.error,\n      error = _props$error === void 0 ? false : _props$error,\n      FormHelperTextProps = props.FormHelperTextProps,\n      _props$fullWidth = props.fullWidth,\n      fullWidth = _props$fullWidth === void 0 ? false : _props$fullWidth,\n      helperText = props.helperText,\n      hiddenLabel = props.hiddenLabel,\n      id = props.id,\n      InputLabelProps = props.InputLabelProps,\n      inputProps = props.inputProps,\n      InputProps = props.InputProps,\n      inputRef = props.inputRef,\n      label = props.label,\n      _props$multiline = props.multiline,\n      multiline = _props$multiline === void 0 ? false : _props$multiline,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      placeholder = props.placeholder,\n      _props$required = props.required,\n      required = _props$required === void 0 ? false : _props$required,\n      rows = props.rows,\n      rowsMax = props.rowsMax,\n      _props$select = props.select,\n      select = _props$select === void 0 ? false : _props$select,\n      SelectProps = props.SelectProps,\n      type = props.type,\n      value = props.value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'standard' : _props$variant,\n      other = _objectWithoutProperties(props, [\"autoComplete\", \"autoFocus\", \"children\", \"classes\", \"className\", \"color\", \"defaultValue\", \"disabled\", \"error\", \"FormHelperTextProps\", \"fullWidth\", \"helperText\", \"hiddenLabel\", \"id\", \"InputLabelProps\", \"inputProps\", \"InputProps\", \"inputRef\", \"label\", \"multiline\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"placeholder\", \"required\", \"rows\", \"rowsMax\", \"select\", \"SelectProps\", \"type\", \"value\", \"variant\"]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (select && !children) {\n      console.error('Material-UI: `children` must be passed when using the `TextField` component with `select`.');\n    }\n  }\n\n  var InputMore = {};\n\n  if (variant === 'outlined') {\n    if (InputLabelProps && typeof InputLabelProps.shrink !== 'undefined') {\n      InputMore.notched = InputLabelProps.shrink;\n    }\n\n    if (label) {\n      var _InputLabelProps$requ;\n\n      var displayRequired = (_InputLabelProps$requ = InputLabelProps === null || InputLabelProps === void 0 ? void 0 : InputLabelProps.required) !== null && _InputLabelProps$requ !== void 0 ? _InputLabelProps$requ : required;\n      InputMore.label = /*#__PURE__*/React.createElement(React.Fragment, null, label, displayRequired && \"\\xA0*\");\n    }\n  }\n\n  if (select) {\n    // unset defaults from textbox inputs\n    if (!SelectProps || !SelectProps.native) {\n      InputMore.id = undefined;\n    }\n\n    InputMore['aria-describedby'] = undefined;\n  }\n\n  var helperTextId = helperText && id ? \"\".concat(id, \"-helper-text\") : undefined;\n  var inputLabelId = label && id ? \"\".concat(id, \"-label\") : undefined;\n  var InputComponent = variantComponent[variant];\n  var InputElement = /*#__PURE__*/React.createElement(InputComponent, _extends({\n    \"aria-describedby\": helperTextId,\n    autoComplete: autoComplete,\n    autoFocus: autoFocus,\n    defaultValue: defaultValue,\n    fullWidth: fullWidth,\n    multiline: multiline,\n    name: name,\n    rows: rows,\n    rowsMax: rowsMax,\n    type: type,\n    value: value,\n    id: id,\n    inputRef: inputRef,\n    onBlur: onBlur,\n    onChange: onChange,\n    onFocus: onFocus,\n    placeholder: placeholder,\n    inputProps: inputProps\n  }, InputMore, InputProps));\n  return /*#__PURE__*/React.createElement(FormControl, _extends({\n    className: clsx(classes.root, className),\n    disabled: disabled,\n    error: error,\n    fullWidth: fullWidth,\n    hiddenLabel: hiddenLabel,\n    ref: ref,\n    required: required,\n    color: color,\n    variant: variant\n  }, other), label && /*#__PURE__*/React.createElement(InputLabel, _extends({\n    htmlFor: id,\n    id: inputLabelId\n  }, InputLabelProps), label), select ? /*#__PURE__*/React.createElement(Select, _extends({\n    \"aria-describedby\": helperTextId,\n    id: id,\n    labelId: inputLabelId,\n    value: value,\n    input: InputElement\n  }, SelectProps), children) : InputElement, helperText && /*#__PURE__*/React.createElement(FormHelperText, _extends({\n    id: helperTextId\n  }, FormHelperTextProps), helperText));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTextField'\n})(TextField);"],"sourceRoot":""}