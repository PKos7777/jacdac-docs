{"version":3,"sources":["webpack:///./node_modules/@material-ui/core/esm/Card/Card.js","webpack:///./node_modules/@material-ui/icons/Check.js","webpack:///./src/components/RandomGenerator.tsx","webpack:///./node_modules/@material-ui/core/esm/CardActions/CardActions.js","webpack:///./node_modules/@material-ui/core/esm/CardContent/CardContent.js"],"names":["looksRandom","n","s","toString","h","i","length","hh","indexOf","test","genServId","cryptoRandomUint32","undefined","genFirmwareId","toFullHex","map","id","slice","join","uniqueServiceId","serviceSpecificationFromClassIdentifier","uniqueDeviceId","uniqueFirmwareId","deviceSpecificationFromFirmwareIdentifier","useStyles","makeStyles","createStyles","root","minWidth","marginBottom","title","fontSize","RandomGenerator","props","device","firmware","labelId","useId","fieldId","classes","useState","value","setValue","copySuccess","setCopySuccess","handleRegenerate","v","handleCopy","navigator","clipboard","writeText"],"mappings":"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","file":"79-beb2d7379a5dd4ae9059.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = /*#__PURE__*/React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"\n}), 'Check');\n\nexports.default = _default;","import React, { useState } from \"react\"\nimport { cryptoRandomUint32 } from \"../../jacdac-ts/src/jdom/utils\"\nimport {\n    deviceSpecificationFromFirmwareIdentifier,\n    serviceSpecificationFromClassIdentifier,\n} from \"../../jacdac-ts/src/jdom/spec\"\nimport {\n    TextField,\n    Paper,\n    Card,\n    makeStyles,\n    CardContent,\n    CardActions,\n    Typography,\n    createStyles,\n    FormControl,\n    Input,\n} from \"@material-ui/core\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport CheckIcon from \"@material-ui/icons/Check\"\n// tslint:disable-next-line: no-submodule-imports\nimport Alert from \"./ui/Alert\"\nimport { Button } from \"gatsby-theme-material-ui\"\nimport { NoSsr } from \"@material-ui/core\"\nimport { useId } from \"react-use-id-hook\"\n\nfunction looksRandom(n: number) {\n    const s = n.toString(16)\n    const h = \"0123456789abcdef\"\n    for (let i = 0; i < h.length; ++i) {\n        const hh = h[i]\n        if (s.indexOf(hh + hh + hh) >= 0) return false\n    }\n    if (/f00d|dead|deaf|beef/.test(s)) return false\n    return true\n}\n\nfunction genServId() {\n    const n = cryptoRandomUint32(1)\n    if (n === undefined) return undefined\n    return (n[0] & 0xfff_ffff) | 0x1000_0000\n}\n\nfunction genFirmwareId() {\n    const n = cryptoRandomUint32(1)\n    if (n === undefined) return undefined\n    return (n[0] & 0xfff_ffff) | 0x3000_0000\n}\n\nfunction toFullHex(n: number[]) {\n    return (\n        \"0x\" + n.map(id => (\"000000000\" + id.toString(16)).slice(-8)).join(\"\")\n    )\n}\n\nexport function uniqueServiceId() {\n    let id = genServId()\n    while (\n        id !== undefined &&\n        (!looksRandom(id) || serviceSpecificationFromClassIdentifier(id))\n    ) {\n        id = genServId()\n    }\n    return id !== undefined && toFullHex([id])\n}\n\nexport function uniqueDeviceId() {\n    const n = cryptoRandomUint32(2)\n    return n !== undefined && toFullHex([n[0], n[1]])\n}\n\nexport function uniqueFirmwareId() {\n    let id = genFirmwareId()\n    while (\n        id !== undefined &&\n        (!looksRandom(id) || deviceSpecificationFromFirmwareIdentifier(id))\n    ) {\n        id = genFirmwareId()\n    }\n    return id !== undefined && toFullHex([id])\n}\n\nconst useStyles = makeStyles(\n    createStyles({\n        root: {\n            minWidth: 275,\n            marginBottom: \"1rem\",\n        },\n        title: {\n            fontSize: 14,\n        },\n    })\n)\n\nexport default function RandomGenerator(props: {\n    device?: boolean\n    firmware?: boolean\n}) {\n    const { device, firmware } = props\n    const labelId = useId()\n    const fieldId = useId()\n    const classes = useStyles()\n    const [value, setValue] = useState(\n        device ? uniqueDeviceId() : uniqueServiceId()\n    )\n    const [copySuccess, setCopySuccess] = useState(false)\n\n    const handleRegenerate = () => {\n        const v = device\n            ? uniqueDeviceId()\n            : firmware\n            ? uniqueFirmwareId()\n            : uniqueServiceId()\n        setValue(v)\n        setCopySuccess(false)\n    }\n    const handleCopy = async () => {\n        try {\n            await navigator.clipboard.writeText(value)\n            setCopySuccess(true)\n        } catch (err) {\n            setCopySuccess(false)\n        }\n    }\n    const title = device\n        ? \"Random Device Identifier\"\n        : firmware\n        ? \"Random Firmware Identifier\"\n        : \"Random Service Identifier\"\n    return (\n        <NoSsr>\n            <Card className={classes.root}>\n                <CardContent>\n                    <Typography\n                        id={labelId}\n                        className={classes.title}\n                        color=\"textSecondary\"\n                        gutterBottom\n                    >\n                        {title}\n                    </Typography>\n                    {value !== undefined && (\n                        <Typography variant=\"h5\" component=\"h2\">\n                            <Input\n                                id={fieldId}\n                                value={value}\n                                readOnly={true}\n                                inputProps={{\n                                    \"aria-labelledby\": labelId,\n                                }}\n                            />\n                            {copySuccess && <CheckIcon />}\n                        </Typography>\n                    )}\n                    {value === undefined && (\n                        <Alert severity=\"error\">\n                            Oops, unable to generate a strong random number.\n                        </Alert>\n                    )}\n                </CardContent>\n                <CardActions>\n                    <Button\n                        aria-label=\"copy random number to clipboard\"\n                        size=\"small\"\n                        variant=\"contained\"\n                        onClick={handleCopy}\n                    >\n                        Copy\n                    </Button>\n                    <Button\n                        aria-label=\"regenerate random number\"\n                        size=\"small\"\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleRegenerate}\n                    >\n                        Regenerate\n                    </Button>\n                </CardActions>\n            </Card>\n        </NoSsr>\n    )\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  },\n\n  /* Styles applied to the root element if `disableSpacing={false}`. */\n  spacing: {\n    '& > :not(:first-child)': {\n      marginLeft: 8\n    }\n  }\n};\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(props, ref) {\n  var _props$disableSpacing = props.disableSpacing,\n      disableSpacing = _props$disableSpacing === void 0 ? false : _props$disableSpacing,\n      classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"disableSpacing\", \"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, !disableSpacing && classes.spacing),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardActions'\n})(CardActions);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  }\n};\nvar CardContent = /*#__PURE__*/React.forwardRef(function CardContent(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\"]);\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardContent'\n})(CardContent);"],"sourceRoot":""}