{"version":3,"file":"component---src-templates-service-tsx-47f9b72d9c3e5d844d63.js","mappings":"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AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;;AAEA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0CAAwB;;AAEtC,eAAe,YAAY;AAC3B,EAAE,eAAe;AACjB;AACA,GAAG;AACH,EAAE,eAAe;AACjB,uBAAuB,2BAAQ;AAC/B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,sBAAsB,mBAAmB,YAAY,8BAAQ;AAC7D,eAAe,yBAAI;AACnB;AACA,GAAG,uBAAuB,mBAAmB;AAC7C;AACA,GAAG,EAAE,kBAAkB;AACvB,uBAAuB,oBAAoB;AAC3C;AACA;;AAEA,gCAAgC,+BAAY;AAC5C,0BAA0B,kBAAkB;AAC5C;AACA,OAAO;AACP;;AAEA;AACA,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,CAAM;AAC9C,gEAAe,6BAAU,CAAC,oBAAM;AAChC;AACA,CAAC,gBAAgB;;AC5HyC;AACgC;AAC3D;AACP;AACsB;AACe;AACtD,IAAI,uBAAM;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,0CAAwB;;AAEtC;AACA;AACA,sBAAsB,mBAAmB,QAAQ,8BAAQ;AACzD,eAAe,yBAAI;AACnB;AACA;AACA,KAAK;AACL;AACA,GAAG,uBAAuB,mBAAmB;AAC7C,eAAe,yBAAI;AACnB;AACA;AACA,KAAK;AACL,GAAG,eAAe,mBAAmB;AACrC;AACA,GAAG,kCAAkC,mBAAmB;AACxD;AACA,GAAG,+CAA+C,mBAAmB;AACrE,eAAe,yBAAI;AACnB,GAAG;AACH,CAAC;AACD,MAAqC,GAAG,CAAM;AAC9C,sEAAe,6BAAU,CAAC,uBAAM;AAChC;AACA,CAAC,mBAAmB;;;;;;;;;;;;;;;;;;;;;;ACtHpB;AACA;CAaA;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAM5F,SAAS,GAAGP,6BAAU,CAAE0E,KAAD,IACzB3E,+BAAY,CAAC;AACTS,EAAAA,IAAI,EAAE;AACFwH,IAAAA,OAAO,EAAE,MADP;AAEFC,IAAAA,QAAQ,EAAE,MAFR;AAGFC,IAAAA,cAAc,EAAE,cAHd;AAIFC,IAAAA,QAAQ,EAAE,QAJR;AAKFC,IAAAA,eAAe,EAAE1D,KAAK,CAAC2D,OAAN,CAAcC,UAAd,CAAyBC;AALxC,GADG;AAQTC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,YAAY,EAAE;AADR,GARD;AAWTC,EAAAA,IAAI,EAAE;AACFC,IAAAA,KAAK,EAAE;AADL;AAXG,CAAD,CADY,CAA5B;AAkBe,SAASC,uBAAT,CAAiC9H,KAAjC,EAKZ;AACC,MAAM;AAAE+H,IAAAA,KAAF;AAASC,IAAAA,OAAT;AAAkBC,IAAAA,sBAAlB;AAA0CC,IAAAA;AAA1C,MAAsDlI,KAA5D;AACA,MAAMI,OAAO,GAAGX,SAAS,EAAzB;AACA,MAAM;AAAE0I,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAqBnB,kCAAe,EAA1C;AACA,MAAMoB,IAAI,GAAGF,MAAM,GAAG,CAAH,GAAOC,MAAM,GAAG,CAAH,GAAO,CAAvC;AACA,MAAME,KAAK,GAAGnO,iBAAO,CAAC,MAAM;AACxB,QAAI6E,CAAC,GAAG2H,0CAAoB,GAAGjL,MAAvB,CACJ6M,IAAI,IAAIA,IAAI,CAACC,MAAL,KAAgB,YADpB,CAAR;AAGA,QAAIN,OAAJ,EAAalJ,CAAC,GAAGA,CAAC,CAACtD,MAAF,CAAS6M,IAAI,IAAIA,IAAI,CAACL,OAAL,KAAiBA,OAAlC,CAAJ;AACb,QAAID,sBAAJ,EACIjJ,CAAC,GAAGA,CAAC,CAACtD,MAAF,CACA6M,IAAI,IACAA,IAAI,CAAC9C,QAAL,CAActK,MAAd,IACA8M,sBAAsB,CAACQ,KAAvB,CACI/C,GAAG,IAAI6C,IAAI,CAAC9C,QAAL,CAAc5J,OAAd,CAAsB6J,GAAtB,IAA6B,CAAC,CADzC,CAHJ,CAAJ;AAOJ,QAAIsC,OAAJ,EAAajB,6BAAY,CAAC/H,CAAD,CAAZ;AACb,QAAI+I,KAAK,KAAKhO,SAAd,EAAyBiF,CAAC,GAAGA,CAAC,CAAC0J,KAAF,CAAQ,CAAR,EAAWX,KAAX,CAAJ;AACzB,WAAO/I,CAAP;AACH,GAhBoB,EAgBlB,CAACiJ,sBAAD,EAAyBD,OAAzB,EAAkCD,KAAlC,CAhBkB,CAArB;AAkBA,MAAI,CAACO,KAAK,CAACnN,MAAX,EACI,oBACI,oBAAC,yBAAD;AAAY,WAAO,EAAC;AAApB,iCADJ;AAIJ,sBACI,oBAAC,mBAAD;AAAW,aAAS,EAAEiF,OAAO,CAACV,IAA9B;AAAoC,QAAI,EAAE2I;AAA1C,KACKC,KAAK,CAACrM,GAAN,CAAUsM,IAAI,IAAI;AACf,QAAMI,QAAQ,GAAG3B,iCAAc,CAACuB,IAAD,CAA/B;AACA,wBACI,oBAAC,2BAAD;AAAe,SAAG,EAAEA,IAAI,CAAC9K;AAAzB,oBACI;AAAK,SAAG,EAAEkL,QAAV;AAAoB,SAAG,EAAEJ,IAAI,CAAClN,IAA9B;AAAoC,aAAO,EAAC;AAA5C,MADJ,eAEI,oBAAC,iCAAD;AACI,WAAK,EAAEkN,IAAI,CAAClN,IADhB;AAEI,cAAQ,eACJ,oBAAC,uBAAD;AACI,iBAAS,EAAE+E,OAAO,CAACsH,QADvB;AAEI,cAAM,EAAEa,IAAI,CAACK,WAAL,CAAiB1N,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,EAA+B,CAA/B;AAFZ,QAHR;AAQI,gBAAU,eACN,uDACI,oBAAC,mCAAD;AACI,UAAE,gBAAc0L,yCAAmB,CAC/B2B,IAAI,CAAC9K,EAD0B,CADvC;AAII,sCAA0B8K,IAAI,CAAClN,IAJnC;AAKI,iBAAS,EAAE+E,OAAO,CAACwH;AALvB,sBAOI,oBAAC,mBAAD,OAPJ,CADJ;AATR,MAFJ,CADJ;AA2BH,GA7BA,CADL,CADJ;AAkCH;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3GD;AACA;AACA;AAEe,SAASoB,iBAAT,CAA2BhJ,KAA3B,EAA4D;AACvE,MAAM;AAAEiJ,IAAAA;AAAF,MAAmBjJ,KAAzB;AACA,MAAMuI,IAAI,GAAGO,6DAAuC,CAACG,YAAD,CAApD;AACA,MAAMC,KAAK,GAAGrK,MAAM,CAACsK,MAAP,CAAc,CAAAZ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEW,KAAN,KAAe,EAA7B,EAAiCxN,MAAjC,CAAwC0N,EAAE,IAAI,CAACA,EAAE,CAACC,OAAlD,CAAd;AACA,MAAI,CAACH,KAAK,CAAC/N,MAAX,EACI,oBAAO,yCAAP;AAEJ,sBAAO,oBAAC,cAAD,qBACH,wCADG,EAEF+N,KAAK,CAACjN,GAAN,CAAUqN,CAAC,iBAAI,oBAAC,cAAD;AAAU,OAAG,EAAEA,CAAC,CAACjO;AAAjB,kBACZ,gCAAKiO,CAAC,CAACjO,IAAP,OAAciO,CAAC,CAACC,OAAF,iBAAa,oBAAC,mBAAD;AAAM,SAAK,EAAC,OAAZ;AAAoB,QAAI,EAAC;AAAzB,IAA3B,CADY,eAEZ,gCACK1K,MAAM,CAACC,IAAP,CAAYwK,CAAC,CAACE,OAAd,EAAuBvN,GAAvB,CAA2BmN,EAAE,iBAAI;AAAI,OAAG,EAAEA;AAAT,KAAcA,EAAd,qBAAmB,wCAASE,CAAC,CAACE,OAAF,CAAUJ,EAAV,EAAcK,QAAd,CAAuB,EAAvB,CAAT,CAAnB,CAAjC,CADL,CAFY,CAAf,CAFE,CAAP;AASH;;;;;;;;;;;;;;;;ACpBD;AACA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASc,uBAAT,CAAiCvK,KAAjC,EAAkE;AAC9D,MAAM;AAAEiJ,IAAAA;AAAF,MAAmBjJ,KAAzB;AACA,MAAM;AAAEE,IAAAA;AAAF,MAAU9F,oBAAU,CAAqBmF,sBAArB,CAA1B;AACA,MAAMiL,OAAO,GAAG5F,4BAAS,CAAC1E,GAAD,EAAMuK,CAAC,IAAIA,CAAC,CAACD,OAAF,CAAU;AAAEvB,IAAAA;AAAF,GAAV,CAAX,CAAzB;AACA,sBACI,oBAAC,mBAAD;AAAM,aAAS,MAAf;AAAgB,WAAO,EAAE;AAAzB,KACKuB,OAAO,CAACvO,GAAR,CAAYgJ,MAAM,iBACf,oBAAC,kCAAD;AACI,OAAG,EAAEA,MAAM,CAACxH,EADhB;AAEI,UAAM,EAAEwH,MAFZ;AAGI,cAAU,EAAE,IAHhB;AAII,cAAU,EAAE;AAJhB,IADH,CADL,CADJ;AAYH;;AAEc,SAASyF,oBAAT,CAA8B1K,KAA9B,EAGZ;AAAA;;AACC,MAAM;AAAE2K,IAAAA,OAAO,EAAEC,IAAX;AAAiBC,IAAAA;AAAjB,MAAiC7K,KAAvC;AACA,MAAM;AAAE8K,IAAAA,OAAF;AAAWzP,IAAAA,IAAX;AAAiB0P,IAAAA;AAAjB,MAAqCH,IAA3C;AACA,MAAMI,OAAO,GAAGJ,IAAI,CAACI,OAAL,CAAatP,MAAb,CAAoBiF,GAAG,IAAIkK,WAAW,IAAI,CAAClK,GAAG,CAAC0I,OAA/C,CAAhB;AACA,MAAM4B,SAAS,GAAGD,OAAO,CAACtP,MAAR,CAAeiO,4BAAf,CAAlB;AACA,MAAMuB,MAAM,GAAGF,OAAO,CAACtP,MAAR,CAAekO,yBAAf,CAAf;AACA,MAAMuB,QAAQ,GAAGH,OAAO,CAACtP,MAAR,CAAemO,2BAAf,CAAjB;AACA,MAAMuB,OAAO,GAAGJ,OAAO,CAACtP,MAAR,CAAesD,CAAC,IAAIA,CAAC,CAACqM,SAAtB,CAAhB;AACA,MAAMC,WAAW,GAAGN,OAAO,CAACtP,MAAR,CAAeoO,8BAAf,CAApB;AACA,MAAMyB,MAAM,GAAGP,OAAO,CAACtP,MAAR,CACXsD,CAAC,IACGiM,SAAS,CAACpP,OAAV,CAAkBmD,CAAlB,IAAuB,CAAvB,IACAkM,MAAM,CAACrP,OAAP,CAAemD,CAAf,IAAoB,CADpB,IAEAmM,QAAQ,CAACtP,OAAT,CAAiBmD,CAAjB,IAAsB,CAFtB,IAGAoM,OAAO,CAACvP,OAAR,CAAgBmD,CAAhB,IAAqB,CAHrB,IAIAsM,WAAW,CAACzP,OAAZ,CAAoBmD,CAApB,IAAyB,CANlB,CAAf,CATD,CAiBC;;AACAqL,EAAAA,qDAAkC,CAACO,IAAI,CAACG,eAAN,CAAlC;;AAEA,MAAMS,QAAQ,GAAI7K,GAAD,IACbyK,OAAO,CAACK,IAAR,CAAaC,GAAG,IAAI3B,gCAAU,CAACpJ,GAAD,EAAM+K,GAAN,CAA9B,CADJ;;AAEA,MAAMC,YAAY,GAAIhL,GAAD,IACjB2K,WAAW,CAACG,IAAZ,CAAiBC,GAAG,IAAI1B,oCAAc,CAACrJ,GAAD,EAAM+K,GAAN,CAAtC,CADJ;;AAGA,sBACI,uDACI;AAAI,OAAG,EAAC;AAAR,KACKrQ,IADL,eAEI,oBAAC,kBAAD;AAAK,MAAE,EAAE,CAAT;AAAY,aAAS,EAAC;AAAtB,kBACI,oBAAC,qBAAD;AACI,MAAE,EAAEuP,IAAI,CAACG,eADb;AAEI,UAAM,WAASD;AAFnB,IADJ,CAFJ,CADJ,eAUI,oBAAC,8CAAD;AAAiC,iBAAa,EAAEF;AAAhD,IAVJ,eAWI,oBAAC,uBAAD;AAAU,OAAG,EAAC,YAAd;AAA2B,UAAM,EAAEA,IAAI,CAACgB,KAAL,CAAWC;AAA9C,IAXJ,EAYK,CAAC,mBAACjB,IAAI,CAACkB,OAAN,0CAAC,cAAc3Q,MAAf,CAAD,iBACG;AAAG,OAAG,EAAC;AAAP,kBACI,6CADJ,EAEKyP,IAAI,CAACkB,OAAL,CAAa7P,GAAb,CAAiB,CAAC8P,MAAD,EAASC,CAAT,kBACd,oBAAC,cAAD;AAAU,OAAG,aAAWD;AAAxB,KACKC,CAAC,GAAG,CAAJ,iBAAS,uCADd,eAEI,oBAAC,6BAAD;AACI,OAAG,aAAWD,MADlB;AAEI,MAAE,iBAAeA,MAAf;AAFN,KAIKrC,kDAA4B,CAACqC,MAAD,CAA5B,CAAqC1Q,IAJ1C,CAFJ,CADH,CAFL,MAbR,eA6BI,oBAAC,uBAAD;AAAU,OAAG,EAAC,WAAd;AAA0B,UAAM,EAAEuP,IAAI,CAACgB,KAAL,CAAWK,IAAX,IAAmB;AAArD,IA7BJ,eA8BI,oBAAC,uBAAD;AAAyB,gBAAY,EAAElB;AAAvC,IA9BJ,eA+BI,oBAAC,iBAAD;AAAmB,OAAG,EAAC,OAAvB;AAA+B,gBAAY,EAAEA;AAA7C,IA/BJ,EAgCK,CACG;AACI1P,IAAAA,IAAI,EAAE,WADV;AAEI2P,IAAAA,OAAO,EAAEC,SAFb;AAGIiB,IAAAA,IAAI,EAAEtB,IAAI,CAACgB,KAAL,CAAW,WAAX;AAHV,GADH,EAMG;AAAEvQ,IAAAA,IAAI,EAAE,QAAR;AAAkB2P,IAAAA,OAAO,EAAEE,MAA3B;AAAmCgB,IAAAA,IAAI,EAAEtB,IAAI,CAACgB,KAAL,CAAW,QAAX;AAAzC,GANH,EAOG;AACIvQ,IAAAA,IAAI,EAAE,UADV;AAEI2P,IAAAA,OAAO,EAAEG,QAFb;AAGIe,IAAAA,IAAI,EAAEtB,IAAI,CAACgB,KAAL,CAAW,UAAX;AAHV,GAPH,EAYG;AAAEvQ,IAAAA,IAAI,EAAE,QAAR;AAAkB2P,IAAAA,OAAO,EAAEO,MAA3B;AAAmCW,IAAAA,IAAI,EAAEtB,IAAI,CAACgB,KAAL,CAAW,QAAX;AAAzC,GAZH,EAcIlQ,MAdJ,CAcWyQ,KAAK,IAAIA,KAAK,CAACnB,OAAN,CAAc7P,MAdlC,EAeIc,GAfJ,CAeQkQ,KAAK,iBACN,oBAAC,cAAD;AAAU,OAAG,YAAUA,KAAK,CAAC9Q;AAA7B,kBACI,gCAAK8Q,KAAK,CAAC9Q,IAAX,CADJ,EAEK8Q,KAAK,CAACD,IAAN,iBACG,oBAAC,uBAAD;AACI,OAAG,WAASC,KAAK,CAAC9Q,IADtB;AAEI,UAAM,EAAE8Q,KAAK,CAACD;AAFlB,IAHR,EAQKC,KAAK,CAACnB,OAAN,CACIoB,IADJ,CAEO,CAACC,CAAD,EAAIrN,CAAJ,KACI,CAACqN,CAAC,CAAChD,OAAF,GAAY,CAAZ,GAAgB,CAAC,CAAlB,KAAwBrK,CAAC,CAACqK,OAAF,GAAY,CAAZ,GAAgB,CAAC,CAAzC,CAHX,EAKIpN,GALJ,CAKQ0E,GAAG,iBACJ,oBAAC,kCAAD;AACI,OAAG,UAAQA,GAAG,CAAC2L,UADnB;AAEI,gBAAY,EAAE1B,IAAI,CAACG,eAFvB;AAGI,cAAU,EAAEpK,GAHhB;AAII,cAAU,EAAE6K,QAAQ,CAAC7K,GAAD,CAJxB;AAKI,kBAAc,EAAEgL,YAAY,CAAChL,GAAD,CALhC;AAMI,eAAW,EAAE;AANjB,IANP,CARL,CAhBP,CAhCL,CADJ;AA4EH;;;;;;;;;;;;;;;;;AChJD;AACA;AAEe,SAASnB,QAAT,CAAkBQ,KAAlB,EAAgG;AAC3G,MAAM;AAAEoD,IAAAA,QAAF;AAAYqJ,IAAAA,OAAZ;AAAqBC,IAAAA,SAArB;AAAgCC,IAAAA;AAAhC,MAAuD3M,KAA7D;AAAA,MAAkDuL,MAAlD,2GAA6DvL,KAA7D;;AACA,MAAM4D,KAAK,GAAG4I,sEAAQ,EAAtB;AAEA,sBAAO,iDAAC,kEAAD,oBAASjB,MAAT;AAAiB,WAAO,EAAEoB,OAA1B;AAAmC,MAAE,EAAE/I,KAAK,CAACgJ,OAAN,CAAc,IAAd;AAAvC,mBACH,iDAAC,kEAAD;AAAO,UAAM,MAAb;AAAc,aAAS,EAAEF;AAAzB,KACKD,OAAO,KAAK,CAAZ,iBAAiB,iDAAC,kEAAD;AAAK,KAAC,EAAE7I,KAAK,CAACgJ,OAAN,CAAcH,OAAO,IAAI,IAAzB;AAAR,KACbrJ,QADa,CADtB,EAIKqJ,OAAO,KAAK,CAAZ,IAAiBrJ,QAJtB,CADG,CAAP;AAQH;;;;;;;;;;;;;ACfD;AACA;AACA;AAEe,SAASyJ,OAAT,CAAiB7M,KAAjB,EAOZ;AACC,MAAM;AAAE1E,IAAAA,KAAF;AAASwR,IAAAA,IAAT;AAAeC,IAAAA,QAAf;AAAyB1M,IAAAA,GAAzB;AAA8B2M,IAAAA,OAA9B;AAAuCvJ,IAAAA;AAAvC,MAAmDzD,KAAzD;AACA,MAAMgG,CAAS,GAAG,OAAO1K,KAAP,KAAiB,UAAjB,GAA8BA,KAAK,EAAnC,GAAwCA,KAA1D;AACA,MAAMgI,SAAS,GAAGwJ,IAAI,mBAAgBA,IAAI,KAAK,KAAT,GAAiB,IAAjB,GAAwBA,IAAxC,CAAtB;AACA,sBACI,iHACI,iDAAC,kDAAD;AACI,aAAS,EAAExJ,SADf;AAEI,gBAAY,EAAEyJ,QAFlB;AAGI,gBAAY,EAAEA,QAAQ,IAAI/G,CAH9B;AAII,WAAO,EAAEvC,OAJb;AAKI,OAAG,EAAEpD;AALT,KAOK2F,CAPL,CADJ,EAUKgH,OAAO,iBAAI,iDAAC,kEAAD;AAAY,WAAO,EAAC;AAApB,KAA+BA,OAA/B,CAVhB,CADJ;AAcH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BD;AACA;AAOO,IAAKK,uBAAZ;;WAAYA;AAAAA,EAAAA,wBAAAA;AAAAA,EAAAA,wBAAAA;GAAAA,4BAAAA;;AAmBL,SAASC,8CAAT,CACHC,aADG,EAEY;AACf,MAAI,CAACA,aAAL,EAAoB,OAAOxT,SAAP;AAEpB,MAAM;AACFgR,IAAAA,eAAe,EAAE9B,YADf;AAEFuE,IAAAA,SAAS,EAAEnS,IAFT;AAGF2P,IAAAA;AAHE,MAIFuC,aAJJ;AAMA,MAAMtC,SAAS,GAAGD,OAAO,CACpBtP,MADa,CACNwR,qCADM,EACe;AADf,GAEbjR,GAFa,CAEgBwR,GAAG,IAAI;AACjC,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAID,GAAG,CAACE,IAAJ,IAAY,OAAhB,EAAyBD,KAAK,IAAIL,uBAAuB,CAACO,KAAjC;AACzB,QAAIH,GAAG,CAACI,QAAR,EAAkBH,KAAK,IAAIL,uBAAuB,CAACS,QAAjC;AAClB,QAAM9O,CAA0B,GAAG;AAC/BrE,MAAAA,IAAI,EAAE8S,GAAG,CAACnB,UADqB;AAE/BjR,MAAAA,IAAI,EAAEoS,GAAG,CAACpS,IAFqB;AAG/BqS,MAAAA,KAH+B;AAI/BK,MAAAA,KAAK,EAAEN,GAAG,CAACO,UAJoB;AAK/BC,MAAAA,MAAM,EACFR,GAAG,CAACQ,MAAJ,CAAW9S,MAAX,GAAoB,CAApB,GACMsS,GAAG,CAACQ,MAAJ,CAAWhS,GAAX,CAAesB,CAAC,IAAIA,CAAC,CAAClC,IAAtB,CADN,GAEMtB;AARqB,KAAnC;AAUA,WAAOiF,CAAP;AACH,GAjBa,CAAlB;AAkBA,MAAMkP,KAAsB,GAAG;AAC3BjF,IAAAA,YAD2B;AAE3B5N,IAAAA,IAF2B;AAG3B4P,IAAAA;AAH2B,GAA/B;AAKA,SAAOiD,KAAP;AACH;AAEM,SAASC,iDAAT,GAA6D;AAChE,MAAM7F,KAAK,IACPQ,uCAAuC,CAACmE,WAAD,CADhC,4BAEJG,qBAAqB,GAAG1R,MAAxB,CAA+BgK,GAAG,IAAI,CAACyH,gBAAgB,CAACzH,GAAD,CAAvD,CAFI,EAAX;AAIA,SAAO4C,KAAP;AACH;;;;ACtED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe,SAAS+F,0BAAT,CAAoCrO,KAApC,EAIZ;AACC,MAAM;AAAE+K,IAAAA,eAAF;AAAmBuD,IAAAA,oBAAnB;AAAyCC,IAAAA;AAAzC,MAA+DvO,KAArE;AACA,MAAM;AAAA,OAACgC,GAAD;AAAA,OAAMC;AAAN,MAAgBf,kBAAQ,CAAC,CAAD,CAA9B;AACA,MAAMqH,IAAI,GACN+F,oBAAoB,IACpBxF,6DAAuC,CAACiC,eAAD,CAF3C;AAGA,MAAMyD,KAAK,GAAGJ,6BAAU,EAAxB;AACA,MAAMK,cAAc,GAAGlG,IAAI,IAAI,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEiF,SAAN,MAAoB,OAAnD;;AAEA,MAAMtL,eAAe,GAAG,CACpBC,KADoB,EAEpBC,QAFoB,KAGnB;AACDH,IAAAA,MAAM,CAACG,QAAD,CAAN;AACH,GALD;;AAOA,MAAI+B,KAAK,GAAG,CAAZ;AACA,sBACI,oBAAC,oBAAD;AAAO,UAAM;AAAb,kBACI,oBAAC,mBAAD;AACI,SAAK,EAAEnC,GADX;AAEI,YAAQ,EAAEE,eAFd;AAGI,kBAAW;AAHf,KAKK,CACGqM,iBAAiB,IAAI,eADxB,EAEG,UAFH,EAGG,YAHH,EAIG,GAJH,EAKG,MALH,EAMGE,cAAc,IAAI,MANrB,EAQI/S,MARJ,CAQWgT,CAAC,IAAI,CAAC,CAACA,CARlB,EASIzS,GATJ,CASQyS,CAAC,iBACF,oBAAC,kBAAD;AAAK,OAAG,EAAEA,CAAV;AAAa,SAAK,EAAEA;AAApB,IAVP,CALL,CADJ,EAmBKH,iBAAiB,iBACd,oBAAC,uBAAD;AAAU,OAAG,EAAC,MAAd;AAAqB,SAAK,EAAEvM,GAA5B;AAAiC,SAAK,EAAEmC,KAAK;AAA7C,kBACI,oBAAC,mCAAD;AAAsB,WAAO,EAAEoE;AAA/B,IADJ,CApBR,EAwBK,CAAC,KAAD,EAAQ,IAAR,EAAc,GAAd,EAAmB,MAAnB,EAA2BtM,GAA3B,CAA+BO,IAAI,iBAChC,oBAAC,uBAAD;AAAU,OAAG,WAASA,IAAtB;AAA8B,SAAK,EAAEwF,GAArC;AAA0C,SAAK,EAAEmC,KAAK;AAAtD,kBACI,oBAAC,sBAAD;AAAS,SAAK,EAAE,MAAMqK,KAAK,CAAChS,IAAD,CAAL,CAAY+L,IAAZ,CAAtB;AAAyC,QAAI,EAAE/L;AAA/C,IADJ,CADH,CAxBL,EA6BKiS,cAAc,iBACX,oBAAC,uBAAD;AAAU,OAAG,EAAC,YAAd;AAA2B,SAAK,EAAEzM,GAAlC;AAAuC,SAAK,EAAEmC,KAAK;AAAnD,kBACI,oBAAC,sBAAD;AACI,QAAI,EAAC,MADT;AAEI,OAAG,EAAE5C,mCAAU,sBACQgH,IAAI,CAACwC,eAAL,CAAqBtB,QAArB,CACf,EADe,CADR,WAFnB;AAOI,SAAK,EAAE9H,IAAI,CAACgN,SAAL,CACHrB,8CAA8C,CAC1C/E,IAD0C,CAD3C,EAIH,IAJG,EAKH,CALG;AAPX,IADJ,CA9BR,CADJ;AAmDH;;ACnFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe,SAASsG,eAAT,CAAyB7O,KAAzB,EAGZ;AACC,MAAM;AAAE+K,IAAAA,eAAF;AAAmBtQ,IAAAA;AAAnB,MAA8BuF,KAApC;AACA,MAAM2K,OAAO,GAAG7B,6DAAuC,CAACiC,eAAD,CAAvD;AACA,MAAM;AAAED,IAAAA;AAAF,MAAcH,OAApB;AAEA,sBACI,uDACI,oBAAC,8CAAD;AAAiC,iBAAa,EAAEA;AAAhD,IADJ,eAEI,oBAAC,uBAAD;AAAU,UAAM,EAAElQ;AAAlB,IAFJ,eAII,oBAAC,mBAAD;AAAM,aAAS,MAAf;AAAgB,WAAO,EAAE;AAAzB,kBACI,oBAAC,mBAAD;AAAM,QAAI;AAAV,kBACI,oBAAC,+BAAD;AACI,WAAO,EAAC,WADZ;AAEI,MAAE,iBAAeqQ,OAAf;AAFN,kBADJ,CADJ,CAJJ,eAeI,qDAfJ,eAgBI,oBAAC,kCAAD;AACI,0BAAsB,EAAE,CAACC,eAAD;AAD5B,IAhBJ,eAoBI,0CApBJ,eAqBI,oBAAC,0BAAD;AAA4B,wBAAoB,EAAEJ;AAAlD,IArBJ,eAuBI,4CAvBJ,eAwBI,6CACI,6CACI;AACI,QAAI,8DAA4DG,OAA5D;AADR,iCADJ,MADJ,eASI,wCACS,GADT,eAEI,oBAAC,6BAAD;AAAM,MAAE,EAAC;AAAT,sCAFJ,EAIY,GAJZ,cATJ,eAgBI,gFACiD,GADjD,eAEI,oBAAC,6BAAD;AAAM,MAAE,EAAC;AAAT,sBAFJ,CAhBJ,eAoBI,yEAC0C,GAD1C,eAEI,oBAAC,6BAAD;AAAM,MAAE;AAAR,kCAFJ,CApBJ,CAxBJ,CADJ;AAsDH;;ACvED;CAGA;;AACe,SAASgE,IAAT,CAAc9O,KAAd,EAA2C;AACtD,sBAAO,oBAAC,eAAD,EAAqBA,KAAK,CAAC+O,WAA3B,CAAP;AACH","sources":["webpack://jacdac-docs/./node_modules/@material-ui/icons/GetApp.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Info.js","webpack://jacdac-docs/./node_modules/@material-ui/icons/Launch.js","webpack://jacdac-docs/./src/components/hooks/useWindowEvent.ts","webpack://jacdac-docs/./src/components/makecode/useMakeCodeRenderer.ts","webpack://jacdac-docs/./src/components/makecode/MakeCodeSimulator.tsx","webpack://jacdac-docs/./src/components/makecode/MakeCodeSnippet.tsx","webpack://jacdac-docs/./src/components/CodeBlock.tsx","webpack://jacdac-docs/./src/components/dashboard/DashboardDeviceItem.tsx","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/ImageList/ImageList.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/ImageListItem/ImageListItem.js","webpack://jacdac-docs/./node_modules/@material-ui/core/esm/ImageListItemBar/ImageListItemBar.js","webpack://jacdac-docs/./src/components/specification/DeviceSpecificationList.tsx","webpack://jacdac-docs/./src/components/EnumSpecification.tsx","webpack://jacdac-docs/./src/components/specification/ServiceSpecification.tsx","webpack://jacdac-docs/./src/components/ui/PaperBox.tsx","webpack://jacdac-docs/./src/components/ui/Snippet.tsx","webpack://jacdac-docs/./jacdac-ts/src/azure-iot/devicetwin.ts","webpack://jacdac-docs/./src/components/specification/ServiceSpecificationSource.tsx","webpack://jacdac-docs/./src/components/ServiceMarkdown.tsx","webpack://jacdac-docs/./src/templates/service.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'GetApp');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"\n}), 'Info');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\"\n}), 'Launch');\n\nexports.default = _default;","import { DependencyList, useEffect } from \"react\"\n\nexport default function useWindowEvent<K extends keyof WindowEventMap>(type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    passive = false,\n    deps: DependencyList) {\n    useEffect(() => {\n        if (typeof window === \"undefined\")\n            return undefined; // SSR\n\n        // initiate the event handler\n        window.addEventListener<K>(type, listener, passive)\n\n        // this will clean up the event every time the component is re-rendered\n        return () => {\n            window.removeEventListener<K>(type, listener)\n        }\n    }, [type, listener, passive].concat(deps || []))\n}","import { useMemo, useContext } from \"react\";\nimport { unique } from \"../../../jacdac-ts/src/jdom/utils\";\nimport { makeCodeServices } from \"./services\"\nimport useWindowEvent from \"../hooks/useWindowEvent\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\";\n\nexport interface MakeCodeSnippetSource {\n    code: string;\n    ghost?: string;\n    meta: {\n        editor?: string;\n        snippet?: boolean;\n        dependencies: string[];\n    }\n}\n\nexport interface MakeCodeSnippetRendered {\n    uri?: string;\n    width?: number;\n    height?: number;\n    error?: string;\n}\n\n\n\nexport function parseMakeCodeSnippet(source: string): MakeCodeSnippetSource {\n    let ghost: string;\n    let code: string;\n    const meta: {\n        editor?: string;\n        snippet?: boolean;\n        dependencies: string[];\n    } = {\n        dependencies: []\n    }\n\n    if (/^---\\n/.test(source)) {\n        let front: string;\n        const parts = source.replace(/^---\\n/, '').split(/---\\n/gm)\n        switch (parts.length) {\n            case 1: front = ghost = undefined; code = source; break;\n            case 2: [front, code] = parts; break;\n            default: [front, ghost, code] = parts; break;\n        }\n\n        // parse front matter\n        front?.replace(/(.+):\\s*(.+)\\s*\\n/g, (m, name, value) => {\n            switch (name) {\n                case \"dep\": meta.dependencies.push(value); break;\n                case \"snippet\": meta.snippet = !!value; break;\n                default: meta[name] = value;\n            }\n            return \"\";\n        })\n    } else {\n        code = source;\n    }\n\n    // sniff services\n    const mkcds = makeCodeServices()\n    mkcds.filter(info => {\n        const src = (ghost || \"\") + \"\\n\" + (code || \"\");\n        return src.indexOf(info.client.qName) > -1\n            || (info.client.default && src.indexOf(info.client.default) > -1);\n    }).map(info => `${info.client.name.replace(/^pxt-/, '')}=github:${info.client.repo}`)\n        .forEach(dep => meta.dependencies.push(dep));\n\n    // add jacdac by default\n    if (!meta.dependencies.length)\n        meta.dependencies.push(\"jacdac=github:microsoft/pxt-jacdac\");\n\n    // ensure unique deps\n    meta.dependencies = unique(meta.dependencies);\n\n    return {\n        code,\n        ghost,\n        meta\n    }\n}\n\ninterface RenderBlocksRequestMessage {\n    type: \"renderblocks\",\n    id: string;\n    code: string;\n    ghost?: string;\n    options?: {\n        packageId?: string;\n        package?: string;\n        snippetMode?: boolean;\n        dependencies?: string[];\n    }\n}\n\ninterface RenderBlocksResponseMessage {\n    source: \"makecode\",\n    type: \"renderblocks\",\n    id: string;\n    uri?: string;\n    css?: string;\n    svg?: string;\n    width?: number;\n    height?: number;\n    error?: string;\n}\n\ninterface RenderBlocksRequentResponse {\n    req: RenderBlocksRequestMessage,\n    resolve: (resp: RenderBlocksResponseMessage) => void,\n    reject: (e: unknown) => void\n}\n\nexport function useMakeCodeRenderer() {\n    const { target, rendererUrl } = useContext(MakeCodeSnippetContext);\n    const lang = \"\"\n    const iframeId = \"makecoderenderer\" + target;\n    const pendingRequests = useMemo<{\n        [index: string]: RenderBlocksRequentResponse\n    }>(() => ({}), [target, lang]);\n\n    const sendRequest = (req: RenderBlocksRequestMessage) => {\n        const iframe = typeof document !== \"undefined\" && document.getElementById(iframeId) as HTMLIFrameElement;\n        if (iframe?.dataset.ready)\n            iframe?.contentWindow.postMessage(req, rendererUrl);\n    }\n\n    const render = (source: MakeCodeSnippetSource): Promise<MakeCodeSnippetRendered> => {\n        const { code, ghost, meta } = source;\n        const { dependencies, snippet } = meta;\n\n        // spin up iframe on demans\n        if (typeof document !== \"undefined\" && !document.getElementById(iframeId)) {\n            console.log(`mkcd: loading iframe`)\n            const f = document.createElement(\"iframe\");\n            f.id = iframeId;\n            f.style.position = \"absolute\";\n            f.style.left = \"0\";\n            f.style.bottom = \"0\";\n            f.style.width = \"1px\";\n            f.style.height = \"1px\";\n            f.src = `${rendererUrl}?render=1${lang ? `&lang=${lang}` : ''}`;\n            document.body.appendChild(f);\n        }\n\n        const req: RenderBlocksRequestMessage = {\n            type: \"renderblocks\",\n            id: \"r\" + Math.random(),\n            code,\n            ghost,\n            options: {\n                dependencies,\n                snippetMode: snippet\n            }\n        }\n        return new Promise<RenderBlocksResponseMessage>((resolve, reject) => {\n            pendingRequests[req.id] = { req, resolve, reject }\n            sendRequest(req);\n        })\n    }\n\n    // listen for messages\n    const handleMessage = (ev: MessageEvent) => {\n        const msg = ev.data;\n        if (msg.source != \"makecode\") return;\n        switch (msg.type) {\n            case \"renderready\": {\n                console.log(`mkcd: renderer ready, ${Object.keys(pendingRequests).length} pending`)\n                const iframe = typeof document !== \"undefined\" && document.getElementById(iframeId)\n                if (iframe) {\n                    console.log(`flushing messages`)\n                    iframe.dataset.ready = \"1\"\n                    Object.keys(pendingRequests)\n                        .forEach(k => sendRequest(pendingRequests[k].req));\n                }\n                break;\n            }\n            case \"renderblocks\": {\n                const id = msg.id; // this is the id you sent\n                const r = pendingRequests[id];\n                if (!r) return;\n                delete pendingRequests[id];\n                r.resolve(msg as RenderBlocksResponseMessage);\n                break;\n            }\n        }\n    }\n\n    useWindowEvent(\"message\", handleMessage, false, [])\n\n    return {\n        render\n    }\n}\n","import { createStyles, makeStyles } from \"@material-ui/core\"\nimport React, { useContext, useEffect, useRef } from \"react\"\nimport {\n    PACKET_PROCESS,\n    PACKET_SEND,\n} from \"../../../jacdac-ts/src/jdom/constants\"\nimport { PacketMessage } from \"./iframebridgeclient\"\nimport Packet from \"../../../jacdac-ts/src/jdom/packet\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport PaperBox from \"../ui/PaperBox\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\"\nimport { MakeCodeSnippetSource } from \"./useMakeCodeRenderer\"\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        root: {\n            width: \"100%\",\n        },\n        root2: {\n            position: \"relative\",\n            paddingTop: \"86.75%\",\n        },\n        iframe: {\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            border: \"none\",\n            width: \"100%\",\n            height: \"100%\",\n        },\n    })\n)\n\nexport default function MakeCodeSimulator(props: {\n    snippet: MakeCodeSnippetSource\n}) {\n    const { simUrl } = useContext(MakeCodeSnippetContext)\n    const { snippet } = props\n    const { code, ghost, meta } = snippet\n    const { dependencies } = meta\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const frameRef = useRef<HTMLIFrameElement>()\n    const classes = useStyles()\n\n    const src = `${ghost || \"\"}\\n${code || \"\"}`\n    const url = `${simUrl}#single=1&fullscren=1&nofooter=1&deps=${encodeURIComponent(\n        dependencies.join(\",\")\n    )}&code=${encodeURIComponent(src)}`\n    const origin = new URL(url).origin\n\n    useEffect(() =>\n        bus.subscribe([PACKET_SEND, PACKET_PROCESS], (pkt: Packet) => {\n            this.packetSent++\n            const msg: PacketMessage = {\n                type: \"messagepacket\",\n                channel: \"jacdac\",\n                broadcast: true,\n                data: pkt.toBuffer(),\n                sender: pkt.sender,\n            }\n            frameRef.current?.contentWindow?.postMessage(msg, origin)\n        })\n    )\n\n    return (\n        <PaperBox>\n            <div className={classes.root}>\n                <div className={classes.root2}>\n                    <iframe\n                        ref={frameRef}\n                        className={classes.iframe}\n                        src={url}\n                        title=\"MakeCode rendering iframe to generate blocks images.\"\n                    />\n                </div>\n            </div>\n        </PaperBox>\n    )\n}\n","import React, { useState, useMemo, useContext } from \"react\"\nimport PaperBox from \"../ui/PaperBox\"\nimport { Tab, Tabs } from \"@material-ui/core\"\nimport CodeBlock from \"../CodeBlock\"\nimport TabPanel from \"../ui/TabPanel\"\nimport MakeCodeSnippetContext from \"./MakeCodeSnippetContext\"\nimport { parseMakeCodeSnippet } from \"./useMakeCodeRenderer\"\nimport MakeCodeSimulator from \"./MakeCodeSimulator\"\nimport { withPrefix } from \"gatsby\"\ninterface Rendered {\n    url: string\n    width: number\n    height: number\n}\n\nexport default function MakeCodeSnippet(props: { renderedSource: string }) {\n    const { renderedSource } = props\n    const { source, rendered } = JSON.parse(renderedSource) as {\n        source: string\n        rendered: Rendered\n    }\n    const { height, width, url } = rendered || {}\n    const tabs = [\"blocks\", \"typescript\", \"sim\"]\n    const { editor, setEditor } = useContext(MakeCodeSnippetContext)\n    const [tab, setTab] = useState(tabs.indexOf(editor) || 0)\n    const handleTabChange = (\n        event: React.ChangeEvent<unknown>,\n        newValue: number\n    ) => {\n        if (newValue < tabs.length - 1) setEditor(tabs[newValue])\n        setTab(newValue)\n    }\n    const snippet = useMemo(() => parseMakeCodeSnippet(source), [source])\n    const { code } = snippet\n\n    return (\n        <PaperBox>\n            <Tabs\n                value={tab}\n                onChange={handleTabChange}\n                aria-label=\"Select MakeCode editor\"\n            >\n                <Tab label={\"Blocks\"} />\n                <Tab label={\"JavaScript\"} />\n                <Tab label={\"Simulator\"} />\n            </Tabs>\n            <TabPanel value={tab} index={0}>\n                <img src={withPrefix(url)} alt={source} loading=\"lazy\" />\n            </TabPanel>\n            <TabPanel value={tab} index={1}>\n                <CodeBlock className=\"typescript\">{code}</CodeBlock>\n            </TabPanel>\n            <TabPanel value={tab} index={2}>\n                <MakeCodeSimulator snippet={snippet} />\n            </TabPanel>\n        </PaperBox>\n    )\n}\n","import React, { lazy, ReactNode, useContext } from \"react\"\nimport Highlight, {\n    defaultProps,\n    Language,\n    PrismTheme,\n} from \"prism-react-renderer\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LIGHT_THEME from \"prism-react-renderer/themes/github\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport DARK_THEME from \"prism-react-renderer/themes/vsDark\"\nimport DarkModeContext from \"./ui/DarkModeContext\"\nimport { IconButton, Link } from \"gatsby-theme-material-ui\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport GetAppIcon from \"@material-ui/icons/GetApp\"\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LaunchIcon from \"@material-ui/icons/Launch\"\nimport Tooltip from \"./ui/Tooltip\"\nimport MakeCodeSnippet from \"./makecode/MakeCodeSnippet\"\nimport Suspense from \"./ui/Suspense\"\n\nconst TraceSnippet = lazy(() => import(\"./trace/TraceSnippet\"))\nconst CodeSandboxButton = lazy(() => import(\"./ui/CodeSandboxButton\"))\n\nfunction HighlightedCode(props: {\n    children: string\n    codeSandbox?: { js: string; html: string }\n    className?: string\n    downloadName?: string\n    downloadText?: string\n    actions?: ReactNode\n    url?: string\n}) {\n    const {\n        children,\n        codeSandbox,\n        className,\n        downloadName,\n        downloadText,\n        actions,\n        url,\n    } = props\n    const { darkMode } = useContext(DarkModeContext)\n    const language = className?.replace(/language-/, \"\") || \"\"\n    const theme = (darkMode === \"dark\" ? DARK_THEME : LIGHT_THEME) as PrismTheme\n    const valueUri =\n        !!downloadText &&\n        `data:application/json;charset=UTF-8,${encodeURIComponent(\n            downloadText\n        )}`\n\n    return (\n        <Highlight\n            {...defaultProps}\n            code={children?.replace(/[\\s\\r\\n]*$/g, \"\") || \"\"}\n            language={language as Language}\n            theme={theme}\n        >\n            {({ className, style, tokens, getLineProps, getTokenProps }) => (\n                <pre className={className} style={{ ...style }}>\n                    {!!url && (\n                        <Link style={{ float: \"right\" }} href={url}>\n                            <Tooltip title={`Open ${url}`}>\n                                <IconButton>\n                                    <LaunchIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Link>\n                    )}\n                    {!!downloadText && (\n                        <Link\n                            style={{ float: \"right\" }}\n                            href={valueUri}\n                            download={downloadName || \"download\"}\n                        >\n                            <Tooltip title=\"Download\">\n                                <IconButton>\n                                    <GetAppIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Link>\n                    )}\n                    {codeSandbox && (\n                        <div style={{ float: \"right\" }}>\n                            <Suspense>\n                                <CodeSandboxButton source={codeSandbox} />\n                            </Suspense>\n                        </div>\n                    )}\n                    {actions && <div style={{ float: \"right\" }}>{actions}</div>}\n                    {tokens?.map((line, index) => {\n                        const lineProps = getLineProps({ line, key: index })\n                        return (\n                            <div key={index} {...lineProps}>\n                                {line.map((token, key) => (\n                                    <span\n                                        key={key}\n                                        {...getTokenProps({ token, key })}\n                                    />\n                                ))}\n                            </div>\n                        )\n                    })}\n                </pre>\n            )}\n        </Highlight>\n    )\n}\n\nexport default function CodeBlock(props: {\n    children: string\n    className?: string\n    downloadName?: string\n    downloadText?: string\n    actions?: ReactNode\n    url?: string\n}) {\n    const { children, className, ...rest } = props\n    const language = className?.replace(/language-/, \"\") || \"\"\n\n    switch (language) {\n        case \"trace\":\n            return (\n                <Suspense>\n                    <TraceSnippet source={children} />\n                </Suspense>\n            )\n        case \"blocks\":\n            return <MakeCodeSnippet renderedSource={children} />\n        case \"vanilla\": {\n            const [source, js, html] = children.split(/\\n-{5,}\\n/gi)\n            return (\n                <HighlightedCode\n                    {...rest}\n                    className={\"javascript\"}\n                    codeSandbox={{ js, html }}\n                >\n                    {source}\n                </HighlightedCode>\n            )\n        }\n        default:\n            return <HighlightedCode {...props} />\n    }\n}\n","import { Grid } from \"@material-ui/core\";\nimport React, { useContext } from \"react\";\nimport JDDevice from \"../../../jacdac-ts/src/jdom/device\";\nimport DashboardDevice from \"./DashboardDevice\";\nimport { GridBreakpoints } from \"../useGridBreakpoints\";\nimport { DashboardDeviceProps } from \"./Dashboard\";\nimport useChange from \"../../jacdac/useChange\";\nimport { dashboardServiceWeight } from \"./DashboardServiceWidget\";\nimport AppContext, { DrawerType } from \"../AppContext\";\n\nexport default function DashboardDeviceItem(props: {\n    device: JDDevice,\n    expanded?: boolean,\n    toggleExpanded?: () => void,\n    variant?: \"icon\" | \"\"\n} & DashboardDeviceProps) {\n    const { device, expanded, toggleExpanded, variant, ...other } = props;\n    const { drawerType } = useContext(AppContext)\n    const breakpoints: GridBreakpoints = useChange(device, () => {\n        const breakpointWeight = device.services()\n            .map(srv => {\n                return dashboardServiceWeight(srv)\n                    || (srv.readingRegister || srv.valueRegister || srv.intensityRegister ? 1 : 0)\n            })\n            .reduce((c: number, v) => c + v, 0);\n\n        if (breakpointWeight > 3 || drawerType !== DrawerType.None)\n            return { xs: 12, sm: 12, md: 12, lg: 6, xl: 6 };\n        else if (breakpointWeight == 3)\n            return { xs: 12, sm: 12, md: 4, lg: 4, xl: 4 };\n        else if (breakpointWeight == 2)\n            return { xs: 12, sm: 6, md: 4, lg: 3, xl: 4 };\n        else\n            return { xs: expanded ? 12 : 6, sm: 4, md: 3, lg: 2, xl: \"auto\" };\n    }, [expanded, drawerType]);\n\n    // based on size, expanded or reduce widget size\n    return <Grid item {...breakpoints}>\n        <DashboardDevice\n            device={device}\n            expanded={expanded}\n            toggleExpanded={toggleExpanded}\n            variant={variant}\n            {...other}\n        />\n    </Grid>\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport { isFragment } from 'react-is';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport deprecatedPropType from '../utils/deprecatedPropType';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    overflowY: 'auto',\n    listStyle: 'none',\n    padding: 0,\n    WebkitOverflowScrolling: 'touch' // Add iOS momentum scrolling.\n\n  }\n};\nvar ImageList = /*#__PURE__*/React.forwardRef(function ImageList(props, ref) {\n  var cellHeight = props.cellHeight,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$cols = props.cols,\n      cols = _props$cols === void 0 ? 2 : _props$cols,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'ul' : _props$component,\n      _props$gap = props.gap,\n      gapProp = _props$gap === void 0 ? 4 : _props$gap,\n      _props$rowHeight = props.rowHeight,\n      rowHeightProp = _props$rowHeight === void 0 ? 180 : _props$rowHeight,\n      spacing = props.spacing,\n      style = props.style,\n      other = _objectWithoutProperties(props, [\"cellHeight\", \"children\", \"classes\", \"className\", \"cols\", \"component\", \"gap\", \"rowHeight\", \"spacing\", \"style\"]);\n\n  var gap = spacing || gapProp;\n  var rowHeight = cellHeight || rowHeightProp;\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref,\n    style: _extends({\n      margin: -gap / 2\n    }, style)\n  }, other), React.Children.map(children, function (child) {\n    if (! /*#__PURE__*/React.isValidElement(child)) {\n      return null;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (isFragment(child)) {\n        console.error([\"Material-UI: The ImageList component doesn't accept a Fragment as a child.\", 'Consider providing an array instead.'].join('\\n'));\n      }\n    }\n\n    var childCols = child.props.cols || 1;\n    var childRows = child.props.rows || 1;\n    return /*#__PURE__*/React.cloneElement(child, {\n      style: _extends({\n        width: \"\".concat(100 / cols * childCols, \"%\"),\n        height: rowHeight === 'auto' ? 'auto' : rowHeight * childRows + gap,\n        padding: gap / 2\n      }, child.props.style)\n    });\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiImageList'\n})(ImageList);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport debounce from '../utils/debounce';\nimport withStyles from '../styles/withStyles';\nimport isMuiElement from '../utils/isMuiElement';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    boxSizing: 'border-box',\n    flexShrink: 0\n  },\n\n  /* Styles applied to the `div` element that wraps the children. */\n  item: {\n    position: 'relative',\n    display: 'block',\n    // In case it's not rendered with a div.\n    height: '100%',\n    overflow: 'hidden'\n  },\n\n  /* Styles applied to an `img` element child, if needed to ensure it covers the item. */\n  imgFullHeight: {\n    height: '100%',\n    transform: 'translateX(-50%)',\n    position: 'relative',\n    left: '50%'\n  },\n\n  /* Styles applied to an `img` element child, if needed to ensure it covers the item. */\n  imgFullWidth: {\n    width: '100%',\n    position: 'relative',\n    transform: 'translateY(-50%)',\n    top: '50%'\n  }\n};\n\nvar fit = function fit(imgEl, classes) {\n  if (!imgEl || !imgEl.complete) {\n    return;\n  }\n\n  if (imgEl.width / imgEl.height > imgEl.parentElement.offsetWidth / imgEl.parentElement.offsetHeight) {\n    var _imgEl$classList, _imgEl$classList2;\n\n    (_imgEl$classList = imgEl.classList).remove.apply(_imgEl$classList, _toConsumableArray(classes.imgFullWidth.split(' ')));\n\n    (_imgEl$classList2 = imgEl.classList).add.apply(_imgEl$classList2, _toConsumableArray(classes.imgFullHeight.split(' ')));\n  } else {\n    var _imgEl$classList3, _imgEl$classList4;\n\n    (_imgEl$classList3 = imgEl.classList).remove.apply(_imgEl$classList3, _toConsumableArray(classes.imgFullHeight.split(' ')));\n\n    (_imgEl$classList4 = imgEl.classList).add.apply(_imgEl$classList4, _toConsumableArray(classes.imgFullWidth.split(' ')));\n  }\n};\n\nfunction ensureImageCover(imgEl, classes) {\n  if (!imgEl) {\n    return;\n  }\n\n  if (imgEl.complete) {\n    fit(imgEl, classes);\n  } else {\n    imgEl.addEventListener('load', function () {\n      fit(imgEl, classes);\n    });\n  }\n}\n\nvar ImageListItem = /*#__PURE__*/React.forwardRef(function ImageListItem(props, ref) {\n  // cols rows default values are for docs only\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$cols = props.cols,\n      cols = _props$cols === void 0 ? 1 : _props$cols,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'li' : _props$component,\n      _props$rows = props.rows,\n      rows = _props$rows === void 0 ? 1 : _props$rows,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"cols\", \"component\", \"rows\"]);\n\n  var imgRef = React.useRef(null);\n  React.useEffect(function () {\n    ensureImageCover(imgRef.current, classes);\n  });\n  React.useEffect(function () {\n    var handleResize = debounce(function () {\n      fit(imgRef.current, classes);\n    });\n    window.addEventListener('resize', handleResize);\n    return function () {\n      handleResize.clear();\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [classes]);\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.item\n  }, React.Children.map(children, function (child) {\n    if (! /*#__PURE__*/React.isValidElement(child)) {\n      return null;\n    }\n\n    if (child.type === 'img' || isMuiElement(child, ['Image'])) {\n      return /*#__PURE__*/React.cloneElement(child, {\n        ref: imgRef\n      });\n    }\n\n    return child;\n  })));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiImageListItem'\n})(ImageListItem);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport deprecatedPropType from '../utils/deprecatedPropType';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      height: 48,\n      background: 'rgba(0, 0, 0, 0.5)',\n      display: 'flex',\n      alignItems: 'center',\n      fontFamily: theme.typography.fontFamily\n    },\n\n    /* Styles applied to the root element if `position=\"bottom\"`. */\n    positionBottom: {\n      bottom: 0\n    },\n\n    /* Styles applied to the root element if `position=\"top\"`. */\n    positionTop: {\n      top: 0\n    },\n\n    /* Styles applied to the root element if a `subtitle` is provided. */\n    rootSubtitle: {\n      height: 68\n    },\n\n    /* Styles applied to the title and subtitle container element. */\n    titleWrap: {\n      flexGrow: 1,\n      marginLeft: 16,\n      marginRight: 16,\n      color: theme.palette.common.white,\n      overflow: 'hidden'\n    },\n\n    /* Styles applied to the container element if `actionPosition=\"left\"`. */\n    titleWrapActionPosLeft: {\n      marginLeft: 0\n    },\n\n    /* Styles applied to the container element if `actionPosition=\"right\"`. */\n    titleWrapActionPosRight: {\n      marginRight: 0\n    },\n\n    /* Styles applied to the title container element. */\n    title: {\n      fontSize: theme.typography.pxToRem(16),\n      lineHeight: '24px',\n      textOverflow: 'ellipsis',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap'\n    },\n\n    /* Styles applied to the subtitle container element. */\n    subtitle: {\n      fontSize: theme.typography.pxToRem(12),\n      lineHeight: 1,\n      textOverflow: 'ellipsis',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap'\n    },\n\n    /* Styles applied to the actionIcon if supplied. */\n    actionIcon: {},\n\n    /* Styles applied to the actionIcon if `actionPosition=\"left\"`. */\n    actionIconActionPosLeft: {\n      order: -1\n    }\n  };\n};\nvar ImageListItemBar = /*#__PURE__*/React.forwardRef(function ImageListItemBar(props, ref) {\n  var actionIcon = props.actionIcon,\n      _props$actionPosition = props.actionPosition,\n      actionPosition = _props$actionPosition === void 0 ? 'right' : _props$actionPosition,\n      classes = props.classes,\n      className = props.className,\n      subtitle = props.subtitle,\n      title = props.title,\n      _props$position = props.position,\n      positionProp = _props$position === void 0 ? 'bottom' : _props$position,\n      titlePosition = props.titlePosition,\n      other = _objectWithoutProperties(props, [\"actionIcon\", \"actionPosition\", \"classes\", \"className\", \"subtitle\", \"title\", \"position\", \"titlePosition\"]);\n\n  var position = titlePosition || positionProp;\n  var actionPos = actionIcon && actionPosition;\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, subtitle && classes.rootSubtitle, {\n      'bottom': classes.positionBottom,\n      'top': classes.positionTop\n    }[position]),\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.titleWrap, {\n      'left': classes.titleWrapActionPosLeft,\n      'right': classes.titleWrapActionPosRight\n    }[actionPos])\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.title\n  }, title), subtitle ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.subtitle\n  }, subtitle) : null), actionIcon ? /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.actionIcon, actionPos === 'left' && classes.actionIconActionPosLeft)\n  }, actionIcon) : null);\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiImageListItemBar'\n})(ImageListItemBar);","import React, { useMemo } from \"react\"\nimport {\n    createStyles,\n    ImageList,\n    ImageListItem,\n    ImageListItemBar,\n    makeStyles,\n    Theme,\n    Typography,\n} from \"@material-ui/core\"\nimport {\n    deviceSpecifications,\n    identifierToUrlPath,\n} from \"../../../jacdac-ts/src/jdom/spec\"\n// tslint:disable-next-line: match-default-export-name no-submodule-imports\nimport InfoIcon from \"@material-ui/icons/Info\"\nimport Markdown from \"../ui/Markdown\"\nimport { IconButton } from \"gatsby-theme-material-ui\"\nimport { arrayShuffle } from \"../../../jacdac-ts/src/jdom/utils\"\nimport useDeviceImage from \"../devices/useDeviceImage\"\nimport useMediaQueries from \"../hooks/useMediaQueries\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            justifyContent: \"space-around\",\n            overflow: \"hidden\",\n            backgroundColor: theme.palette.background.paper,\n        },\n        ellipsis: {\n            textOverflow: \"ellipsis\",\n        },\n        icon: {\n            color: \"rgba(255, 255, 255, 0.54)\",\n        },\n    })\n)\n\nexport default function DeviceSpecificationList(props: {\n    count?: number\n    shuffle?: boolean\n    company?: string\n    requiredServiceClasses?: number[]\n}) {\n    const { count, shuffle, requiredServiceClasses, company } = props\n    const classes = useStyles()\n    const { mobile, medium } = useMediaQueries()\n    const cols = mobile ? 1 : medium ? 3 : 4\n    const specs = useMemo(() => {\n        let r = deviceSpecifications().filter(\n            spec => spec.status !== \"deprecated\"\n        )\n        if (company) r = r.filter(spec => spec.company === company)\n        if (requiredServiceClasses)\n            r = r.filter(\n                spec =>\n                    spec.services.length &&\n                    requiredServiceClasses.every(\n                        srv => spec.services.indexOf(srv) > -1\n                    )\n            )\n        if (shuffle) arrayShuffle(r)\n        if (count !== undefined) r = r.slice(0, count)\n        return r\n    }, [requiredServiceClasses, shuffle, count])\n\n    if (!specs.length)\n        return (\n            <Typography variant=\"body1\">No device registered yet.</Typography>\n        )\n\n    return (\n        <ImageList className={classes.root} cols={cols}>\n            {specs.map(spec => {\n                const imageUrl = useDeviceImage(spec)\n                return (\n                    <ImageListItem key={spec.id}>\n                        <img src={imageUrl} alt={spec.name} loading=\"lazy\" />\n                        <ImageListItemBar\n                            title={spec.name}\n                            subtitle={\n                                <Markdown\n                                    className={classes.ellipsis}\n                                    source={spec.description.split(\".\", 1)[0]}\n                                />\n                            }\n                            actionIcon={\n                                <>\n                                    <IconButton\n                                        to={`/devices/${identifierToUrlPath(\n                                            spec.id\n                                        )}`}\n                                        aria-label={`info about ${spec.name}`}\n                                        className={classes.icon}\n                                    >\n                                        <InfoIcon />\n                                    </IconButton>\n                                </>\n                            }\n                        />\n                    </ImageListItem>\n                )\n            })}\n        </ImageList>\n    )\n}\n","import React, { Fragment } from \"react\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../jacdac-ts/src/jdom/spec\"\nimport { Chip } from \"@material-ui/core\"\n\nexport default function EnumSpecification(props: { serviceClass: number }) {\n    const { serviceClass } = props\n    const spec = serviceSpecificationFromClassIdentifier(serviceClass)\n    const enums = Object.values(spec?.enums || {}).filter(en => !en.derived)\n    if (!enums.length)\n        return <></>\n\n    return <Fragment>\n        <h2>Enums</h2>\n        {enums.map(e => <Fragment key={e.name}>\n            <h3>{e.name} {e.isFlags && <Chip label=\"flags\" size=\"small\" />}</h3>\n            <ul>\n                {Object.keys(e.members).map(en => <li key={en}>{en}: <code>0x{e.members[en].toString(16)}</code></li>)}\n            </ul>\n        </Fragment>)}\n    </Fragment>\n}\n","import React, { Fragment, useContext } from \"react\"\nimport { Link } from \"gatsby-theme-material-ui\"\nimport {\n    serviceSpecificationFromName,\n    isRegister,\n    isEvent,\n    isCommand,\n    isPipeReport,\n    isReportOf,\n    isPipeReportOf,\n} from \"../../../jacdac-ts/src/jdom/spec\"\nimport PacketSpecification from \"./PacketSpecification\"\nimport IDChip from \"../IDChip\"\nimport Markdown from \"../ui/Markdown\"\nimport EnumSpecification from \"../EnumSpecification\"\nimport { Box, Grid } from \"@material-ui/core\"\nimport ServiceSpecificationStatusAlert from \"./ServiceSpecificationStatusAlert\"\nimport useServiceProviderFromServiceClass from \"../hooks/useServiceProviderFromServiceClass\"\nimport JacdacContext, { JacdacContextProps } from \"../../jacdac/Context\"\nimport useChange from \"../../jacdac/useChange\"\nimport DashbardDeviceItem from \"../dashboard/DashboardDeviceItem\"\n\nfunction DashboardServiceDevices(props: { serviceClass: number }) {\n    const { serviceClass } = props\n    const { bus } = useContext<JacdacContextProps>(JacdacContext)\n    const devices = useChange(bus, b => b.devices({ serviceClass }))\n    return (\n        <Grid container spacing={1}>\n            {devices.map(device => (\n                <DashbardDeviceItem\n                    key={device.id}\n                    device={device}\n                    showAvatar={true}\n                    showHeader={true}\n                />\n            ))}\n        </Grid>\n    )\n}\n\nexport default function ServiceSpecification(props: {\n    service: jdspec.ServiceSpec\n    showDerived?: boolean\n}) {\n    const { service: node, showDerived } = props\n    const { shortId, name, classIdentifier } = node\n    const packets = node.packets.filter(pkt => showDerived || !pkt.derived)\n    const registers = packets.filter(isRegister)\n    const events = packets.filter(isEvent)\n    const commands = packets.filter(isCommand)\n    const reports = packets.filter(r => r.secondary)\n    const pipeReports = packets.filter(isPipeReport)\n    const others = packets.filter(\n        r =>\n            registers.indexOf(r) < 0 &&\n            events.indexOf(r) < 0 &&\n            commands.indexOf(r) < 0 &&\n            reports.indexOf(r) < 0 &&\n            pipeReports.indexOf(r) < 0\n    )\n    // spin up provider on demand\n    useServiceProviderFromServiceClass(node.classIdentifier)\n\n    const reportOf = (pkt: jdspec.PacketInfo) =>\n        reports.find(rep => isReportOf(pkt, rep))\n    const pipeReportOf = (pkt: jdspec.PacketInfo) =>\n        pipeReports.find(rep => isPipeReportOf(pkt, rep))\n\n    return (\n        <>\n            <h1 key=\"title\">\n                {name}\n                <Box ml={1} component=\"span\">\n                    <IDChip\n                        id={node.classIdentifier}\n                        filter={`srv:${shortId}`}\n                    />\n                </Box>\n            </h1>\n            <ServiceSpecificationStatusAlert specification={node} />\n            <Markdown key=\"notesshort\" source={node.notes.short} />\n            {!!node.extends?.length && (\n                <p key=\"extends\">\n                    <span>Extends </span>\n                    {node.extends.map((extend, i) => (\n                        <Fragment key={`extend${extend}`}>\n                            {i > 0 && <span>, </span>}\n                            <Link\n                                key={`extend${extend}`}\n                                to={`/services/${extend}/`}\n                            >\n                                {serviceSpecificationFromName(extend).name}\n                            </Link>\n                        </Fragment>\n                    ))}\n                    .\n                </p>\n            )}\n            <Markdown key=\"noteslong\" source={node.notes.long || \"\"} />\n            <DashboardServiceDevices serviceClass={classIdentifier} />\n            <EnumSpecification key=\"enums\" serviceClass={classIdentifier} />\n            {[\n                {\n                    name: \"Registers\",\n                    packets: registers,\n                    note: node.notes[\"registers\"],\n                },\n                { name: \"Events\", packets: events, note: node.notes[\"events\"] },\n                {\n                    name: \"Commands\",\n                    packets: commands,\n                    note: node.notes[\"commands\"],\n                },\n                { name: \"Others\", packets: others, note: node.notes[\"others\"] },\n            ]\n                .filter(group => group.packets.length)\n                .map(group => (\n                    <Fragment key={`group${group.name}`}>\n                        <h2>{group.name}</h2>\n                        {group.note && (\n                            <Markdown\n                                key={`node${group.name}`}\n                                source={group.note}\n                            />\n                        )}\n                        {group.packets\n                            .sort(\n                                (l, r) =>\n                                    (l.derived ? 1 : -1) - (r.derived ? 1 : -1)\n                            )\n                            .map(pkt => (\n                                <PacketSpecification\n                                    key={`pkt${pkt.identifier}`}\n                                    serviceClass={node.classIdentifier}\n                                    packetInfo={pkt}\n                                    reportInfo={reportOf(pkt)}\n                                    pipeReportInfo={pipeReportOf(pkt)}\n                                    showDevices={true}\n                                />\n                            ))}\n                    </Fragment>\n                ))}\n        </>\n    )\n}\n","import { Box, BoxProps, Paper, PaperProps, useTheme } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function PaperBox(props: { padding?: number; elevation?: number; bgcolor?: string } & BoxProps) {\n    const { children, padding, elevation, bgcolor, ...others } = props;\n    const theme = useTheme();\n\n    return <Box {...others} bgcolor={bgcolor} mb={theme.spacing(0.25)}>\n        <Paper square elevation={elevation}>\n            {padding !== 0 && <Box p={theme.spacing(padding || 0.25)}>\n                {children}\n            </Box>}\n            {padding === 0 && children}\n        </Paper>\n    </Box>\n}","import { Typography } from \"@material-ui/core\"\nimport React, { ReactNode } from \"react\"\nimport CodeBlock from \"../CodeBlock\"\n\nexport default function Snippet(props: {\n    value: string | (() => string)\n    mode?: string\n    download?: string\n    actions?: ReactNode\n    url?: string\n    caption?: string | JSX.Element | JSX.Element[]\n}) {\n    const { value, mode, download, url, caption, actions } = props\n    const v: string = typeof value === \"function\" ? value() : value\n    const className = mode && `language-${mode === \"sts\" ? \"ts\" : mode}`\n    return (\n        <>\n            <CodeBlock\n                className={className}\n                downloadName={download}\n                downloadText={download && v}\n                actions={actions}\n                url={url}\n            >\n                {v}\n            </CodeBlock>\n            {caption && <Typography variant=\"caption\">{caption}</Typography>}\n        </>\n    )\n}\n","import { SRV_CONTROL } from \"../jdom/constants\"\nimport {\n    isHighLevelRegister,\n    isInfrastructure,\n    serviceSpecificationFromClassIdentifier,\n    serviceSpecifications,\n} from \"../jdom/spec\"\n\nexport enum ServiceTwinRegisterFlag {\n    Const = 0x0001,\n    Volatile = 0x0002,\n}\n\nexport interface ServiceTwinRegisterSpec {\n    code: number // code <= 255 => ro, otherwise rw\n    name: string\n    flags: ServiceTwinRegisterFlag\n    packf: string\n    fields?: string[]\n}\n\nexport interface ServiceTwinSpec {\n    serviceClass: number\n    name: string\n    registers: ServiceTwinRegisterSpec[]\n}\n\nexport function serviceSpecificationToServiceTwinSpecification(\n    specification: jdspec.ServiceSpec\n): ServiceTwinSpec {\n    if (!specification) return undefined\n\n    const {\n        classIdentifier: serviceClass,\n        camelName: name,\n        packets,\n    } = specification\n\n    const registers = packets\n        .filter(isHighLevelRegister) // TODO formalize\n        .map<ServiceTwinRegisterSpec>(reg => {\n            let flags = 0\n            if (reg.kind == \"const\") flags |= ServiceTwinRegisterFlag.Const\n            if (reg.volatile) flags |= ServiceTwinRegisterFlag.Volatile\n            const r: ServiceTwinRegisterSpec = {\n                code: reg.identifier,\n                name: reg.name,\n                flags,\n                packf: reg.packFormat,\n                fields:\n                    reg.fields.length > 1\n                        ? reg.fields.map(f => f.name)\n                        : undefined,\n            }\n            return r\n        })\n    const dspec: ServiceTwinSpec = {\n        serviceClass,\n        name,\n        registers,\n    }\n    return dspec\n}\n\nexport function serviceSpecificationsWithServiceTwinSpecification() {\n    const specs = [\n        serviceSpecificationFromClassIdentifier(SRV_CONTROL),\n        ...serviceSpecifications().filter(srv => !isInfrastructure(srv)),\n    ]\n    return specs\n}\n","import React, { useState } from \"react\"\nimport { Tabs, Tab } from \"@material-ui/core\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../../jacdac-ts/src/jdom/spec\"\nimport { Paper } from \"@material-ui/core\"\nimport TabPanel from \"../ui/TabPanel\"\nimport Snippet from \"../ui/Snippet\"\nimport { converters } from \"../../../jacdac-ts/jacdac-spec/spectool/jdspec\"\nimport ServiceSpecification from \"./ServiceSpecification\"\nimport { serviceSpecificationToServiceTwinSpecification } from \"../../../jacdac-ts/src/azure-iot/devicetwin\"\nimport { withPrefix } from \"gatsby\"\n\nexport default function ServiceSpecificationSource(props: {\n    classIdentifier?: number\n    serviceSpecification?: jdspec.ServiceSpec\n    showSpecification?: boolean\n}) {\n    const { classIdentifier, serviceSpecification, showSpecification } = props\n    const [tab, setTab] = useState(0)\n    const spec =\n        serviceSpecification ||\n        serviceSpecificationFromClassIdentifier(classIdentifier)\n    const convs = converters()\n    const showDeviceTwin = spec && spec?.camelName !== \"sytem\"\n\n    const handleTabChange = (\n        event: React.ChangeEvent<unknown>,\n        newValue: number\n    ) => {\n        setTab(newValue)\n    }\n\n    let index = 0\n    return (\n        <Paper square>\n            <Tabs\n                value={tab}\n                onChange={handleTabChange}\n                aria-label=\"View specification formats\"\n            >\n                {[\n                    showSpecification && \"Specification\",\n                    \"MakeCode\",\n                    \"TypeScript\",\n                    \"C\",\n                    \"JSON\",\n                    showDeviceTwin && \"Twin\",\n                ]\n                    .filter(n => !!n)\n                    .map(n => (\n                        <Tab key={n} label={n} />\n                    ))}\n            </Tabs>\n            {showSpecification && (\n                <TabPanel key=\"spec\" value={tab} index={index++}>\n                    <ServiceSpecification service={spec} />\n                </TabPanel>\n            )}\n            {[\"sts\", \"ts\", \"c\", \"json\"].map(lang => (\n                <TabPanel key={`conv${lang}`} value={tab} index={index++}>\n                    <Snippet value={() => convs[lang](spec)} mode={lang} />\n                </TabPanel>\n            ))}\n            {showDeviceTwin && (\n                <TabPanel key=\"devicetwin\" value={tab} index={index++}>\n                    <Snippet\n                        mode=\"json\"\n                        url={withPrefix(\n                            `/services/twin/x${spec.classIdentifier.toString(\n                                16\n                            )}.json`\n                        )}\n                        value={JSON.stringify(\n                            serviceSpecificationToServiceTwinSpecification(\n                                spec\n                            ),\n                            null,\n                            2\n                        )}\n                    />\n                </TabPanel>\n            )}\n        </Paper>\n    )\n}\n","import React from \"react\"\nimport Markdown from \"./ui/Markdown\"\nimport ServiceSpecificationStatusAlert from \"./specification/ServiceSpecificationStatusAlert\"\nimport { Button, Link } from \"gatsby-theme-material-ui\"\nimport DeviceSpecificationList from \"./specification/DeviceSpecificationList\"\nimport { serviceSpecificationFromClassIdentifier } from \"../../jacdac-ts/src/jdom/spec\"\nimport { Grid } from \"@material-ui/core\"\nimport ServiceSpecificationSource from \"./specification/ServiceSpecificationSource\"\n\nexport default function ServiceMarkdown(props: {\n    classIdentifier: number\n    source: string\n}) {\n    const { classIdentifier, source } = props\n    const service = serviceSpecificationFromClassIdentifier(classIdentifier)\n    const { shortId } = service\n\n    return (\n        <>\n            <ServiceSpecificationStatusAlert specification={service} />\n            <Markdown source={source} />\n\n            <Grid container spacing={1}>\n                <Grid item>\n                    <Button\n                        variant=\"contained\"\n                        to={`/services/${shortId}/playground/`}\n                    >\n                        Playground\n                    </Button>\n                </Grid>\n            </Grid>\n\n            <h2>Registered Devices</h2>\n            <DeviceSpecificationList\n                requiredServiceClasses={[classIdentifier]}\n            />\n\n            <h2>Sources</h2>\n            <ServiceSpecificationSource serviceSpecification={service} />\n\n            <h2> See Also</h2>\n            <ul>\n                <li>\n                    <a\n                        href={`https://github.com/microsoft/jacdac/edit/main/services/${shortId}.md`}\n                    >\n                        Edit specification source\n                    </a>\n                    .\n                </li>\n                <li>\n                    Read{\" \"}\n                    <Link to=\"/reference/service-specification/\">\n                        Service Specification Language\n                    </Link>{\" \"}\n                    reference\n                </li>\n                <li>\n                    Create a new service specification using the{\" \"}\n                    <Link to=\"/tools/service-editor/\">Service Editor</Link>\n                </li>\n                <li>\n                    Using services in JavaScript with the{\" \"}\n                    <Link to={`/clients/javascript/jdom/`}>\n                        Jacdac Object Model (JDOM)\n                    </Link>\n                </li>\n            </ul>\n        </>\n    )\n}\n","import React from \"react\"\nimport ServiceMarkdown from \"../components/ServiceMarkdown\"\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport default function Page(props: { pageContext: any }) {\n    return <ServiceMarkdown {...props.pageContext} />\n}\n"],"names":["useEffect","useWindowEvent","type","listener","passive","deps","window","undefined","addEventListener","removeEventListener","concat","useMemo","useContext","unique","makeCodeServices","MakeCodeSnippetContext","parseMakeCodeSnippet","source","ghost","code","meta","dependencies","test","front","parts","replace","split","length","m","name","value","push","snippet","mkcds","filter","info","src","indexOf","client","qName","default","map","repo","forEach","dep","useMakeCodeRenderer","target","rendererUrl","lang","iframeId","pendingRequests","sendRequest","req","iframe","document","getElementById","dataset","ready","contentWindow","postMessage","render","console","log","f","createElement","id","style","position","left","bottom","width","height","body","appendChild","Math","random","options","snippetMode","Promise","resolve","reject","handleMessage","ev","msg","data","Object","keys","k","r","createStyles","makeStyles","React","useRef","PACKET_PROCESS","PACKET_SEND","JacdacContext","PaperBox","useStyles","root","root2","paddingTop","top","border","MakeCodeSimulator","props","simUrl","bus","frameRef","classes","url","encodeURIComponent","join","origin","URL","subscribe","pkt","packetSent","channel","broadcast","toBuffer","sender","current","useState","Tab","Tabs","CodeBlock","TabPanel","withPrefix","MakeCodeSnippet","renderedSource","rendered","JSON","parse","tabs","editor","setEditor","tab","setTab","handleTabChange","event","newValue","lazy","Highlight","defaultProps","LIGHT_THEME","DARK_THEME","DarkModeContext","IconButton","Link","GetAppIcon","LaunchIcon","Tooltip","Suspense","TraceSnippet","CodeSandboxButton","HighlightedCode","children","codeSandbox","className","downloadName","downloadText","actions","darkMode","language","theme","valueUri","tokens","getLineProps","getTokenProps","float","line","index","lineProps","key","token","rest","js","html","Grid","DashboardDevice","useChange","dashboardServiceWeight","AppContext","DrawerType","DashboardDeviceItem","device","expanded","toggleExpanded","variant","other","drawerType","breakpoints","breakpointWeight","services","srv","readingRegister","valueRegister","intensityRegister","reduce","c","v","None","xs","sm","md","lg","xl","ImageList","ImageListItem","ImageListItemBar","Typography","deviceSpecifications","identifierToUrlPath","InfoIcon","Markdown","arrayShuffle","useDeviceImage","useMediaQueries","display","flexWrap","justifyContent","overflow","backgroundColor","palette","background","paper","ellipsis","textOverflow","icon","color","DeviceSpecificationList","count","shuffle","requiredServiceClasses","company","mobile","medium","cols","specs","spec","status","every","slice","imageUrl","description","Fragment","serviceSpecificationFromClassIdentifier","Chip","EnumSpecification","serviceClass","enums","values","en","derived","e","isFlags","members","toString","serviceSpecificationFromName","isRegister","isEvent","isCommand","isPipeReport","isReportOf","isPipeReportOf","PacketSpecification","IDChip","Box","ServiceSpecificationStatusAlert","useServiceProviderFromServiceClass","DashbardDeviceItem","DashboardServiceDevices","devices","b","ServiceSpecification","service","node","showDerived","shortId","classIdentifier","packets","registers","events","commands","reports","secondary","pipeReports","others","reportOf","find","rep","pipeReportOf","notes","short","extends","extend","i","long","note","group","sort","l","identifier","Paper","useTheme","padding","elevation","bgcolor","spacing","Snippet","mode","download","caption","SRV_CONTROL","isHighLevelRegister","isInfrastructure","serviceSpecifications","ServiceTwinRegisterFlag","serviceSpecificationToServiceTwinSpecification","specification","camelName","reg","flags","kind","Const","volatile","Volatile","packf","packFormat","fields","dspec","serviceSpecificationsWithServiceTwinSpecification","converters","ServiceSpecificationSource","serviceSpecification","showSpecification","convs","showDeviceTwin","n","stringify","Button","ServiceMarkdown","Page","pageContext"],"sourceRoot":""}